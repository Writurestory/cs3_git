<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Chapter 8</title>
<link rel="stylesheet" type="text/css" href="docsafari.css">
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body><table width="100%" border="1" bgcolor="#EBEBFF"><tr><td width="5%" align="left" valign="middle"><a href="_chapter 7.htm"><img src="Larrow.gif" width="17" height="19" border="0"></a></td><td align="center" valign="middle"><a class="docLink" href="Front matter.htm">CONTENTS</a></td><td width="5%" align="right" valign="middle"><a href="_chapter 9.htm"><img src="Rarrow.gif" width="17" height="19" border="0"></a></td></tr></table>

<h2 class="docChapterTitle">Chapter 8. The Interactive Bourne Shell</h2><ul><li>&nbsp;<a class="docLink" href="#ch08lev1sec1">8.1 Startup</a></li>
<li>&nbsp;<a class="docLink" href="#ch08lev1sec2">8.2 Programming with the Bourne Shell</a></li>
<li>&nbsp;<a class="docLink" href="#ch08lev1sec3">BOURNE SHELL LAB EXERCISES</a></li>
</ul>

<p class="docText">
<img alt="graphics/ch08.gif" src="ch08.gif" border="0" width="500" height="1152"></p>
<h3 class="docSection1Title" id="ch08lev1sec1">8.1 Startup</h3>
<p class="docText">If the Bourne shell is your login shell, it follows a chain 
of processes before you see a shell prompt.</p>
<center>
<h5 id="ch08fig01" class="docFigureTitle">Figure 8.1. Starting the Bourne shell.</h5>
<p class="docText">
<img alt="graphics/08fig01.gif" src="08fig01.gif" border="0" width="375" height="452"></p>
</center>
<p class="docText">The first process to run is called <span class="docEmphasis">
init,</span> PID 1. It gets instructions from a file called
<span class="docEmphasis">inittab</span> (System V), or it spawns a
<span class="docEmphasis">getty</span> process (BSD). These processes open up 
the terminal ports, providing a place where standard input comes from and a 
place where standard output and error go, and they put a login prompt on your 
screen. The <span class="docEmphasis">/bin/login</span> program is then 
executed. The <span class="docEmphasis">login</span> program prompts for a 
password, encrypts and verifies the password, sets up an initial environment, 
and starts up the login shell, <span class="docEmphasis">/bin/sh,</span> the 
last entry in the <span class="docEmphasis">passwd</span> file. The
<span class="docEmphasis">sh</span> process looks for the system file,
<span class="docEmphasis">/etc/profile,</span> and executes its commands. It 
then looks in the user's home directory for an initialization file called
<span class="docEmphasis">.profile.</span> After executing commands from
<span class="docEmphasis">.profile,</span> the default dollar sign ($) prompt 
appears on your screen and the Bourne shell awaits commands.</p>
<h4 class="docSection2Title" id="ch08lev2sec1">8.1.1 The Environment</h4>
<p class="docText">The environment of a process consists of variables, open 
files, the current working directory, functions, resource limits, signals, and 
so forth. It defines those features that are inherited from one shell to the 
next and the configuration for the working environment. The configuration for 
the user's shell is defined in the shell initialization files.</p>
<p class="docText"><b>The Initialization Files.</b> After the Bourne shell 
program starts up, it first checks for the system file <span class="docEmphasis">
/etc/profile.</span> After executing the commands in that file, the 
initialization file, <span class="docEmphasis">.profile,</span> in the user's 
home directory, is executed. Skeleton files for initial setup can be found in
<span class="docEmphasis">/etc/skel</span> (SVR4).</p>
<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
/etc/profile</span> File.</span> The <span class="docEmphasis">/etc/profile</span> 
file is a systemwide initialization file set up by the system administrator to 
perform tasks when the user logs on. It is executed when the Bourne shell starts 
up. It is available to all Bourne and Korn shell users on the system and 
normally performs such tasks as checking the mail spooler for new mail and 
displaying the message of the day from the <span class="docEmphasis">/etc/motd</span> 
file. (The following examples will make more sense after you have completed this 
chapter.)</p>
<h5 id="ch08list01" class="docExampleTitle">Example 8.1 </h5>
<pre>(Sample <span class="docEmphasis">/etc/profile</span>)
# <span class="docEmphasis">The profile that all logins get before using their own .profile</span>
1   trap &quot; &quot; 2 3
2   export LOGNAME PATH
3   if [ &quot;$TERM&quot; = &quot; &quot; ]
    then
        if /bin/i386
        then
             TERM=AT386   <span class="docEmphasis"># Sets the terminal</span>
        else
             TERM=sun
        fi
        export TERM
    fi
    # <span class="docEmphasis">Login and -su shells get /etc/profile services.</span>
    # <span class="docEmphasis">-rsh is given its environment in its own .profile.</span>
4      case &quot;$0&quot; in
       -sh | -ksh | -jsh )
5          if [ ! -f .hushlogin ]
           then
              /usr/sbin/quota
              # <span class="docEmphasis">Allow the user to break the Message-Of-The-</span>
              # <span class="docEmphasis">Day only.</span>
6             trap &quot;trap ' ' 2&quot; 2
7             /bin/cat -s /etc/motd	
              <span class="docEmphasis"># Message of the day displayed</span>
              trap &quot; &quot; 2
8             /bin/mail -E      <span class="docEmphasis"># Checks for new mail</span>
9             case $? in
              0)
                   echo &quot;You have new mail. &quot;
              ;  ;
              2)
                   echo &quot;You have mail. &quot;
                   ;;
              esac
           fi
       esac
10     umask 022
11     trap 2 3
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">trap</span> command 
      controls signals coming into this program while it is running. If signals
      <span class="docEmphasis">2</span> (Control-C) or
      <span class="docEmphasis">3</span> (Control-\) are sent while the program 
      is in execution, those signals will be ignored.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variables <span class="docEmphasis">LOGNAME</span> 
      and <span class="docEmphasis">PATH</span> are exported so that their 
      values will be known in subshells started from this process.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The command <span class="docEmphasis">/bin/i386</span> 
      is executed. If the exit status of the command is zero, the terminal 
      variable, <span class="docEmphasis">TERM,</span> is assigned the value
      <span class="docEmphasis">AT386;</span> if not, the
      <span class="docEmphasis">TERM</span> variable is assigned
      <span class="docEmphasis">sun.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the value of <span class="docEmphasis">$0,</span> 
      the name of the program running the <span class="docEmphasis">/etc/profile</span> 
      file, is either a login or Bourne, Korn, or job shell, the following 
      commands will be executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">.hushlogin</span> file 
      does not exist, <span class="docEmphasis">quota</span> will be run to 
      display the disk usage warnings if usage is over the quota.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">trap</span> is reset so 
      that the user can terminate the message of the day with Control-C.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After the message of the day has been displayed, the
      <span class="docEmphasis">trap</span> is reset to ignore Control-C.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">mail</span> program 
      checks for new incoming mail.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the exit status (<span class="docEmphasis">$?</span>) 
      of the <span class="docEmphasis">mail</span> program is
      <span class="docEmphasis">0</span> or <span class="docEmphasis">2,</span> 
      the message &quot;<span class="docEmphasis">You have new mail.</span>&quot; or &quot;<span class="docEmphasis">You 
      have mail.</span>&quot;, respectively, is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">umask</span> command is 
      set to determine the initial permissions of files and directories when 
      they are created.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">trap</span> command sets 
      signals <span class="docEmphasis">2</span> and <span class="docEmphasis">3</span> 
      back to their defaults; i.e., to kill the program if either Control-C or 
      Control-\ arrive.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
.profile</span> File.</span> The <span class="docEmphasis">.profile</span> file 
is a user-defined initialization file executed once at login and found in your 
home directory. It gives you the ability to customize and modify the shell 
environment. Environment and terminal settings are normally put here, and if a 
window application or database application is to be initiated, it is started 
here. The settings in this file will be discussed in detail as the chapter 
progresses, but a brief synopsis of each line in the file is explained here.</p>
<h5 id="ch08list02" class="docExampleTitle">Example 8.2 </h5>
<pre>(Sample .<span class="docEmphasis">profile</span>)

1   TERM=vt102
2   HOSTNAME='uname -n'
3   EDITOR=/usr/ucb/vi
4   PATH=/bin:/usr/ucb:/usr/bin:/usr/local:/etc:/bin:/usr/bin:
5   PS1=&quot;$HOSTNAME $ &gt; &quot;
6   export TERM HOSTNAME EDITOR PATH PS1
7   stty erase ^h
8   go () { cd $1; PS1='pwd'; PS1='basename $PS1'; }
9   trap '$HOME/.logout' EXIT
10  clear
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">TERM</span> variable is 
      assigned the value of the terminal type, <span class="docEmphasis">vt102.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Because the <span class="docEmphasis">uname –n</span> 
      command is enclosed in backquotes, the shell will perform command 
      substitution, i.e., the output of the command (the name of the host 
      machine) will be assigned to the variable <span class="docEmphasis">
      HOSTNAME.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">EDITOR</span> variable is 
      assigned <span class="docEmphasis">/usr/ucb/vi.</span> Programs such as
      <span class="docEmphasis">mail</span> will now have this variable 
      available when defining an editor.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">PATH</span> variable is 
      assigned the directory entries that the shell searches in order to find a 
      UNIX program. If, for example, you type <span class="docEmphasis">ls,</span> 
      the shell will search the <span class="docEmphasis">PATH</span> until it 
      finds that program in one of the listed directories. If it never finds the 
      program, the shell will tell you so.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The primary prompt is assigned the value of
      <span class="docEmphasis">HOSTNAME,</span> the machine name, and the
      <span class="docEmphasis">$</span> and <span class="docEmphasis">&gt;</span> 
      symbols.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All of the variables listed are exported. They will be 
      known by child processes started from this shell.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">stty</span> command sets 
      terminal options. The erase key is set to <span class="docEmphasis">^h,</span> 
      so that when you press the Backspace key, the letter typed preceding the 
      cursor is erased.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A function called <span class="docEmphasis">go</span> 
      is defined. The purpose of this function is to take one argument, a 
      directory name, <span class="docEmphasis">cd</span> to that directory, and 
      set the primary prompt to the present working directory. The
      <span class="docEmphasis">basename</span> command removes all but the last 
      entry of the path. The prompt will show you the current directory.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">trap</span> command is a 
      signal handling command. When you exit the shell, that is, log out, the
      <span class="docEmphasis">.logout</span> file will be executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">clear</span> command 
      clears the screen.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<p class="docText"><b>The Prompts.</b> When used interactively, the shell 
prompts you for input. When you see the prompt, you know that you can start 
typing commands. The Bourne shell provides two prompts: the primary prompt, a 
dollar sign (<span class="docEmphasis">$</span>), and the secondary prompt, a 
right angle bracket symbol (<span class="docEmphasis">&gt;</span>). The prompts are 
displayed when the shell is running interactively. You can change these prompts. 
The variable <span class="docEmphasis">PS1</span> is the primary prompt set 
initially to a dollar sign (<span class="docEmphasis">$</span>). The primary 
prompt appears when you log on and the shell waits for you to type commands. The 
variable <span class="docEmphasis">PS2</span> is the secondary prompt, initially 
set to the right angle bracket character. It appears if you have partially typed 
a command and then pressed the carriage return. You can change the primary and 
secondary prompts.</p>
<p class="docText"><b>The Primary Prompt.</b> The dollar sign is the default 
primary prompt. You can change your prompt. Normally prompts are defined in
<span class="docEmphasis">.profile,</span> the user initialization file.</p>
<h5 id="ch08list03" class="docExampleTitle">Example 8.3 </h5>
<pre>1   <span class="docEmphStrong">$ PS1=&quot;'uname -n &gt; '&quot;</span>
2   <span class="docEmphasis">chargers &gt;</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The default primary prompt is a dollar sign (<span class="docEmphasis">$</span>). 
      The <span class="docEmphasis">PS1</span> prompt is being reset to the name 
      of the machine (<span class="docEmphasis">uname –n</span>) and a
      <span class="docEmphasis">&gt;</span> symbol. (Don't confuse backquotes and 
      single quotes.)</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The new prompt is displayed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<p class="docText"><b>The Secondary Prompt.</b> The <span class="docEmphasis">
PS2</span> prompt is the secondary prompt. Its value is displayed to standard 
error, which is the screen by default. This prompt appears when you have not 
completed a command and have pressed the carriage return.</p>
<h5 id="ch08list04" class="docExampleTitle">Example 8.4 </h5>
<pre>1   $ echo &quot;Hello
2   <span class="docEmphStrong">&gt;</span> there&quot;
3   <span class="docEmphasis">Hello</span>
    <span class="docEmphasis">there</span>
4   $

5   <span class="docEmphStrong">$ PS2=&quot;––––&gt; &quot;</span>
6   <span class="docEmphStrong">$</span> echo 'Hi
7   <span class="docEmphStrong">––––––&gt;</span>
    <span class="docEmphStrong">––––––&gt;</span>
    <span class="docEmphStrong">––––––&gt;</span> there'
    <span class="docEmphasis">Hi</span>


    <span class="docEmphasis">there</span>
    $
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The double quotes must be matched after the string &quot;<span class="docEmphasis">Hello.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When a newline is entered, the secondary prompt 
      appears. Until the closing double quotes are entered, the secondary prompt 
      will be displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of the <span class="docEmphasis">echo</span> 
      command is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The primary prompt is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The secondary prompt is reset.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The single quote must be matched after the string
      <span class="docEmphasis">'Hi.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When a newline is entered, the new secondary prompt 
      appears. Until the closing single quote is entered, the secondary prompt 
      will be displayed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<p class="docText"><b>The Search Path.</b> The <span class="docEmphasis">path</span> 
variable is used by the Bourne shell to locate commands typed at the command 
line. The path is a colon-separated list of directories used by the shell when 
searching for commands. The search is from left to right. The dot at the end of 
the path represents the current working directory. If the command is not found 
in any of the directories listed in the path, the Bourne shell sends to standard 
error the message <span class="docEmphasis">filename: not found.</span> It is 
recommended that the path be set in the <span class="docEmphasis">.profile</span> 
file.</p>
<p class="docText">If the dot is not included in the path and you are executing 
a command or script from the current working directory, the name of the script 
must be preceded with a <span class="docEmphasis">./,</span> such as
<span class="docEmphasis">./program_name,</span> so that shell can find the 
program.</p>
<h5 id="ch08list05" class="docExampleTitle">Example 8.5 </h5>
<pre>(Printing the PATH)
1   $ <span class="docEmphStrong">echo $PATH</span>
<span class="docEmphasis">/home/gsa12/bin:/usr/ucb:/usr/bin:/usr/local/bin:/usr/bin:/usr/local/bin:.</span>

(Setting the PATH)
2   $ <span class="docEmphStrong">PATH=$HOME:/usr/ucb:/usr:/usr/bin:/usr/local/bin:.</span>
3   $ <span class="docEmphStrong">export PATH</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">By echoing <span class="docEmphasis">$PATH,</span> the 
      value of the <span class="docEmphasis">PATH</span> variable is displayed. 
      The path consists of a list of colon-separated elements and is searched 
      from left to right. The dot at the end of the path represents the user's 
      current working directory.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">To set the path, a list of colon-separated directories 
      are assigned to the <span class="docEmphasis">PATH</span> variable.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">By exporting the path, child processes will have access 
      to it.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
hash</span> Command.</span> The <span class="docEmphasis">hash</span> command 
controls the internal hash table used by the shell to improve efficiency in 
searching for commands. Instead of searching the path each time a command is 
entered, the first time you type a command, the shell uses the search path to 
find the command, and then stores it in a table in the shell's memory. The next 
time you use the same command, the shell uses the hash table to find it. This 
makes it much faster to access a command than having to search the complete 
path. If you know that you will be using a command often, you can add the 
command to the hash table. You can also remove commands from the table. The 
output of the <span class="docEmphasis">hash</span> command displays both the 
number of times the shell has used the table to find a command (<span class="docEmphasis">hits</span>) 
and the relative cost (<span class="docEmphasis">cost</span>) of looking up the 
command, that is, how far down the search path it had to go before it found the 
command. The <span class="docEmphasis">hash</span> command with the
<span class="docEmphasis">–r</span> option clears the hash table.</p>
<h5 id="ch08list06" class="docExampleTitle">Example 8.6 </h5>
<pre>1   $ <span class="docEmphStrong">hash</span>
    <span class="docEmphasis">hits  cost   command</span>
    <span class="docEmphasis">3     8      /usr/bin/date</span>
    <span class="docEmphasis">1     8      /usr/bin/who</span>
    <span class="docEmphasis">1     8      /usr/bin/ls</span>
2   $ <span class="docEmphStrong">hash vi</span>
    <span class="docEmphasis">3     8      /usr/bin/date</span>
    <span class="docEmphasis">1     8      /usr/bin/who</span>
    <span class="docEmphasis">1     8      /usr/bin/ls</span>
    <span class="docEmphasis">0     6      /usr/ucb/vi</span>
3   $ <span class="docEmphStrong">hash –r</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">hash</span> command 
      displays the commands currently stored in the internal hash table. The 
      shell will not have to search the search path to find the commands listed 
      when they are entered at the command line. This saves time. Otherwise, the 
      shell has to go out to the disk to search the path. When you type a new 
      command, the shell will search the path first, and then place it on the 
      hash table. The next time you use that command, the shell finds it in 
      memory.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">hash</span> command can 
      take arguments; the names of commands you want to guarantee get stored on 
      the hash table ahead of time.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">hash</span> command with 
      the <span class="docEmphasis">–r</span> option clears the hash table.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">dot</span> 
Command.</span> The <span class="docEmphasis">dot</span> command is a built-in 
Bourne shell command. It takes a script name as an argument.The script will be 
executed in the environment of the current shell; that is, a child process will 
not be started. All variables set in the script will become part of the current 
shell's environment. Likewise, all variables set in the current shell will 
become part of the script's environment. The <span class="docEmphasis">dot</span> 
command is normally used to re-execute the <span class="docEmphasis">.profile</span> 
file if it has been modified. For example, if one of the settings, such as the
<span class="docEmphasis">EDITOR</span> or <span class="docEmphasis">TERM</span> 
variable, has been changed since you logged on, you can use the
<span class="docEmphasis">dot</span> command to re-execute the
<span class="docEmphasis">.profile</span> without logging out and then logging 
back in.</p>
<h5 id="ch08list07" class="docExampleTitle">Example 8.7 </h5>
<pre>$ <span class="docEmphStrong">. .profile</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The <span class="docEmphasis">dot</span> command executes 
    the initialization file, <span class="docEmphasis">.profile,</span> within 
    this shell. Local and global variables are redefined within this shell. The
    <span class="docEmphasis">dot</span> command makes it unnecessary to log out 
    and then log back in again.<span id="ENB8-1"><a class="docLink" href="#EN8-1"><sup>[1]</sup></a></span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec2">8.1.2 The Command Line</h4>
<p class="docText">After logging on, the shell displays its primary prompt, a 
dollar sign, by default. The shell is your command interpreter. When the shell 
is running interactively, it reads commands from the terminal and breaks the 
command line into words. A command line consists of one or more words (tokens), 
separated by whitespace (blanks and/or tabs), and terminated with a newline, 
which is generated by pressing Enter. The first word is the command and 
subsequent words are the command's arguments. The command may be a UNIX 
executable program such as <span class="docEmphasis">ls</span> or
<span class="docEmphasis">pwd,</span> a built-in command such as
<span class="docEmphasis">cd</span> or <span class="docEmphasis">test,</span> or 
a shell script. The command may contain special characters, called
<span class="docEmphasis">metacharacters,</span> that the shell must interpret 
while parsing the command line. If a command line is long and you want to 
continue typing on the next line, the backslash character, followed by a newline, 
will allow you to continue typing on the next line. The secondary prompt will 
appear until the command line is terminated.</p>
<p class="docText"><b>The Exit Status.</b> After a command or program 
terminates, it returns an exit status to the parent process. The exit status is 
a number between 0 and 255. By convention, when a program exits, if the status 
returned is zero, the command was successful in its execution. When the exit 
status is nonzero, the command failed in some way. The shell status variable,
<span class="docEmphasis">?,</span> is set to the value of the exit status of 
the last command that was executed. Success or failure of a program is 
determined by the programmer who wrote the program.</p>
<h5 id="ch08list08" class="docExampleTitle">Example 8.8 </h5>
<pre>1   $ grep &quot;john&quot; /etc/passwd
    <span class="docEmphasis">john:MgVyBsZJavd16s:9496:40:John Doe:/home/falcon/john:/bin/sh</span>
2   $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">0</span>
3   $ grep &quot;nicky&quot; /etc/passwd
4   $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">1</span>
5   $ grep &quot;scott&quot; /etc/passsswd
    <span class="docEmphasis">grep: /etc/passsswd: No such file or directory</span>
6   $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">2</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">grep</span> program 
      searches for the pattern <span class="docEmphasis">john</span> in the
      <span class="docEmphasis">/etc/passwd</span> file and is successful. The 
      line from <span class="docEmphasis">/etc/passwd</span> is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">?</span> variable is set 
      to the exit value of the <span class="docEmphasis">grep</span> command. 
      Zero indicates success.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">grep</span> program 
      cannot find user <span class="docEmphasis">nicky</span> in the
      <span class="docEmphasis">/etc/passwd</span> file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">grep</span> program 
      cannot find the pattern, it returns an exit status of
      <span class="docEmphasis">1.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">grep</span> fails because 
      the <span class="docEmphasis">/etc/passsswd</span> file cannot be opened.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If <span class="docEmphasis">grep</span> cannot find 
      the file, it returns an exit status of <span class="docEmphasis">2.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Multiple Commands at the Command Line.</b> A command line 
can consist of multiple commands. Each command is separated by a semicolon, and 
the command line is terminated with a newline.</p>
<h5 id="ch08list09" class="docExampleTitle">Example 8.9 </h5>
<pre>$ <span class="docEmphStrong">ls; pwd; date</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The commands are executed from left to right, one after 
    the other, until the newline is reached.</td>
  </tr>
</table>

<p class="docText"><b>Grouping Commands.</b> Commands may also be grouped so 
that all of the output is either piped to another command or redirected to a 
file.</p>
<h5 id="ch08list10" class="docExampleTitle">Example 8.10 </h5>
<pre>$ <span class="docEmphStrong">( ls ; pwd; date ) &gt; outputfile</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The output of each of the commands is sent to the file 
    called <span class="docEmphasis">outputfile.</span> The spaces inside the 
    parentheses are necessary.</td>
  </tr>
</table>

<p class="docText"><b>Conditional Execution of Commands.</b> With conditional 
execution, two command strings are separated by the special metacharacters, 
double ampersands (<span class="docEmphasis">&amp;&amp;</span>) and double vertical bars 
(||). The command on the right of either of these metacharacters will or will 
not be executed based on the exit condition of the command on the left.</p>
<h5 id="ch08list11" class="docExampleTitle">Example 8.11 </h5>
<pre>$ <span class="docEmphStrong">cc prgm1.c –o prgm1 &amp;&amp; prgm1</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">If the first command is successful (has a zero exit 
    status), the command after the <span class="docEmphasis">&amp;&amp;</span> is 
    executed; i.e., if the <span class="docEmphasis">cc</span> program can 
    successfully compile <span class="docEmphasis">prgm1.c,</span> the resulting 
    executable program, <span class="docEmphasis">prgm1,</span> will be 
    executed.</td>
  </tr>
</table>

<h5 id="ch08list12" class="docExampleTitle">Example 8.12 </h5>
<pre>$ <span class="docEmphStrong">cc prog.c &gt;&amp; err || mail bob &lt; err</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">If the first command fails (has a nonzero exit status), 
    the command after the <span class="docEmphasis">||</span> is executed; i.e., 
    if the <span class="docEmphasis">cc</span> program cannot compile
    <span class="docEmphasis">prog.c,</span> the errors are sent to a file 
    called <span class="docEmphasis">err,</span> and user
    <span class="docEmphasis">bob</span> will be mailed the
    <span class="docEmphasis">err</span> file.</td>
  </tr>
</table>

<p class="docText"><b>Commands in the Background.</b> Normally, when you execute 
a command, it runs in the foreground, and the prompt does not reappear until the 
command has completed execution. It is not always convenient to wait for the 
command to complete. By placing an ampersand (<span class="docEmphasis">&amp;</span>) 
at the end of the command line, the shell will return the shell prompt 
immediately and execute the command in the background concurrently. You do not 
have to wait to start up another command. The output from a background job will 
be sent to the screen as it processes. Therefore, if you intend to run a command 
in the background, the output of that command might be redirected to a file or 
piped to another device, such as a printer, so that the output does not 
interfere with what you are doing.</p>
<p class="docText">The <span class="docEmphasis">$!</span> variable contains the 
PID number of the last job put in the background.</p>
<h5 id="ch08list13" class="docExampleTitle">Example 8.13 </h5>
<pre>1   $ <span class="docEmphStrong">man sh | lp&amp;</span>
2   <span class="docEmphasis">[1] 1557</span>
3   $ <span class="docEmphStrong">kill -9 $!</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of the <span class="docEmphasis">man</span> 
      command (the manual pages for the <span class="docEmphasis">sh</span> 
      command) is piped to the printer. The ampersand at the end of the command 
      line puts the job in the background.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">There are two numbers that appear on the screen: the 
      number in square brackets indicates that this is the first job to be 
      placed in the background; the second number is the PID, or the process 
      identification number of this job.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The shell prompt appears immediately. While your 
      program is running in the background, the shell is waiting for another 
      command in the foreground.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">!</span> variable 
      evaluates to the PID of the job most recently put in the background. If 
      you get it in time, you will kill this job before it goes to the print 
      queue.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec3">8.1.3 Metacharacters (Wildcards)</h4>
<p class="docText">Metacharacters are special characters used to represent 
something other than themselves. Shell metacharacters are called
<span class="docEmphasis">wildcards.</span>
<a class="docLink" href="#ch08table01">Table 8.1</a> lists metacharacters and 
what they do.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table01" class="docTableTitle">Table 8.1. Shell Metacharacters</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Metacharacter</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\</span>
    </td>
    <td class="docTableCell" vAlign="top">Literally interprets the following 
    character. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&amp;</span>
    </td>
    <td class="docTableCell" vAlign="top">Processes in the background. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">;</span>
    </td>
    <td class="docTableCell" vAlign="top">Separates commands. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$</span>
    </td>
    <td class="docTableCell" vAlign="top">Substitutes variables. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">?</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches for a single character. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[abc]</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches for one character from a set 
    of characters. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[!abc]</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches for one character
    <span class="docEmphasis">not</span> from the set of characters. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">*</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches for zero or more characters.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">(cmds)</span>
    </td>
    <td class="docTableCell" vAlign="top">Executes commands in a subshell. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">{cmds}</span>
    </td>
    <td class="docTableCell" vAlign="top">Executes commands in current shell.
    </td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec4">8.1.4 Filename Substitution</h4>
<p class="docText">When evaluating the command line, the shell uses 
metacharacters to abbreviate filenames or pathnames that match a certain set of 
characters. The filename substitution metacharacters listed in
<a class="docLink" href="#ch08table02">Table 8.2</a> are expanded into an 
alphabetically listed set of filenames. The process of expanding the 
metacharacter into filenames is also called <span class="docEmphasis">filename 
substitution,</span> or <span class="docEmphasis">globbing.</span> If a 
metacharacter is used and there is no filename that matches it, the shell treats 
the metacharacter as a literal character.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table02" class="docTableTitle">Table 8.2. Shell Metacharacters and Filename 
  Substitution</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Metacharacter</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">*</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches zero or more characters. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">?</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches exactly one character. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[abc]</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches one character in the set
    <span class="docEmphasis">a, b,</span> or <span class="docEmphasis">c.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[a–z]</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches one character in the range 
    from <span class="docEmphasis">a</span> to <span class="docEmphasis">z.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[! a–z]</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches one character
    <span class="docEmphasis">not</span> in the range from
    <span class="docEmphasis">a</span> to <span class="docEmphasis">z.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\</span>
    </td>
    <td class="docTableCell" vAlign="top">Escapes or disables the metacharacter.
    </td>
  </tr>
</table>

<p class="docText"><b>The Asterisk.</b> The asterisk is a wildcard that matches 
for zero or more of any characters in a filename.</p>
<h5 id="ch08list14" class="docExampleTitle">Example 8.14 </h5>
<pre>1   $ <span class="docEmphStrong">ls  *</span>
    <span class="docEmphasis">abc abc1 abc122 abc123 abc2 file1 file1.bak file2 file2.bak none</span>
    <span class="docEmphasis">nonsense nobody nothing nowhere one</span>
2   $ <span class="docEmphStrong">ls  *.bak</span>
    <span class="docEmphasis">file1.bak file2.bak</span>
3   $ <span class="docEmphStrong">echo a*</span>
    <span class="docEmphasis">ab abc1 abc122 abc123 abc2</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The asterisk expands to all of the files in the present 
      working directory. All of the files are passed as arguments to
      <span class="docEmphasis">is</span> and displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All files starting with zero or more characters and 
      ending with <span class="docEmphasis">.bak</span> are matched and listed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All files starting with <span class="docEmphasis">a,</span> 
      followed by zero or more characters, are matched and passed as arguments 
      to the <span class="docEmphasis">echo</span> command.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>The Question Mark.</b> The question mark represents a 
single character in a filename. When a filename contains one or more question 
marks, the shell performs filename substitution by replacing the question mark 
with the character it matches in the filename.</p>
<h5 id="ch08list15" class="docExampleTitle">Example 8.15 </h5>
<pre>1   $ <span class="docEmphStrong">ls</span>
    <span class="docEmphasis">abc  abc122  abc2  file1.bak  file2.bak  nonsense  nothing  one</span>
    <span class="docEmphasis">abc1  abc123  file1  file2  none  noone  nowhere</span>

2   $ <span class="docEmphStrong">ls a?c?</span>
    <span class="docEmphasis">abc1 abc2</span>

3   $ <span class="docEmphStrong">ls ??</span>	
    <span class="docEmphasis">?? not found</span>

4   $ <span class="docEmphStrong">echo  abc???</span>
    <span class="docEmphasis">abc122 abc123</span>

5   $ <span class="docEmphStrong">echo ??</span>
    <span class="docEmphasis">??</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The files in the current directory are listed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Filenames starting with <span class="docEmphasis">a,</span> 
      followed by a single character, followed by <span class="docEmphasis">c</span> 
      and a single character, are matched and listed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Filenames containing exactly two characters are listed 
      if found. Since there are no two-character files, the question marks are 
      treated as a literal filename.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Filenames starting with <span class="docEmphasis">abc</span> 
      and followed by exactly three characters are expanded and displayed by the
      <span class="docEmphasis">echo</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">There are no files in the directory that contain 
      exactly two characters. The shell treats the question mark as a literal 
      question mark if it cannot find a match.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>The Square Brackets.</b> The brackets are used to match 
filenames containing <span class="docEmphasis">one</span> character in a set or 
range of characters.</p>
<h5 id="ch08list16" class="docExampleTitle">Example 8.16 </h5>
<pre>1   $ <span class="docEmphStrong">ls</span>
    <span class="docEmphasis">abc  abc122 abc2 file1.bak file2.bak nonsense nothing</span>
    <span class="docEmphasis">one  abc1 abc123 file1 file2 none noone nowhere</span>

2   $ <span class="docEmphStrong">ls abc[123]</span>
    <span class="docEmphasis">abc1  abc2</span>

3   $ <span class="docEmphStrong">ls abc[1–3]</span>
    <span class="docEmphasis">abc1  abc2</span>

4   $ <span class="docEmphStrong">ls [a–z][a–z][a–z]</span>
    <span class="docEmphasis">abc one</span>

5   $ <span class="docEmphStrong">ls [!f–z] ???</span>
    <span class="docEmphasis">abc1  abc2</span>

6   $ <span class="docEmphStrong">ls abc12[23]</span>
    <span class="docEmphasis">abc122 abc123</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All of the files in the present working directory are 
      listed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All filenames containing four characters are matched 
      and listed if the filename starts with <span class="docEmphasis">abc,</span> 
      followed by <span class="docEmphasis">1,</span> <span class="docEmphasis">
      2,</span> or <span class="docEmphasis">3.</span> Only one character from 
      the set in the brackets is matched.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All filenames containing four characters are matched 
      and listed if the filename starts with <span class="docEmphasis">abc</span> 
      and is followed by a number in the range from <span class="docEmphasis">1</span> 
      to <span class="docEmphasis">3.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All filenames containing three characters are matched 
      and listed, if the filename contains exactly three lowercase alphabetic 
      characters.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All filenames containing four characters are listed if 
      the first character is <span class="docEmphasis">not</span> a lowercase 
      letter between <span class="docEmphasis">f</span> and
      <span class="docEmphasis">z</span> ([<span class="docEmphasis">!f–z</span>], 
      followed by three of any character (e.g., <span class="docEmphasis">???</span>).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Files are listed if the filenames contain
      <span class="docEmphasis">abc12</span> followed by
      <span class="docEmphasis">2</span> or <span class="docEmphasis">3.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Escaping Metacharacters.</b> To use a metacharacter as a 
literal character, the backslash may be used to prevent the metacharacter from 
being interpreted.</p>
<h5 id="ch08list17" class="docExampleTitle">Example 8.17 </h5>
<pre>1   $ <span class="docEmphStrong">ls</span>
    <span class="docEmphasis">abc file1 youx</span>
2   $ <span class="docEmphStrong">echo How are you?</span>
    <span class="docEmphasis">How are youx</span>
3   $ <span class="docEmphStrong">echo How are you\?</span>
    <span class="docEmphasis">How are you?</span>
4   $ <span class="docEmphStrong">echo  When does this line \</span>
    <span class="docEmphStrong">&gt; ever end\?</span>
    <span class="docEmphasis">When does this line ever end?</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The files in the present working directory are listed. 
      (Note the file <span class="docEmphasis">youx.</span>)</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The shell will perform filename expansion on the
      <span class="docEmphasis">?.</span> Any files in the current directory 
      starting with <span class="docEmphasis">y</span>-<span class="docEmphasis">o</span>-<span class="docEmphasis">u</span> 
      and followed by exactly one character are matched and substituted in the 
      string. The filename <span class="docEmphasis">youx</span> will be 
      substituted in the string to read <span class="docEmphasis">How are youx</span> 
      (probably not what you wanted to happen).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">By preceding the question mark with a backslash, it is 
      escaped, meaning that the shell will not try to interpret it as a 
      wildcard.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The newline is escaped by preceding it with a 
      backslash. The secondary prompt is displayed until the string is 
      terminated with a newline. The question mark (<span class="docEmphasis">?</span>) 
      is escaped to protect it from filename expansion.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec5">8.1.5 Variables</h4>
<p class="docText">There are two types of variables, local and environment 
variables. Some variables are created by the user and others are special shell 
variables.</p>
<p class="docText"><b>Local Variables.</b> Local variables are given values that 
are known only to the shell in which they are created. Variable names must begin 
with an alphabetic or underscore character. The remaining characters can be 
alphabetic, decimal digits zero to nine, or an underscore character. Any other 
characters mark the termination of the variable name. When assigning a value, 
there can be no whitespace surrounding the equal sign. To set the variable to 
null, the equal sign is followed by a newline.<span id="ENB8-2"><a class="docLink" href="#EN8-2"><sup>[2]</sup></a></span>
</p>

<p class="docText">A dollar sign is used in front of a variable to extract the 
value stored there.</p>
<p class="docText"><span class="docEmphStrong">Setting Local Variables</span></p>
<h5 id="ch08list18" class="docExampleTitle">Example 8.18 </h5>
<pre>1   $ <span class="docEmphStrong">round=world</span>
    $ echo $round
    <span class="docEmphasis">world</span>

2   $ <span class="docEmphStrong">name=&quot;Peter Piper&quot;</span>
    $ <span class="docEmphStrong">echo $name</span>
    <span class="docEmphasis">Peter Piper</span>

3   $ <span class="docEmphStrong">x=</span>
    $ <span class="docEmphStrong">echo $x</span>

4   $ <span class="docEmphStrong">file.bak=&quot;$HOME/junk&quot;</span>
    <span class="docEmphasis">file.bak=/home/jody/ellie/junk: not found</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">round</span> is 
      assigned the value <span class="docEmphasis">world.</span> When the shell 
      encounters the dollar sign preceding a variable name, it performs variable 
      substitution. The value of the variable is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">name</span> is 
      assigned the value <span class="docEmphasis">&quot;Peter Piper&quot;.</span> The 
      quotes are needed to hide the whitespace so that the shell will not split 
      the string into separate words when it parses the command line. The value 
      of the variable is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">x</span> is not 
      assigned a value. It will be assigned null. The null value, an empty 
      string, is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The period in the variable name is illegal. The only 
      characters allowed in a variable name are numbers, letters, and the 
      underscore. The shell tries to execute the string as a command.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>The Scope of Local Variables.</b> A local variable is 
known only to the shell in which it was created. It is not passed on to 
subshells. The double dollar sign variable is a special variable containing the 
PID of the current shell.</p>
<h5 id="ch08list19" class="docExampleTitle">Example 8.19 </h5>
<pre>1   $ <span class="docEmphStrong">echo $$</span>
    <span class="docEmphasis">1313</span>
2   $ <span class="docEmphStrong">round=world</span>
    $ <span class="docEmphStrong">echo $round</span>
    <span class="docEmphasis">world</span>
3   $ <span class="docEmphStrong">sh</span>           # <span class="docEmphasis">Start a subshell</span>

4   $ <span class="docEmphStrong">echo $$</span>
    <span class="docEmphasis">1326</span>
5   $ <span class="docEmphStrong">echo $round</span>

6   $ <span class="docEmphStrong">exit</span>         # <span class="docEmphasis">Exits this shell, returns to parent shell</span>

7   $ <span class="docEmphStrong">echo $$</span>
    <span class="docEmphasis">1313</span>
8   $ <span class="docEmphStrong">echo $round</span>
    <span class="docEmphasis">world</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of the double dollar sign variable evaluates 
      to the PID of the current shell. The PID of this shell is
      <span class="docEmphasis">1313.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The local variable <span class="docEmphasis">round</span> 
      is assigned the string value <span class="docEmphasis">world,</span> and 
      the value of the variable is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A new Bourne shell is started. This is called a
      <span class="docEmphasis">subshell,</span> or <span class="docEmphasis">
      child shell.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The PID of this shell is <span class="docEmphasis">
      1326.</span> The parent shell's PID is <span class="docEmphasis">1313.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">round</span> is 
      not defined in this shell. A blank line is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">exit</span> command 
      terminates this shell and returns to the parent shell. (Control-D will 
      also exit this shell.)</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The parent shell returns. Its PID is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of the variable <span class="docEmphasis">
      round</span> is displayed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Setting Read-Only Variables.</b> A read-only variable 
cannot be redefined or unset.</p>
<h5 id="ch08list20" class="docExampleTitle">Example 8.20 </h5>
<pre>1   $ <span class="docEmphStrong">name=Tom</span>
2   $ <span class="docEmphStrong">readonly name</span>
    $ <span class="docEmphStrong">echo $name</span>
    <span class="docEmphasis">Tom</span>
3   $ <span class="docEmphStrong">unset name</span>
    <span class="docEmphasis">name: readonly</span>
4   $ <span class="docEmphStrong">name=Joe</span>
    <span class="docEmphasis">name: readonly</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The local variable <span class="docEmphasis">name</span> 
      is assigned the value <span class="docEmphasis">Tom.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable is made <span class="docEmphasis">readonly.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A read-only variable cannot be unset.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A read-only variable cannot be redefined.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Environment Variables.</b> Environment variables are 
available to the shell in which they are created and any subshells or processes 
spawned from that shell. By convention, environment variables are capitalized. 
Environment variables are variables that have been exported.</p>
<p class="docText">The shell in which a variable is created is called the
<span class="docEmphasis">parent shell.</span> If a new shell is started from 
the parent shell, it is called the <span class="docEmphasis">child shell.</span> 
Some of the environment variables, such as <span class="docEmphasis">HOME, 
LOGNAME, PATH,</span> and <span class="docEmphasis">SHELL,</span> are set before 
you log on by the <span class="docEmphasis">/bin/login</span> program. Normally, 
environment variables are defined and stored in the <span class="docEmphasis">
.profile</span> file in the user's home directory. See
<a class="docLink" href="#ch08table03">Table 8.3</a> for a list of environment 
variables.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table03" class="docTableTitle">Table 8.3. Bourne Shell Environment Variables</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">ENV 
    Variable</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Value</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">PATH</span>
    </td>
    <td class="docTableCell" vAlign="top">The search path for commands. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">HOME</span>
    </td>
    <td class="docTableCell" vAlign="top">Home directory; used by
    <span class="docEmphasis">cd</span> when no directory is specified. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">IFS</span>
    </td>
    <td class="docTableCell" vAlign="top">Internal field separators, normally 
    space, tab, and newline. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">LOGNAME</span>
    </td>
    <td class="docTableCell" vAlign="top">The user's login name. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">MAIL</span>
    </td>
    <td class="docTableCell" vAlign="top">If this parameter is set to the name 
    of a mail file and the <span class="docEmphasis">MAILPATH</span> parameter 
    is not set, the shell informs the user of the arrival of mail in the 
    specified file. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">MAILCHECK</span>
    </td>
    <td class="docTableCell" vAlign="top">This parameter specifies how often (in 
    seconds) the shell will check for the arrival of mail in the files specified 
    by the <span class="docEmphasis">MAILPATH</span> or
    <span class="docEmphasis">MAIL</span> parameters. The default value is 600 
    seconds (10 minutes). If set to zero, the shell will check before issuing 
    each primary prompt. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">MAILPATH</span>
    </td>
    <td class="docTableCell" vAlign="top">A colon-separated list of filenames. 
    If this parameter is set, the shell informs the user of the arrival of mail 
    in any of the specified files. Each filename can be followed by a percent 
    sign and a message that will be printed when the modification time changes. 
    The default message is <span class="docEmphasis">You have mail.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">PWD</span>
    </td>
    <td class="docTableCell" vAlign="top">Present working directory. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">PS1</span>
    </td>
    <td class="docTableCell" vAlign="top">Primary prompt string, which is a 
    dollar sign by default. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">PS2</span>
    </td>
    <td class="docTableCell" vAlign="top">Secondary prompt string, which is a 
    right angle bracket by default. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">SHELL</span>
    </td>
    <td class="docTableCell" vAlign="top">When the shell is invoked, it scans 
    the environment for this name. The shell gives default values to
    <span class="docEmphasis">PATH,</span> <span class="docEmphasis">PS1,</span>
    <span class="docEmphasis">PS2,</span> <span class="docEmphasis">MAILCHECK,</span> 
    and <span class="docEmphasis">IFS.</span> <span class="docEmphasis">HOME</span> 
    and <span class="docEmphasis">MAIL</span> are set by
    <span class="docEmphasis">login.</span> </td>
  </tr>
</table>

<p class="docText"><b>Setting Environment Variables.</b> To set environment 
variables, the <span class="docEmphasis">export</span> command is used either 
after assigning a value or when the variable is set. (Do not use the dollar sign 
on a variable when exporting it.)</p>
<h5 id="ch08list21" class="docExampleTitle">Example 8.21 </h5>
<pre>1   $ <span class="docEmphStrong">TERM=wyse</span>    $ <span class="docEmphStrong">export TERM</span>
2   $ <span class="docEmphStrong">NAME= &quot;John Smith&quot;</span>
    $ <span class="docEmphStrong">export NAME</span>
    $ <span class="docEmphStrong">echo $NAME</span>
    <span class="docEmphasis">John Smith</span>
3   $ <span class="docEmphStrong">echo $$</span>
    <span class="docEmphasis">319</span>              # <span class="docEmphasis">pid number for parent shell</span>
4   $ <span class="docEmphStrong">sh</span>
                     # <span class="docEmphasis">Start a subshell</span>
5   $ <span class="docEmphStrong">echo $$</span>
    <span class="docEmphasis">340</span>              # <span class="docEmphasis">pid number for new shell</span>
6   $ <span class="docEmphStrong">echo $NAME</span>
    <span class="docEmphasis">John Smith</span>
7   $ <span class="docEmphStrong">NAME=&quot;April Jenner&quot;</span>
    $ <span class="docEmphStrong">export NAME</span>
    $ <span class="docEmphStrong">echo $NAME</span>
    <span class="docEmphasis">April Jenner</span>
8   $ <span class="docEmphStrong">exit</span>           # <span class="docEmphasis">Exit the</span> <span class="docEmphasis">subshell and go back to parent shell</span>
9   $ <span class="docEmphStrong">echo $$</span>
    <span class="docEmphasis">319</span>              # <span class="docEmphasis">pid number for parent shell</span>
10  $ <span class="docEmphStrong">echo $NAME</span>
    <span class="docEmphasis">John Smith</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">TERM</span> variable is 
      assigned <span class="docEmphasis">wyse.</span> The variable is exported. 
      Now, processes started from this shell will inherit the variable.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable is defined and exported to make it 
      available to subshells started from the shell.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of this shell's PID is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A new Bourne shell is started. The new shell is called 
      the <span class="docEmphasis">child.</span> The original shell is its
      <span class="docEmphasis">parent.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The PID of the new Bourne shell is stored in the
      <span class="docEmphasis">$$</span> variable and its value is echoed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable, set in the parent shell, was exported to 
      this new shell and is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable is reset to <span class="docEmphasis">
      April Jenner.</span> It is exported to all subshells, but will not affect 
      the parent shell. Exported values are not propagated upward to the parent 
      shell.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This Bourne child shell is exited.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The PID of the parent is displayed again.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">NAME</span> 
      contains its original value. Variables retain their values when exported 
      from parent to child shell. The child cannot change the value of a 
      variable for its parent.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Listing Set Variables.</b> There are two built-in commands 
that print the value of a variable: <span class="docEmphasis">set</span> and
<span class="docEmphasis">env.</span> The <span class="docEmphasis">set</span> 
command prints all variables, local and global. The <span class="docEmphasis">
env</span> command prints just the global variables.</p>
<h5 id="ch08list22" class="docExampleTitle">Example 8.22 </h5>
<pre>1   $ <span class="docEmphStrong">env</span>     <span class="docEmphasis">(Partial list)</span>
    <span class="docEmphasis">LOGNAME=ellie</span>
    <span class="docEmphasis">TERMCAP=sun–cmd</span>
    <span class="docEmphasis">USER=ellie</span>
    <span class="docEmphasis">DISPLAY=:0.0</span>
    <span class="docEmphasis">SHELL=/bin/sh</span>
    <span class="docEmphasis">HOME=/home/jody/ellie</span>
    <span class="docEmphasis">TERM=sun–cmd</span>
    <span class="docEmphasis">LD_LIBRARY_PATH=/usr/local/OW3/lib</span>
    <span class="docEmphasis">PWD=/home/jody/ellie/perl</span>

2   $ <span class="docEmphStrong">set</span>
    <span class="docEmphasis">DISPLAY=:0.0</span>
    <span class="docEmphasis">FMHOME=/usr/local/Frame–2.1X</span>
    <span class="docEmphasis">FONTPATH=/usr/local/OW3/lib/fonts</span>
    <span class="docEmphasis">HELPPATH=/usr/local/OW3/lib/locale:/usr/local/OW3/lib/help</span>
    <span class="docEmphasis">HOME=/home/jody/ellie</span>
    <span class="docEmphasis">HZ=100</span>
    <span class="docEmphasis">IFS=</span>
    <span class="docEmphasis">LANG=C</span>
    <span class="docEmphasis">LD_LIBRARY_PATH=/usr/local/OW3/lib</span>
    <span class="docEmphasis">LOGNAME=ellie</span>
    <span class="docEmphasis">MAILCHECK=600</span>
    <span class="docEmphasis">MANPATH=/usr/local/OW3/share/man:/usr/local/OW3/man:/</span>
    <span class="docEmphasis">usr/local/man:/usr/local/doctools/man:/usr/man</span>
    <span class="docEmphasis">OPTIND=1</span>
    <span class="docEmphasis">PATH=/home/jody/ellie:/usr/local/OW3/bin:/usr/ucb:/usr/local/</span>
    <span class="docEmphasis">doctools/bin:/usr/bin:/usr/local:/usr/etc:/etc:/usr/spool/</span>
    <span class="docEmphasis">news/bin:/home/jody/ellie/bin:/usr/lo</span>
    <span class="docEmphasis">PS1=$</span>
    <span class="docEmphasis">PS2=&gt;</span>
    <span class="docEmphasis">PWD=/home/jody/ellie/kshprog/joke</span>
    <span class="docEmphasis">SHELL=/bin/sh</span>
    <span class="docEmphasis">TERM=sun–cmd</span>
    <span class="docEmphasis">TERMCAP=sun–cmd:te=\E[&gt;4h:ti=\E[&gt;4l:tc=sun:</span>
    <span class="docEmphasis">USER=ellie</span>
    <span class="docEmphasis">name=Tom</span>
    <span class="docEmphasis">place=&quot;San Francisco&quot;</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">env</span> command lists 
      all environment (exported) variables. These variables are, by convention, 
      named with all uppercase letters. They are passed from the process in 
      which they are created to any of its child processes.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command, 
      without options, prints all <span class="docEmphasis">set</span> 
      variables, local and exported (including variables set to null).</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Unsetting Variables.</b> Both local and environment 
variables can be unset by using the <span class="docEmphasis">unset</span> 
command, unless the variables are set as read-only.</p>
<h5 id="ch08list23" class="docExampleTitle">Example 8.23 </h5>
<pre><span class="docEmphStrong">unset name; unset TERM</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The <span class="docEmphasis">unset</span> command 
    removes the variable from the shell's memory.</td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">Printing the Values of Variables: 
The <span class="docEmphasis">echo</span> Command.</span> The
<span class="docEmphasis">echo</span> command prints its arguments to standard 
output and is used primarily in Bourne and C shells. The Korn shell has a 
built-in <span class="docEmphasis">print</span> command. There are different 
versions of the <span class="docEmphasis">echo</span> command; for example, the 
Berkeley (BSD) <span class="docEmphasis">echo</span> is different from the 
System V <span class="docEmphasis">echo.</span> Unless you specify a full 
pathname, you will use the built-in version of the <span class="docEmphasis">
echo</span> command. The built-in version will reflect the version of UNIX you 
are using. The System V <span class="docEmphasis">echo</span> allows the use of 
numerous escape sequences, whereas the BSD version does not.
<a class="docLink" href="#ch08table04">Table 8.4</a> lists the BSD
<span class="docEmphasis">echo</span> option and escape sequences.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table04" class="docTableTitle">Table 8.4. BSD <span class="docEmphasis">echo</span> 
  Option and System V Escape Sequences</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Option</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top" colSpan="2">
    <span class="docEmphBoldItalic">BSD:</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–n</span>
    </td>
    <td class="docTableCell" vAlign="top">Suppress newline at the end of a line 
    of output. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top" colSpan="2">
    <span class="docEmphBoldItalic">System V</span><span class="docEmphasis">:</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\b</span>
    </td>
    <td class="docTableCell" vAlign="top">Backspace. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\c</span>
    </td>
    <td class="docTableCell" vAlign="top">Print the line without a newline. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\f</span>
    </td>
    <td class="docTableCell" vAlign="top">Form feed. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\n</span>
    </td>
    <td class="docTableCell" vAlign="top">Newline. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\r</span>
    </td>
    <td class="docTableCell" vAlign="top">Return. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\t</span>
    </td>
    <td class="docTableCell" vAlign="top">Tab. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\v</span>
    </td>
    <td class="docTableCell" vAlign="top">Vertical tab. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\\</span>
    </td>
    <td class="docTableCell" vAlign="top">Backslash. </td>
  </tr>
</table>

<h5 id="ch08list24" class="docExampleTitle">Example 8.24 </h5>
<pre>1   $ <span class="docEmphStrong">echo The username is $LOGNAME.</span>
    <span class="docEmphasis">The username is ellie.</span>

2   $ <span class="docEmphStrong">echo &quot;\t\tHello there\c&quot;</span>   <span class="docEmphasis"># System V</span>
    <span class="docEmphasis">Hello there$</span>

3   $ <span class="docEmphStrong">echo -n &quot;Hello there&quot;</span>      <span class="docEmphasis"># BSD</span>
    <span class="docEmphasis">Hello there$</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">echo</span> command 
      prints its arguments to the screen. Variable substitution is performed by 
      the shell before the <span class="docEmphasis">echo</span> command is 
      executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The System V version of the <span class="docEmphasis">
      echo</span> command supports escape sequences similar to those of the C 
      programming language. The <span class="docEmphasis">$</span> is the shell 
      prompt.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">–n</span> option to the
      <span class="docEmphasis">echo</span> command indicates the BSD version of 
      the <span class="docEmphasis">echo</span> command is being used. The line 
      is printed without the newline. The escape sequences are not supported by 
      this version of <span class="docEmphasis">echo.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Variable Expansion Modifiers.</b> Variables can be tested 
and modified by using special modifiers. The modifier provides a shortcut 
conditional test to check if a variable has been set, and then assigns a value 
to the variable based on the outcome of the test. See
<a class="docLink" href="#ch08table05">Table 8.5</a> for a list of variable 
modifiers.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table05" class="docTableTitle">Table 8.5. Variable Modifiers</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Modifier</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Value</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">
    ${variable:-word}</span> </td>
    <td class="docTableCell" vAlign="top">If <span class="docEmphasis">variable</span> 
    is set and is non-null, substitute its value; otherwise, substitute
    <span class="docEmphasis">word.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">
    ${variable:=word}</span> </td>
    <td class="docTableCell" vAlign="top">If <span class="docEmphasis">variable</span> 
    is set or is non-null, substitute its value; otherwise, set it to
    <span class="docEmphasis">word.</span> The value of
    <span class="docEmphasis">variable</span> is substituted permanently. 
    Positional parameters may not be assigned in this way. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">${variable:+word}</span>
    </td>
    <td class="docTableCell" vAlign="top">If parameter is set and is non-null, 
    substitute <span class="docEmphasis">word</span>; otherwise, substitute 
    nothing. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">${variable:?word}</span>
    </td>
    <td class="docTableCell" vAlign="top">If <span class="docEmphasis">variable</span> 
    is set and is non-null, substitute its value; otherwise, print
    <span class="docEmphasis">word</span> and exit from the shell. If
    <span class="docEmphasis">word</span> is omitted, the message
    <span class="docEmphasis">parameter null or not set</span> is printed. </td>
  </tr>
</table>

<p class="docText">Using the colon with any of the modifiers (-, =, +, ?) checks 
whether the variable is not set or is <span class="docEmphasis">null;</span> 
without the colon, a variable set to null is considered to be set.</p>
<h5 id="ch08list25" class="docExampleTitle">Example 8.25 </h5>
<pre>(Assigning Temporary Default Values)
1   $ <span class="docEmphStrong">fruit=peach</span>
2   $ <span class="docEmphStrong">echo ${fruit:–plum}</span>
    <span class="docEmphasis">peach</span>

3   $ <span class="docEmphStrong">echo ${newfruit:–apple}</span>
    <span class="docEmphasis">apple</span>
4   $ <span class="docEmphStrong">echo $newfruit</span>

5   $ <span class="docEmphStrong">echo $EDITOR</span>       <span class="docEmphasis"># More realistic example</span>
6   $ <span class="docEmphStrong">echo ${EDITOR:-/bin/vi}</span>
    <span class="docEmphasis">/bin/vi</span>
7   $ <span class="docEmphStrong">echo $EDITOR</span>

8   $ <span class="docEmphStrong">name=</span>
    $ <span class="docEmphStrong">echo ${name-Joe}</span>
9   $ <span class="docEmphStrong">echo ${name:-Joe}</span>
    <span class="docEmphasis">Joe</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">fruit</span> is 
      assigned the value <span class="docEmphasis">peach.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The special modifier will check to see if the variable
      <span class="docEmphasis">fruit</span> has been set. If it has, the value 
      is printed; if not, <span class="docEmphasis">plum</span> is substituted 
      for <span class="docEmphasis">fruit</span> and its value is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">newfruit</span> 
      has not been set. The value <span class="docEmphasis">apple</span> will be 
      temporarily substituted for <span class="docEmphasis">newfruit.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The setting was only temporary. The variable
      <span class="docEmphasis">newfruit</span> is not set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The environment variable <span class="docEmphasis">
      EDITOR</span> has not been set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">:–</span> modifier 
      substitutes <span class="docEmphasis">EDITOR</span> with
      <span class="docEmphasis">/bin/vi.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">EDITOR</span> was never 
      set. Nothing prints.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">name</span> is 
      set to null. By not prefixing the modifier with a colon, the variable is 
      considered to be set, even if to null, and the new value
      <span class="docEmphasis">Joe</span> is not assigned to
      <span class="docEmphasis">name.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The colon causes the modifier to check that a variable 
      is either <span class="docEmphasis">not</span> set or is set to null. In 
      either case, the value <span class="docEmphasis">Joe</span> will be 
      substituted for <span class="docEmphasis">name.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list26" class="docExampleTitle">Example 8.26 </h5>
<pre>(Assigning Permanent Default Values)
1   $ <span class="docEmphStrong">name=</span>
2   $ <span class="docEmphStrong">echo  ${name:=Patty}</span>
    <span class="docEmphasis">Patty</span>
3   $ <span class="docEmphStrong">echo $name</span>
    <span class="docEmphasis">Patty</span>
4   $ <span class="docEmphStrong">echo ${EDITOR:=/bin/vi}</span>
    <span class="docEmphasis">/bin/vi</span>
5   $ <span class="docEmphStrong">echo $EDITOR</span>
    <span class="docEmphasis">/bin/vi</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">name</span> is 
      assigned the value <span class="docEmphasis">null.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The special modifier <span class="docEmphasis">:=</span> 
      will check to see if the variable name has been set. If it has been set, 
      it will not be changed; if it is either null or not set, it will be 
      assigned the value to the right of the equal sign.
      <span class="docEmphasis">Patty</span> is assigned to
      <span class="docEmphasis">name</span> since the variable is set to null. 
      The setting is permanent.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">name</span> 
      still contains the value <span class="docEmphasis">Patty.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of the variable <span class="docEmphasis">
      EDITOR</span> is set to <span class="docEmphasis">/bin/vi</span>.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of the variable <span class="docEmphasis">
      EDITOR</span> is displayed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list27" class="docExampleTitle">Example 8.27 </h5>
<pre>(Assigning Temporary Alternate Value)
1   $ <span class="docEmphStrong">foo=grapes</span>
2   $ <span class="docEmphStrong">echo ${foo:+pears}</span>
    <span class="docEmphasis">pears</span>
3   $ <span class="docEmphStrong">echo $foo</span>
    <span class="docEmphasis">grapes</span>
    $
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">foo</span> has 
      been assigned the value <span class="docEmphasis">grapes.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The special modifier <span class="docEmphasis">:+</span> 
      will check to see if the variable has been set. If it has been set,
      <span class="docEmphasis">pears</span> will temporarily be substituted for
      <span class="docEmphasis">foo;</span> if not, null is returned.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">foo</span> now 
      has its original value.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list28" class="docExampleTitle">Example 8.28 </h5>
<pre>(Creating Error Messages Based On Default Values)
1   $ <span class="docEmphStrong">echo ${namex:?&quot;namex is undefined&quot;}</span>
    <span class="docEmphasis">namex: namex is undefined</span>
2   $ <span class="docEmphStrong">echo ${y?}</span>
    <span class="docEmphasis">y: parameter null or not set</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">:?</span> modifier will 
      check to see if the variable has been set. If not, the string to the right 
      of the <span class="docEmphasis">?</span> is printed to standard error, 
      after the name of the variable. If in a script, the script exits.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If a message is not provided after the
      <span class="docEmphasis">?,</span> the shell sends a default message to 
      standard error.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Positional Parameters.</b> Normally, the special built-in 
variables, often called <span class="docEmphasis">positional parameters,</span> 
are used in shell scripts when passing arguments from the command line, or used 
in functions to hold the value of arguments passed to the function. See
<a class="docLink" href="#ch08table06">Table 8.6</a>. The variables are called 
positional parameters because they are denoted by their position on the command 
line. The Bourne shell allows up to nine positional parameters. The name of the 
shell script is stored in the <span class="docEmphasis">$0</span> variable. The 
positional parameters can be set and reset with the <span class="docEmphasis">
set</span> command.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table06" class="docTableTitle">Table 8.6. Positional Parameters</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Positional Parameter</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$0</span>
    </td>
    <td class="docTableCell" vAlign="top">References the name of the current 
    shell script. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$1–$9</span>
    </td>
    <td class="docTableCell" vAlign="top">Denotes positional parameters
    <span class="docEmphasis">1</span> through <span class="docEmphasis">9.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$#</span>
    </td>
    <td class="docTableCell" vAlign="top">Evaluates to the number of positional 
    parameters. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$*</span>
    </td>
    <td class="docTableCell" vAlign="top">Evaluates to all the positional 
    parameters. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$@</span>
    </td>
    <td class="docTableCell" vAlign="top">Means the same as
    <span class="docEmphasis">$*,</span> except when double quoted. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&quot;$*&quot;</span>
    </td>
    <td class="docTableCell" vAlign="top">Evaluates to &quot;<span class="docEmphasis">$1 
    $2 $3</span>&quot;. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&quot;$@&quot;</span>
    </td>
    <td class="docTableCell" vAlign="top">Evaluates to &quot;<span class="docEmphasis">$1</span>&quot; 
    &quot;<span class="docEmphasis">$2</span>&quot; &quot;<span class="docEmphasis">$3</span>&quot;.
    </td>
  </tr>
</table>

<h5 id="ch08list29" class="docExampleTitle">Example 8.29 </h5>
<pre>1   $ <span class="docEmphStrong">set tim bill ann fred</span>
    $ <span class="docEmphStrong">echo $*</span>      # <span class="docEmphasis">Prints all the positional parameters</span>
                   # <span class="docEmphasis">tim bill ann fred.</span>


2   $ <span class="docEmphStrong">echo $1</span>      # <span class="docEmphasis">Prints the first positional parameter.</span>
    <span class="docEmphasis">tim</span>
<span class="docEmphasis">3</span>   $ <span class="docEmphStrong">echo $2 $3</span>   # <span class="docEmphasis">Prints the second and third</span>
    <span class="docEmphasis">bill ann</span>       # <span class="docEmphasis">positional parameters.</span>
4   $ <span class="docEmphStrong">echo $#</span>      # <span class="docEmphasis">Prints the total number of</span>
    <span class="docEmphasis">4</span>              # <span class="docEmphasis">positional parameters.</span>

5   $ <span class="docEmphStrong">set a b c d e f g h i j k l m</span>
    $ <span class="docEmphStrong">echo  $10</span>    # <span class="docEmphasis">Prints the first positional parameter</span>
    <span class="docEmphasis">a0</span>             # <span class="docEmphasis">followed by a zero.</span>
6   $ <span class="docEmphStrong">echo  $*</span>
   <span class="docEmphasis">a b c d e f g h i j k l m</span>

7   $ <span class="docEmphStrong">set file1 file2 file3</span>
    $ <span class="docEmphStrong">echo  \$$#</span>
    <span class="docEmphasis">$3</span>
8   $ <span class="docEmphStrong">eval echo  \$$#</span>
    <span class="docEmphasis">file3</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command 
      assigns values to positional parameters. The <span class="docEmphasis">$*</span> 
      special variable contains all of the parameters set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of the first positional parameter,
      <span class="docEmphasis">tim,</span> is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of the second and third parameters,
      <span class="docEmphasis">bill</span> and <span class="docEmphasis">ann,</span> 
      are displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">$#</span> special 
      variable contains the number of positional parameters currently set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command resets 
      all of the positional parameters. The original set is destroyed. 
      Positional parameters cannot be numbered beyond nine. The value of the 
      first positional parameter is printed, followed by the number zero.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">$*</span> allows you to 
      print all of the parameters, even past nine.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The positional parameters are reset to
      <span class="docEmphasis">file1, file2,</span> and
      <span class="docEmphasis">file3.</span> The dollar sign is escaped;
      <span class="docEmphasis">$#</span> is the number of arguments. The
      <span class="docEmphasis">echo</span> command displays
      <span class="docEmphasis">$3.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">eval</span> command 
      parses the command line a second time before executing the command. The 
      first time parsed, the shell substitutes <span class="docEmphasis">\$$#</span> 
      with <span class="docEmphasis">$3,</span> and the second time, the shell 
      substitutes the value of <span class="docEmphasis">$3</span> with
      <span class="docEmphasis">file3.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Other Special Variables.</b> The shell has special 
variables consisting of a single character. The dollar sign preceding the 
character allows you to access the value stored in the variable. See
<a class="docLink" href="#ch08table07">Table 8.7</a>.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table07" class="docTableTitle">Table 8.7. Special Variables</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Variable</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$</span>
    </td>
    <td class="docTableCell" vAlign="top">The PID of the shell </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–</span>
    </td>
    <td class="docTableCell" vAlign="top">The <span class="docEmphasis">sh</span> 
    options currently set </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">?</span>
    </td>
    <td class="docTableCell" vAlign="top">The exit value of last executed 
    command </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">!</span>
    </td>
    <td class="docTableCell" vAlign="top">The PID of the last job put in the 
    background </td>
  </tr>
</table>

<h5 id="ch08list30" class="docExampleTitle">Example 8.30 </h5>
<pre>1   $ <span class="docEmphStrong">echo The pid of this shell is $$</span>
    <span class="docEmphasis">The pid of this shell is 4725</span>

2   $ <span class="docEmphStrong">echo The options for this shell are $–</span>
    <span class="docEmphasis">The options for this shell are s</span>

3   $ <span class="docEmphStrong">grep dodo /etc/passwd</span>
    $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">1</span>

4   $ <span class="docEmphStrong">sleep 25&amp;</span>
    <span class="docEmphasis">4736</span>
    $ <span class="docEmphStrong">echo $!</span>
    <span class="docEmphasis">4736</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">$</span> variable holds 
      the value of the PID for this process.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">–</span> variable lists 
      all options for this interactive Bourne shell.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">grep</span> command 
      searches for the string <span class="docEmphasis">dodo</span> in the
      <span class="docEmphasis">/etc/passwd</span> file. The
      <span class="docEmphasis">?</span> variable holds the exit status of the 
      last command executed. Since the value returned from
      <span class="docEmphasis">grep</span> is <span class="docEmphasis">1,</span>
      <span class="docEmphasis">grep</span> is assumed to have failed in its 
      search. An exit status of zero indicates a successful exit.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">!</span> variable holds 
      the PID number of the last command placed in the background. The
      <span class="docEmphasis">&amp;</span> appended to the
      <span class="docEmphasis">sleep</span> command sends the command to the 
      background.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec6">8.1.6 Quoting</h4>
<p class="docText">Quoting is used to protect special metacharacters from 
interpretation. There are three methods of quoting: the backslash, single 
quotes, and double quotes. The characters listed in
<a class="docLink" href="#ch08table08">Table 8.8</a> are special to the shell 
and must be quoted.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table08" class="docTableTitle">Table 8.8. Special Metacharacters Requiring Quotes</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Metacharacter</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">;</span>
    </td>
    <td class="docTableCell" vAlign="top">Command separator </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&amp;</span>
    </td>
    <td class="docTableCell" vAlign="top">Background processing </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">( )</span>
    </td>
    <td class="docTableCell" vAlign="top">Command grouping; creates a subshell
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">{ }</span>
    </td>
    <td class="docTableCell" vAlign="top">Command grouping; does not create a 
    subshell </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">|</span>
    </td>
    <td class="docTableCell" vAlign="top">Pipe </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&lt;</span>
    </td>
    <td class="docTableCell" vAlign="top">Input redirection </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&gt;</span>
    </td>
    <td class="docTableCell" vAlign="top">Output redirection </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">newline</span>
    </td>
    <td class="docTableCell" vAlign="top">Command termination </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">space/tab</span>
    </td>
    <td class="docTableCell" vAlign="top">Word delimiter </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$</span>
    </td>
    <td class="docTableCell" vAlign="top">Variable substitution character </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">* [ ] ?</span>
    </td>
    <td class="docTableCell" vAlign="top">Shell metacharacters for filename 
    expansion </td>
  </tr>
</table>

<p class="docText">Single and double quotes must be matched. Single quotes 
protect special metacharacters, such as $, *, ?, |, &gt;, and &lt;, from 
interpretation. Double quotes also protect special metacharacters from being 
interpreted, but allow variable and command substitution characters (the dollar 
sign and backquotes) to be processed. Single quotes will protect double quotes 
and double quotes will protect single quotes.</p>
<p class="docText">The Bourne shell does not let you know if you have mismatched 
quotes. If running interactively, a secondary prompt appears when quotes are not 
matched. If in a shell script, the file is scanned and if the quote is not 
matched, the shell will attempt to match it with the next available quote; if 
the shell cannot match it with the next available quote, the program aborts and 
the message '<span class="docEmphasis">end of file</span>'
<span class="docEmphasis">unexpected</span> appears on the terminal. Quoting can 
be a real hassle for even the best of shell programmers! See
<a class="docLink" href="Appendix C.htm">Appendix C</a> for 
shell quoting rules.</p>
<p class="docText"><b>The Backslash.</b> The backslash is used to quote (or 
escape) a single character from interpretation. The backslash is not interpreted 
if placed in single quotes. The backslash will protect the dollar sign ($), 
backquotes (<tt>' '</tt>), and the backslash from interpretation if enclosed in 
double quotes.</p>
<h5 id="ch08list31" class="docExampleTitle">Example 8.31 </h5>
<pre>1   $ <span class="docEmphStrong">echo Where are you going\?</span>
    <span class="docEmphasis">Where are you going?</span>

2   $ <span class="docEmphStrong">echo Start on this line and \</span>
    <span class="docEmphStrong">&gt;  go to the next line.</span>
   <span class="docEmphasis">Start on this line and go to the next line.</span>

3   $ <span class="docEmphStrong">echo \\</span>
    \

4   $ <span class="docEmphStrong">echo '\\'</span>
    \\

5   $ <span class="docEmphStrong">echo '\$5.00'</span>
    <span class="docEmphasis">\$5.00</span>

6   $ <span class="docEmphStrong">echo  &quot;\$5.00&quot;</span>
    <span class="docEmphasis">$5.00</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The backslash prevents the shell from performing 
      filename substitution on the question mark.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The backslash escapes the newline, allowing the next 
      line to become part of this line.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Since the backslash itself is a special character, it 
      prevents the backslash following it from interpretation.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The backslash is not interpreted when enclosed in 
      single quotes.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All characters in single quotes are treated literally. 
      The backslash does not serve any purpose here.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When enclosed in double quotes, the backslash prevents 
      the dollar sign from being interpreted for variable substitution.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Single Quotes.</b> Single quotes must be matched. They 
protect all metacharacters from interpretation. To print a single quote, it must 
be enclosed in double quotes or escaped with a backslash.</p>
<h5 id="ch08list32" class="docExampleTitle">Example 8.32 </h5>
<pre>1   $ <span class="docEmphStrong">echo 'hi there</span>
    &gt; <span class="docEmphStrong">how are you?</span>
    &gt; <span class="docEmphStrong">When will this end?</span>
    &gt; <span class="docEmphStrong">When the quote is matched</span>
    &gt; <span class="docEmphStrong">oh'</span>
    <span class="docEmphasis">hi there</span>
    <span class="docEmphasis">how are you?</span>
    <span class="docEmphasis">When will this end?</span>
    <span class="docEmphasis">When the quote is matched</span>
    <span class="docEmphasis">oh</span>

2   $ <span class="docEmphStrong">echo 'Don\'t  you need $5.00?'</span>
    <span class="docEmphasis">Don</span>'<span class="docEmphasis">t you need $5.00?</span>

3   $ <span class="docEmphStrong">echo 'Mother yelled, &quot;Time to eat!&quot;'</span>
    <span class="docEmphasis">Mother yelled, &quot;Time to eat!&quot;</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The single quote is not matched on the line. The Bourne 
      shell produces a secondary prompt. It is waiting for the quote to be 
      matched.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The single quotes protect all metacharacters from 
      interpretation. The apostrophe in <span class="docEmphasis">Don't</span> 
      is escaped with a backslash. Otherwise, it would match the first quote, 
      and the single quote at the end of the string would not have a mate. In 
      this example, the <span class="docEmphasis">$</span> and the
      <span class="docEmphasis">?</span> are protected from the shell and will 
      be treated as literals.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The single quotes protect the double quotes in this 
      string.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Double Quotes.</b> Double quotes must be matched, will 
allow variable and command substitution, and protect any other special 
metacharacters from being interpreted by the shell.</p>
<h5 id="ch08list33" class="docExampleTitle">Example 8.33 </h5>
<pre>1   $ <span class="docEmphStrong">name=Jody</span>
2   $ <span class="docEmphStrong">echo &quot;Hi $name, I'm glad to meet you!&quot;</span>
    <span class="docEmphasis">Hi Jody, I</span>'<span class="docEmphasis">m glad to meet you!</span>

3   $ <span class="docEmphStrong">echo &quot;Hey $name, the time is 'date'&quot;</span>
    <span class="docEmphasis">Hey Jody, the time is Wed Dec 14 14:04:11 PST 1998</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">name</span> is 
      assigned the string <span class="docEmphasis">Jody.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The double quotes surrounding the string will protect 
      all special metacharacters from interpretation, with the exception of
      <span class="docEmphasis">$</span> in <span class="docEmphasis">$name.</span> 
      Variable substitution is performed within double quotes.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Variable substitution and command substitution are both 
      performed when enclosed within double quotes. The variable
      <span class="docEmphasis">name</span> is expanded, and the command in 
      backquotes, <span class="docEmphasis">date,</span> is executed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec7">8.1.7 Command Substitution</h4>
<p class="docText">Command substitution is used when assigning the output of a 
command to a variable or when substituting the output of a command within a 
string. All three shells use backquotes to perform command substitution.<span id="ENB8-3"><a class="docLink" href="#EN8-3"><sup>[3]</sup></a></span></p>
<h5 id="ch08list34" class="docExampleTitle">Example 8.34 </h5>
<pre>1   $ <span class="docEmphStrong">name='nawk –F:  '{print $1}' database'</span>
    $ <span class="docEmphStrong">echo $name</span>
    <span class="docEmphasis">Ebenezer Scrooge</span>

2   $ <span class="docEmphStrong">set 'date'</span>
3   $ <span class="docEmphStrong">echo $*</span>
    <span class="docEmphasis">Fri Oct 19 09:35:21 PDT 2001</span>

4   $ <span class="docEmphStrong">echo  $2 $6</span>
    <span class="docEmphasis">Oct 2001</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">nawk</span> command is 
      enclosed in backquotes. It is executed and its output is assigned to the 
      variable <span class="docEmphasis">name,</span> as a string, and 
      displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command 
      assigns the output of the <span class="docEmphasis">date</span> command to 
      positional parameters. Whitespace separates the list of words into its 
      respective parameters.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">$*</span> variable holds 
      all of the positional parameters. The output of the
      <span class="docEmphasis">date</span> command was stored in the
      <span class="docEmphasis">$*</span> variable. Each parameter is separated 
      by whitespace.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The second and sixth parameters are printed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec8">8.1.8 An Introduction to Functions</h4>
<p class="docText">Although the Bourne shell does not have an
<span class="docEmphasis">alias</span> mechanism for abbreviating commands, it 
does support functions (introduced to the shell in SVR2). Functions are used to 
execute a group of commands with a name. They are like scripts, only more 
efficient. Once defined, they become part of the shell's memory so that when the 
function is called, the shell does not have to read it in from the disk as it 
does with a file. Often functions are used to improve the modularity of a script 
(discussed in the programming section of this chapter). Once defined, they can 
be used again and again. Functions are often defined in the user's 
initialization file, <span class="docEmphasis">.profile.</span> They must be 
defined before they are invoked, and cannot be exported.</p>
<p class="docText"><b>Defining Functions.</b> The function name is followed by a 
set of empty parentheses. The definition of the function consists of a set of 
commands separated by semicolons and enclosed in curly braces. The last command 
is terminated with a semicolon. Spaces around the curly braces are required.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>function_name () { commands ; commands; }
</pre>
    </td>
  </tr>
</table>

<h5 id="ch08list35" class="docExampleTitle">Example 8.35 </h5>
<pre>1   $ <span class="docEmphStrong">greet () { echo &quot;Hello $LOGNAME, today is 'date'; }</span>
2   $ <span class="docEmphStrong">greet</span>
    <span class="docEmphasis">Hello ellie, today is Thu Oct 4 19:56:31 PDT  2001</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The function is called <span class="docEmphasis">greet.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When the <span class="docEmphasis">greet</span> 
      function is invoked, the command(s) enclosed within the curly braces are 
      executed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list36" class="docExampleTitle">Example 8.36 </h5>
<pre>1   $ <span class="docEmphStrong">fun () { pwd; ls; date; }</span>
2   $ <span class="docEmphStrong">fun</span>
    <span class="docEmphasis">/home/jody/ellie/prac</span>
    <span class="docEmphasis">abc    abc123   file1.bak   none      nothing   tmp</span>
    <span class="docEmphasis">abc1   abc2     file2       nonsense  nowhere   touch</span>
    <span class="docEmphasis">abc122 file1    file2.bak noone       one</span>
    <span class="docEmphasis">Sat Feb 24 11:15:48 PST 2001</span>

3   $ <span class="docEmphStrong">welcome () { echo &quot;Hi $1 and $2&quot;; }</span>
4   $ <span class="docEmphStrong">welcome tom joe</span>
    <span class="docEmphasis">Hi tom and joe</span>

<span class="docEmphasis">5</span>   $ <span class="docEmphStrong">set jane nina lizzy</span>
6   $ <span class="docEmphStrong">echo $*</span>
    <span class="docEmphasis">jane nina lizzy</span>

7   $ <span class="docEmphStrong">welcome tom joe</span>
    <span class="docEmphasis">hi tom and joe</span>

8   $ <span class="docEmphStrong">echo  $1 $2</span>
    <span class="docEmphasis">jane nina</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The function <span class="docEmphasis">fun</span> is 
      named and defined. The name is followed by a list of commands enclosed in 
      curly braces. Each command is separated by a semicolon. A space is 
      required after the first curly brace or you will get a syntax error. A 
      function must be defined before it can be used.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The function behaves just like a script when invoked. 
      Each of the commands in the function definition are executed in turn.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">There are two positional parameters used in the 
      function <span class="docEmphasis">welcome.</span> When arguments are 
      given to the function, the positional parameters are assigned those 
      values.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The arguments to the function,
      <span class="docEmphasis">tom</span> and <span class="docEmphasis">joe,</span> 
      are assigned to <span class="docEmphasis">$1</span> and
      <span class="docEmphasis">$2,</span> respectively. The positional 
      parameters in a function are private to the function and will not 
      interfere with any used outside the function.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The positional parameters are set at the command line. 
      These variables have nothing to do with the ones set in the function.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$*</span> displays the values 
      of the currently set positional parameters.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The function <span class="docEmphasis">welcome</span> 
      is called. The values assigned to the positional parameters are
      <span class="docEmphasis">tom</span> and <span class="docEmphasis">joe.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The positional variables assigned at the command line 
      are unaffected by those set in the function.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Listing and Unsetting Functions.</b> To list functions and 
their definitions, use the <span class="docEmphasis">set</span> command. The 
function and its definition will appear in the output, along with the exported 
and local variables. Functions and their definitions are unset with the
<span class="docEmphasis">unset</span> command.</p>
<h4 class="docSection2Title" id="ch08lev2sec9">8.1.9 Standard I/O and Redirection</h4>
<p class="docText">When the shell starts up, it inherits three files:
<span class="docEmphasis">stdin, stdout,</span> and <span class="docEmphasis">
stderr.</span> Standard input normally comes from the keyboard. Standard output 
and standard error normally go to the screen. There are times when you want to 
read input from a file or send output or error to a file. This can be 
accomplished by using I/O redirection. See
<a class="docLink" href="#ch08table09">Table 8.9</a> for a list of redirection 
operators.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table09" class="docTableTitle">Table 8.9. Redirection Operators</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Redirection Operator</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">What 
    It Does</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&lt;</span>
    </td>
    <td class="docTableCell" vAlign="top">Redirect input. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&gt;</span>
    </td>
    <td class="docTableCell" vAlign="top">Redirect output. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&gt;&gt;</span>
    </td>
    <td class="docTableCell" vAlign="top">Append output. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">2&gt;</span>
    </td>
    <td class="docTableCell" vAlign="top">Redirect error. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">1&gt;&amp;2</span>
    </td>
    <td class="docTableCell" vAlign="top">Redirect output to where error is 
    going. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">2&gt;&amp;1</span>
    </td>
    <td class="docTableCell" vAlign="top">Redirect error to where output is 
    going. </td>
  </tr>
</table>

<h5 id="ch08list37" class="docExampleTitle">Example 8.37 </h5>
<pre>1   $ <span class="docEmphStrong">tr '[A-Z]'  '[a-z]' &lt; myfile</span>
                             <span class="docEmphasis"># Redirect  input</span>

2   $ <span class="docEmphStrong">ls &gt; lsfile</span>            <span class="docEmphasis"># Redirect output</span>
    $ cat lsfile
    <span class="docEmphasis">dir1</span>
    <span class="docEmphasis">dir2</span>
    <span class="docEmphasis">file1</span>
    <span class="docEmphasis">file2</span>
    <span class="docEmphasis">file3</span>

3   $ <span class="docEmphStrong">date &gt;&gt; lsfile</span>         <span class="docEmphasis"># Redirect and append otuput</span>
    $ cat lsfile
    <span class="docEmphasis">dir1</span>
    <span class="docEmphasis">dir2</span>
    <span class="docEmphasis">file1</span>
    <span class="docEmphasis">file2</span>
    <span class="docEmphasis">file3</span>
    <span class="docEmphasis">Mon Sept 17 12:57:22 PDT 2001</span>


4   $ <span class="docEmphStrong">cc prog.c 2&gt; errfile</span>   <span class="docEmphasis">Redirect error</span>

5   $ <span class="docEmphStrong">find . –name \*.c –print &gt; foundit 2&gt; /dev/null</span>
    <span class="docEmphasis"># Redirect output to foundit, and error to /dev/null.</span>

6   $ <span class="docEmphStrong">find . –name \*.c –print &gt; foundit 2&gt;&amp;1</span>
    <span class="docEmphasis"># Redirect output and send standard error to where output is going</span>

7   <span class="docEmphStrong">$ echo &quot;File needs an argument&quot; 1&gt;&amp;2</span>
    <span class="docEmphasis"># Send standard output to error</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Instead of getting input from the keyboard, standard 
      input is redirected from the file <span class="docEmphasis">myfile</span> 
      to the UNIX <span class="docEmphasis">tr</span> command. All uppercase 
      letters are converted to lowercase letters.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Instead of sending output to the screen, the
      <span class="docEmphasis">ls</span> command redirects its output to the 
      file <span class="docEmphasis">lsfile.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of the <span class="docEmphasis">date</span> 
      command is redirected and appended to <span class="docEmphasis">lsfile.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The file <span class="docEmphasis">prog.c</span> is 
      compiled. If the compile fails, the standard error is redirected to the 
      file <span class="docEmphasis">errfile.</span> Now you can take your error 
      file to the local guru for an explanation (of sorts)!</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">find</span> command 
      starts searching in the current working directory for filenames ending in
      <span class="docEmphasis">.c,</span> and prints the filenames to a file 
      named <span class="docEmphasis">foundit.</span> Errors from the
      <span class="docEmphasis">find</span> command are sent to
      <span class="docEmphasis">/dev/null.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">find</span> command 
      starts searching in the current working directory for filenames ending in
      <span class="docEmphasis">.c,</span> and prints the filenames to a file 
      named <span class="docEmphasis">foundit.</span> The errors are also sent 
      to <span class="docEmphasis">foundit.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">echo</span> command sends 
      its message to standard error. Its standard output is merged with standard 
      error.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
exec</span> Command and Redirection.</span> The <span class="docEmphasis">exec</span> 
command can be used to replace the current program with a new one without 
starting a new process. Standard output or input can be changed with the
<span class="docEmphasis">exec</span> command without creating a subshell (see
<a class="docLink" href="#ch08table10">Table 8.10</a>). If a file is opened with
<span class="docEmphasis">exec,</span> subsequent <span class="docEmphasis">read</span> 
commands will move the file pointer down the file a line at a time until the end 
of the file. The file must be closed to start reading from the beginning again. 
However, if using UNIX utilities such as <span class="docEmphasis">cat</span> 
and <span class="docEmphasis">sort,</span> the operating system closes the file 
after each command has completed. For examples on how to use
<span class="docEmphasis">exec</span> commands in scripts, see &quot;<a class="docLink" href="#ch08lev2sec18">Looping 
Commands</a>&quot;.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table10" class="docTableTitle">Table 8.10. The <span class="docEmphasis">exec</span> 
  Command</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphStrong">exec</span>
    <span class="docEmphBoldItalic">Command</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">What 
    It Does</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">exec ls</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">ls</span> 
    will execute in place of the shell. When <span class="docEmphasis">ls</span> 
    is finished, the shell in which it was started does not return. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">exec &lt; filea</span>
    </td>
    <td class="docTableCell" vAlign="top">Open <span class="docEmphasis">filea</span> 
    for reading standard input. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">exec &gt; filex</span>
    </td>
    <td class="docTableCell" vAlign="top">Open <span class="docEmphasis">filex</span> 
    for writing standard output. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">exec 3&lt; 
    datfile</span> </td>
    <td class="docTableCell" vAlign="top">Open <span class="docEmphasis">datfile</span> 
    as file descriptor 3 for reading input. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">sort &lt;&amp;3</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Datfile</span> 
    is sorted. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">exec 4&gt;newfile</span>
    </td>
    <td class="docTableCell" vAlign="top">Open <span class="docEmphasis">newfile</span> 
    as file descriptor (fd) 4 for writing. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">ls &gt;&amp;4</span>
    </td>
    <td class="docTableCell" vAlign="top">Output of <span class="docEmphasis">ls</span> 
    is redirected to <span class="docEmphasis">newfile.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">exec 5&lt;&amp;4</span>
    </td>
    <td class="docTableCell" vAlign="top">Make fd <span class="docEmphasis">5</span> 
    a copy of fd <span class="docEmphasis">4.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">exec 3&lt;&amp;–</span>
    </td>
    <td class="docTableCell" vAlign="top">Close fd <span class="docEmphasis">3.</span>
    </td>
  </tr>
</table>

<h5 id="ch08list38" class="docExampleTitle">Example 8.38 </h5>
<pre>1   $ <span class="docEmphStrong">exec date</span>
    <span class="docEmphasis">Sun Oct 14 10:07:34  PDT 2001</span>
     <span class="docEmphasis">&lt;Login prompt appears if you are in your login shell &gt;</span>
2   $ <span class="docEmphStrong">exec &gt; temp</span>
    $ <span class="docEmphStrong">ls</span>
    $ <span class="docEmphStrong">pwd</span>
    $ <span class="docEmphStrong">echo Hello</span>
3   $ <span class="docEmphStrong">exec &gt; /dev/tty</span>
4   $ <span class="docEmphStrong">echo Hello</span>
    <span class="docEmphasis">Hello</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">exec</span> command 
      executes the <span class="docEmphasis">date</span> command in the current 
      shell (it does not fork a child shell). Since the
      <span class="docEmphasis">date</span> command is executed in place of the 
      current shell, when the <span class="docEmphasis">date</span> command 
      exits, the shell terminates. If a Bourne shell had been started from the C 
      shell, the Bourne shell would exit and the C shell prompt would appear. If 
      you are in your login shell when you try this, you will be logged out. If 
      you are working interactively in a shell window, the window exits.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">exec</span> command opens 
      standard output for the current shell to the <span class="docEmphasis">
      temp</span> file. Output from <span class="docEmphasis">ls, pwd,</span> 
      and <span class="docEmphasis">echo</span> will no longer go to the screen, 
      but to <span class="docEmphasis">temp.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">exec</span> command 
      reopens standard output to the terminal. Now, output will go to the screen 
      as shown in line 4.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Standard output has been directed back to the terminal 
      (<span class="docEmphasis">/dev/tty</span>).</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list39" class="docExampleTitle">Example 8.39 </h5>
<pre>1   $ <span class="docEmphStrong">cat doit</span>
    <span class="docEmphasis">pwd</span>
    <span class="docEmphasis">echo hello</span>
    <span class="docEmphasis">date</span>
2   $ <span class="docEmphStrong">exec &lt; doit</span>
    <span class="docEmphasis">/home/jody/ellie/shell</span>
    <span class="docEmphasis">hello</span>
    <span class="docEmphasis">Sun Oct 14 10:07:34  PDT 2001</span>
3   <span class="docEmphasis">%</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The contents of a file called <span class="docEmphasis">
      doit</span> are displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">exec</span> command opens 
      standard input to the file called <span class="docEmphasis">doit.</span> 
      Input is read from the file instead of from the keyboard. The commands 
      from the file <span class="docEmphasis">doit</span> are executed in place 
      of the current shell. When the last command exits, so does the shell. See
      <a class="docLink" href="#ch08fig02">Figure 8.2</a>.</p>
      <center>
      <h5 id="ch08fig02" class="docFigureTitle">Figure 8.2. The <span class="docEmphasis">exec</span> 
      command.</h5>
      <p class="docText">
      <img alt="graphics/08fig02.gif" src="08fig02.gif" border="0" width="500" height="207"></p>
      </center></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The Bourne shell exited when the
      <span class="docEmphasis">exec</span> command completed. The C shell 
      prompt appeared. It was the parent shell. If you had been in your login 
      shell when the <span class="docEmphasis">exec</span> finished, you would 
      be logged out; if in a window, the window would have disappeared.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list40" class="docExampleTitle">Example 8.40 </h5>
<pre>1   $ <span class="docEmphStrong">exec 3&gt; filex</span>
2   $ <span class="docEmphStrong">who &gt;&amp; 3</span>
3   $ <span class="docEmphStrong">date &gt;&amp; 3</span>
4   $ <span class="docEmphStrong">exec 3&gt;&amp;-</span>
5   $ <span class="docEmphStrong">exec 3&lt; filex</span>
6   $ <span class="docEmphStrong">cat &lt;&amp;3</span>
    <span class="docEmphasis">ellie  console  Oct 7     09:53</span>
    <span class="docEmphasis">ellie</span>  <span class="docEmphasis">ttyp0    Oct 7     09:54</span>
    <span class="docEmphasis">ellie  ttyp1    Oct 7     09:54</span>
    <span class="docEmphasis">ellie  ttyp2    Oct 11    15:42</span>
    <span class="docEmphasis">Sun Oct 14 13:31:31  PDT 2001</span>
7   $ <span class="docEmphStrong">exec 3&lt;&amp;-</span>
8   $ <span class="docEmphStrong">date &gt;&amp; 3</span>
    <span class="docEmphasis">Sun Oct 14 13:41:14  PDT 2001</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">File descriptor <span class="docEmphasis">3</span> (fd
      <span class="docEmphasis">3</span>) is assigned to
      <span class="docEmphasis">filex</span> and opened for redirection of 
      output. See <a class="docLink" href="#ch08fig03">Figure 8.3</a>.</p>
      <center>
      <h5 id="ch08fig03" class="docFigureTitle">Figure 8.3. <span class="docEmphasis">exec</span> 
      and file descriptors.</h5>
      <p class="docText">
      <img alt="graphics/08fig03.gif" src="08fig03.gif" border="0" width="500" height="383"></p>
      </center></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of the <span class="docEmphasis">who</span> 
      command is sent to fd <span class="docEmphasis">3, filex.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of the <span class="docEmphasis">date</span> 
      command is sent to fd <span class="docEmphasis">3;</span>
      <span class="docEmphasis">filex</span> is already opened, so the output is 
      appended to <span class="docEmphasis">filex.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Fd <span class="docEmphasis">3</span> is closed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">exec</span> command opens 
      fd <span class="docEmphasis">3</span> for reading input. Input will be 
      redirected from <span class="docEmphasis">filex.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">cat</span> program reads 
      from fd <span class="docEmphasis">3,</span> assigned to
      <span class="docEmphasis">filex.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">exec</span> command 
      closes fd <span class="docEmphasis">3.</span> (Actually, the operating 
      system will close the file once end of file is reached.)</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When attempting to send the output of the
      <span class="docEmphasis">date</span> command to fd
      <span class="docEmphasis">3,</span> the output goes to the screen, since 
      the file descriptor was closed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec10">8.1.10 Pipes</h4>
<p class="docText">A <span class="docEmphasis">pipe</span> takes the output from 
the command on the left-hand side of the pipe symbol and sends it to the input 
of the command on the right-hand side of the pipe symbol. A pipeline can consist 
of more than one pipe.</p>
<p class="docText">The purpose of the next three commands is to count the number 
of people logged on (<span class="docEmphasis">who</span>), save the output of 
the command in a file (<span class="docEmphasis">tmp</span>), use the
<span class="docEmphasis">wc –l</span> to count the number of lines in the
<span class="docEmphasis">tmp</span> file (<span class="docEmphasis">wc –l</span>), 
and then remove the <span class="docEmphasis">tmp</span> file (i.e., find the 
number of people logged on). See <a class="docLink" href="#ch08fig04">Figures 
8.4</a> and <a class="docLink" href="#ch08fig05">8.5</a>.</p>
<center>
<h5 id="ch08fig04" class="docFigureTitle">Figure 8.4. The pipe.</h5>
<p class="docText">
<img alt="graphics/08fig04.gif" src="08fig04.gif" border="0" width="500" height="188"></p>
</center><center>
<h5 id="ch08fig05" class="docFigureTitle">Figure 8.5. Multiple pipes (filter).</h5>
<p class="docText">
<img alt="graphics/08fig05.gif" src="08fig05.gif" border="0" width="500" height="134"></p>
</center>
<h5 id="ch08list41" class="docExampleTitle">Example 8.41 </h5>
<pre>1   $ <span class="docEmphStrong">who &gt; tmp</span>
2   $ <span class="docEmphStrong">wc –l tmp</span>
    <span class="docEmphasis">4 tmp</span>
3   $ <span class="docEmphStrong">rm tmp</span>

# <span class="docEmphasis">Using a pipe saves disk space and time.</span>

4   $ <span class="docEmphStrong">who | wc –l</span>
    <span class="docEmphasis">4</span>


5   $ <span class="docEmphStrong">du . | sort –n | sed –n '$p'</span>
    <span class="docEmphasis">72388   /home/jody/ellie</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of the <span class="docEmphasis">who</span> 
      command is redirected to the <span class="docEmphasis">tmp</span> file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">wc –l</span> command 
      displays the number of lines in <span class="docEmphasis">tmp.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">tmp</span> file is 
      removed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">With the pipe facility, you can perform all three of 
      the preceding steps in one step. The output of the
      <span class="docEmphasis">who</span> command is sent to an anonymous 
      kernel buffer; the <span class="docEmphasis">wc –l</span> command reads 
      from the buffer and sends its output to the screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of the <span class="docEmphasis">du</span> 
      command, the number of disk blocks used per directory, is piped to the
      <span class="docEmphasis">sort</span> command and sorted numerically. It 
      is then piped to the <span class="docEmphasis">sed</span> command, which 
      prints the last line of the output it receives.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec11">8.1.11 The <span class="docEmphasis">here document</span> 
and Redirecting Input</h4>
<p class="docText">The <span class="docEmphasis">here document</span> accepts 
inline text for a program expecting input, such as <span class="docEmphasis">
mail, sort,</span> or <span class="docEmphasis">cat,</span> until a user-defined 
terminator is reached. It is often used in shell scripts for creating menus. The 
command receiving the input is appended with a <span class="docEmphasis">&lt;&lt;</span> 
symbol, followed by a user-defined word or symbol, and a newline. The next lines 
of text will be the lines of input to be sent to the command. The input is 
terminated when the user-defined word or symbol is then placed on a line by 
itself in the leftmost column (it cannot have spaces surrounding it). The word 
is used in place of Control-D to stop the program from reading input.</p>
<p class="docText">If the terminator is preceded by the
<span class="docEmphasis">&lt;&lt;–</span> operator, leading tabs, and only tabs, may 
precede the final terminator. The user-defined terminating word or symbol must 
match exactly from &quot;here&quot; to &quot;here.&quot; The following examples illustrate the use 
of the <span class="docEmphasis">here document</span> at the command line to 
demonstrate the syntax. It is much more practical to use them in scripts.</p>
<h5 id="ch08list42" class="docExampleTitle">Example 8.42 </h5>
<p class="docText">
<img alt="graphics/08prfig01.gif" src="08prfig01.gif" border="0" width="500" height="155"></p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The UNIX <span class="docEmphasis">cat</span> program 
      will accept input until the word <span class="docEmphasis">FINISH</span> 
      appears on a line by itself.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A secondary prompt appears. The following text is input 
      for the <span class="docEmphasis">cat</span> command. Variable 
      substitution is performed within the <span class="docEmphasis">here 
      document.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Command substitution, <span class="docEmphasis"><tt>'</tt>date<tt>'</tt></span>, 
      is performed within the <span class="docEmphasis">here document.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user-defined terminator <span class="docEmphasis">
      FINISH</span> marks the end of input for the <span class="docEmphasis">cat</span> 
      program. It cannot have any spaces before or after it and is on a line by 
      itself.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output from the <span class="docEmphasis">cat</span> 
      program is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The shell prompt reappears.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list43" class="docExampleTitle">Example 8.43 </h5>
<pre>1   $ <span class="docEmphStrong">cat &lt;&lt;– DONE</span>
    &gt;   Hello there
    &gt;   What's up?
    &gt;   Bye now The time is 'date'.
2   &gt;   <span class="docEmphStrong">DONE</span>
    <span class="docEmphasis">Hello there</span>
    <span class="docEmphasis">What</span>'<span class="docEmphasis">s up?</span>
    <span class="docEmphasis">Bye now The time is Thu Feb 8 19:48:23 PST 2001.</span>
    $
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">cat</span> program 
      accepts input until <span class="docEmphasis">DONE</span> appears on a 
      line by itself. The <span class="docEmphasis">&lt;&lt;–</span> operator allows 
      the input and final terminator to be preceded by one or more tabs.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The final matching terminator,
      <span class="docEmphasis">DONE,</span> is preceded by a tab. The output of 
      the <span class="docEmphasis">cat</span> program is displayed on the 
      screen.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch08lev1sec2">8.2 Programming with the Bourne Shell</h3>
<h4 class="docSection2Title" id="ch08lev2sec12">8.2.1 The Steps in Creating a Shell Script</h4>
<p class="docText">A shell script is normally written in an editor and consists 
of commands interspersed with comments. Comments are preceded by a pound sign 
and consist of text used to document what is going on.</p>
<p class="docText"><b>The First Line.</b> The first line at the top left corner 
of the script will indicate the program that will be executing the lines in the 
script. This line is commonly written as</p>
<pre>#!/bin/sh
</pre>
<p class="docText">The <span class="docEmphasis">#!</span> is called a magic 
number and is used by the kernel to identify the program that should be 
interpreting the lines in the script. This line must be the top line of your 
script.</p>
<p class="docText"><b>Comments.</b> <span class="docEmphasis">Comments</span> 
are lines preceded by a pound sign (#) and can be on a line by themselves or on 
a line following a script command. They are used to document your script. It is 
sometimes difficult to understand what the script is supposed to do if it is not 
commented. Although comments are important, they are often too sparse or not 
used at all. Try to get used to commenting what you are doing not only for 
someone else, but also for yourself. Two days from now you may not recall 
exactly what you were trying to do.</p>
<p class="docText"><b>Executable Statements and Bourne Shell Constructs.</b> A 
Bourne shell program consists of a combination of UNIX commands, Bourne shell 
commands, programming constructs, and comments.</p>
<p class="docText"><b>Making the Script Executable.</b> When you create a file, 
it is not given the execute permission. You need this permission to run your 
script. Use the <span class="docEmphasis">chmod</span> command to turn on the 
execute permission.</p>
<h5 id="ch08list44" class="docExampleTitle">Example 8.44 </h5>
<pre>1   $ <span class="docEmphStrong">chmod +x myscript</span>
2   $ <span class="docEmphStrong">ls -lF  myscript</span>
    <span class="docEmphasis">-rwxr-xr-x    1  ellie   0 Jul  13:00 myscript*</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">chmod</span> command is 
      used to turn on the execute permission for the user, group, and others.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of the <span class="docEmphasis">ls</span> 
      command indicates that all users have execute permission on the
      <span class="docEmphasis">myscript</span> file. The asterisk at the end of 
      the filename also indicates that this is an executable program.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>A Scripting Session.</b> In the following example, the 
user will create a script in the editor. After saving the file, the execute 
permissions are turned on, and the script is executed. If there are errors in 
the program, the shell will respond immediately.</p>
<h5 id="ch08list45" class="docExampleTitle">Example 8.45 </h5>
<pre>(The Script)
% <span class="docEmphStrong">cat greetings</span>
1   #!/bin/sh
2   <span class="docEmphasis"># This is the first Bourne shell program of the day.</span>
    <span class="docEmphasis"># Scriptname: greetings</span>
    <span class="docEmphasis"># Written by:  Barbara Born</span>
3   echo &quot;Hello $LOGNAME, it's nice talking to you.&quot;
4   echo &quot;Your present working directory is 'pwd'.&quot;
    echo &quot;You are working on a machine called 'uname -n'.&quot;
    echo &quot;Here is a list of your files.&quot;
5   ls      <span class="docEmphasis"># List files in the present working directory</span>
6   echo  &quot;Bye for now $LOGNAME. The time is 'date +%T'!&quot;

(The Command Line)
    $ <span class="docEmphStrong">chmod +x greetings</span>
    $ <span class="docEmphStrong">greetings</span>
3   <span class="docEmphasis">Hello barbara, it</span>'<span class="docEmphasis">s nice talking to you.</span>
4   <span class="docEmphasis">Your present working directory is /home/lion/barbara/prog</span>
    <span class="docEmphasis">You are working on a machine called lion.</span>
    <span class="docEmphasis">Here is a list of your files.</span>
5   <span class="docEmphasis">Afile      cplus   letter          prac</span>
    <span class="docEmphasis">Answerbook cprog   library  prac1</span>
    <span class="docEmphasis">bourne     joke    notes    perl5</span>
<span class="docEmphasis">6   Bye for now barbara.  The time is 18:05:07!</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The first line of the script, <span class="docEmphasis">
      #!/bin/sh,</span> lets the kernel know what interpreter will execute the 
      lines in this program, in this case the sh (Bourne shell) interpreter.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The comments are nonexecutable lines preceded by a 
      pound sign. They can be on a line by themselves or appended to a line 
      after a command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After variable substitution is performed by the shell, 
      the <span class="docEmphasis">echo</span> command displays the line on the 
      screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After command substitution is performed by the shell, 
      the <span class="docEmphasis">echo</span> command displays the line on the 
      screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">ls</span> command is 
      executed. The comment will be ignored by the shell.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">echo</span> command 
      displays the string enclosed within double quotes. Variables and command 
      substitution (backquotes) are expanded when placed within double quotes. 
      In this case, the quotes were really not necessary.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec13">8.2.2 Reading User Input</h4>
<p class="docText">The <span class="docEmphasis">read</span> command is a 
built-in command used to read input from the terminal or from a file (see
<a class="docLink" href="#ch08table11">Table 8.11</a>). The
<span class="docEmphasis">read</span> command takes a line of input until a 
newline is reached. The newline at the end of a line will be translated into a 
null byte when read. You can also use the <span class="docEmphasis">read</span> 
command to cause a program to stop until the user enters a carriage return. To 
see how the <span class="docEmphasis">read</span> command is most effectively 
used for reading lines of input from a file, see &quot;<a class="docLink" href="#ch08lev2sec18">Looping 
Commands</a>&quot;.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table11" class="docTableTitle">Table 8.11. The <span class="docEmphasis">read</span> 
  Command</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Format</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">read answer</span>
    </td>
    <td class="docTableCell" vAlign="top">Reads a line from standard input and 
    assigns it to the variable <span class="docEmphasis">answer.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">read first 
    last</span> </td>
    <td class="docTableCell" vAlign="top">Reads a line from standard input to 
    the first whitespace or newline, putting the first word typed into the 
    variable <span class="docEmphasis">first</span> and the rest of the line 
    into the variable <span class="docEmphasis">last.</span> </td>
  </tr>
</table>

<h5 id="ch08list46" class="docExampleTitle">Example 8.46 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat nosy</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: nosy</span>
    echo &quot;Are you happy? \c&quot;
1   <span class="docEmphStrong">read answer</span>
    echo &quot;$answer is the right response.&quot;
    echo &quot;What is your full name? \c&quot;
2   <span class="docEmphStrong">read first middle last</span>
    echo &quot;Hello  $first&quot;
------------------------------------------------------------
(The Output)
    $ <span class="docEmphStrong">nosy</span>
    <span class="docEmphasis">Are you happy?</span> <span class="docEmphBoldItalic">Yes</span>
1   <span class="docEmphasis">Yes is the right response.</span>
2   <span class="docEmphasis">What is your full name?</span> <span class="docEmphBoldItalic">Jon Jake Jones</span>
    <span class="docEmphasis">Hello Jon</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">read</span> command 
      accepts a line of user input and assigns the input to the variable
      <span class="docEmphasis">answer.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">read</span> command 
      accepts input from the user and assigns the first word of input to the 
      variable <span class="docEmphasis">first,</span> the second word of input 
      to the variable <span class="docEmphasis">middle,</span> and all the rest 
      of the words up to the end of the line to the variable
      <span class="docEmphasis">last.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list47" class="docExampleTitle">Example 8.47 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat printer_check</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: printer_check</span>
    <span class="docEmphasis"># Script to clear a hung up printer for SVR4</span>
1   if [ $LOGNAME != root ]
    then
       echo &quot;Must have root privileges to run this program&quot;
       exit 1
    fi
2   cat &lt;&lt; EOF
    Warning: All jobs in the printer queue will be removed.
    Please turn off the printer now. Press return when you
    are ready to continue. Otherwise press Control C.
    EOF
3   <span class="docEmphStrong">read ANYTHING</span>      <span class="docEmphasis"># Wait until the user turns off the printer</span>
    echo
4   /etc/init.d/lp stop       <span class="docEmphasis"># Stop the printer</span>
5   rm -f /var/spool/lp/SCHEDLOCK /var/spool/lp/temp*
    echo
    echo &quot;Please turn the printer on now.&quot;
6   echo &quot;Press return to continue&quot;
7   <span class="docEmphStrong">read ANYTHING</span>            <span class="docEmphasis"># Stall until the user turns the printer</span>
                             <span class="docEmphasis"># back on</span>
    echo                     <span class="docEmphasis"># A blank line is printed</span>
8   /etc/init.d/lp start     <span class="docEmphasis"># Start the printer</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Checks to see if user is <span class="docEmphasis">
      root.</span> If not, sends an error and exits.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Creates a <span class="docEmphasis">here document.</span> 
      Warning message is displayed on the screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">read</span> command waits 
      for user input. When the user presses Enter, the variable
      <span class="docEmphasis">ANYTHING</span> accepts whatever is typed. The 
      variable is not used for anything. The <span class="docEmphasis">read</span> 
      in this case is used to wait until the user turns off the printer, comes 
      back, and presses Enter.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">lp</span> program stops 
      the printer daemon.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">SCHEDLOCK</span> file 
      must be removed before the scheduler can start again, as well as temporary 
      files in <span class="docEmphasis">/var/spool/lp.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked to press Return when ready.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Whatever the user types is read into the variable
      <span class="docEmphasis">ANYTHING,</span> and when
      <span class="docEmphasis">Enter</span> is pressed, the program will resume 
      execution.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">lp</span> program starts 
      the print daemons.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec14">8.2.3 Arithmetic</h4>
<p class="docText">Arithmetic is not built into the Bourne shell. If you need to 
perform simple integer arithmetic calculations, the UNIX
<span class="docEmphasis">expr</span> command is most commonly used in Bourne 
shell scripts. For floating point arithmetic, the <span class="docEmphasis">awk</span> 
or <span class="docEmphasis">bc</span> programs can be used. Because arithmetic 
was not built in, the performance of the shell is degraded when iterating 
through loops a number of times. Each time a counter is incremented or 
decremented in a looping mechanism, it is necessary to fork another process to 
handle the arithmetic.</p>
<p class="docText"><span class="docEmphStrong">Integer Arithmetic and the
<span class="docEmphasis">expr</span> Command.</span> The
<span class="docEmphasis">expr</span> command is an expression-handling program. 
When used to evaluate arithmetic expressions, it can perform simple integer 
operations (see <a class="docLink" href="#ch08table12">Table 8.12</a>). Each of 
its arguments must be separated by a space. The +, -, *, /, and % operators are 
supported, and the normal programming rules of associativity and precedence 
apply.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table12" class="docTableTitle">Table 8.12. The <span class="docEmphasis">expr</span> 
  Command Arithmetic Operators</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Operator</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Function</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">* / % </td>
    <td class="docTableCell" vAlign="top">Multiplication, division, modulus.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">+ - </td>
    <td class="docTableCell" vAlign="top">Addition, substraction. </td>
  </tr>
</table>

<h5 id="ch08list48" class="docExampleTitle">Example 8.48 </h5>
<pre>1   $ <span class="docEmphStrong">expr 1 + 4</span>
    <span class="docEmphasis">5</span>

2   $ <span class="docEmphStrong">expr 1+4</span>
    <span class="docEmphasis">1+4</span>

3   $ <span class="docEmphStrong">expr 5 + 9  /  3</span>
    <span class="docEmphasis">8</span>

4   $ <span class="docEmphStrong">expr 5 * 4</span>
    <span class="docEmphasis">expr: syntax error</span>

5   $ <span class="docEmphStrong">expr 5 \* 4  -  2</span>
    <span class="docEmphasis">18</span>

6   $ <span class="docEmphStrong">expr 11 % 3</span>
    <span class="docEmphasis">2</span>

7   $ <span class="docEmphStrong">num=1</span>
    $ <span class="docEmphStrong">num='expr $num + 1'</span>
    $ <span class="docEmphStrong">echo $num</span>
    <span class="docEmphasis">2</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">expr</span> command 
      evaluates the expression. The two numbers are added.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Since there are no spaces between the operator, the 
      expression is evaluated as a string.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Addition and division are combined. The division is 
      performed first and then the addition.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The asterisk (<span class="docEmphasis">*</span>) is 
      evaluated by the shell as one of its wildcards, causing the
      <span class="docEmphasis">expr</span> command to fail.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The asterisk (<span class="docEmphasis">*</span>) is 
      escaped with a backslash to prevent shell interpretation. The
      <span class="docEmphasis">expr</span> command performs arithmetic.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The modulus operator (<span class="docEmphasis">%</span>) 
      returns the remainder after division is performed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">num</span> is 
      assigned <span class="docEmphasis">1.</span> The <span class="docEmphasis">
      expr</span> command adds one to the value of the variable and assigns the 
      result to <span class="docEmphasis">num.</span> The value of
      <span class="docEmphasis">num</span> is echoed to the screen.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Floating Point Arithmetic.</b> The
<span class="docEmphasis">bc,</span> <span class="docEmphasis">awk,</span> and
<span class="docEmphasis">nawk</span> utilities are useful if you need to 
perform more complex calculations.</p>
<h5 id="ch08list49" class="docExampleTitle">Example 8.49 </h5>
<pre>(The Command Line)
1   $ <span class="docEmphStrong">n='echo &quot;scale=3; 13 / 2&quot; | bc'</span>
    $ <span class="docEmphStrong">echo $n</span>
    <span class="docEmphasis">6.500</span>

2   <span class="docEmphStrong">product='nawk -v x=2.45 -v y=3.123 'BEGIN{printf &quot;%.2f\n&quot;,x*y}''</span>
    $ <span class="docEmphStrong">echo $product</span>
    <span class="docEmphasis">7.65</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of the <span class="docEmphasis">echo</span> 
      command is piped to the <span class="docEmphasis">bc</span> program. The 
      scale is set to <span class="docEmphasis">3,</span> which is the number of 
      significant digits to the right of the decimal point that will be printed. 
      The calculation is to divide <span class="docEmphasis">13</span> by
      <span class="docEmphasis">2.</span> The entire pipeline is enclosed in 
      backquotes. Command substitution will be performed and the output assigned 
      to the variable <span class="docEmphasis">n.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">nawk</span> program gets 
      its values from the argument list passed in at the command line,
      <span class="docEmphasis">x=2.45</span> <span class="docEmphasis">y=3.123.</span> 
      (The <span class="docEmphasis">–v</span> switch works with
      <span class="docEmphasis">nawk,</span> not <span class="docEmphasis">awk.</span>) 
      After the numbers are multiplied, the <span class="docEmphasis">printf</span> 
      function formats and prints the result with a precision of two places to 
      the right of the decimal point. The output is assigned to the variable
      <span class="docEmphasis">product.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec15">8.2.4 Positional Parameters and Command Line 
Arguments</h4>
<p class="docText">Information can be passed into a script via the command line. 
Each word (separated by whitespace) following the script name is called an 
argument.</p>
<p class="docText">Command line arguments can be referenced in scripts with 
positional parameters; for example, <span class="docEmphasis">$1</span> for the 
first argument, <span class="docEmphasis">$2</span> for the second argument,
<span class="docEmphasis">$3</span> for the third argument, and so on. The
<span class="docEmphasis">$#</span> variable is used to test for the number of 
parameters, and <span class="docEmphasis">$*</span> is used to display all of 
them. Positional parameters can be set or reset with the
<span class="docEmphasis">set</span> command. When the <span class="docEmphasis">
set</span> command is used, any positional parameters previously set are cleared 
out. See <a class="docLink" href="#ch08table13">Table 8.13</a>.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table13" class="docTableTitle">Table 8.13. Positional Parameters</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Positional Parameter</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">What 
    It References</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$0</span>
    </td>
    <td class="docTableCell" vAlign="top">References the name of the script.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$#</span>
    </td>
    <td class="docTableCell" vAlign="top">Holds the value of the number of 
    positional parameters. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$*</span>
    </td>
    <td class="docTableCell" vAlign="top">Lists all of the positional 
    parameters. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$@</span>
    </td>
    <td class="docTableCell" vAlign="top">Means the same as
    <span class="docEmphasis">$*,</span> except when enclosed in double quotes.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&quot;$*&quot;</span>
    </td>
    <td class="docTableCell" vAlign="top">Expands to a single argument (e.g., &quot;<span class="docEmphasis">$1 
    $2 $3</span>&quot;). </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&quot;$@&quot;</span>
    </td>
    <td class="docTableCell" vAlign="top">Expands to separate arguments (e.g., &quot;<span class="docEmphasis">$1</span>&quot; 
    &quot;<span class="docEmphasis">$2</span>&quot; <span class="docEmphasis">3</span>&quot;).
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$1 … $9</span>
    </td>
    <td class="docTableCell" vAlign="top">References up to nine positional 
    parameters. </td>
  </tr>
</table>

<h5 id="ch08list50" class="docExampleTitle">Example 8.50 </h5>
<pre>(The Script)
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: greetings</span>
    echo &quot;This script is called $0.&quot;
1   <span class="docEmphStrong">echo &quot;$0  $1 and $2&quot;</span>
    echo &quot;The number of positional parameters is $#&quot;
    -----------------------------------------------------------
(The Command Line)
    $ <span class="docEmphStrong">chmod +x greetings</span>
2   $ <span class="docEmphStrong">greetings</span>
    <span class="docEmphasis">This script is called  greetings.</span>
    <span class="docEmphasis">greetings  and</span>
    <span class="docEmphasis">The number of positional paramters is</span>

3   $ <span class="docEmphStrong">greetings Tommy</span>
    <span class="docEmphasis">This script is called greetings.</span>
    <span class="docEmphasis">greetings Tommy and</span>
    <span class="docEmphasis">The number of positional parameters is 1</span>

4   $ <span class="docEmphStrong">greetings Tommy  Kimberly</span>
    <span class="docEmphasis">This script is called greetings.</span>
    <span class="docEmphasis">greetings Tommy and Kimberly</span>
    <span class="docEmphasis">The number of positional parameters is 2</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">In the script <span class="docEmphasis">greetings,</span> 
      positional parameter <span class="docEmphasis">$0</span> references the 
      script name, <span class="docEmphasis">$1</span> the first command line 
      agreement, and <span class="docEmphasis">$2</span> the second command line 
      agreement.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">greetings</span> script 
      is executed without any arguments passed. The output illustrates that the 
      script is called <span class="docEmphasis">greetings</span> (<span class="docEmphasis">$0</span> 
      in the script) and that <span class="docEmphasis">$1</span> and
      <span class="docEmphasis">$2</span> were never assigned anything; 
      therefore, their values are null and nothing is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This time, one argument is passed,
      <span class="docEmphasis">Tommy.</span> <span class="docEmphasis">Tommy</span> 
      is assigned to positional parameter <span class="docEmphasis">1.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Two arguments are entered, <span class="docEmphasis">
      Tommy</span> and <span class="docEmphasis">Kimberly. Tommy</span> is 
      assigned to <span class="docEmphasis">$1</span> and
      <span class="docEmphasis">Kimberly</span> is assigned to
      <span class="docEmphasis">$2.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">set</span> 
Command and Positional Parameters.</span> The <span class="docEmphasis">set</span> 
command with arguments resets the positional parameters.<span id="ENB8-4"><a class="docLink" href="#EN8-4"><sup>[4]</sup></a></span> 
Once reset, the old parameter list is lost. To unset all of the positional 
parameters, use <span class="docEmphasis">set – –.</span>
<span class="docEmphasis">$0</span> is always the name of the script. </p>

<h5 id="ch08list51" class="docExampleTitle">Example 8.51 </h5>
<pre>(The Script)
    $ <span class="docEmphStrong">cat args</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: args</span>
    <span class="docEmphasis"># Script to test command line arguments</span>
1   echo The name of this script is <span class="docEmphStrong">$0.</span>
2   echo The arguments are <span class="docEmphStrong">$*.</span>
3   echo The first argument is <span class="docEmphStrong">$1.</span>
4   echo The second argument is <span class="docEmphStrong">$2.</span>
5   echo The number of arguments is <span class="docEmphStrong">$#.</span>
6   <span class="docEmphStrong">oldargs=$*</span>             <span class="docEmphasis"># Save parameters passed in from the</span>
                           <span class="docEmphasis"># command line</span>
7   <span class="docEmphStrong">set Jake Nicky Scott</span>   <span class="docEmphasis"># Reset the positional parameters</span>
8   echo All the positional parameters are <span class="docEmphStrong">$*.</span>
9   echo The number of postional parameters is <span class="docEmphStrong">$#.</span>
10  echo &quot;Good–bye for now, <span class="docEmphStrong">$1</span> &quot;
11  <span class="docEmphStrong">set 'date'</span>          <span class="docEmphasis">#  Reset the positional parameters</span>
12  <span class="docEmphStrong">echo The date is $2 $3, $6.</span>
13  echo &quot;The value of \$oldargs is $oldargs.&quot;
14  set $oldargs
15  echo $1 $2 $3

(The Output)
     $ <span class="docEmphStrong">args a b c d</span>
1   <span class="docEmphasis">The name of this script is</span> <span class="docEmphBoldItalic">args</span><span class="docEmphasis">.</span>
2   <span class="docEmphasis">The arguments are</span> <span class="docEmphBoldItalic">a b c d.</span>
3   <span class="docEmphasis">The first argument is</span> <span class="docEmphBoldItalic">a.</span>
4   <span class="docEmphasis">The second argument is</span> <span class="docEmphBoldItalic">b.</span>
5   <span class="docEmphasis">The number of arguments is</span> <span class="docEmphBoldItalic">4.</span>
8   <span class="docEmphasis">All the positional parameters are</span> <span class="docEmphBoldItalic">Jake Nicky Scott.</span>
9   <span class="docEmphasis">The number of positional parameters is</span> <span class="docEmphBoldItalic">3.</span>
10  <span class="docEmphasis">Good-bye for now,</span> <span class="docEmphBoldItalic">Jake</span>
12  <span class="docEmphasis">The date is Mar 25, 2001.</span>
13  <span class="docEmphasis">The value of $oldargs is a b c d.</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The name of the script is stored in the
      <span class="docEmphasis">$0</span> variable.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$*</span> represents all of 
      the positional parameters.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$1</span> represents the 
      first positional parameter (command line argument).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$2</span> represents the 
      second positional parameter.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$#</span> is the total number 
      of positional parameters (command line arguments).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All positional parameters are saved in a variable 
      called <span class="docEmphasis">oldargs.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command allows 
      you to reset the positional parameters, clearing out the old list. Now,
      <span class="docEmphasis">$1</span> is <span class="docEmphasis">Jake,</span>
      <span class="docEmphasis">$2</span> is <span class="docEmphasis">Nicky,</span> 
      and <span class="docEmphasis">$3</span> is <span class="docEmphasis">
      Scott.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$*</span> represents all of 
      the parameters, <span class="docEmphasis">Jake, Nicky,</span> and
      <span class="docEmphasis">Scott.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$#</span> represents the 
      number of parameters, 3.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$1</span> is
      <span class="docEmphasis">Jake.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After command substitution is performed, i.e.,
      <span class="docEmphasis">date</span> is executed, the positional 
      parameters are reset to the output of the <span class="docEmphasis">date</span> 
      command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The new values of <span class="docEmphasis">$2, $3,</span> 
      and <span class="docEmphasis">$6</span> are displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The values saved in <span class="docEmphasis">oldargs</span> 
      are printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command 
      creates positional parameters from the value stored in
      <span class="docEmphasis">oldargs.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The first three positional parameters are displayed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list52" class="docExampleTitle">Example 8.52 </h5>
<pre>(The Script)
    $ <span class="docEmphStrong">cat checker</span>
    #!/bin/sh	
    <span class="docEmphasis"># Scriptname: checker</span>
    <span class="docEmphasis"># Script to demonstrate the use of special variable</span>
    <span class="docEmphasis"># modifiers and arguments</span>
1   <span class="docEmphStrong">name=${1:?&quot;requires an argument&quot; }</span>
    echo Hello $name

(The Command Line)
2   $ <span class="docEmphStrong">checker</span>
    <span class="docEmphasis">./checker: 1: requires an argument</span>
3   $ <span class="docEmphStrong">checker Sue</span>
    <span class="docEmphasis">Hello Sue</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The special variable modifier <span class="docEmphasis">
      :?</span> will check whether <span class="docEmphasis">$1</span> has a 
      value. If not, the script exits and the message is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program is executed without an argument.
      <span class="docEmphasis">$1</span> is not assigned a value; an error is 
      displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">checker</span> program is 
      given a command line argument, <span class="docEmphasis">Sue.</span> In 
      the script, <span class="docEmphasis">$1</span> is assigned
      <span class="docEmphasis">Sue.</span> The program continues.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">How <span class="docEmphasis">$*</span> 
and <span class="docEmphasis">$@</span> Differ.</span> The
<span class="docEmphasis">$*</span> and <span class="docEmphasis">$@</span> 
differ only when enclosed in double quotes. When <span class="docEmphasis">$*</span> 
is enclosed within double quotes, the parameter list becomes a single string. 
When <span class="docEmphasis">$@</span> is enclosed within double quotes, each 
of the parameters is quoted; that is, each word is treated as a separate string.</p>
<h5 id="ch08list53" class="docExampleTitle">Example 8.53 </h5>
<pre>1   $ <span class="docEmphStrong">set 'apple pie' pears peaches</span>
2   $ <span class="docEmphStrong">for i in $*</span>
    &gt; <span class="docEmphStrong">do</span>
    &gt; <span class="docEmphStrong">echo $i</span>
    &gt; <span class="docEmphStrong">done</span>
    <span class="docEmphasis">apple</span>
    <span class="docEmphasis">pie</span>
    <span class="docEmphasis">pears</span>
    <span class="docEmphasis">peaches</span>

3   $ <span class="docEmphStrong">set 'apple pie' pears peaches</span>
4   $ <span class="docEmphStrong">for i in &quot;$*&quot;</span>
    &gt; <span class="docEmphStrong">do</span>
    &gt; <span class="docEmphStrong">echo $i</span>
    &gt; <span class="docEmphStrong">done</span>
    <span class="docEmphasis">apple pie pears peaches</span>

5   $ <span class="docEmphStrong">set 'apple pie' pears peaches</span>
6   $ <span class="docEmphStrong">for i in $@</span>
    &gt; <span class="docEmphStrong">do</span>
    &gt; <span class="docEmphStrong">echo $i</span>
    &gt; <span class="docEmphStrong">done</span>
    <span class="docEmphasis">apple</span>
    <span class="docEmphasis">pie</span>
    <span class="docEmphasis">pears</span>
    <span class="docEmphasis">peaches</span>

7   $ <span class="docEmphStrong">set 'apple pie' pears peaches</span>
8   $ <span class="docEmphStrong">for i in &quot;$@&quot;</span>          <span class="docEmphasis"># At last!!</span>
    &gt; <span class="docEmphStrong">do</span>
    &gt; <span class="docEmphStrong">echo $i</span>
    &gt; <span class="docEmphStrong">done</span>
    <span class="docEmphasis">apple pie</span>
    <span class="docEmphasis">pears</span>
    <span class="docEmphasis">peaches</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The positional parameters are set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When <span class="docEmphasis">$*</span> is expanded, 
      the quotes surrounding <span class="docEmphasis">apple pie</span> are 
      stripped; <span class="docEmphasis">apple</span> and
      <span class="docEmphasis">pie</span> become two separate words. The
      <span class="docEmphasis">for</span> loop assigns each of the words, in 
      turn, to the variable <span class="docEmphasis">i,</span> and then prints 
      the value of <span class="docEmphasis">i.</span> Each time through the 
      loop, the word on the left is shifted off, and the next word is assigned 
      to the variable <span class="docEmphasis">i.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The positional parameters are set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">By enclosing <span class="docEmphasis">$*</span> in 
      double quotes, the entire parameter list becomes one string, &quot;<span class="docEmphasis">apple 
      pie pears peaches</span>&quot;. The entire list is assigned to
      <span class="docEmphasis">i</span> as a single word. The loop makes one 
      iteration.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The positional parameters are set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Unquoted, <span class="docEmphasis">$@</span> and
      <span class="docEmphasis">$*</span> behave the same way (see line 2 of 
      this explanation).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The positional parameters are set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">By surrounding <span class="docEmphasis">$@</span> with 
      double quotes, each of the positional parameters is treated as a quoted 
      string. The list would be &quot;<span class="docEmphasis">apple pie,</span>&quot; &quot;<span class="docEmphasis">pears,</span>&quot; 
      &quot;<span class="docEmphasis">peaches.</span>&quot; The desired result is finally 
      achieved.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec16">8.2.5 Conditional Constructs and Flow Control</h4>
<p class="docText">Conditional commands allow you to perform some task(s) based 
on whether a condition succeeds or fails. The <span class="docEmphasis">if</span> 
command is the simplest form of decision-making; the <span class="docEmphasis">
if/else</span> commands allow a two-way decision; and the
<span class="docEmphasis">if/elif/else</span> commands allow a multiway 
decision.</p>
<p class="docText">The Bourne shell expects a command to follow an
<span class="docEmphasis">if.</span> The command can be a system command or a 
built-in command. The exit status of the command is used to evaluate the 
condition.</p>
<p class="docText">To evaluate an expression, the built-in
<span class="docEmphasis">test</span> command is used. This command is also 
linked to the bracket symbol. Either the <span class="docEmphasis">test</span> 
command is used, or the expression can be enclosed in set of single brackets. 
Shell metacharacters (wildcards) are not expanded by the test command. The 
result of a command is tested, with zero status indicating success and nonzero 
status indicating failure. See <a class="docLink" href="#ch08table14">Table 8.14</a>.</p>
<p class="docText"><b>Testing Exit Status.</b> The following examples illustrate 
how the exit status is tested.</p>
<h5 id="ch08list54" class="docExampleTitle">Example 8.54 </h5>
<pre>(At the Command Line)
1   $ <span class="docEmphStrong">name=Tom</span>
2   $ <span class="docEmphStrong">grep &quot;$name&quot;  /etc/passwd</span>
    <span class="docEmphasis">Tom:8ZKX2F:5102:40:Tom Savage:/home/tom:/bin/ksh</span>
3   $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">0             Success!</span>

4   $ <span class="docEmphStrong">test $name != Tom</span>
5   $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">1</span>             <span class="docEmphasis">Failure</span>

6   $ <span class="docEmphStrong">[ $name = Tom ]</span>       # <span class="docEmphasis">Brackets replace the test command</span>
7   $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">0             Success</span>

8   $ <span class="docEmphStrong">[ $name =  [Tt]?m ]</span>   # <span class="docEmphasis">Wildcards are</span> not <span class="docEmphasis">evaluated</span>
9   $ <span class="docEmphStrong">echo  $?</span>              # <span class="docEmphasis">by the test command</span>
    <span class="docEmphasis">1</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">name</span> is 
      assigned the string <span class="docEmphasis">Tom.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">grep</span> command will 
      search for string <span class="docEmphasis">Tom</span> in the
      <span class="docEmphasis">passwd</span> file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">?</span> variable 
      contains the exit status of the last command executed, in this case, the 
      exit status of grep. If <span class="docEmphasis">grep</span> is 
      successful in finding the string <span class="docEmphasis">Tom,</span> it 
      will return an exit status of zero. The <span class="docEmphasis">grep</span> 
      command was successful.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">test</span> command is 
      used to evaluate strings, numbers, and perform file testing. Like all 
      commands, it returns an exit status. If the exit status is zero, the 
      expression is true; if the exit status is one, the expression evaluates to 
      false. There <span class="docEmphasis">must</span> be spaces surrounding 
      the equal sign. The value of <span class="docEmphasis">name</span> is 
      tested to see if it is not equal to <span class="docEmphasis">Tom.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The test fails and returns an exit status of one.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The brackets are an alternate notation for the
      <span class="docEmphasis">test</span> command. There must be spaces after 
      the first bracket. The expression is tested to see if
      <span class="docEmphasis">$name</span> evaluates to the string
      <span class="docEmphasis">Tom.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The exit status of the test is zero. The test was 
      successful because <span class="docEmphasis">$name</span> is equal to
      <span class="docEmphasis">Tom.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">test</span> command does 
      not allow wildcard expansion. Since the question mark is treated as a 
      literal character, the test fails. <span class="docEmphasis">Tom</span> 
      and <span class="docEmphasis">[Tt]?m</span> are not equal.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The exit status is one indicating that the text in line 
      8 failed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
test</span> Command.</span> The <span class="docEmphasis">test</span> command is 
used to evaluate conditional expressions, returning true or false. It will 
return a zero exit status for true and a nonzero exit status for false. The
<span class="docEmphasis">test</span> command or brackets can be used.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table14" class="docTableTitle">Table 8.14. String, Integer, and File Testing</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">Test 
    Operator</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">Test 
    For</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top" colSpan="2">
    <span class="docEmphBoldItalic">String Test:</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">string1 = 
    string2</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">String1</span> 
    is equal to <span class="docEmphasis">String2 (space surrounding = 
    required).</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">string1 != 
    string2</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">String1</span> 
    is not equal to <span class="docEmphasis">String2 (space surrounding != 
    required).</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">string</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">String</span> 
    is not null. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–z string</span>
    </td>
    <td class="docTableCell" vAlign="top">Length of <span class="docEmphasis">
    string</span> is zero. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–n string</span>
    </td>
    <td class="docTableCell" vAlign="top">Length of <span class="docEmphasis">
    string</span> is nonzero. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top" rowSpan="2">Example: </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">test –n 
    $word</span> or <span class="docEmphasis">[ –n $word ].</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">test tom = 
    sue</span> or <span class="docEmphasis">[ tom = sue ].</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top" colSpan="2">
    <span class="docEmphBoldItalic">Integer Test:</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">int1 –eq 
    int2</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Int1</span> 
    is equal to <span class="docEmphasis">int2.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">int1 –ne 
    int2</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Int1</span> 
    is not equal to <span class="docEmphasis">int2.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">int1 –gt 
    int2</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Int1</span> 
    is greater than <span class="docEmphasis">int2.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">int1 –ge 
    int2</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Int1</span> 
    is greater than or equal to <span class="docEmphasis">int2.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">int1 –lt 
    int2</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Int1</span> 
    is less than <span class="docEmphasis">int2.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">int1 –le 
    int2</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Int1</span> 
    is less than or equal to <span class="docEmphasis">int2.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top" colSpan="2">
    <span class="docEmphBoldItalic">File Test:</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–b filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Block special file. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–c filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Character special file. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–d filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Directory existence. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–f filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Regular file existence and not a 
    directory. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–g filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Set-group-ID is set. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–k filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Sticky bit is set. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–p filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File is a named pipe. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–r filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File is readable. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–s filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File is nonzero size. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–u filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Set-user-ID bit is set. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–w filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File is writeable. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–x filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File is executable. </td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">if</span> 
Command.</span> The simplest form of conditional is the
<span class="docEmphasis">if</span> command. The command or UNIX utility 
following the <span class="docEmphasis">if</span> construct is executed and its 
exit status is returned. The exit status is usually determined by the programmer 
who wrote the utility. If the exit status is zero, the command succeeded and the 
statement(s) after the <span class="docEmphasis">then</span> keyword are 
executed. In the C shell, the expression following the <span class="docEmphasis">
if</span> command is a Boolean-type expression as in C. But in the Bourne and 
Korn shells, the statement following the <span class="docEmphasis">if</span> is 
a command or group of commands. If the exit status of the command being 
evaluated is zero, the block of statements after the <span class="docEmphasis">
then</span> is executed until <span class="docEmphasis">fi</span> is reached. 
The <span class="docEmphasis">fi</span> terminates the <span class="docEmphasis">
if</span> block. If the exit status is nonzero, meaning that the command failed 
in some way, the statement(s) after the <span class="docEmphasis">then</span> 
keyword are ignored and control goes to the line directly after the
<span class="docEmphasis">fi</span> statement. It is important that you know the 
exit status of the commands being tested. For example, the exit status of
<span class="docEmphasis">grep</span> is reliable in letting you know whether
<span class="docEmphasis">grep</span> found the pattern it was searching for in 
a file. If <span class="docEmphasis">grep</span> is successful in its search, it 
returns a zero exit status; if not, it returns one. The
<span class="docEmphasis">sed</span> and <span class="docEmphasis">awk</span> 
programs also search for patterns, but they will report a successful exit status 
regardless of whether they find the pattern. The criteria for success with
<span class="docEmphasis">sed</span> and <span class="docEmphasis">awk</span> is 
correct syntax, not functionality.<span id="ENB8-5"><a class="docLink" href="#EN8-5"><sup>[5]</sup></a></span>
</p>


<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>if commandthen
then
    command
    command
fi
---------------------------------

if test expression
then
    command
fi

        or

if [ expression ]
then
    command
fi
-------------------------------
</pre>
    </td>
  </tr>
</table>

<h5 id="ch08list55" class="docExampleTitle">Example 8.55 </h5>
<pre>1   <span class="docEmphStrong">if ypmatch &quot;$name&quot; passwd &gt; /dev/null 2&gt;&amp;1</span>
2   <span class="docEmphStrong">then</span>
         echo Found $name!
3   <span class="docEmphStrong">fi</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">ypmatch</span> command is 
      an NIS (Sun's Network Information Services) command that searches for its 
      argument, <span class="docEmphasis">name,</span> in the NIS
      <span class="docEmphasis">passwd</span> database on the server machine. 
      Standard output and standard error are redirected to
      <span class="docEmphasis">/dev/null,</span> the UNIX bit bucket. If
      <span class="docEmphasis">ypmatch</span> is not supported on your system, 
      try</p>
      <pre>if grep &quot;$name&quot; /etc/passwd &gt; /dev/null 2&gt;&amp;1
</pre>
      </span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the exit status of the <span class="docEmphasis">
      ypmatch</span> command is zero, the program goes to the
      <span class="docEmphasis">then</span> statement and executes commands 
      until <span class="docEmphasis">fi</span> is reached.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> terminates the 
      list of commands following the <span class="docEmphasis">then</span> 
      statement.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list56" class="docExampleTitle">Example 8.56 </h5>
<pre>1   echo  &quot;Are you okay (y/n) ?&quot;
    read answer
2   <span class="docEmphStrong">if [ &quot;$answer&quot; = Y -o &quot;$answer&quot;&nbsp;=&nbsp;y  ]</span>
    <span class="docEmphStrong">then</span>
       echo  &quot;Glad to hear it.&quot;
3   <span class="docEmphStrong">fi</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked the question and told to respond. The
      <span class="docEmphasis">read</span> command waits for a response.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">test</span> command, 
      represented by square brackets, is used to test expressions. It returns an 
      exit status of zero if the expression is true and nonzero if the 
      expression is false. If the variable <span class="docEmphasis">answer</span> 
      evaluates to <span class="docEmphasis">Y</span> or
      <span class="docEmphasis">y,</span> the commands after the
      <span class="docEmphasis">then</span> statement are executed. (The
      <span class="docEmphasis">test</span> command does not allow the use of 
      wildcards when testing expressions, and spaces must surround the square 
      brackets. (and the = operators.) See
      <a class="docLink" href="#ch08table14">Table 8.14</a>.</p>
      <p class="docList"><span class="docEmphasis">$answer</span> is double 
      quoted to hold it together as a single string. The
      <span class="docEmphasis">test</span> command fails if more than one word 
      appears before the = operator. For example, if the user entered
      <span class="docEmphasis">yes, you betcha,</span> the
      <span class="docEmphasis">answer</span> variable would evaluate to three 
      words, causing the <span class="docEmphasis">test</span> to fail,
      <span class="docEmphasis">unless $answer</span> is enclosed in double 
      quotes.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> terminates the 
      list of commands following the <span class="docEmphasis">then</span> 
      statement.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
exit</span> Command and the <span class="docEmphasis">?</span> Variable.</span> 
The <span class="docEmphasis">exit</span> command is used to terminate the 
script and return to the command line. You may want the script to exit if some 
condition occurs. The argument given to the exit command is a number ranging 
from 0 to 255. If the program exits with zero as an argument, the program exited 
with success. A nonzero argument indicates some kind of failure. The argument 
given to the <span class="docEmphasis">exit</span> command is stored in the 
shell's <span class="docEmphasis">?</span> variable.</p>
<h5 id="ch08list57" class="docExampleTitle">Example 8.57 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat bigfiles</span>
    <span class="docEmphasis"># Name: bigfiles</span>
    <span class="docEmphasis"># Purpose: Use the find command to find any files in the root</span>
    <span class="docEmphasis"># partition that have not been modified within the past n (any</span>
    <span class="docEmphasis"># number within 30 days) days and are larger than 20 blocks</span>
    <span class="docEmphasis"># (512-byte blocks)</span>

1   if  [ $# -ne 2 ]
    then
        echo  &quot;Usage: $0 mdays size &quot; 1&gt;&amp;2
        <span class="docEmphStrong">exit 1</span>
2   fi
3   if  [ $1 -lt 0 -o $1 -gt 30 ]
    then

        echo &quot;mdays is out of range&quot;
        <span class="docEmphStrong">exit 2</span>
4   fi
5   if [ $2 -le 20 ]
    then
        echo &quot;size is out of range&quot;
        <span class="docEmphStrong">exit 3</span>
6   fi
7   <span class="docEmphStrong">find / -xdev -mtime $1 -size +$2 -print</span>

(The Command Line)
$ <span class="docEmphStrong">bigfiles</span>
<span class="docEmphasis">Usage: bigfiles mdays size</span>

$ <span class="docEmphStrong">echo $?</span>
<span class="docEmphasis">1</span>

$ <span class="docEmphStrong">bigfiles 400 80</span>
<span class="docEmphasis">mdays is out of range</span>

$ <span class="docEmphStrong">echo $?</span>
<span class="docEmphasis">2</span>

$ <span class="docEmphStrong">bigfiles 25 2</span>
<span class="docEmphasis">size is out of range</span>

$ <span class="docEmphStrong">echo $?</span>
<span class="docEmphasis">3</span>

$ <span class="docEmphStrong">bigfiles 2 25</span>
<span class="docEmphasis">(Output of find prints here)</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docText"><span class="docEmphRoman">The statement reads</span>:
      <span class="docEmphasis">If the number of arguments is not equal to 2, 
      print the error message and send it to standard error, then exit the 
      script with an exit status of 1.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> marks the end 
      of the block of statements after <span class="docEmphasis">then.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docText"><span class="docEmphRoman">The statement reads</span>:
      <span class="docEmphasis">If the value of the first positional parameter 
      passed in from the command line is less than 0 or greater than 30, then 
      print the message and exit with a status of 2.</span> See
      <a class="docLink" href="#ch08table14">Table 8.14</a> for numeric 
      operators.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> ends the
      <span class="docEmphasis">if</span> block.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docText"><span class="docEmphRoman">The statement reads</span>:
      <span class="docEmphasis">If the value of the second positional parameter 
      passed in at the command line is less than or equal to 20 (512-byte 
      blocks), then print the message and exit with a status of 3.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> ends the
      <span class="docEmphasis">if</span> block.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">find</span> command 
      starts its search in the root directory.The <span class="docEmphasis">–x 
      dev</span> option prevents <span class="docEmphasis">find</span> from 
      searching other partitions. The <span class="docEmphasis">–mtime</span> 
      option takes a number argument, which is the number of days since the file 
      was modified, and the <span class="docEmphasis">–size</span> option takes 
      a number argument, which is the size of the file in 512-byte blocks.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Checking for Null Values.</b> When checking for null 
values in a variable, use double quotes to hold the null value or the
<span class="docEmphasis">test</span> command will fail.</p>
<h5 id="ch08list58" class="docExampleTitle">Example 8.58 </h5>
<pre>(The Script)

1   <span class="docEmphStrong">if [ &quot;$name&quot; = &quot;&quot; ]</span>
        <span class="docEmphasis"># Alternative to</span>  <span class="docEmphStrong">[ ! &quot;$name&quot; ]</span>  <span class="docEmphasis">or</span>  <span class="docEmphStrong">[ -z &quot;$name&quot; ]</span>
    then
       echo The name variable is null
    fi

(From System <span class="docEmphasis">showmount</span> program, which displays all remotely mounted
systems)

    <span class="docEmphStrong">remotes='/usr/sbin/showmount'</span>
2   <span class="docEmphStrong">if [ &quot;X${remotes}&quot; != &quot;X&quot; ]</span>
    then
       /usr/sbin/wall ${remotes}
                    ...
3   fi
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">name</span> variable 
      evaluates to null, the test is true. The double quotes are used to 
      represent null.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">showmount</span> command 
      lists all clients remotely mounted from a host machine. The command will 
      list either one or more clients, or nothing. The variable
      <span class="docEmphasis">remotes</span> will either have a value assigned 
      or will be null. The letter <span class="docEmphBoldItalic">X</span> 
      precedes the variable <span class="docEmphasis">remotes</span> when being 
      tested. If <span class="docEmphasis">remotes</span> evaluates to null, no 
      clients are remotely logged on and <span class="docEmphBoldItalic">X</span> 
      will be equal to <span class="docEmphBoldItalic">X,</span> causing the 
      program to start execution again on line 3. If the variable has a value, 
      for example, the hostname <span class="docEmphasis">pluto,</span> the 
      expression would read <span class="docEmphasis">if</span>
      <span class="docEmphBoldItalic">Xpluto != X,</span> and the
      <span class="docEmphasis">wall</span> command would be executed. (All 
      users on remote machines will be sent a message.) The purpose of using
      <span class="docEmphasis">X</span> in the expression is to guarantee that 
      even if the value of <span class="docEmphasis">remotes</span> is null, 
      there will always be a placeholder on either side of the
      <span class="docEmphasis">!=</span> operator in the expression.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> terminates the
      <span class="docEmphasis">if.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
if/else</span> Command.</span> The <span class="docEmphasis">if/else</span> 
commands allow a two-way decision-making process. If the command after the
<span class="docEmphasis">if</span> fails, the commands after the
<span class="docEmphasis">else</span> are executed.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>if  command
then
    command(s)
else
    command(s)
fi
</pre>
    </td>
  </tr>
</table>

<h5 id="ch08list59" class="docExampleTitle">Example 8.59 </h5>
<pre>(The Script)
    #!/bin/sh
1   <span class="docEmphStrong">if ypmatch &quot;$name&quot; passwd &gt; /dev/null 2&gt;&amp;1</span><span id="ENB8-6"><a class="docLink" href="#EN8-6"><sup>[6]</sup></a></span>
2   <span class="docEmphStrong">then</span>
        echo Found $name!
3   <span class="docEmphStrong">else</span>
4       echo  &quot;Can't find $name.&quot;
        exit 1
5   <span class="docEmphStrong">fi</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">ypmatch</span> command 
      searches for its argument, <span class="docEmphasis">name,</span> in the 
      NIS <span class="docEmphasis">passwd</span> database. Since the user does 
      not need to see the output, standard output and standard error are 
      redirected to <span class="docEmphasis">/dev/null,</span> the UNIX bit 
      bucket.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the exit status of the <span class="docEmphasis">
      ypmatch</span> command is zero, program control goes to the
      <span class="docEmphasis">then</span> statement and executes commands 
      until <span class="docEmphasis">else</span> is reached.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The commands under the <span class="docEmphasis">else</span> 
      statement are executed if the <span class="docEmphasis">ypmatch</span> 
      command fails to find <span class="docEmphasis">$name</span> in the
      <span class="docEmphasis">passwd</span> database; that is, the exit status 
      of <span class="docEmphasis">ypmatch</span> must be nonzero for the 
      commands in the <span class="docEmphasis">else</span> block to be 
      executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the value in <span class="docEmphasis">$name</span> 
      is not found in the <span class="docEmphasis">passwd</span> database, this
      <span class="docEmphasis">echo</span> statement is executed and the 
      program exits with a value of one, indicating failure.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> terminates the
      <span class="docEmphasis">if.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list60" class="docExampleTitle">Example 8.60 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat idcheck</span>
#!/bin/sh
<span class="docEmphasis"># Scriptname: idcheck</span>
<span class="docEmphasis"># purpose:check user ID to see if user is root.</span>
<span class="docEmphasis"># Only root has a uid of 0.</span>
<span class="docEmphasis"># Format for id output:uid=9496(ellie) gid=40 groups=40</span>
<span class="docEmphasis"># root's uid=0</span>

1   <span class="docEmphStrong">id='id | nawk –F'[=(]'&nbsp;&nbsp;'{print $2}''</span>     <span class="docEmphasis"># Get user ID</span>
    echo your user id is: $id
2   <span class="docEmphStrong">if [ $id –eq 0 ]</span>
    <span class="docEmphStrong">then</span>
3       echo &quot;you are superuser.&quot;
4   <span class="docEmphStrong">else</span>
        echo &quot;you are not superuser.&quot;
5   <span class="docEmphStrong">fi</span>

    (The Command Line)
6   $ <span class="docEmphStrong">idcheck</span>
    <span class="docEmphasis">your user id is: 9496</span>
    <span class="docEmphasis">you are not superuser.</span>
7   $ <span class="docEmphStrong">su</span>
    <span class="docEmphasis">Password:</span>
8   # <span class="docEmphStrong">idcheck</span>
    <span class="docEmphasis">your user id is: 0</span>
    <span class="docEmphasis">you are superuser</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">id</span> command is 
      piped to the <span class="docEmphasis">nawk</span> command.
      <span class="docEmphasis">Nawk</span> uses an equal sign and open 
      parenthesis as field separators, extracts the user ID from the output, and 
      assigns the output to the variable <span class="docEmphasis">id.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the value of <span class="docEmphasis">id</span> is 
      equal to zero, then line 3 is executed </span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If ID is not equal to zero, the
      <span class="docEmphasis">else</span> statements are executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> marks the end 
      of the <span class="docEmphasis">if</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">idcheck</span> script is 
      executed by the current user, whose UID is <span class="docEmphasis">9496.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">su</span> command 
      switches the user to <span class="docEmphasis">root.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">#</span> prompt indicates 
      that the superuser (root) is the new user. The UID for root is
      <span class="docEmphasis">0.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">if/elif/else</span> 
Command.</span> The <span class="docEmphasis">if/elif/else</span> commands allow 
a multiway decision- making process. If the command following the
<span class="docEmphasis">if</span> fails, the command following the
<span class="docEmphasis">elif</span> is tested. If that command succeeds, the 
commands under its <span class="docEmphasis">then</span> statement are executed. 
If the command after the <span class="docEmphasis">elif</span> fails, the next
<span class="docEmphasis">elif</span> command is checked. If none of the 
commands succeeds, the <span class="docEmphasis">else</span> commands are 
executed. The <span class="docEmphasis">else</span> block is called the default.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>if  command
then
    command(s)
elif command
then
    commands(s)
elif command
then
    command(s)
else
    command(s)
fi
</pre>
    </td>
  </tr>
</table>

<h5 id="ch08list61" class="docExampleTitle">Example 8.61 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat tellme</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: tellme</span>
1   echo -n &quot;How old are you? &quot;
    read age
2   if  [  $age -lt  0 -o $age -gt 120 ]
    then
        echo  &quot;Welcome to our planet! &quot;
        exit 1
    fi

3   <span class="docEmphStrong">if [ $age -ge 0 -a  $age -lt 13 ]</span>
    <span class="docEmphStrong">then</span>
        echo &quot;A child is a garden of verses&quot;
    <span class="docEmphStrong">elif [ $age -ge 12 -a $age -lt  20 ]</span>
    <span class="docEmphStrong">then</span>
        echo &quot;Rebel without a cause&quot;
    <span class="docEmphStrong">elif</span> [ $age  -gt 20 -a  $age -lt  30 ]
    <span class="docEmphStrong">then</span>
        echo &quot;You got the world by the tail!!&quot;
    <span class="docEmphStrong">elif</span> [ $age -ge  30 -a  $age -lt 40 ]
    <span class="docEmphStrong">then</span>
        echo &quot;Thirty something...&quot;
4   <span class="docEmphStrong">else</span>
        echo &quot;Sorry I asked&quot;
5   <span class="docEmphStrong">fi</span>

(The Output)
$ <span class="docEmphStrong">tellme</span>
<span class="docEmphasis">How old are you?</span> <span class="docEmphBoldItalic">200</span>
<span class="docEmphasis">Welcome to our planet!</span>

$ <span class="docEmphStrong">tellme</span>
<span class="docEmphasis">How old are you?</span> <span class="docEmphBoldItalic">13</span>
<span class="docEmphasis">Rebel without a cause</span>

$ <span class="docEmphStrong">tellme</span>
<span class="docEmphasis">How old are you?</span> <span class="docEmphBoldItalic">55</span>
<span class="docEmphasis">Sorry I asked</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked for input. The input is assigned to 
      the variable <span class="docEmphasis">age.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A numeric test is performed within the square brackets. 
      If <span class="docEmphasis">age</span> is less than
      <span class="docEmphasis">0</span> or greater than
      <span class="docEmphasis">120,</span> the <span class="docEmphasis">echo</span> 
      command is executed and the program terminates with an exit status of one. 
      The interactive shell prompt will appear.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A numeric test is performed within the square brackets. 
      If <span class="docEmphasis">age</span> is greater than
      <span class="docEmphasis">0</span> and less than <span class="docEmphasis">
      13,</span> the <span class="docEmphasis">test</span> command returns exit 
      status zero, true, and the statement after the <span class="docEmphasis">
      then</span> is executed. Otherwise, program control goes to the elif. If 
      that test is false, the next <span class="docEmphasis">elif</span> is 
      tested.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">else</span> construct is 
      the default. If none of the above statements are true, the
      <span class="docEmphasis">else</span> commands will be executed. </span>
      </li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> terminates the 
      initial <span class="docEmphasis">if</span> statement.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>File Testing.</b> Often when writing scripts, your script 
will require that there are certain files available and that those files have 
specific permissions, are of a certain type, or have other attributes. (See
<a class="docLink" href="#ch08table14">Table 8.14</a>.) You will find file 
testing a necessary part of writing dependable scripts.</p>
<p class="docText">When <span class="docEmphasis">if</span> statements are 
nested, the <span class="docEmphasis">fi</span> statement always goes with the 
nearest <span class="docEmphasis">if</span> statement. Indenting the nested
<span class="docEmphasis">ifs</span> makes it easier to see which
<span class="docEmphasis">if</span> statement goes with which
<span class="docEmphasis">fi</span> statement.</p>
<h5 id="ch08list62" class="docExampleTitle">Example 8.62 </h5>
<p class="docText">
<img alt="graphics/08prfig02.gif" src="08prfig02.gif" border="0" width="500" height="261"></p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the file <span class="docEmphasis">testing</span> is 
      a directory, print <span class="docEmphasis">testing is a directory.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the file <span class="docEmphasis">testing</span> is 
      not a directory, <span class="docEmphasis">else if</span> the file is a 
      plain file, then…</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the file <span class="docEmphasis">testing</span> is 
      readable, writeable, and executable, then…</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> terminates the 
      innermost <span class="docEmphasis">if</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">else</span> commands are 
      executed <span class="docEmphasis">if</span> lines 1 and 2 are not true.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This <span class="docEmphasis">fi</span> goes with the 
      first <span class="docEmphasis">if.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
null</span> Command.</span> The <span class="docEmphasis">null</span> command, 
represented by a colon, is a built-in, do-nothing command that returns an exit 
status of zero. It is used as a placeholder after an <span class="docEmphasis">
if</span> command when you have nothing to say, but need a command or the 
program will produce an error message because it requires something after the
<span class="docEmphasis">then</span> statement. Often the null command is used 
as an argument to the <span class="docEmphasis">loop</span> command to make the 
loop a forever loop.</p>
<h5 id="ch08list63" class="docExampleTitle">Example 8.63 </h5>
<pre>(The Script)
1   name=Tom
2   <span class="docEmphStrong">if grep &quot;$name&quot; databasefile &gt; /dev/null 2&gt;&amp;1</span>
    then
3       <span class="docEmphStrong">:</span>
4   else
        echo  &quot;$1 not found in databasefile&quot;
        exit 1
    fi
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">name</span> is 
      assigned the string <span class="docEmphasis">Tom.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">if</span> command tests 
      the exit status of the <span class="docEmphasis">grep</span> command. If
      <span class="docEmphasis">Tom</span> is found in the database file, the
      <span class="docEmphasis">null</span> command, a colon, is executed and 
      does nothing.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The colon is the <span class="docEmphasis">null</span> 
      command. It does nothing other than returning a <span class="docEmphasis">
      0</span> exit status.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">What we really want to do is print an error message and 
      exit if <span class="docEmphasis">Tom</span> is <span class="docEmphasis">
      not</span> found. The commands after the <span class="docEmphasis">else</span> 
      will be executed if the <span class="docEmphasis">grep</span> command 
      fails.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list64" class="docExampleTitle">Example 8.64 </h5>
<pre>(The Command Line)
1   $ <span class="docEmphStrong">DATAFILE=</span>
2   $ <span class="docEmphStrong">: ${DATAFILE:=$HOME/db/datafile}</span>
    $ <span class="docEmphStrong">echo $DATAFILE</span>
    <span class="docEmphasis">/home/jody/ellie/db/datafile</span>
3   $ <span class="docEmphStrong">: ${DATAFILE:=$HOME/junk}</span>
    $ <span class="docEmphStrong">echo $DATAFILE</span>
    <span class="docEmphasis">/home/jody/ellie/db/datafile</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">DATAFILE</span> 
      is assigned null.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The colon command is a &quot;do-nothing&quot; command. The 
      modifier (<span class="docEmphasis">:=</span>) returns a value that can be 
      assigned to a variable or used in a test. In this example, the expression 
      is passed as an argument to the do-nothing command. The shell will perform 
      variable substitution; that is, assign the pathname to
      <span class="docEmphasis">DATAFILE</span> if <span class="docEmphasis">
      DATAFILE</span> does not already have a value. The variable
      <span class="docEmphasis">DATAFILE</span> is permanently set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Since the variable has already been set, it will not be 
      reset with the default value provided on the right of the modifier.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list65" class="docExampleTitle">Example 8.65 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat wholenum</span>
    #!/bin/sh
1   <span class="docEmphasis"># Name:wholenum</span>
    <span class="docEmphasis"># Purpose:The expr command tests that the user enters an integer</span>
    echo &quot;Enter a number.&quot;
    read number
2   if <span class="docEmphStrong">expr &quot;$number&quot; + 0 &gt; /dev/null 2&gt;&amp;1</span>
    then
3      :
    else
4       echo &quot;You did not enter an integer value.&quot;
        exit 1
5   fi
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked to enter an integer. The number is 
      assigned to the variable <span class="docEmphasis">number.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">expr</span> command 
      evaluates the expression. If addition can be performed, the number is a 
      whole number and <span class="docEmphasis">expr</span> returns a 
      successful exit status. All output is redirected to the bit bucket
      <span class="docEmphasis">/dev/null.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If <span class="docEmphasis">expr</span> is successful, 
      it returns a zero exit status, and the colon command does nothing.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">expr</span> command 
      fails, it returns a nonzero exit status, the <span class="docEmphasis">
      echo</span> command displays the message, and the program exits.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> ends the
      <span class="docEmphasis">if</span> block.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec17">8.2.6 The <span class="docEmphasis">case</span> 
Command</h4>
<p class="docText">The <span class="docEmphasis">case</span> command is a 
multiway branching command used as an alternative to <span class="docEmphasis">
if/elif</span> commands. The value of the <span class="docEmphasis">case</span> 
variable is matched against <span class="docEmphasis">value1, value2,</span> and 
so forth, until a match is found. When a value matches the
<span class="docEmphasis">case</span> variable, the commands following the value 
are executed until the double semicolons are reached. Then execution starts 
after the word <span class="docEmphasis">esac</span> (<span class="docEmphasis">case</span> 
spelled backwards).</p>
<p class="docText">If the <span class="docEmphasis">case</span> variable is not 
matched, the program executes the commands after the <span class="docEmphasis">*</span>), 
the default value, until <span class="docEmphasis">;;</span> or
<span class="docEmphasis">esac</span> is reached. The <span class="docEmphasis">
*</span>) value functions the same as the <span class="docEmphasis">else</span> 
statement in <span class="docEmphasis">if/else</span> conditionals. The
<span class="docEmphasis">case</span> values allow the use of shell
<span class="docEmphasis">wildcards</span> and the vertical bar (pipe symbol) 
for <span class="docEmphasis">or</span>ing two values.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>case variable in
value1)
    command(s)
    ;;
value2)
    command(s)
    ;;
*)
command(s)
    ;;
esac
</pre>
    </td>
  </tr>
</table>

<h5 id="ch08list66" class="docExampleTitle">Example 8.66 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat colors</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: colors</span>
1   echo -n &quot;Which color do you like?&quot;
    read color
2   <span class="docEmphStrong">case &quot;$color&quot; in</span>
3   <span class="docEmphStrong">[Bb]l??)</span>
4       echo I feel $color
        echo The sky is $color
5       <span class="docEmphStrong">;;</span>
6   <span class="docEmphStrong">[Gg]ree*)</span>
        echo  $color is for trees
        echo  $color is for seasick<span class="docEmphStrong">;;</span>
7   <span class="docEmphStrong">red | orange)</span>             <span class="docEmphasis"># The vertical bar means &quot;or&quot;</span>
        echo  $color is very warm!<span class="docEmphStrong">;;</span>
8   <span class="docEmphStrong">*)</span>
        echo  No such color as $color<span class="docEmphStrong">;;</span>
9   <span class="docEmphStrong">esac</span>
10  echo  &quot;Out of case&quot;
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked for input. The input is assigned to 
      the variable <span class="docEmphasis">color.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">case</span> command 
      evaluates the expression <span class="docEmphasis">$color.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the color begins with a <span class="docEmphasis">B</span> 
      or <span class="docEmphasis">b,</span> followed by the letter
      <span class="docEmphasis">l</span> and any two characters, the
      <span class="docEmphasis">case</span> expression matches the first value. 
      The value is terminated with a single closed parenthesis. The wildcards 
      are shell metacharacters used for filename expansion.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The statements are executed if the value in line number 
      3 matches the <span class="docEmphasis">case</span> expression.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The double semicolons are required after the last 
      command in this block of commands. Control branches to line 10 when the 
      semicolons are reached. The script is easier to debug if the semicolons 
      are on their own line.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">case</span> expression 
      matches a <span class="docEmphasis">G</span> or <span class="docEmphasis">
      g,</span> followed by the letters <span class="docEmphasis">ree</span> and 
      ending in zero or more of any other characters, the
      <span class="docEmphasis">echo</span> commands are executed. The double 
      semicolons terminate the block of statements and control branches to line 
      10.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The vertical bar is used as an
      <span class="docEmphasis">or</span> conditional operator. If the
      <span class="docEmphasis">case</span> expression matches either
      <span class="docEmphasis">red</span> or <span class="docEmphasis">orange,</span> 
      the <span class="docEmphasis">echo</span> command is executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is the default value. If none of the above values 
      match the <span class="docEmphasis">case</span> expression, the commands 
      after the <span class="docEmphasis">*)</span> are executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">esac</span> statement 
      terminates the <span class="docEmphasis">case</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After one of the <span class="docEmphasis">case</span> 
      values are matched, execution continues here.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">Creating Menus with the
<span class="docEmphasis">here document</span> and <span class="docEmphasis">
case</span> Command.</span> The <span class="docEmphasis">here</span>
<span class="docEmphasis">document</span> and <span class="docEmphasis">case</span> 
command are often used together. The <span class="docEmphasis">here</span>
<span class="docEmphasis">document</span> is used to create a menu of choices 
that will be displayed to the screen. The user will be asked to select one of 
the menu items, and the <span class="docEmphasis">case</span> command will test 
against the set of choices to execute the appropriate command.</p>
<h5 id="ch08list67" class="docExampleTitle">Example 8.67 </h5>
<pre>(The <span class="docEmphasis">.profile</span> File)
    echo &quot;Select a terminal type: &quot;
1   <span class="docEmphStrong">cat &lt;&lt; ENDIT</span>
        <span class="docEmphStrong">1) vt 120</span>
        <span class="docEmphStrong">2) wyse50</span>
        <span class="docEmphStrong">3) sun</span>
<span class="docEmphStrong">2</span>   <span class="docEmphStrong">ENDIT</span>
3   read choice
4   <span class="docEmphStrong">case &quot;$choice&quot; in</span>
5   <span class="docEmphStrong">1)</span>  TERM=vt120
        export TERM
        ;;
    <span class="docEmphStrong">2)</span>  TERM=wyse50
        export TERM
        ;;
6   <span class="docEmphStrong">3)</span>  TERM=sun
        export TERM
        ;;
7   <span class="docEmphStrong">esac</span>
8   echo &quot;TERM is $TERM.&quot;

(The Output)
$ <span class="docEmphStrong">. .profile</span>
<span class="docEmphasis">Select a terminal type:</span>
<span class="docEmphasis">1) vt120</span>
<span class="docEmphasis">2) wyse50</span>
<span class="docEmphasis">3) sun</span>
<span class="docEmphBoldItalic">3</span>               <span class="docEmphBoldItalic">&lt;--</span> <span class="docEmphasis">User input</span>
<span class="docEmphasis">TERM is sun.</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If this segment of script is put in the
      <span class="docEmphasis">.profile,</span> when you log on, you will be 
      given a chance to select the proper terminal type. The
      <span class="docEmphasis">here</span> <span class="docEmphasis">document</span> 
      is used to display a menu of choices.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user-defined <span class="docEmphasis">ENDIT</span> 
      terminator marks the end of the <span class="docEmphasis">here</span>
      <span class="docEmphasis">document.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">read</span> command 
      stores the user input in the variable <span class="docEmphasis">TERM.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">case</span> command 
      evaluates the variable <span class="docEmphasis">TERM</span> and compares 
      that value with one of the values preceding the closing parenthesis:
      <span class="docEmphasis">1, 2,</span> or <span class="docEmphasis">*.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The first value tested is 1. If there is a match, the 
      terminal is set to a <span class="docEmphasis">vt120.</span> The
      <span class="docEmphasis">TERM</span> variable is exported so that 
      subshells will inherit it.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A default value is not required. The
      <span class="docEmphasis">TERM</span> variable is normally assigned in
      <span class="docEmphasis">/etc/profile</span> at login time. If the choice 
      is 3, the terminal is set to a <span class="docEmphasis">sun.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">esac</span> terminates 
      the <span class="docEmphasis">case</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After the <span class="docEmphasis">case</span> command 
      has finished, this line is executed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec18">8.2.7 Looping Commands</h4>
<p class="docText">Looping commands are used to execute a command or group of 
commands a set number of times or until a certain condition is met. The Bourne 
shell has three types of loops: the <span class="docEmphasis">for</span> loop, 
the <span class="docEmphasis">while</span> loop, and the
<span class="docEmphasis">until</span> loop.</p>
<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">for</span> 
Command.</span> The <span class="docEmphasis">for</span> looping command is used 
to execute commands a finite number of times on a list of items. For example, 
you might use this loop to execute the same commands on a list of files or 
usernames. The <span class="docEmphasis">for</span> command is followed by a 
user-defined variable, the keyword <span class="docEmphasis">in,</span> and a 
list of words. The first time in the loop, the first word from the wordlist is 
assigned to the variable, and then shifted off the list. Once the word is 
assigned to the variable, the body of the loop is entered, and commands between 
the <span class="docEmphasis">do</span> and <span class="docEmphasis">done</span> 
keywords are executed. The next time around the loop, the second word is 
assigned to the variable, and so on. The body of the loop starts at the
<span class="docEmphasis">do</span> keyword and ends at the
<span class="docEmphasis">done</span> keyword. When all of the words in the list 
have been shifted off, the loop ends and program control continues after the
<span class="docEmphasis">done</span> keyword.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>for variable in word_list
do
    command(s)
done
</pre>
    </td>
  </tr>
</table>

<h5 id="ch08list68" class="docExampleTitle">Example 8.68 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat forloop</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: forloop</span>
1   <span class="docEmphStrong">for pal in Tom Dick Harry Joe</span>
2   <span class="docEmphStrong">do</span>
3       echo &quot;Hi $pal&quot;
4   <span class="docEmphStrong">done</span>
5   echo &quot;Out of loop&quot;

(The Output)
$ <span class="docEmphStrong">forloop</span>
<span class="docEmphasis">Hi Tom</span>
<span class="docEmphasis">Hi Dick</span>
<span class="docEmphasis">Hi Harry</span>
<span class="docEmphasis">Hi Joe</span>
<span class="docEmphasis">Out of loop</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This <span class="docEmphasis">for</span> loop will 
      iterate through the list of names, <span class="docEmphasis">Tom, Dick, 
      Harry,</span> and <span class="docEmphasis">Joe,</span> shifting each one 
      off (to the left and assigning its value to the user-defined variable,
      <span class="docEmphasis">pal</span>) after it is used. As soon as all of 
      the words are shifted and the wordlist is empty, the loop ends and 
      execution starts after the <span class="docEmphasis">done</span> keyword. 
      The first time in the loop, the variable <span class="docEmphasis">pal</span> 
      will be assigned the word <span class="docEmphasis">Tom.</span> The second 
      time through the loop, <span class="docEmphasis">pal</span> will be 
      assigned <span class="docEmphasis">Dick,</span> the next time
      <span class="docEmphasis">pal</span> will be assigned
      <span class="docEmphasis">Harry,</span> and the last time
      <span class="docEmphasis">pal</span> will be assigned
      <span class="docEmphasis">Joe.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">do</span> keyword is 
      required after the wordlist. If it is used on the same line, the list must 
      be terminated with a semicolon. Example:</p>
      <pre>for pal in Tom Dick Harry Joe; do
</pre>
      </span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is the body of the loop. After
      <span class="docEmphasis">Tom</span> is assigned to the variable
      <span class="docEmphasis">pal,</span> the commands in the body of the loop 
      (i.e., all commands between the <span class="docEmphasis">do</span> and
      <span class="docEmphasis">done</span> keywords) are executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> keyword ends 
      the loop. Once the last word in the list (<span class="docEmphasis">Joe</span>) 
      has been assigned and shifted off, the loop exits.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Control resumes here when the loop exits.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list69" class="docExampleTitle">Example 8.69 </h5>
<pre>(The Command Line)
1   $ <span class="docEmphStrong">cat mylist</span>
   <span class="docEmphasis">tom</span>
   <span class="docEmphasis">patty</span>
   <span class="docEmphasis">ann</span>
   <span class="docEmphasis">jake</span>
(The Script)
$ <span class="docEmphStrong">cat mailer</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: mailer</span>
2   <span class="docEmphStrong">for person in 'cat mylist'</span>
    <span class="docEmphStrong">do</span>
3       mail $person &lt; letter
        echo  $person was sent a letter.
4   <span class="docEmphStrong">done</span>
5   echo &quot;The letter has been sent.&quot;
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The contents of a file, called
      <span class="docEmphasis">mylist,</span> are displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Command substitution is performed and the contents of
      <span class="docEmphasis">mylist</span> becomes the wordlist. The first 
      time in the loop, <span class="docEmphasis">tom</span> is assigned to the 
      variable <span class="docEmphasis">person,</span> then it is shifted off 
      to be replaced with <span class="docEmphasis">patty,</span> and so forth.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">In the body of the loop, each user is mailed a copy of 
      a file called <span class="docEmphasis">letter.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> keyword marks 
      the end of this loop iteration.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When all of the users in the list have been sent mail 
      and the loop has exited, this line is executed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list70" class="docExampleTitle">Example 8.70 </h5>
<pre>(The Script)
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: backup</span>
    <span class="docEmphasis"># Purpose:</span>
    <span class="docEmphasis"># Create backup files and store them in a backup directory</span>
1   dir=/home/jody/ellie/backupscripts
2   <span class="docEmphStrong">for file in memo[1-5]</span>
    <span class="docEmphStrong">do</span>
        if [ -f $file ]
        then
             cp $file $dir/$file.bak
             echo &quot;$file is backed up in $dir&quot;
        fi
    <span class="docEmphStrong">done</span>

(The Output)
<span class="docEmphasis">memo1 is backed up in /home/jody/ellie/backupscripts</span>
<span class="docEmphasis">memo2 is backed up in /home/jody/ellie/backupscripts</span>
<span class="docEmphasis">memo3 is backed up in /home/jody/ellie/backupscripts</span>
<span class="docEmphasis">memo4 is backed up in /home/jody/ellie/backupscripts</span>
<span class="docEmphasis">memo5 is backed up in /home/jody/ellie/backupscripts</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">dir</span> is 
      assigned.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The wordlist will consist of all files in the current 
      working directory with names starting with <span class="docEmphasis">memo</span> 
      and ending with a number between <span class="docEmphasis">1</span> and
      <span class="docEmphasis">5.</span> Each filename will be assigned, one at 
      time, to the variable <span class="docEmphasis">file</span> for each 
      iteration of the loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When the body of the loop is entered, the file will be 
      tested to make sure it exists and is a real file. If so, it will be copied 
      into the directory <span class="docEmphasis">/home/jody/ellie/backupscripts</span> 
      with the <span class="docEmphasis">.bak</span> extension appended to its 
      name.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">$*</span> 
and <span class="docEmphasis">$@</span> Variables in Wordlists.</span> When 
expanded, the <span class="docEmphasis">$*</span> and <span class="docEmphasis">
$@</span> are the same unless enclosed in double quotes.
<span class="docEmphasis">$*</span> evaluates to one string, whereas
<span class="docEmphasis">$@</span> evaluates to a list of separate words.</p>
<h5 id="ch08list71" class="docExampleTitle">Example 8.71 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat greet</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: greet</span>
1   <span class="docEmphStrong">for name in $*</span>      <span class="docEmphasis"># Same as for name in $@</span>
2   <span class="docEmphStrong">do</span>
       echo Hi $name
3   <span class="docEmphStrong">done</span>

(The Command Line)
$ <span class="docEmphStrong">greet Dee Bert Lizzy Tommy</span>
<span class="docEmphasis">Hi Dee</span>
<span class="docEmphasis">Hi Bert</span>
<span class="docEmphasis">Hi Lizzy</span>
<span class="docEmphasis">Hi Tommy</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$*</span> and
      <span class="docEmphasis">$@</span> expand to a list of all the positional 
      parameters, in this case, the arguments passed in from the command line:
      <span class="docEmphasis">Dee,</span> <span class="docEmphasis">Bert,</span>
      <span class="docEmphasis">Lizzy,</span> and Tommy. Each name in the list 
      will be assigned, in turn, to the variable <span class="docEmphasis">name</span> 
      in the <span class="docEmphasis">for</span> loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The commands in the body of the loop are executed until 
      the list is empty.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> keyword marks 
      the end of the loop body.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list72" class="docExampleTitle">Example 8.72 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat permx</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname:permx</span>
1   <span class="docEmphStrong">for file</span>         <span class="docEmphasis"># Empty wordlist</span>
    <span class="docEmphStrong">do</span>
2      if [ -f $file -a ! -x $file ]
       then
3               chmod +x $file
                echo $file now has execute permission
       fi
    <span class="docEmphStrong">done</span>

(The Command Line)
4   $ <span class="docEmphStrong">permx *</span>
    <span class="docEmphasis">addon now has execute permission</span>
    <span class="docEmphasis">checkon now has execute permission</span>
    <span class="docEmphasis">doit now has execute permission</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">for</span> loop is not 
      provided with a wordlist, it iterates through the positional parameters. 
      This is the same as <span class="docEmphasis">for file</span> in
      <span class="docEmphasis">$*.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The filenames are coming in from the command line. The 
      shell expands the asterisk (*) to all filenames in the current working 
      directory. If the file is a plain file and does not have execute 
      permission, line 3 is executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Execute permission is added for each file being 
      processed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">At the command line, the asterisk will be evaluated by 
      the shell as a wildcard and all files in the current directory will be 
      replaced for the <span class="docEmphasis">*.</span> The files will be 
      passed as arguments to the <span class="docEmphasis">permx</span> script.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
while</span> Command.</span> The <span class="docEmphasis">while</span> 
evaluates the command immediately following it and, if its exit status is zero, 
the commands in the body of the loop (commands between <span class="docEmphasis">
do</span> and <span class="docEmphasis">done</span>) are executed. When the
<span class="docEmphasis">done</span> keyword is reached, control is returned to 
the top of the loop and the while command checks the exit status of the command 
again. Until the exit status of the command being evaluated by the
<span class="docEmphasis">while</span> becomes nonzero, the loop continues. When 
the exit status reaches nonzero, program execution starts after the
<span class="docEmphasis">done</span> keyword.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>while command
do
    command(s)
done
</pre>
    </td>
  </tr>
</table>

<h5 id="ch08list73" class="docExampleTitle">Example 8.73 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat num</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: num</span>
1   <span class="docEmphStrong">num=0</span>       <span class="docEmphasis"># Initialize num</span>
2   <span class="docEmphStrong">while  [ $num -lt 10 ]</span>          <span class="docEmphasis"># Test num with test command</span>
    <span class="docEmphStrong">do</span>
       echo  -n $num
3      <span class="docEmphStrong">num='expr  $num + 1</span>          <span class="docEmphasis"># Increment num</span>
    <span class="docEmphStrong">done</span>
    echo &quot;\nAfter loop exits, continue running here&quot;

(The Output)
<span class="docEmphasis">0123456789</span>
<span class="docEmphasis">After loop exits, continue running here</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is the initialization step. The variable
      <span class="docEmphasis">num</span> is assigned <span class="docEmphasis">
      0.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> command is 
      followed by the <span class="docEmphasis">test</span> (square brackets) 
      command. If the value of <span class="docEmphasis">num</span> is less than
      <span class="docEmphasis">10,</span> the body of the loop is entered.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">In the body of the loop, the value of
      <span class="docEmphasis">num</span> is incremented by one. If the value 
      of <span class="docEmphasis">num</span> never changes, the loop would 
      iterate infinitely or until the process is killed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list74" class="docExampleTitle">Example 8.74 </h5>
<pre>(The Script)
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: quiz</span>
1   echo &quot;Who was the chief defense lawyer in the OJ case?&quot;
    read answer
2   <span class="docEmphStrong">while [ &quot;$answer&quot; != &quot;Johnny&quot; ]</span>
3   <span class="docEmphStrong">do</span>
         echo  &quot;Wrong try again!&quot;
4        <span class="docEmphStrong">read answer</span>
5   <span class="docEmphStrong">done</span>
6   echo You got it!

(The Output)
$ <span class="docEmphStrong">quiz</span>
<span class="docEmphasis">Who was the chief defense lawyer in the OJ case?</span> <span class="docEmphBoldItalic">Marcia</span>
<span class="docEmphasis">Wrong try again!</span>
<span class="docEmphasis">Who was the chief defense lawyer in the OJ case?</span>  <span class="docEmphBoldItalic">I give up</span>
<span class="docEmphasis">Wrong try again!</span>
<span class="docEmphasis">Who was the chief defense lawyer in the OJ case?</span>  <span class="docEmphBoldItalic">Johnny</span>
<span class="docEmphasis">You got it!</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">echo</span> command 
      prompts the user, <span class="docEmphasis">Who was the chief defense 
      lawyer in the OJ case?</span> The <span class="docEmphasis">read</span> 
      command waits for input from the user. The input will be stored in the 
      variable <span class="docEmphasis">answer.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> loop is 
      entered and the <span class="docEmphasis">test</span> command, the 
      bracket, tests the expression. If the variable <span class="docEmphasis">
      answer</span> does not equal the string <span class="docEmphasis">Johnny,</span> 
      the body of the loop is entered and commands between the
      <span class="docEmphasis">do</span> and <span class="docEmphasis">done</span> 
      are executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">do</span> keyword is the 
      start of the loop body.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked to re-enter input.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> keyword marks 
      the end of the loop body. Control is returned to the top of the
      <span class="docEmphasis">while</span> loop, and the expression is tested 
      again. As long as <span class="docEmphasis">$answer</span> does not 
      evaluate to <span class="docEmphasis">Johnny,</span> the loop will 
      continue to iterate. When the user enters <span class="docEmphasis">
      Johnny,</span> the loop ends. Program control goes to line 6.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When the body of the loop ends, control starts here.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list75" class="docExampleTitle">Example 8.75 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat sayit</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: sayit</span>
    echo Type q to quit.
    go=start
1   <span class="docEmphStrong">while [ -n &quot;$go&quot; ]</span>    <span class="docEmphasis"># Make sure to double quote the variable</span>
    <span class="docEmphStrong">do</span>
2       echo -n I love you.
3       read word
4       <span class="docEmphStrong">if [ &quot;$word&quot; = q -o &quot;$word&quot; = Q ]</span>
        then
                echo &quot;I'll always love you!&quot;
                <span class="docEmphStrong">go=</span>
        fi
    <span class="docEmphStrong">done</span>

(The Output)
$ <span class="docEmphStrong">sayit</span>
<span class="docEmphasis">Type q to quit.</span>
<span class="docEmphasis">I love you.</span>     <span class="docEmphasis">When user presses the Enter key, the program continues</span>
<span class="docEmphasis">I love you.</span>
<span class="docEmphasis">I love you.</span>
<span class="docEmphasis">I love you.</span>
<span class="docEmphasis">I love you.</span><span class="docEmphStrong">q</span>
<span class="docEmphasis">I</span>'<span class="docEmphasis">ll always love you!</span>
$
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The command after the <span class="docEmphasis">while</span> 
      is executed and its exit status tested. The <span class="docEmphasis">–n</span> 
      option to the <span class="docEmphasis">test</span> command tests for a 
      nonnull string. Since <span class="docEmphasis">go</span> initially has a 
      value, the test is successful, producing a zero exit status. If the 
      variable <span class="docEmphasis">go</span> is not enclosed in double 
      quotes and the variable is null, the <span class="docEmphasis">test</span> 
      command would complain:</p>
      <pre><span class="docEmphasis">go: test: argument expected</span>
</pre>
      </span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The loop is entered. The string
      <span class="docEmphasis">I love you.</span> is echoed to the screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">read</span> command waits 
      for user input.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The expresson is tested. If the user enters a
      <span class="docEmphasis">q</span> or <span class="docEmphasis">Q,</span> 
      the string <span class="docEmphasis">I'll always love you!</span> is 
      displayed, and the variable <span class="docEmphasis">go</span> is set to 
      null. When the <span class="docEmphasis">while</span> loop is re-entered, 
      the test is unsuccessful since the variable is null. The loop terminates. 
      Control goes to the line after the <span class="docEmphasis">done</span> 
      statement. In this example, the script will terminate since there are no 
      more lines to execute.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
until</span> Command.</span> The <span class="docEmphasis">until</span> command 
is used like the <span class="docEmphasis">while</span> command, but executes 
the loop statements only if the command after <span class="docEmphasis">until</span> 
fails, i.e., if the command returns an exit status of nonzero. When the
<span class="docEmphasis">done</span> keyword is reached, control is returned to 
the top of the loop and the <span class="docEmphasis">until</span> command 
checks the exit status of the command again. Until the exit status of the 
command being evaluated by <span class="docEmphasis">until</span> becomes zero, 
the loop continues. When the exit status reaches zero, the loop exits, and 
program execution starts after the <span class="docEmphasis">done</span> 
keyword.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>until command
do
    command(s)
done
</pre>
    </td>
  </tr>
</table>

<h5 id="ch08list76" class="docExampleTitle">Example 8.76 </h5>
<pre>    #!/bin/sh
1   <span class="docEmphStrong">until who | grep linda</span>
2   <span class="docEmphStrong">do</span>
        sleep 5
3   <span class="docEmphStrong">done</span>
    talk linda@dragonwings
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">until</span> loop tests 
      the exit status of the last command in the pipeline,
      <span class="docEmphasis">grep.</span> The <span class="docEmphasis">who</span> 
      command lists who is logged on this machine and pipes its output to
      <span class="docEmphasis">grep.</span> The <span class="docEmphasis">grep</span> 
      command will return a zero exit status (success) only when it finds user
      <span class="docEmphasis">linda.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If user <span class="docEmphasis">linda</span> has not 
      logged on, the body of the loop is entered and the program sleeps for five 
      seconds.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When <span class="docEmphasis">linda</span> logs on, 
      the exit status of the <span class="docEmphasis">grep</span> command will 
      be zero and control will go to the statements following the
      <span class="docEmphasis">done</span> keyword.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list77" class="docExampleTitle">Example 8.77 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat hour</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: hour</span>
1   <span class="docEmphStrong">hour=1</span>
2   <span class="docEmphStrong">until [ $hour  -gt 24 ]</span>
    <span class="docEmphStrong">do</span>
3       case &quot;$hour&quot; in
        [0-9] |1[0-1])  echo  &quot;Good morning!&quot;
             ;;
        12) echo  &quot;Lunch time.&quot;

            ;;
        1[3-7]) echo  &quot;Siesta time.&quot;
            ;;
        *)	echo  &quot;Good night.&quot;
           ;;
        esac
4       <span class="docEmphStrong">hour='expr $hour + 1'</span>
5   <span class="docEmphStrong">done</span>

(The Output)
$ <span class="docEmphStrong">hour</span>
<span class="docEmphasis">Good morning!</span>
<span class="docEmphasis">Good morning!</span>
    <span class="docEmphasis">...</span>
<span class="docEmphasis">Lunch time.</span>
<span class="docEmphasis">Siesta time.</span>
    <span class="docEmphasis">...</span>
<span class="docEmphasis">Good night.</span>
    <span class="docEmphasis">...</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">hour</span> is 
      initialized to <span class="docEmphasis">1.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">test</span> command tests 
      if the hour is greater than <span class="docEmphasis">24.</span> If the 
      hour is not greater than <span class="docEmphasis">24,</span> the body of 
      the loop is entered. The <span class="docEmphasis">until</span> loop is 
      entered if the command following it returns a nonzero exit status. Until 
      the condition is true, the loop continues to iterate.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">case</span> command 
      evaluates the <span class="docEmphasis">hour</span> variable and tests 
      each of the <span class="docEmphasis">case</span> statements for a match.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">hour</span> variable is 
      incremented before control returns to the top of the loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> command marks 
      the end of the loop body.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Looping Commands.</b> If some condition occurs, you may 
want to break out of a loop, return to the top of the loop, or provide a way to 
stop an infinite loop. The Bourne shell provides loop control commands to handle 
these kinds of situations.</p>
<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
shift</span> Command.</span> The <span class="docEmphasis">shift</span> command 
shifts the parameter list to the left a specified number of times. The
<span class="docEmphasis">shift</span> command without an argument shifts the 
parameter list once to the left. Once the list is shifted, the parameter is 
removed permanently. Often, the <span class="docEmphasis">shift</span> command 
is used in a <span class="docEmphasis">while</span> loop when iterating through 
a list of positional parameters.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>shift [n]
</pre>
    </td>
  </tr>
</table>

<h5 id="ch08list78" class="docExampleTitle">Example 8.78 </h5>
<pre>(Without a Loop)
(The Script)
1   set joe mary tom sam
2   <span class="docEmphStrong">shift</span>
3   echo $*
4   <span class="docEmphStrong">set 'date'</span>
5   echo  $*
6   <span class="docEmphStrong">shift 5</span>
7   echo  $*
8   <span class="docEmphStrong">shift 2</span>

(The Output)
3   <span class="docEmphasis">mary tom sam</span>
5   <span class="docEmphasis">Fri Sep 9 10:00:12 PDT 2001</span>
7   <span class="docEmphasis">2001</span>
8   <span class="docEmphBoldItalic">cannot shift</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command sets 
      the positional parameters. <span class="docEmphasis">$1</span> is assigned
      <span class="docEmphasis">joe,</span> <span class="docEmphasis">$2</span> 
      is assigned <span class="docEmphasis">mary,</span>
      <span class="docEmphasis">$3</span> is assigned <span class="docEmphasis">
      tom,</span> and <span class="docEmphasis">$4</span> is assigned
      <span class="docEmphasis">sam.</span> <span class="docEmphasis">$*</span> 
      represents all of the parameters.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">shift</span> command 
      shifts the positional parameters to the left; <span class="docEmphasis">
      joe</span> is shifted off.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The parameter list is printed after the shift.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command resets 
      the positional parameters to the output of the UNIX
      <span class="docEmphasis">date</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The new parameter list is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This time the list is shifted 5 times to the left.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The new parameter list is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">By attempting to shift more times than there are 
      parameters, the shell sends a message to standard error.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list79" class="docExampleTitle">Example 8.79 </h5>
<pre>(With a Loop)
(The Script)
$ <span class="docEmphStrong">cat doit</span>
    #!/bin/sh
    <span class="docEmphasis"># Name: doit</span>
    <span class="docEmphasis"># Purpose: shift through command line arguments</span>
    <span class="docEmphasis"># Usage: doit [args]</span>
1    <span class="docEmphStrong">while [  $# -gt  0 ]</span>
     do
2       echo  $*
3       <span class="docEmphStrong">shift</span>
4    done

(The Command Line)
$ <span class="docEmphStrong">doit a b c d e</span>
<span class="docEmphasis">a b c d e</span>
<span class="docEmphasis">b c d e</span>
<span class="docEmphasis">c d e</span>
<span class="docEmphasis">d e</span>
<span class="docEmphasis">e</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> command 
      tests the numeric expression. If the number of positional parameters (<span class="docEmphasis">$#</span>) 
      is greater than <span class="docEmphasis">0,</span> the body of the loop 
      is entered. The positional parameters are coming from the command line as 
      arguments. There are five.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All positional parameters are printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The parameter list is shifted once to the left.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The body of the loop ends here; control returns to the 
      top of the loop. Each time the loop is entered, the
      <span class="docEmphasis">shift</span> command causes the parameter list 
      to be decreased by one. After the first shift, <span class="docEmphasis">
      $#</span> (number of positional parameters) is four. When $# has been 
      decreased to zero, the loop ends.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list80" class="docExampleTitle">Example 8.80 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat dater</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: dater</span>
    <span class="docEmphasis"># Purpose: set positional parameters with the set command</span>
    <span class="docEmphasis"># and shift through the parameters.</span>
1   <span class="docEmphStrong">set 'date'</span>
2   while [ <span class="docEmphStrong">$# -gt 0</span> ]
    do
3      echo $1
4      <span class="docEmphStrong">shift</span>
    done

(The Output)
$ <span class="docEmphStrong">dater</span>
<span class="docEmphasis">Sat</span>
<span class="docEmphasis">Oct</span>
<span class="docEmphasis">13</span>
<span class="docEmphasis">12:12:13</span>
<span class="docEmphasis">PDT</span>
<span class="docEmphasis">2001</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command takes 
      the output of the <span class="docEmphasis">date</span> command and 
      assigns the output to positional parameters <span class="docEmphasis">$1</span> 
      through <span class="docEmphasis">$6.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> command 
      tests whether the number of positional parameters (<span class="docEmphasis">$#</span>) 
      is greater than <span class="docEmphasis">0.</span> If true, the body of 
      the loop is entered.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">echo</span> command 
      displays the value of <span class="docEmphasis">$1,</span> the first 
      positional parameter.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">shift</span> command 
      shifts the parameter list once to the left. Each time through the loop, 
      the list is shifted until the list is empty. At that time,
      <span class="docEmphasis">$#</span> will be zero and the loop terminates.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
break</span> Command.</span> The built-in <span class="docEmphasis">break</span> 
command is used to force immediate exit from a loop, but not from a program. (To 
leave a program, the <span class="docEmphasis">exit</span> command is used.) 
After the <span class="docEmphasis">break</span> command is executed, control 
starts after the <span class="docEmphasis">done</span> keyword. The
<span class="docEmphasis">break</span> command causes an exit from the innermost 
loop, so if you have nested loops, the <span class="docEmphasis">break</span> 
command takes a number as an argument, allowing you to break out of a specific 
outer loop. If you are nested in three loops, the outermost loop is loop number 
3, the next nested loop is loop number 2, and the innermost nested loop is loop 
number 1. The <span class="docEmphasis">break</span> is useful for exiting from 
an infinite loop.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>break [n]
</pre>
    </td>
  </tr>
</table>

<h5 id="ch08list81" class="docExampleTitle">Example 8.81 </h5>
<p class="docText">
<img alt="graphics/08prfig03.gif" src="08prfig03.gif" border="0" width="500" height="165"></p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">true</span> command is a 
      UNIX command that always exits with zero status. It is often used to start 
      an infinite loop. It is okay to put the <span class="docEmphasis">do</span> 
      statement on the same line as the <span class="docEmphasis">while</span> 
      command, as long as a semicolon separates them. The body of the loop is 
      entered.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked for input. The user's input is 
      assigned to the variable <span class="docEmphasis">answer.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If <span class="docEmphasis">$answer</span> evaluates 
      to <span class="docEmphasis">Y</span> or <span class="docEmphasis">y,</span> 
      control goes to line 4.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">break</span> command is 
      executed, the loop is exited, and control goes to line 7. The line
      <span class="docEmphasis">Here we are</span> is printed. Until the user 
      answers with a <span class="docEmphasis">Y</span> or
      <span class="docEmphasis">y,</span> the program will continue to ask for 
      input. This could go on forever!</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the test fails in line 3, the
      <span class="docEmphasis">else</span> commands are executed. When the body 
      of the loop ends at the <span class="docEmphasis">done</span> keyword, 
      control starts again at the top of the <span class="docEmphasis">while</span> 
      at line 1.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is the end of the loop body.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Control starts here after the <span class="docEmphasis">
      break</span> command is executed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
continue</span> Command.</span> The <span class="docEmphasis">continue</span> 
command returns control to the top of the loop if some condition becomes true. 
All commands below the <span class="docEmphasis">continue</span> will be 
ignored. If nested within a number of loops, the <span class="docEmphasis">
continue</span> command returns control to the innermost loop. If a number is 
given as its argument, control can then be started at the top of any loop. If 
you are nested in three loops, the outermost loop is loop number 3, the next 
nested loop is loop number 2, and the innermost nested loop is loop number 1.<span id="ENB8-7"><a class="docLink" href="#EN8-7"><sup>[7]</sup></a></span>
</p>


<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>continue [n]
</pre>
    </td>
  </tr>
</table>

<h5 id="ch08list82" class="docExampleTitle">Example 8.82 </h5>
<p class="docText">
<img alt="graphics/08prfig04.gif" src="08prfig04.gif" border="0" width="500" height="316"></p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After command substitution, <span class="docEmphasis">
      cat mail_list,</span> the <span class="docEmphasis">for</span> loop will 
      iterate through the list of names from the file called
      <span class="docEmphasis">mail_list.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the name matches <span class="docEmphasis">richard,</span> 
      the <span class="docEmphasis">continue</span> command is executed and 
      control goes back to top of the loop where the loop expression is 
      evalutated. Since <span class="docEmphasis">richard</span> has already 
      been shifted off the list, the next user, <span class="docEmphasis">
      melanie,</span> will be assigned to the variable <span class="docEmphasis">
      name.</span> The string <span class="docEmphasis">richard</span> does not 
      need to be quoted here because it is only one word. But, it is good 
      practice to quote the string after the test's <span class="docEmphasis">=</span> 
      operator because if the string consisted of more than one word, for 
      example, <span class="docEmphasis">richard jones,</span> the
      <span class="docEmphasis">test</span> command would produce an error 
      message:</p>
      <pre>test: unknown operator richard
</pre>
      </span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">continue</span> command 
      returns control to the top of the loop, skipping any commands in the rest 
      of the loop body.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All users in the list, except <span class="docEmphasis">
      richard,</span> will be mailed a copy of the file
      <span class="docEmphasis">memo.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is the end of the loop body.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Nested Loops and Loop Control.</b> When using nested 
loops, the <span class="docEmphasis">break</span> and <span class="docEmphasis">
continue</span> commands can be given a numeric, integer argument so that 
control can go from the inner loop to an outer loop.</p>
<h5 id="ch08list83" class="docExampleTitle">Example 8.83 </h5>
<p class="docText">
<img alt="graphics/08prfig05.gif" src="08prfig05.gif" border="0" width="500" height="590"></p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The outer <span class="docEmphasis">for</span> loop is 
      started. The first time in the loop, <span class="docEmphasis">Jan</span> 
      is assigned to <span class="docEmphasis">month.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The inner <span class="docEmphasis">for</span> loop 
      starts. The first time in this loop, <span class="docEmphasis">1</span> is 
      assigned to <span class="docEmphasis">week.</span> The inner loop iterates 
      completely before going back to the outer loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the user enters either an <span class="docEmphasis">
      n</span> or presses Enter, line 4 is executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">continue</span> command 
      with an argument of 2 starts control at the top of the second outermost 
      loop. The <span class="docEmphasis">continue</span> without an argument 
      returns control to the top of the innermost loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Control is returned to the innermost
      <span class="docEmphasis">for</span> loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This <span class="docEmphasis">done</span> terminates 
      the innermost loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This <span class="docEmphasis">done</span> terminates 
      the outermost loop.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>I/O Redirection and Subshells.</b> Input can be piped or 
redirected to a loop from a file. Output can also be piped or redirected to a 
file from a loop. The shell starts a subshell to handle I/O redirection and 
pipes. Any variables defined within the loop will not be known to the rest of 
the script when the loop terminates.</p>
<p class="docText"><span class="docEmphStrong">Redirecting the Output of the 
Loop to a File</span></p>
<h5 id="ch08list84" class="docExampleTitle">Example 8.84 </h5>
<pre>(The Command Line)
1   $ <span class="docEmphStrong">cat memo</span>
    <span class="docEmphasis">abc</span>
    <span class="docEmphasis">def</span>
    <span class="docEmphasis">ghi</span>

(The Script)
$ <span class="docEmphStrong">cat numbers</span>
    #!/bin/sh
    <span class="docEmphasis"># Program name: numberit</span>
    <span class="docEmphasis"># Put line numbers on all lines of memo</span>
2   if [ $# -lt  1 ]
    then
3       echo  &quot;Usage: $0 filename &quot; &gt;&amp;2
        exit 1
    fi
4   count=1                     <span class="docEmphasis"># Initialize count</span>
5   <span class="docEmphStrong">cat $1 | while read line</span>
    <span class="docEmphasis"># Input is coming from file on command line</span>
    do
6       <span class="docEmphStrong">[ $count -eq 1 ] &amp;&amp; echo &quot;Processing file $1...&quot; &gt; /dev/tty</span>
7       echo $count $line
8       count='expr $count + 1'
9   <span class="docEmphStrong">done &gt; tmp$$</span>                 <span class="docEmphasis"># Output is going to a temporary file</span>
10  mv tmp$$ $1

(The Command Line)
11  $ <span class="docEmphStrong">numberit memo</span>
    <span class="docEmphasis">Processing file memo...</span>

 12 $ <span class="docEmphStrong">cat memo</span>
    <span class="docEmphasis">1 abc</span>
    <span class="docEmphasis">2 def</span>
    <span class="docEmphasis">3 ghi</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The contents of file <span class="docEmphasis">memo</span> 
      are displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the user did not provide a command line argument 
      when running this script, the number of arguments (<span class="docEmphasis">$#</span>) 
      will be less than one and the error message appears.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The usage message is sent to <span class="docEmphasis">
      stderr</span> (<span class="docEmphasis">&gt;&amp;2</span>) if the number of 
      arguments is less than <span class="docEmphasis">1.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">count</span> variable is 
      assigned the value <span class="docEmphasis">1.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The UNIX <span class="docEmphasis">cat</span> command 
      displays the contents of the filename stored in <span class="docEmphasis">
      $1,</span> and the output is piped to the <span class="docEmphasis">while</span> 
      loop. The <span class="docEmphasis">read</span> command is assigned the 
      first line of the file the first time in the loop, the second line of the 
      file the next time through the loop, and so forth. The
      <span class="docEmphasis">read</span> command returns a zero exit status 
      if it is successful in reading input and one if it fails.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the value of <span class="docEmphasis">count</span> 
      is <span class="docEmphasis">1,</span> the <span class="docEmphasis">echo</span> 
      command is executed and its output is sent to <span class="docEmphasis">
      /dev/tty,</span> the screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">echo</span> command 
      prints the value of <span class="docEmphasis">count,</span> followed by 
      the line in the file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">count</span> is 
      incremented by one.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of this entire loop, each line of the file 
      in <span class="docEmphasis">$1,</span> is redirected to the file
      <span class="docEmphasis">tmp$$,</span> with the exception of the first 
      line of the file, which is redirected to the terminal,
      <span class="docEmphasis">/dev/tty.</span><span id="ENB8-8"><a class="docLink" href="#EN8-8"><sup>[8]</sup></a></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">tmp</span> file is 
      renamed to the filename assigned to <span class="docEmphasis">$1.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program is executed. The file to be processed is 
      called <span class="docEmphasis">memo.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The file <span class="docEmphasis">memo</span> is 
      displayed after the script has finished, demonstrating that line numbers 
      have been prepended to each line.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list85" class="docExampleTitle">Example 8.85 </h5>
<pre>(The File)
$ <span class="docEmphStrong">cat testing</span>
<span class="docEmphasis">apples</span>
<span class="docEmphasis">pears</span>
<span class="docEmphasis">peaches</span>

(The Script)
    #!/bin/sh
    <span class="docEmphasis"># This program demonstrates the scope of variables when</span>
    <span class="docEmphasis"># assigned within loops where the looping command uses</span>
    <span class="docEmphasis"># redirection. A subshell is started when the loop uses</span>
    <span class="docEmphasis"># redirection, making all variables created within the loop</span>
    <span class="docEmphasis"># local to the shell where the loop is being executed.</span>
1   <span class="docEmphStrong">while read line</span>
    <span class="docEmphStrong">do</span>
2       echo $line    <span class="docEmphasis"># This line will be redirected to outfile</span>
3       <span class="docEmphStrong">name=JOE</span>
4   <span class="docEmphStrong">done &lt; testing &gt; outfile</span>  <span class="docEmphasis"># Redirection of input and output</span>
5   echo Hi there <span class="docEmphStrong">$name</span>

(The Output)
5   <span class="docEmphasis">Hi there</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the exit status of the <span class="docEmphasis">
      read</span> command is successful, the body of the
      <span class="docEmphasis">while</span> loop is entered. The
      <span class="docEmphasis">read</span> command is getting input from the 
      file <span class="docEmphasis">testing,</span> named after the
      <span class="docEmphasis">done</span> on line 4. Each time through the 
      loop, the <span class="docEmphasis">read</span> command reads another line 
      from the file <span class="docEmphasis">testing.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of <span class="docEmphasis">line</span> will 
      be redirected to <span class="docEmphasis">outfile</span> in line 4.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">name</span> is 
      assigned <span class="docEmphasis">JOE.</span> Since redirection is 
      utilized in this loop, the variable is local to the loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> keyword 
      consists of the redirection of input from the file
      <span class="docEmphasis">testing,</span> and the redirection of output to 
      the file <span class="docEmphasis">outfile.</span> All output from this 
      loop will go to <span class="docEmphasis">outfile.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When out of the loop, <span class="docEmphasis">name</span> 
      is undefined. It was local to the <span class="docEmphasis">while</span> 
      loop and known only within the body of that loop. Since the variable
      <span class="docEmphasis">name</span> has no value, only the string
      <span class="docEmphasis">Hi there</span> is displayed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Piping the Output of a Loop to a UNIX Command.</b> Output 
can be either piped to another command(s) or redirected to a file.</p>
<h5 id="ch08list86" class="docExampleTitle">Example 8.86 </h5>
<pre>(The Script)
    #!/bin/sh
1   <span class="docEmphStrong">for i in 7 9 2 3 4  5</span>
2   <span class="docEmphStrong">do</span>
        echo  $i
3   <span class="docEmphStrong">done | sort –n</span>


(The Output)
<span class="docEmphasis">2</span>
<span class="docEmphasis">3</span>
<span class="docEmphasis">4</span>
<span class="docEmphasis">5</span>
<span class="docEmphasis">7</span>
<span class="docEmphasis">9</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">for</span> loop iterates 
      through a list of unsorted numbers.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">In the body of the loop, the numbers are printed. This 
      output will be piped into the UNIX <span class="docEmphasis">sort</span> 
      command, a numerical sort.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The pipe is created after the <span class="docEmphasis">
      done</span> keyword. The loop is run in a subshell.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Running Loops in the Background.</b> Loops can be executed 
to run in the background. The program can continue without waiting for the loop 
to finish processing.</p>
<h5 id="ch08list87" class="docExampleTitle">Example 8.87 </h5>
<pre>(The Script)
    #!/bin/sh
1   <span class="docEmphStrong">for person in bob jim joe sam</span>
    <span class="docEmphStrong">do</span>
2       mail $person &lt; memo
3   <span class="docEmphStrong">done &amp;</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">for</span> loop shifts 
      through each of the names in the wordlist: <span class="docEmphasis">bob, 
      jim, joe,</span> and <span class="docEmphasis">sam.</span> Each of the 
      names is assigned to the variable <span class="docEmphasis">person,</span> 
      in turn.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">In the body of the loop, each person is sent the 
      contents of the <span class="docEmphasis">memo</span> file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The ampersand at the end of the
      <span class="docEmphasis">done</span> keyword causes the loop to be 
      executed in the background. The program will continue to run while the 
      loop is executing.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
exec</span> Command and Loops.</span> The <span class="docEmphasis">exec</span> 
command can be used to open or close standard input or output without creating a 
subshell. Therefore, when starting a loop, any variables created within the body 
of the loop will remain when the loop completes. When using redirection in 
loops, any variables created within the loop are lost.</p>
<p class="docText">The <span class="docEmphasis">exec</span> command is often 
used to open files for reading and writing, either by name or by file descriptor 
number. Recall that file descriptors 0, 1, and 2 are reserved for standard 
input, output, and error. If a file is opened, it will receive the next 
available file descriptor. For example, if file descriptor 3 is the next free 
descriptor, the new file will be assigned file descriptor 3.</p>
<h5 id="ch08list88" class="docExampleTitle">Example 8.88 </h5>
<pre>(The File)
1   $ <span class="docEmphStrong">cat tmp</span>
    <span class="docEmphasis">apples</span>
    <span class="docEmphasis">pears</span>
    <span class="docEmphasis">bananas</span>
    <span class="docEmphasis">pleaches</span>
    <span class="docEmphasis">plums</span>

(The Script)
$ <span class="docEmphStrong">cat speller</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: speller</span>
    <span class="docEmphasis"># Purpose: Check and fix spelling errors in a file</span>
2   <span class="docEmphStrong">exec &lt; tmp</span>                   <span class="docEmphasis"># Opens the tmp file</span>
3   <span class="docEmphStrong">while read line</span>              <span class="docEmphasis"># Read from the tmp file</span>
    do
4       echo $line
5       echo  –n  &quot;Is this word correct? [Y/N] &quot;
6       <span class="docEmphStrong">read answer &lt; /dev/tty</span>   <span class="docEmphasis"># Read from the terminal</span>
7       case  &quot;$answer&quot; in
8       [Yy]*)
9            continue;;
        *)
             echo  &quot;What is the correct spelling? &quot;
10           <span class="docEmphStrong">read word &lt; /dev/tty</span>
11           sed  &quot;s/$line/$word/g&quot; tmp &gt; error
12           mv error tmp
13           echo $line has been changed to $word.
        esac
14  <span class="docEmphStrong">done</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The contents of the <span class="docEmphasis">tmp</span> 
      file are displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">exec</span> command 
      changes standard input (file descriptor 0) so that instead of input coming 
      from the keyboard, it is coming from the <span class="docEmphasis">tmp</span> 
      file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> loop starts. 
      The <span class="docEmphasis">read</span> command gets a line of input 
      from the <span class="docEmphasis">tmp</span> file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value stored in the <span class="docEmphasis">line</span> 
      variable is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked if the word is correct.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">read</span> gets the 
      user's response from the terminal<span class="docEmphasis">, /dev/tty.</span> 
      If the input is not redirected directly from the terminal, it will 
      continue to be read from the file <span class="docEmphasis">tmp,</span> 
      still opened for reading.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">case</span> command 
      evalutates the user's answer.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the variable answer evaluates to a string starting 
      with a <span class="docEmphasis">Y</span> or <span class="docEmphasis">y,</span> 
      the <span class="docEmphasis">continue</span> statement on the next line 
      will be executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">continue</span> statement 
      causes the program to go to the beginning of the <span class="docEmphasis">
      while</span> loop on line 3.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is again asked for input (the correct spelling 
      of the word). The input is redirected from the terminal,
      <span class="docEmphasis">/dev/tty.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">sed</span> command will 
      replace the value of <span class="docEmphasis">line</span> with the value 
      of <span class="docEmphasis">word</span> wherever it occurs in the
      <span class="docEmphasis">tmp</span> file, and send the output to the
      <span class="docEmphasis">error</span> file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The error file will be renamed
      <span class="docEmphasis">tmp,</span> thus overwriting the old contents of
      <span class="docEmphasis">tmp</span> with the contents of the
      <span class="docEmphasis">error</span> file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This line is displayed to indicate that the change has 
      been made.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> keyword marks 
      the end of the loop body.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong"><span class="docEmphasis">IFS</span> 
and Loops.</span> The shell's internal field separator (<span class="docEmphasis">IFS</span>) 
evaluates to spaces, tabs, and the newline character. It is used as a word 
(token) separator for commands that parse lists of words, such as
<span class="docEmphasis">read, set,</span> and <span class="docEmphasis">for.</span> 
It can be reset by the user if a different separator will be used in a list. 
Before changing its value, it is a good idea to save the original value of the
<span class="docEmphasis">IFS</span> in another variable. Then it is easy to 
return to its default value, if needed.</p>
<h5 id="ch08list89" class="docExampleTitle">Example 8.89 </h5>
<pre>(The Script )
$ <span class="docEmphStrong">cat runit</span>
    #/bin/sh
    <span class="docEmphasis">#</span> Script is called runit.
    <span class="docEmphasis"># IFS is the internal field separator and defaults to</span>
    <span class="docEmphasis"># spaces, tabs, and newlines.</span>
    <span class="docEmphasis"># In this script it is changed to a colon.</span>
1   <span class="docEmphStrong">names=Tom:Dick:Harry:John</span>
2   <span class="docEmphStrong">OLDIFS=&quot;$IFS</span>&quot;  <span class="docEmphasis"># Save the original value of IFS</span>
3   <span class="docEmphStrong">IFS=&quot;:&quot;</span>
4   <span class="docEmphStrong">for persons in $names</span>
    do
5       echo  Hi $persons
    done
6   <span class="docEmphStrong">IFS=&quot;$OLDIFS</span><span class="docEmphasis">&quot;             # Reset the IFS to old value</span>
7   <span class="docEmphStrong">set Jill Jane Jolene</span>      <span class="docEmphasis"># Set positional parameters</span>
8   <span class="docEmphStrong">for girl in $*</span>
    do
9      echo Howdy $girl
    done

(The Output)
$ <span class="docEmphStrong">runit</span>
<span class="docEmphasis">5</span>   <span class="docEmphasis">Hi Tom</span>
    <span class="docEmphasis">Hi Dick</span>
    <span class="docEmphasis">Hi Harry</span>
    <span class="docEmphasis">Hi John</span>
<span class="docEmphasis">9</span>   <span class="docEmphasis">Howdy Jill</span>
    <span class="docEmphasis">Howdy Jane</span>
    <span class="docEmphasis">Howdy Jolene</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">names</span> variable is 
      set to the string <span class="docEmphasis">Tom:Dick:Harry:John.</span> 
      Each of the words is separated by a colon.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of <span class="docEmphasis">IFS,</span> 
      whitespace, is assigned to another variable, <span class="docEmphasis">
      OLDIFS.</span> Since the value of the <span class="docEmphasis">IFS</span> 
      is whitespace, it must be quoted to preserve it.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">IFS</span> is assigned a 
      colon. Now the colon is used to separate words.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After variable substitution, the
      <span class="docEmphasis">for</span> loop will iterate through each of the 
      names, using the colon as the internal field separator between the words.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Each of the names in the wordlist are displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">IFS</span> is reassigned 
      its original value stored in <span class="docEmphasis">OLDIFS.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The positional parameters are set.
      <span class="docEmphasis">$1</span> is assigned <span class="docEmphasis">
      Jill,</span> <span class="docEmphasis">$2</span> is assigned
      <span class="docEmphasis">Jane,</span> and <span class="docEmphasis">$3</span> 
      is assigned <span class="docEmphasis">Jolene.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$*</span> evaluates to all 
      the positional parameters, <span class="docEmphasis">Jill, Jane,</span> 
      and <span class="docEmphasis">Jolene.</span> The for loop assigns each of 
      the names to the <span class="docEmphasis">girl</span> variable, in turn, 
      through each iteration of the loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Each of the names in the parameter list is displayed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec19">8.2.8 Functions</h4>
<p class="docText">Functions were introduced to the Bourne shell in AT&amp;T's UNIX 
System VR2. A function is a name for a command or group of commands. Functions 
are used to modularize your program and make it more efficient. You may even 
store functions in another file and load them into your script when you are 
ready to use them.</p>
<p class="docText">Here is a review of some of the important rules about using 
functions.</p>
<span style="FONT-WEIGHT: bold">
<ol class="docList" type="1">
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">The Bourne shell determines whether you are using a 
  built-in command, a function, or an executable program found out on the disk. 
  It looks for built-in commands first, then functions, and last, executables.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">A function must be defined before it is used.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">The function runs in the current environment; it shares 
  variables with the script that invoked it, and lets you pass arguments by 
  assigning them as positional parameters. If you use the exit command in a 
  function, you exit the entire script. If, however, either the input or output 
  of the function is redirected or the function is enclosed within backquotes 
  (command substitution), a subshell is created and the function and its 
  variables and present working directory are known only within the subshell. 
  When the function exits, any variables set there will be lost, and if you have 
  changed directories, you will revert to the directory you were in before 
  invoking the function. If you exit the function, you return to where the 
  script left off when the function was invoked.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">The <span class="docEmphasis">return</span> statement 
  returns the exit status of the last command executed within the function or 
  the value of the argument given, and cannot exceed a value of 255.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">Functions exist only in the shell where they are defined; 
  they cannot be exported to subshells. The <span class="docEmphasis">dot</span> 
  command can be used to execute functions stored in files.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">To list functions and definitions, use the
  <span class="docEmphasis">set</span> command.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">Traps, like variables, are global within functions. They 
  are shared by both the script and the functions invoked in the script. If a 
  trap is defined in a function, it is also shared by the script. This could 
  have unwanted side effects.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">If functions are stored in another file, they can be loaded 
  into the current script with the <span class="docEmphasis">dot</span> command.</span></li>
</ol>
</span>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>function_name () { commands ; commands; }
</pre>
    </td>
  </tr>
</table>

<h5 id="ch08list90" class="docExampleTitle">Example 8.90 </h5>
<pre><span class="docEmphStrong">dir () { echo &quot;Directories: &quot; ; ls -l | nawk '/^d/ {print $NF}' ; }</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The name of the function is <span class="docEmphasis">
    dir.</span> The empty parentheses are necessary syntax for naming the 
    function but have no other purpose. The commands within the curly braces 
    will be executed when <span class="docEmphasis">dir</span> is typed. The 
    purpose of the function is to list only the subdirectories below the present 
    working directory. The spaces surrounding the curly braces are required.</td>
  </tr>
</table>

<p class="docText"><b>To Unset a Function.</b> To remove a function from memory, 
the <span class="docEmphasis">unset</span> command is used.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>unset function_name
</pre>
    </td>
  </tr>
</table>

<p class="docText"><b>Function Arguments and the Return Value.</b> Since the 
function is executed within the current shell, the variables will be known to 
both the function and the shell. Any changes made to your environment in the 
function will also be made to the shell. Arguments can be passed to functions by 
using positional parameters. The positional parameters are private to the 
function; that is, arguments to the function will not affect any positional 
parameters used outside the function.</p>
<p class="docText">The <span class="docEmphasis">return</span> command can be 
used to exit the function and return control to the program at the place where 
the function was invoked. (Remember, if you use <span class="docEmphasis">exit</span> 
anywhere in your script, including within a function, the script terminates.) 
The return value of a function is really just the value of the exit status of 
the last command in the script, unless you give a specific argument to the
<span class="docEmphasis">return</span> command. If a value is assigned to the
<span class="docEmphasis">return</span> command, that value is stored in the
<span class="docEmphasis">?</span> variable and can hold an integer value 
between zero and 255. Because the <span class="docEmphasis">return</span> 
command is limited to returning only an integer between zero and 255, you can 
use command substitution to capture the output of a function. Place the entire 
function in backquotes and assign the output to a variable just as you would if 
getting the output of a UNIX command.</p>
<h5 id="ch08list91" class="docExampleTitle">Example 8.91 </h5>
<pre>(Using the return Command)
(The Script)
$ <span class="docEmphStrong">cat do_increment</span>
    #!/bin/sh
    # <span class="docEmphasis">Scriptname: do_increment</span>
1    <span class="docEmphStrong">increment ()</span>  <span class="docEmphStrong">{</span>
2       sum='expr $1 + 1'
3       <span class="docEmphStrong">return $sum</span>  <span class="docEmphasis"># Return the value of sum to the script.</span>
    <span class="docEmphStrong">}</span>
4   echo  –n &quot;The sum is &quot;
5   <span class="docEmphStrong">increment</span> <span class="docEmphBoldItalic">5</span>    <span class="docEmphasis"># Call function increment; pass 5 as a</span>
                   <span class="docEmphasis"># parameter. 5 becomes $1 for the increment</span>
                   <span class="docEmphasis"># function.</span>
<span class="docEmphStrong">6</span>   <span class="docEmphStrong">echo $?</span>        <span class="docEmphasis"># The return value is stored in $?</span>
7   echo  $sum     <span class="docEmphasis"># The variable &quot;sum&quot; is known to the function,</span>
                   <span class="docEmphasis"># and is also known to the main script.</span>

(The Output)
      $ <span class="docEmphStrong">do_increment</span>
4,6   <span class="docEmphasis">The sum is 6</span>
<span class="docEmphasis">7</span>     <span class="docEmphasis">6</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The function called <span class="docEmphasis">increment</span> 
      is defined.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When the function is called, the value of the first 
      argument, <span class="docEmphasis">$1,</span> will be incremented by one 
      and the result assigned to <span class="docEmphasis">sum.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">return</span> built-in 
      command, when given an argument, returns to the main script after the line 
      where the function was invoked. It stores its argument in the
      <span class="docEmphasis">?</span> variable.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The string is echoed to the screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">increment</span> function 
      is called with an argument of <span class="docEmphasis">5.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When the function returns, its exit status is stored in 
      the <span class="docEmphasis">?</span> variable. The exit status is the 
      exit value of the last command executed in the function unless an explicit 
      argument is used in the <span class="docEmphasis">return</span> statement. 
      The argument for <span class="docEmphasis">return</span> must be an 
      integer between 0 and 255.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Although the <span class="docEmphasis">sum</span> was 
      defined in the function <span class="docEmphasis">increment,</span> it is 
      global in scope, and therefore also known within the script that invoked 
      the function. Its value is printed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list92" class="docExampleTitle">Example 8.92 </h5>
<pre>(Using Command Substitution)
(The Script)
$ <span class="docEmphStrong">cat do_square</span>
    #!/bin/sh
    <span class="docEmphasis">#</span> <span class="docEmphasis">Scriptname: do_square</span>
1   <span class="docEmphStrong">function square</span> {
    sq='expr $1 \* $1'
    echo  &quot;Number to be squared is $1.&quot;
2   echo  &quot;The result is $sq &quot;
    }
3   echo &quot;Give me a number to square. &quot;
    read number
4   <span class="docEmphStrong">value_returned='square $number'</span> <span class="docEmphasis"># Command substitution</span>
5   echo   $value_returned

(The Output)
$ <span class="docEmphStrong">do_square</span>
3   <span class="docEmphasis">Give me a number to square.</span>
    <span class="docEmphBoldItalic">10</span>
5   <span class="docEmphasis">Number to be squared is 10. The result is 100</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The function called <span class="docEmphasis">square</span> 
      is defined. Its function, when called, is to multiply its argument,
      <span class="docEmphasis">$1,</span> by itself.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The result of squaring the number is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked for input. This is the line where the 
      program starts executing.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The function <span class="docEmphasis">square</span> is 
      called with a number (input from the user) as its argument. Command 
      substitution is performed because the function is enclosed in backquotes. 
      The output of the function, both of its <span class="docEmphasis">echo</span> 
      statements, is assigned to the variable <span class="docEmphasis">
      value_returned.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The command substitution removes the newline between 
      the strings <span class="docEmphasis">Number to be</span>
      <span class="docEmphasis">squared</span> <span class="docEmphasis">is 10.</span> 
      and <span class="docEmphasis">The result is 100.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec20">8.2.9 Functions and the <span class="docEmphasis">
dot</span> Command</h4>
<p class="docText"><b>Storing Functions.</b> Functions are often defined in the 
.<span class="docEmphasis">profile</span> file, so that when you log in, they 
will be defined. Functions cannot be exported, but they can be stored in a file. 
Then when you need the function, the <span class="docEmphasis">dot</span> 
command is used with the name of the file to activate the definitions of the 
functions within it.</p>
<h5 id="ch08list93" class="docExampleTitle">Example 8.93 </h5>
<pre>1   $ <span class="docEmphStrong">cat myfunctions</span>
2   <span class="docEmphBoldItalic">go()  {</span>
        <span class="docEmphasis">cd $HOME/bin/prog</span>
        <span class="docEmphasis">PS1=</span><span class="docEmphStrong">'</span><span class="docEmphasis">'pwd' &gt;</span> <span class="docEmphStrong">'</span>
         <span class="docEmphasis">ls</span>
    <span class="docEmphasis">}</span>
<span class="docEmphStrong">3</span>   <span class="docEmphBoldItalic">greetings() {</span> <span class="docEmphasis">echo &quot;Hi $1! Welcome to my world.&quot; ; }</span>

<span class="docEmphStrong">4</span>   <span class="docEmphStrong">$ . myfunctions</span>
5   $ <span class="docEmphStrong">greetings george</span>
    <span class="docEmphasis">Hi george! Welcome to my world.</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The file <span class="docEmphasis">myfunctions</span> 
      is displayed. It contains two function definitions.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The first function defined is called
      <span class="docEmphasis">go</span>. It sets the primary prompt to the 
      present working directory.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The second function defined is called
      <span class="docEmphasis">greetings.</span> It will greet the name of the 
      user passed in as an argument.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">dot</span> command loads 
      the contents of the file <span class="docEmphasis">myfunctions</span> into 
      the shell's memory. Now both functions are defined for this shell.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">greetings</span> function 
      is invoked and executed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list94" class="docExampleTitle">Example 8.94 </h5>
<pre>(The <span class="docEmphasis">.dbfunctions</span> file  shown below contains functions to be used by
the main program)
1   $ <span class="docEmphStrong">cat .dbfunctions</span>
2   <span class="docEmphStrong">addon ()</span> {    <span class="docEmphasis"># Function is named and defined in file .dbfunctions</span>
3       while true
        do
            echo &quot;Adding information &quot;
            echo &quot;Type the full name of employee &quot;
            read name
            echo &quot;Type address for employee &quot;
            read address
            echo &quot;Type start date for employee (4/10/88 ) :&quot;
            read startdate
            echo $name:$address:$startdate
            echo –n &quot;Is this correct? &quot;
            read ans
            case &quot;$ans&quot;  in
            [Yy]*)
                      echo &quot;Adding info...&quot;
                      echo $name:$address:$startdate&gt;&gt;datafile
                 sort –u datafile –o datafile
                 echo –n &quot;Do you want to go back to the main menu? &quot;
                 read ans
                 if [ $ans = Y –o $ans = y ]
                 then
4                     <span class="docEmphStrong">return</span>        <span class="docEmphasis"># Return to calling program</span>
                 else
5                     continue      <span class="docEmphasis"># Go to the top of the loop</span>
                 fi
                 ;;
            *)
                 echo &quot;Do you want to try again? &quot;
                 read answer
            case &quot;$answer&quot; in
            [Yy]*) continue;;
            *) exit;;
            esac
                 ;;
        esac
    done
6   }   <span class="docEmphasis"># End of function definition</span>
<span class="docEmphasis">-------------------------------------------------------------</span>
(The Command Line)
7   $ <span class="docEmphStrong">more mainprog</span>
    #!/bin/sh
    <span class="docEmphasis"># Scriptname: mainprog</span>
    <span class="docEmphasis"># This is the main script that will call the function, addon</span>

    datafile=$HOME/bourne/datafile
8   <span class="docEmphStrong">. .dbfunctions</span>      <span class="docEmphasis"># The dot command reads the dbfunctions file</span>
                        <span class="docEmphasis"># into memory</span>
    if [ ! –f $datafile ]
    then
       echo &quot;'basename $datafile' does not exist&quot; 1&gt;&amp;2
       exit 1
    fi
9   echo &quot;Select one: &quot;
    cat &lt;&lt;EOF
        [1] Add info
        [2] Delete info
        [3] Exit
    EOF
    read choice
    case $choice in
10      1)  <span class="docEmphStrong">addon</span>          <span class="docEmphasis"># Calling the addon function</span>
             ;;
        2)  <span class="docEmphStrong">delete</span>         <span class="docEmphasis"># Calling the delete function</span>
             ;;

        3)  update
             ;;
        4)
            echo Bye
            exit 0
             ;;
        *)  echo Bad choice
            exit 2
             ;;
    esac
    echo Returned from function call
    echo The name is $name
    <span class="docEmphasis"># Variable set in the function are known in this shell.</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">.dbfunctions</span> file 
      is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">addon</span> function is 
      defined. Its function is to add new information to the file
      <span class="docEmphasis">datafile.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A <span class="docEmphasis">while</span> loop is 
      entered. It will loop forever unless a loop control statement such as
      <span class="docEmphasis">break</span> or <span class="docEmphasis">
      continue</span> is included in the body of the loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">return</span> command 
      sends control back to the calling program where the function was called.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Control is returned to the top of the
      <span class="docEmphasis">while</span> loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The closing curly brace ends the function definition.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is the main script. The function
      <span class="docEmphasis">addon</span> will be used in this script.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">dot</span> command loads 
      the file <span class="docEmphasis">.dbfunctions</span> into the program's 
      memory. Now the function <span class="docEmphasis">addon</span> is defined 
      for this script and available for use. It is as though you had just 
      defined the function right here in the script.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A menu is displayed with the <span class="docEmphasis">
      here</span> <span class="docEmphasis">document.</span> The user is asked 
      to select a menu item.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">addon</span> function is 
      invoked.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec21">8.2.10 Trapping Signals</h4>
<p class="docText">While your program is running, if you press Control-C or 
Control-\, your program terminates as soon as the signal arrives. There are 
times when you would rather not have the program terminate immediately after the 
signal arrives. You could arrange to ignore the signal and keep running or 
perform some sort of cleanup operation before actually exiting the script. The
<span class="docEmphasis">trap</span> command allows you to control the way a 
program behaves when it receives a signal.</p>
<p class="docText">A <span class="docEmphasis">signal</span> is defined as an 
asynchronous message that consists of a number that can be sent from one process 
to another, or by the operating system to a process if certain keys are pressed 
or if something exceptional happens.<span id="ENB8-9"><a class="docLink" href="#EN8-9"><sup>[9]</sup></a></span> 
The <span class="docEmphasis">trap</span> command tells the shell to terminate 
the command currently in execution upon the receipt of a signal. If the
<span class="docEmphasis">trap</span> command is followed by commands within 
quotes, the command string will be executed upon receipt of a specified signal. 
The shell reads the command string twice, once when the trap is set, and again 
when the signal arrives. If the command string is surrounded by double quotes, 
all variable and command substitution will be performed when the trap is set the 
first time. If single quotes enclose the command string, variable and command 
substitution do not take place until the signal is detected and the trap is 
executed.</p>
<p class="docText">Use the command <span class="docEmphasis">kill –l</span> to 
get a list of all signals. <a class="docLink" href="#ch08table15">Table 8.15</a> 
provides a list of signal numbers and their corresponding names.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>trap 'command; command' signal-number
</pre>
    </td>
  </tr>
</table>

<h5 id="ch08list95" class="docExampleTitle">Example 8.95 </h5>
<pre><span class="docEmphStrong">trap 'rm tmp*; exit 1'  1 2 15</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">When any of the signals <span class="docEmphasis">1</span> 
    (hangup), <span class="docEmphasis">2</span> (interrupt), or
    <span class="docEmphasis">15</span> (software termination) arrive, remove 
    all the <span class="docEmphasis">tmp</span> files and exit.</td>
  </tr>
</table>

<p class="docText">If an interrupt signal comes in while the script is running, 
the <span class="docEmphasis">trap</span> command lets you handle the signal in 
several ways. You can let the signal behave normally (default), ignore the 
signal, or create a handler function to be called when the signal arrives.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table15" class="docTableTitle">Table 8.15. Signal Numbers and Signals</h5>
  </caption>
  <colgroup span="3" align="left">
  </colgroup>
  <tr>
    <td class="docTableCell" vAlign="top">1) <span class="docEmphasis">HUP</span>
    </td>
    <td class="docTableCell" vAlign="top">12) <span class="docEmphasis">SYS</span>
    </td>
    <td class="docTableCell" vAlign="top">23) <span class="docEmphasis">POLL</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">2) <span class="docEmphasis">INT</span>
    </td>
    <td class="docTableCell" vAlign="top">13) <span class="docEmphasis">PIPE</span>
    </td>
    <td class="docTableCell" vAlign="top">24) <span class="docEmphasis">XCPU</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">3) <span class="docEmphasis">QUIT</span>
    </td>
    <td class="docTableCell" vAlign="top">14) <span class="docEmphasis">ALRM</span>
    </td>
    <td class="docTableCell" vAlign="top">25) <span class="docEmphasis">XFSZ</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">4) <span class="docEmphasis">ILL</span>
    </td>
    <td class="docTableCell" vAlign="top">15) <span class="docEmphasis">TERM</span>
    </td>
    <td class="docTableCell" vAlign="top">26) <span class="docEmphasis">VTALRM</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">5) <span class="docEmphasis">TRAP</span>
    </td>
    <td class="docTableCell" vAlign="top">16) <span class="docEmphasis">URG</span>
    </td>
    <td class="docTableCell" vAlign="top">27) <span class="docEmphasis">PROF</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">6) <span class="docEmphasis">IOT</span>
    </td>
    <td class="docTableCell" vAlign="top">17) <span class="docEmphasis">STOP</span>
    </td>
    <td class="docTableCell" vAlign="top">28) <span class="docEmphasis">WINCH</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">7) <span class="docEmphasis">EMT</span>
    </td>
    <td class="docTableCell" vAlign="top">18) <span class="docEmphasis">TSTP</span>
    </td>
    <td class="docTableCell" vAlign="top">29) <span class="docEmphasis">LOST</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">8) <span class="docEmphasis">FPE</span>
    </td>
    <td class="docTableCell" vAlign="top">19) <span class="docEmphasis">CONT</span>
    </td>
    <td class="docTableCell" vAlign="top">30) <span class="docEmphasis">USR1</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">9) <span class="docEmphasis">KILL</span>
    </td>
    <td class="docTableCell" vAlign="top">20) <span class="docEmphasis">CHLD</span>
    </td>
    <td class="docTableCell" vAlign="top">31) <span class="docEmphasis">USR2</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">10) <span class="docEmphasis">BUS</span>
    </td>
    <td class="docTableCell" vAlign="top">21) <span class="docEmphasis">TTIN</span>
    </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">11) <span class="docEmphasis">SEGV</span>
    </td>
    <td class="docTableCell" vAlign="top">22) <span class="docEmphasis">TTOU</span>
    </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
  </tr>
</table>

<p class="docText"><b>Resetting Signals.</b> To reset a signal to its default 
behavior, the <span class="docEmphasis">trap</span> command is followed by the 
signal name or number.</p>
<h5 id="ch08list96" class="docExampleTitle">Example 8.96 </h5>
<pre><span class="docEmphStrong">trap 2</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Resets the default action for signal
    <span class="docEmphasis">2</span>, <span class="docEmphasis">SIGINT,</span> 
    which is used to kill a process, i.e., Control-C.</td>
  </tr>
</table>

<h5 id="ch08list97" class="docExampleTitle">Example 8.97 </h5>
<pre><span class="docEmphStrong">trap 'trap 2' 2</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Sets the default action for signal
    <span class="docEmphasis">2</span> (<span class="docEmphasis">SIGINT</span>) 
    to execute the command string within quotes when the signal arrives. The 
    user must press Control-C twice to terminate the program. The first
    <span class="docEmphasis">trap</span> catches the signal, the second
    <span class="docEmphasis">trap</span> resets the trap back to its default 
    action, which is to kill the process.</td>
  </tr>
</table>

<p class="docText"><b>Ignoring Signals.</b> If the <span class="docEmphasis">
trap</span> command is followed by a pair of empty quotes, the signals listed 
will be ignored by the process.</p>
<h5 id="ch08list98" class="docExampleTitle">Example 8.98 </h5>
<pre><span class="docEmphStrong">trap &quot; &quot;  1  2</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Signals <span class="docEmphasis">1</span> and
    <span class="docEmphasis">2</span> will be ignored by the shell.</td>
  </tr>
</table>

<p class="docText"><b>Listing Traps.</b> To list all traps and the commands 
assigned to them, type <span class="docEmphasis">trap.</span></p>
<h5 id="ch08list99" class="docExampleTitle">Example 8.99 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat trapping</span>
    #/bin/sh
    <span class="docEmphasis"># Scriptname: trapping</span>
    <span class="docEmphasis"># Script to illustrate the trap command and signals</span>
1   <span class="docEmphStrong">trap 'echo &quot;Control–C will not terminate $0.&quot;' 2</span>
2   <span class="docEmphStrong">trap 'echo &quot;Control–\ will not terminate $0.&quot;' 3</span>

3   echo &quot;Enter any string after the prompt.&quot;
    echo &quot;When you are ready to exit, type \&quot;stop\&quot;.&quot;
4   while true
    do
       echo  –n &quot;Go ahead...&gt; &quot;
       read reply
5      if [ &quot;$reply&quot; = stop ]
       then
6           break
       fi
7   done

(The Output)
$  <span class="docEmphStrong">trapping</span>
<span class="docEmphasis">Enter any string after the prompt.</span>
<span class="docEmphasis">When you are ready to exit, type &quot;stop&quot;.</span>
<span class="docEmphasis">Go ahead...&gt; this is it^C</span>
<span class="docEmphasis">Control–C will not terminate trapping.</span>
<span class="docEmphasis">Go ahead...&gt; this is never it ^\</span>
<span class="docEmphasis">Control–\ will not terminate trapping.</span>
<span class="docEmphasis">Go ahead...&gt; stop</span>
$
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The first <span class="docEmphasis">trap</span> catches 
      the <span class="docEmphasis">INT</span> signal, Control-C. If ^C is 
      pressed while the program is running, the command enclosed in quotes will 
      be executed. Instead of aborting, the program will print
      <span class="docEmphasis">Control-C will not terminate trapping,</span> 
      and continue to prompt the user for input.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The second <span class="docEmphasis">trap</span> 
      command will be executed when the user presses Conrtrol-\, the
      <span class="docEmphasis">QUIT</span> signal. The string
      <span class="docEmphasis">Control-\ will not terminate trapping</span> 
      will be displayed, and the program will continue to run. This signal, by 
      default, kills the process and produces a core file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is prompted for input.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> loop is 
      entered and a prompt, <span class="docEmphasis">Go ahead…&gt;,</span> is 
      displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user input is assigned to the
      <span class="docEmphasis">reply</span> variable and, if its value matches
      <span class="docEmphasis">stop,</span> the loop exits and the program 
      terminates. This is the way we will get out of this program unless it is 
      killed with the <span class="docEmphasis">kill</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">break</span> command 
      causes the body of the loop to be exited with control starting after line 
      7. In this case, the program is at its end.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is the end of the <span class="docEmphasis">while</span> 
      loop.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Traps in Functions.</b> If you use a trap to handle a 
signal in a function, it will affect the entire script, once the function is 
called. The trap is global to the script. In the following example, the trap is 
set to ignore the interrupt key, ^C. This script had to be killed with the
<span class="docEmphasis">kill</span> command to stop the looping. It 
demonstrates potential undesirable side effects when using traps in functions.</p>
<h5 id="ch08list10" class="docExampleTitle">Example 8.100 </h5>
<pre>(The Script)
   #!/bin/sh
1  <span class="docEmphStrong">trapper () {</span>
          echo &quot;In trapper&quot;
2      <span class="docEmphStrong">trap 'echo &quot;Caught in a trap!&quot;' 2</span>
       <span class="docEmphasis"># Once set, this trap affects the entire script. Anytime</span>
       <span class="docEmphasis"># ^C is entered, the script will ignore it.</span>
   <span class="docEmphStrong">}</span>
3  while :
   do
      echo &quot;In the main script&quot;
4     <span class="docEmphStrong">trapper</span>
5     echo &quot;Still in main&quot;
      sleep 5
  done
(The Output)
$ <span class="docEmphStrong">trapper</span>
<span class="docEmphasis">In the main script</span>
<span class="docEmphasis">In trapper</span>
<span class="docEmphasis">Still in main</span>
<span class="docEmphasis">^CCaught in a trap!</span>
<span class="docEmphasis">In the main script</span>
<span class="docEmphasis">In trapper</span>
<span class="docEmphasis">Still in main</span>
<span class="docEmphasis">^CCaught in a trap!</span>
<span class="docEmphasis">In the main script</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">trapper</span> function 
      is defined. All variables and traps set in the function are global to the 
      script.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">trap</span> command will 
      ignore signal <span class="docEmphasis">2,</span> the interrupt key (^C). 
      If ^C is pressed, the message <span class="docEmphasis">Caught in a trap</span> 
      is printed, and the script continues forever.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The main script starts a forever loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The function <span class="docEmphasis">trapper</span> 
      is called.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When the function returns, execution starts here.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Debugging.</b> By using the <span class="docEmphasis">–n</span> 
option to the <span class="docEmphasis">sh</span> command, you can check the 
sytnax of your scripts without really executing any of the commands. If there is 
a syntax error in the script, the shell will report the error. If there are no 
errors, nothing is displayed.</p>
<p class="docText">The most commonly used method for debugging scripts is to use 
the <span class="docEmphasis">set</span> command with the
<span class="docEmphasis">–x</span> option, or to use the
<span class="docEmphasis">–x</span> option as an argument to the
<span class="docEmphasis">sh</span> command, followed by the script name. See
<a class="docLink" href="#ch08table16">Table 8.16</a> for a list of debugging 
options. These options allow an execution trace of your script. Each command 
from your script is displayed after substitution has been performed, and then 
the command is executed. When a line from your script is displayed, it is 
preceded with a plus (+) sign.</p>
<p class="docText">With the verbose option turned on, or by invoking the Bourne 
shell with the –<span class="docEmphasis">v</span> option (<span class="docEmphasis">sh 
–v</span> scriptname), each line of the script will be displayed just as it was 
typed in the script, and then executed.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table16" class="docTableTitle">Table 8.16. Debugging Options</h5>
  </caption>
  <colgroup span="3" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Command</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Option</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">What 
    It Does</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">sh –x</span> 
    scriptname </td>
    <td class="docTableCell" vAlign="top">Echo option </td>
    <td class="docTableCell" vAlign="top">Displays each line of script after 
    variable substitutions and before execution. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">sh –v</span> 
    scriptname </td>
    <td class="docTableCell" vAlign="top">Verbose option </td>
    <td class="docTableCell" vAlign="top">Displays each line of script before 
    execution, just as you typed it. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">sh –n</span> 
    scriptname </td>
    <td class="docTableCell" vAlign="top">Noexec option </td>
    <td class="docTableCell" vAlign="top">Interprets but does not execute 
    commands. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">set –x</span>
    </td>
    <td class="docTableCell" vAlign="top">Turns on echo </td>
    <td class="docTableCell" vAlign="top">Traces execution in a script. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">set +x</span>
    </td>
    <td class="docTableCell" vAlign="top">Turns off echo </td>
    <td class="docTableCell" vAlign="top">Turns off tracing. </td>
  </tr>
</table>

<h5 id="ch08list10" class="docExampleTitle">Example 8.101 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat todebug</span>
    #!/bin/sh
1   <span class="docEmphasis">#</span> <span class="docEmphasis">Scriptname: todebug</span>
    name=&quot;Joe Blow&quot;
    if  [ &quot;$name&quot; = &quot;Joe Blow&quot; ]
    then
       echo &quot;Hi $name&quot;
    fi

    num=1
    while [ $num -lt 5 ]
    do
         num='expr $num + 1'
    done
    echo The grand total is $num

(The Output)
2   $ <span class="docEmphStrong">sh –x todebug</span>
    <span class="docEmphasis">+ name=Joe Blow</span>
    <span class="docEmphasis">+ [ Joe Blow =  Joe Blow ]</span>
    <span class="docEmphasis">+ echo Hi Joe Blow</span>

    Hi Joe Blow
    num=1
    + [ 1 -lt 5 ]
    + expr 1 + 1
    num=2
    + [ 2 -lt 5 ]
    + expr 2 + 1
    num=3
    + [ 3 -lt 5 ]
    + expr 3 + 1
     num=4
    + [ 4 -lt 5 ]
    + expr 4 + 1
     num=5
    + [ 5 -lt 5 ]
    + echo The grand total is 5
    The grand total is 5
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The script is called <span class="docEmphasis">todebug.</span> 
      You can watch the script run with the –<span class="docEmphasis">x</span> 
      switch turned on. Each iteration of the loop is displayed and the values 
      of variables are printed as they are set and when they change.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">sh</span> command starts 
      the Bourne shell with the <span class="docEmphasis">–x</span> option. 
      Echoing is turned on. Each line of the script will be displayed to the 
      screen prepended with a plus sign (+). Variable substitution is performed 
      before the line is displayed. The result of the execution of the command 
      appears after the line has been displayed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec22">8.2.11 Processing Command Line Options with
<span class="docEmphasis">getopts</span></h4>
<p class="docText">If you are writing scripts that require a number of command 
line options, positional parameters are not always the most efficient. For 
example, the UNIX <span class="docEmphasis">ls</span> command takes a number of 
command line options and arguments. (An option requires a leading dash; an 
argument does not.) Options can be passed to the program in several ways:
<span class="docEmphasis">ls –laFi, ls –i –a –l –F, ls –ia –F,</span> and so 
forth. If you have a script that requires arguments, positional parameters might 
be used to process the arguments individually, such as <span class="docEmphasis">
ls –l –i –F</span> . Each dash option would be stored in
<span class="docEmphasis">$1, $2,</span> and <span class="docEmphasis">$3,</span> 
respectively. But, what if the user listed all of the options as one dash 
option, as in <span class="docEmphasis">ls –liF?</span> Now the
<span class="docEmphasis">–liF</span> would all be assigned to
<span class="docEmphasis">$1</span> in the script. The <span class="docEmphasis">
getopts</span> function makes it possible to process command line options and 
arguments in the same way they are processed by the <span class="docEmphasis">ls</span> 
program.<span id="ENB8-10"><a class="docLink" href="#EN8-10"><sup>[10]</sup></a></span> 
The <span class="docEmphasis">getopts</span> function will allow the
<span class="docEmphasis">runit</span> program to process its arguments using 
any variety of combinations.</p>
<h5 id="ch08list10" class="docExampleTitle">Example 8.102 </h5>
<pre>(The Command Line )
1   $ <span class="docEmphStrong">runit –x –n  200 filex</span>

2   $ <span class="docEmphStrong">runit –xn200 filex</span>

3   $ <span class="docEmphStrong">runit –xy</span>

4   $ <span class="docEmphStrong">runit –yx –n 30</span>

5   $ <span class="docEmphStrong">runit –n250 –xy filey</span>

( any other combination of these arguments )
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program <span class="docEmphasis">runit</span> 
      takes four arguments: <span class="docEmphasis">x</span> is an option,
      <span class="docEmphasis">n</span> is an option requiring a number 
      argument after it, and <span class="docEmphasis">filex</span> is an 
      argument that stands alone.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program <span class="docEmphasis">runit</span> 
      combines the options <span class="docEmphasis">x</span> and
      <span class="docEmphasis">n</span> and the number argument
      <span class="docEmphasis">200;</span> <span class="docEmphasis">filex</span> 
      is also an argument.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program <span class="docEmphasis">runit</span> is 
      invoked with the <span class="docEmphasis">x</span> and
      <span class="docEmphasis">y</span> options combined.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program <span class="docEmphasis">runit</span> is 
      invoked with the y and <span class="docEmphasis">x</span> options 
      combined; the <span class="docEmphasis">n</span> option is passed 
      separately, as is the number argument, 30.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program <span class="docEmphasis">runit</span> is 
      invoked with the <span class="docEmphasis">n</span> option combined with 
      the number argument, the <span class="docEmphasis">x</span> and
      <span class="docEmphasis">y</span> options are combined, and the
      <span class="docEmphasis">filey</span> is separate.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText">Before getting into all the details of the
<span class="docEmphasis">runit</span> program, we examine the line from the 
program where <span class="docEmphasis">getopts</span> is used to see how it 
processes the arguments.</p>
<h5 id="ch08list10" class="docExampleTitle">Example 8.103 </h5>
<pre>(A Line from the Script Called &quot;runit&quot;)
<span class="docEmphStrong">while getopts :xyn: name</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <ul>
      <li>
      <p class="docList"><span class="docEmphasis">x,</span>
      <span class="docEmphasis">y,</span> and <span class="docEmphasis">n</span> 
      are the options.</li>
      <li>
      <p class="docList">Options typed at the command line begin with a dash.</li>
      <li>
      <p class="docList">Any options that do not contain a dash tell
      <span class="docEmphasis">getopts</span> that the option list is at an 
      end.</li>
      <li>
      <p class="docList">Each time <span class="docEmphasis">getopts</span> is 
      called, it places the next option it finds, without the dash, in the 
      variable <span class="docEmphasis">name.</span> (You can use any variable 
      name here.) If an illegal argument is given, <span class="docEmphasis">
      name</span> is assigned a question mark.</li>
      <li>
      <p class="docList"><span class="docEmphasis">OPTIND</span> is a special 
      variable that is initialized to one and is incremented each time
      <span class="docEmphasis">getopts</span> completes processing a command 
      line argument to the number of the next argument <span class="docEmphasis">
      getopts</span> will process.</li>
      <li>
      <p class="docList">The <span class="docEmphasis">OPTARG</span> variable 
      contains the value of a legal argument.</li>
    </ul>
    </td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong"><span class="docEmphasis">getopts</span> 
Scripts.</span> The following examples illustrate how <span class="docEmphasis">
getopts</span> processes arguments.</p>
<h5 id="ch08list10" class="docExampleTitle">Example 8.104 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat opts1</span>
   #!/bin/sh
   <span class="docEmphasis"># Program opts1</span>
   <span class="docEmphasis"># Using getopts –– First try ––</span>
1  <span class="docEmphStrong">while getopts xy options</span>
   do
2     case $options in
3     x) echo &quot;you entered –x as an option&quot;;;
      y) echo &quot;you entered –y as an option&quot;;;
      esac
   done

(The Command Line)
4  $ <span class="docEmphStrong">opts1 –x</span>
   <span class="docEmphasis">you entered –x as an option</span>
5  $ <span class="docEmphStrong">opts1 –xy</span>
   <span class="docEmphasis">you entered –x as an option</span>
   <span class="docEmphasis">you entered –y as an option</span>
6  $ <span class="docEmphStrong">opts1 –y</span>
   <span class="docEmphasis">you entered –y as an option</span>
7  $ <span class="docEmphStrong">opts1 –b</span>
   <span class="docEmphasis">opts1:   illegal option --  b</span>
8  $ <span class="docEmphStrong">opts1 b</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">getopts</span> command is 
      used as a condition for the <span class="docEmphasis">while</span> 
      command. The valid options for this program are listed after the
      <span class="docEmphasis">getopts</span> command; they are
      <span class="docEmphasis">x</span> and <span class="docEmphasis">y.</span> 
      Each option is tested in the body of the loop, one after the other. Each 
      option will be assigned to the variable <span class="docEmphasis">options,</span> 
      without the leading dash. When there are no longer any arguments to 
      process, <span class="docEmphasis">getopts</span> will exit with a nonzero 
      status, causing the <span class="docEmphasis">while</span> loop to 
      terminate.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">case</span> command is 
      used to test each of the possible options found in the
      <span class="docEmphasis">options</span> variable, either
      <span class="docEmphasis">x</span> or <span class="docEmphasis">y.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If <span class="docEmphasis">x</span> was an option, 
      the string <span class="docEmphasis">You entered x as an option</span> is 
      displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">At the command line, the <span class="docEmphasis">
      opts1</span> script is given a <span class="docEmphasis">x</span> option, 
      a legal option to be processed by <span class="docEmphasis">getopts.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">At the command line, the <span class="docEmphasis">
      opts1</span> script is given a <span class="docEmphasis">xy</span> option;
      <span class="docEmphasis">x</span> and y are legal options to be processed 
      by <span class="docEmphasis">getopts.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">At the command line, the <span class="docEmphasis">
      opts1</span> script is given a <span class="docEmphasis">y</span> option, 
      a legal option to be processed by <span class="docEmphasis">getopts.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">opts1</span> script is 
      given a <span class="docEmphasis">b</span> option, an illegal option.
      <span class="docEmphasis">Getopts</span> sends an error message to
      <span class="docEmphasis">stderr.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">An option without a dash prepended to it is not an 
      option and causes <span class="docEmphasis">getopts</span> to stop 
      processing arguments.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list10" class="docExampleTitle">Example 8.105 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat opts2</span>
   #!/bin/sh
   <span class="docEmphasis"># Program opts2</span>
   <span class="docEmphasis"># Using getopts –– Second try ––</span>
1  <span class="docEmphStrong">while getopts xy options 2&gt; /dev/null</span>
   do
2     case $options in
      x) echo &quot;you entered –x as an option&quot;;;
      y) echo &quot;you entered –y as an option&quot;;;
3     <span class="docEmphStrong">\?) echo &quot;Only -x and -y are valid options&quot;  1&gt;&amp;2;;</span>
      esac
   done

(The Command Line)
   $ <span class="docEmphStrong">opts2 –x</span>
   <span class="docEmphasis">you entered –x as an option</span>

   $ <span class="docEmphStrong">opts2 –y</span>
   <span class="docEmphasis">you entered –y as an option</span>

   $ <span class="docEmphStrong">opts2 xy</span>

   $ <span class="docEmphStrong">opts2 –xy</span>
   <span class="docEmphasis">you entered –x as an option</span>
   <span class="docEmphasis">you entered –y as an option</span>

4  $ <span class="docEmphStrong">opts2 –g</span>
   <span class="docEmphasis">Only -x and -y are valid options</span>

5  $ <span class="docEmphStrong">opts2 –c</span>
    <span class="docEmphasis">Only -x and -y are valid options</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If there is an error message from
      <span class="docEmphasis">getopts,</span> it is redirected to
      <span class="docEmphasis">/dev/null.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the option is a bad option, a question mark will be 
      assigned to the <span class="docEmphasis">options</span> variable. The
      <span class="docEmphasis">case</span> command can be used to test for the 
      question mark, allowing you to print your own error message to standard 
      error.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">options</span> 
      variable is assigned the question mark, the <span class="docEmphasis">case</span> 
      statement is executed. The question mark is protected with the backslash 
      so that the shell does not see it as a wildcard and try to perform 
      filename substitution.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">g</span> is not a legal 
      option. A question mark is assigned to the variable
      <span class="docEmphasis">options,</span> and the error message is 
      displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">c</span> is not a legal 
      option. A question mark is assigned to the variable
      <span class="docEmphasis">options,</span> and the error message is 
      displayed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list10" class="docExampleTitle">Example 8.106 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat opts3</span>
   #!/bin/sh
   <span class="docEmphasis"># Program opts3</span>
   <span class="docEmphasis"># Using getopts –– Third try ––</span>
1  <span class="docEmphStrong">while getopts dq: options</span>
   do
       <span class="docEmphStrong">case $options in</span>
2          d) echo &quot;–d is a valid switch &quot;;;
3          q) echo &quot;The argument for -q is $OPTARG&quot;;;
           \?) echo &quot;Usage:opts3 -dq filename ... &quot; 1&gt;&amp;2;;
      esac
   done

(The Command Line)
4  $ <span class="docEmphStrong">opts3 –d</span>
   <span class="docEmphasis">–d is a valid switch</span>

5  $ <span class="docEmphStrong">opts3 -q  foo</span>
   <span class="docEmphasis">The argument for -q is foo</span>

6  $ <span class="docEmphStrong">opts3 -q</span>
   <span class="docEmphasis">Usage:opts3 -dq filename ...</span>

7  $ <span class="docEmphStrong">opts3 –e</span>
   <span class="docEmphasis">Usage:opts3 -dq filename ...</span>

8  $ <span class="docEmphStrong">opts3 e</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> command 
      tests the exit status of <span class="docEmphasis">getopts;</span> if
      <span class="docEmphasis">getopts</span> can successfully process an 
      argument, it returns zero exit status, and the body of the
      <span class="docEmphasis">while</span> loop is entered. The colon appended 
      to the argument list means that the <span class="docEmphasis">q</span> 
      option requires an argument. The argument will be stored in the special 
      variable, <span class="docEmphasis">OPTARG.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">One of the legal options is <span class="docEmphasis">
      d.</span> If <span class="docEmphasis">d</span> is entered as an option, 
      the <span class="docEmphasis">d</span> (without the dash) is stored in the
      <span class="docEmphasis">options</span> variable.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">One of the legal options is <span class="docEmphasis">
      q.</span> The <span class="docEmphasis">q</span> option requires an 
      argument. There must be a space between the <span class="docEmphasis">q</span> 
      option and its argument. If <span class="docEmphasis">q</span> is entered 
      as an option followed by an argument, the <span class="docEmphasis">q,</span> 
      without the dash, is stored in the <span class="docEmphasis">options</span> 
      variable and the argument is stored in the <span class="docEmphasis">
      OPTARG</span> variable. If an argument does not follow the
      <span class="docEmphasis">q</span> option, the question mark is stored in 
      the variable <span class="docEmphasis">options.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">d</span> option is a 
      legal option to <span class="docEmphasis">opts3.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">q</span> option with an 
      argument is also a legal option to <span class="docEmphasis">opts3.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">q</span> option without 
      an argument is an error.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">e</span> option is 
      invalid. A question mark is stored in the <span class="docEmphasis">
      options</span> variable if the option is illegal.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The option is prepended with neither a dash nor a plus 
      sign. The <span class="docEmphasis">getopts</span> command will not 
      process it as an option and returns a nonzero exit status. The
      <span class="docEmphasis">while</span> loop is terminated.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list10" class="docExampleTitle">Example 8.107 </h5>
<pre>$ <span class="docEmphStrong">cat opts4</span>
   #!/bin/sh
   <span class="docEmphasis"># Program opts4</span>
   <span class="docEmphasis"># Using getopts –– Fourth try ––</span>
1  <span class="docEmphStrong">while getopts xyz: arguments 2&gt;/dev/null</span>
   do
      <span class="docEmphStrong">case $arguments  in</span>
2     x) echo &quot;you entered -x as an option.&quot;;;
      y) echo &quot;you entered -y as an option.&quot;;;
3     z) echo &quot;you entered -z as an option.&quot;
           echo &quot;\$OPTARG is $OPTARG.&quot;;;
4     \?) echo &quot;Usage opts4 [-xy] [-z  argument]&quot;
           exit 1;;
      esac
   done
5  echo &quot;The initial value of \$OPTIND is 1.
      The final value of \$OPTIND is $OPTIND.
      Since this reflects the number of the next command line
      argument,the number of arguments passed was
      'expr $OPTIND - 1'. &quot;

(The Command Line)
$ <span class="docEmphStrong">opts4 -xyz foo</span>
<span class="docEmphasis">you entered -x as an option.</span>
<span class="docEmphasis">you entered -y as an option.</span>
<span class="docEmphasis">you entered -z as an option.</span>
<span class="docEmphasis">$OPTARG is foo.</span>
<span class="docEmphasis">The initial value of $OPTIND is 1.</span>
<span class="docEmphasis">The final value of $OPTIND is 3.</span>
<span class="docEmphasis">Since this reflects the number of the next command</span>
<span class="docEmphasis">line argument, the number of arguments passed was 2.</span>
$ <span class="docEmphStrong">opts4 -x -y -z  boo</span>
<span class="docEmphasis">you entered -x as an option.</span>
<span class="docEmphasis">you entered -y as an option.</span>
<span class="docEmphasis">you entered -z as an option.</span>
<span class="docEmphasis">$OPTARG is boo.</span>
<span class="docEmphasis">The initial value of $OPTIND is 1.</span>
<span class="docEmphasis">The final value of $OPTIND is 5.</span>
<span class="docEmphasis">Since this reflects the number of the next command</span>
<span class="docEmphasis">line argument,the number of arguments passed was 4.</span>
$ <span class="docEmphStrong">opts4 -d</span>
<span class="docEmphasis">Usage: opts4  [-xy] [-z argument]</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> command 
      tests the exit status of <span class="docEmphasis">getopts;</span> if
      <span class="docEmphasis">getopts</span> can successfully process an 
      argument, it returns zero exit status, and the body of the
      <span class="docEmphasis">while</span> loop is entered. The colon appended 
      to the <span class="docEmphasis">z</span> option tells
      <span class="docEmphasis">getopts</span> that an argument must follow the
      <span class="docEmphasis">–z</span> option. If the option takes an 
      argument, the argument is stored in the <span class="docEmphasis">getopts</span> 
      built-in variable <span class="docEmphasis">OPTARG.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If <span class="docEmphasis">x</span> is given as an 
      option, it is stored in the variable <span class="docEmphasis">arguments.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If <span class="docEmphasis">z</span> is given as an 
      option with an argument, the argument is stored in the built-in variable
      <span class="docEmphasis">OPTARG.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If an invalid option is entered, the question mark is 
      stored in the variable <span class="docEmphasis">arguments,</span> and an 
      error message is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The special <span class="docEmphasis">getopts</span> 
      variable, <span class="docEmphasis">OPTIND,</span> holds the number of the 
      next option to be processed. Its value is always one more than the actual 
      number of command line arguments.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec23">8.2.12 The <span class="docEmphasis">eval</span> 
Command and Parsing the Command Line</h4>
<p class="docText">The <span class="docEmphasis">eval</span> command evaluates a 
command line, performs all shell substitutions, and then executes the command 
line. It is used when normal parsing of the command line is not enough.</p>
<h5 id="ch08list10" class="docExampleTitle">Example 8.108 </h5>
<pre>1   $ <span class="docEmphStrong">set a b c d</span>
2   $ <span class="docEmphStrong">echo The last argument is \$$#</span>
3   <span class="docEmphasis">The last argument is $4</span>

4   $ <span class="docEmphStrong">eval echo The last argument is \$$#</span>
    <span class="docEmphasis">The last argument is d</span>

5   $ <span class="docEmphStrong">set -x</span>
    $ <span class="docEmphStrong">eval echo The last argument is \$$#</span>
    <span class="docEmphasis">+ eval echo the last argument is $4</span>
    <span class="docEmphasis">+ echo the last argument is d</span>
    <span class="docEmphasis">The last argument is d</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Four positional parameters are set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The desired result is to print the value of the last 
      positional parameter. The <span class="docEmphasis">\$</span> will print a 
      literal dollar sign. The <span class="docEmphasis">$#</span> evaluates to 
      4, the number of positional parameters. After the shell evaluates the
      <span class="docEmphasis">$#,</span> it does not parse the line again to 
      get the value of <span class="docEmphasis">$4.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$4</span> is printed instead 
      of the last argument.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After the shell performs variable substitution, the
      <span class="docEmphasis">eval</span> command performs the variable 
      substitution and then executes the <span class="docEmphasis">echo</span> 
      command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Turn on the echoing to watch the order of parsing.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch08list10" class="docExampleTitle">Example 8.109 </h5>
<pre>(From SVR4 Shutdown Program)
1  <span class="docEmphStrong">eval '/usr/bin/id | /usr/bin/sed 's/[^a-z0-9=].*//''</span>
2  if [ &quot;${uid:=0}&quot; -ne 0 ]
   then
3      echo $0: Only root can run $0
       exit 2
   fi
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is a tricky one. The <span class="docEmphasis">id</span> 
      program's output is sent to <span class="docEmphasis">sed</span> to 
      extract the <span class="docEmphasis">uid</span> part of the string. The 
      output for <span class="docEmphasis">id</span> is:</p>
      <pre><span class="docEmphasis">uid=9496(ellie) gid=40 groups=40</span>
<span class="docEmphasis">uid=0(root) gid=1(daemon) groups=1(daemon)</span>
</pre>
      <p class="docList">The <span class="docEmphasis">sed</span> regular 
      expression reads: <span class="docEmphasis">Find any character that is not 
      a letter, number, or an equal sign and remove that character and all 
      characters following it.</span> The result is to substitute everything 
      from the first opening parenthesis to the end of the line with nothing. 
      What is left is either <span class="docEmphasis">uid=9496</span> or
      <span class="docEmphasis">uid=0.</span></p>
      <p class="docList">After <span class="docEmphasis">eval</span> evaluates 
      the command line, it then executes the resulting command:</p>
      <pre><span class="docEmphasis">uid=9496</span>
</pre>
      <p class="docList">or</p>
      <pre><span class="docEmphasis">uid=0</span>
</pre>
      <p class="docList">For example, if the user's ID is
      <span class="docEmphasis">root,</span> the command executed would be
      <span class="docEmphasis">uid=0.</span> This creates a local variable in 
      the shell called <span class="docEmphasis">uid</span> and assigns zero to 
      it.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of the <span class="docEmphasis">uid</span> 
      variable is tested for zero, using command modifiers.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">uid</span> is not 
      zero, the <span class="docEmphasis">echo</span> command displays the 
      script name (<span class="docEmphasis">$0</span>) and the message.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec24">8.2.13 Shell Invocation Options</h4>
<p class="docText">When the shell is started using the <span class="docEmphasis">
sh</span> command, it can take options to modify its behavior. See
<a class="docLink" href="#ch08table17">Table 8.17</a>.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table17" class="docTableTitle">Table 8.17. Shell Invocation Options</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Option</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–i</span>
    </td>
    <td class="docTableCell" vAlign="top">Shell is in the interactive mode.
    <span class="docEmphasis">QUIT</span> and <span class="docEmphasis">
    INTERRUPT</span> are ignored. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–s</span>
    </td>
    <td class="docTableCell" vAlign="top">Commands are read from standard input 
    and output is sent to standard error. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–c string</span>
    </td>
    <td class="docTableCell" vAlign="top">Commands are read from string. </td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec25">8.2.14 The <span class="docEmphasis">set</span> 
Command and Options</h4>
<p class="docText">The <span class="docEmphasis">set</span> command can be used 
to turn shell options on and off, as well as for handling command line 
arguments. To turn an option on, the dash (–) is prepended to the option; to 
turn an option off, the plus sign (+) is prepended to the option. See
<a class="docLink" href="#ch08table18">Table 8.18</a> for a list of
<span class="docEmphasis">set</span> options.</p>
<h5 id="ch08list11" class="docExampleTitle">Example 8.110 </h5>
<pre>1   $ set -f

2   $ echo *
    *

3   $ echo ??
    ??

4   $ set +f
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">f</span> option is turned 
      on, disabling filename expansion.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The asterisk is not expanded.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The question marks are not expanded.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">f</span> is turned off; 
      filename expansion is enabled.</span></li>
    </ol>
    </span></td>
  </tr>
</table>


<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table18" class="docTableTitle">Table 8.18. The <span class="docEmphasis">set</span> 
  Command Options</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Option</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–a</span>
    </td>
    <td class="docTableCell" vAlign="top">Marks variables that have been 
    modified or exported. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–e</span>
    </td>
    <td class="docTableCell" vAlign="top">Exits the program if a command returns 
    a nonzero status. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–f</span>
    </td>
    <td class="docTableCell" vAlign="top">Disables globbing (filename 
    expansion). </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–h</span>
    </td>
    <td class="docTableCell" vAlign="top">Locates and remembers function 
    commands as functions when they are defined, not just when they are 
    executed. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–k</span>
    </td>
    <td class="docTableCell" vAlign="top">All keyword arguments are placed in 
    the environment for a command, not just those that precede the command name.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–n</span>
    </td>
    <td class="docTableCell" vAlign="top">Reads commands but does not execute 
    them; used for debugging. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–t</span>
    </td>
    <td class="docTableCell" vAlign="top">Exits after reading and executing one 
    command. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–u</span>
    </td>
    <td class="docTableCell" vAlign="top">Treats unset variables as an error 
    when performing substitution. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–v</span>
    </td>
    <td class="docTableCell" vAlign="top">Prints shell input lines as they are 
    read; used for debugging. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–x</span>
    </td>
    <td class="docTableCell" vAlign="top">Prints commands and their arguments as 
    they are being executed. Used for debugging. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">– –</span>
    </td>
    <td class="docTableCell" vAlign="top">Does not change any of the flags. </td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec26">8.2.15 Shell Built-In Commands</h4>
<p class="docText">The shell has a number of commands that are built into its 
source code. Since the commands are built-in, the shell doesn't have to locate 
them on disk, making execution much faster. The built-in commands are listed in
<a class="docLink" href="#ch08table19">Table 8.19</a>.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch08table19" class="docTableTitle">Table 8.19. Built-In Commands</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Command</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">What 
    It Does</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">:</span>
    </td>
    <td class="docTableCell" vAlign="top">Do-nothing command; returns exit 
    status zero. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">. file</span>
    </td>
    <td class="docTableCell" vAlign="top">The <span class="docEmphasis">dot</span> 
    command reads and executes command from file. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">break [n]</span>
    </td>
    <td class="docTableCell" vAlign="top">See <span class="docEmphasis">looping.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">continue [n]</span>
    </td>
    <td class="docTableCell" vAlign="top">See <span class="docEmphasis">looping.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">cd</span>
    </td>
    <td class="docTableCell" vAlign="top">Change directory. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">echo [ args 
    ]</span> </td>
    <td class="docTableCell" vAlign="top">Echo arguments. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">eval command</span>
    </td>
    <td class="docTableCell" vAlign="top">Shell scans the command line twice 
    before execution. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">exec command</span>
    </td>
    <td class="docTableCell" vAlign="top">Runs command in place of this shell.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">exit [ n ]</span>
    </td>
    <td class="docTableCell" vAlign="top">Exit the shell with status
    <span class="docEmphasis">n.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">export [ var 
    ]</span> </td>
    <td class="docTableCell" vAlign="top">Make <span class="docEmphasis">var</span> 
    known to subshells. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">hash</span>
    </td>
    <td class="docTableCell" vAlign="top">Controls the internal hash table for 
    quicker searches for commands. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">kill [ 
    –signal process ]</span> </td>
    <td class="docTableCell" vAlign="top">Sends the signal to the PID number or 
    job number of the process. See <span class="docEmphasis">/usr/include/sys/signal.h</span> 
    for a list of signals. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">getopts</span>
    </td>
    <td class="docTableCell" vAlign="top">Used in shell scripts to parse command 
    line and check for legal options. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">login [ 
    username ]</span> </td>
    <td class="docTableCell" vAlign="top">Sign onto the system. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">newgrp [ arg 
    ]</span> </td>
    <td class="docTableCell" vAlign="top">Logs a user into a new group by 
    changing the real group and effective group ID. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">pwd</span>
    </td>
    <td class="docTableCell" vAlign="top">Print present working directory. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">read [ var ]</span>
    </td>
    <td class="docTableCell" vAlign="top">Read line from standard input into 
    variable <span class="docEmphasis">var</span>. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">readonly [ 
    var ]</span> </td>
    <td class="docTableCell" vAlign="top">Make variable
    <span class="docEmphasis">var</span> read-only. Cannot be reset. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">return [ n ]</span>
    </td>
    <td class="docTableCell" vAlign="top">Return from a function where
    <span class="docEmphasis">n</span> is the exit value given to the return.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">set</span>
    </td>
    <td class="docTableCell" vAlign="top">See
    <a class="docLink" href="#ch08table18">Table 8.18</a>. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">shift [ n ]</span>
    </td>
    <td class="docTableCell" vAlign="top">Shift positional parameters to the 
    left <span class="docEmphasis">n</span> times. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">stop pid</span>
    </td>
    <td class="docTableCell" vAlign="top">Halt execution of the process number 
    PID. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">suspend</span>
    </td>
    <td class="docTableCell" vAlign="top">Stops execution of the current shell 
    (but not if a login shell). </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">times</span>
    </td>
    <td class="docTableCell" vAlign="top">Print accumulated user and system 
    times for processes run from this shell. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">trap [ arg ] 
    [ n ]</span> </td>
    <td class="docTableCell" vAlign="top">When shell receives signal
    <span class="docEmphasis">n</span> ( 0, 1, 2, or 15 ), execute
    <span class="docEmphasis">arg</span>. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">type [ 
    command ]</span> </td>
    <td class="docTableCell" vAlign="top">Prints the type of command; e.g.,
    <span class="docEmphasis">pwd</span> has a built-in shell, in
    <span class="docEmphasis">ksh,</span> an alias for the command
    <span class="docEmphasis">whence</span> –<span class="docEmphasis">v</span>.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">umask [ 
    octal digits ]</span> </td>
    <td class="docTableCell" vAlign="top">User file creation mode mask for 
    owner, group, and others. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">unset [ name 
    ]</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Unset</span> 
    value of variable or function. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">wait [ pid#n 
    ]</span> </td>
    <td class="docTableCell" vAlign="top">Wait for background process with PID 
    number <span class="docEmphasis">n</span> and report termination status.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">ulimit [ 
    options size ]</span> </td>
    <td class="docTableCell" vAlign="top">Set maximum limits on processes. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">umask [ mask 
    ]</span> </td>
    <td class="docTableCell" vAlign="top">Without argument, print out file 
    creation mask for permissions. </td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch08lev1sec3">BOURNE SHELL LAB EXERCISES</h3>
<h4 class="docSection2Title" id="ch08lev2sec27">Lab 8: Getting Started</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">What process puts the login prompt on your screen?</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">What process assigns values to <span class="docEmphasis">
    HOME,</span> <span class="docEmphasis">LOGNAME,</span> and
    <span class="docEmphasis">PATH?</span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>3:</b></td>
    <td>
    <p class="docText">How do you know what shell you are using?</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>4:</b></td>
    <td>
    <p class="docText">Where is your login shell assigned? (What file?)</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>5:</b></td>
    <td>
    <p class="docText">Explain the difference between the
    <span class="docEmphasis">/etc/profile</span> and <span class="docEmphasis">
    .profile</span> file. Which one is executed first?</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>6:</b></td>
    <td>
    <p class="docText">Edit your <span class="docEmphasis">.profile</span> file 
    as follows:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Welcome the user.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Add your home directory to the path if it is not there.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Set the erase function to the Backspace key using
      <span class="docEmphasis">stty.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Type: <span class="docEmphasis">profile</span></p>
      <p class="docList">What is the function of the dot command?</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec28">Lab 9: Shell Metacharacters</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Make a directory called <span class="docEmphasis">
    wildcards.</span> <span class="docEmphasis">Cd</span> to that directory and 
    type at the prompt:</p>
    <pre><span class="docEmphasis">touch ab abc a1 a2 a3 all a12 ba ba.1 ba.2 filex filey AbC ABC</span>
<span class="docEmphasis">ABc2 abc</span>
</pre>
    </td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">Write and test the command that will do the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">List all files starting with <span class="docEmphasis">
      a.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">List all files ending in at least one digit.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">List all files starting with an
      <span class="docEmphasis">a</span> or <span class="docEmphasis">A.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">List all files ending in a period, followed by a digit.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">List all files containing just two of the letter
      <span class="docEmphasis">a.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">List three character files where all letters are 
      uppercase.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">List files ending in <span class="docEmphasis">10,</span>
      <span class="docEmphasis">11,</span> or <span class="docEmphasis">12.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">List files ending in <span class="docEmphasis">x</span> 
      or <span class="docEmphasis">y.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">List all files ending in a digit, an uppercase letter, 
      or a lowercase letter.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">List all files <span class="docEmphasis">not</span> 
      starting with a <span class="docEmphasis">b</span> or
      <span class="docEmphasis">B.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Remove two-character files starting with
      <span class="docEmphasis">a</span> or <span class="docEmphasis">A.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec29">Lab 10: Redirection</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">What are the names of the three file streams associated 
    with your terminal?</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">What is a file descriptor?</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>3:</b></td>
    <td>
    <p class="docText">What command would you use to do the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Redirect the output of the <span class="docEmphasis">ls</span> 
      command to a file called <span class="docEmphasis">lsfile?</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Redirect and append the output of the
      <span class="docEmphasis">date</span> command to <span class="docEmphasis">
      lsfile?</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Redirect the output of the <span class="docEmphasis">
      who</span> command to <span class="docEmphasis">lsfile?</span> What 
      happened?</span></li>
    </ol>
    </span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>4:</b></td>
    <td>
    <p class="docText">Perform the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Type <span class="docEmphasis">cp</span> all by itself. 
      What happens?</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Save the error message from the above example to a 
      file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Use the <span class="docEmphasis">find</span> command 
      to find all files, starting from the parent directory, of type
      <span class="docEmphasis">directory.</span> Save the standard output in a 
      file called <span class="docEmphasis">found</span> and any errors in a 
      file called <span class="docEmphasis">found.errs.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Take the output of three commands and redirect the 
      output to a file called <span class="docEmphasis">gottem_all.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Use a pipe(s) with the <span class="docEmphasis">ps</span> 
      and <span class="docEmphasis">wc</span> commands to find out how many 
      processes you are currently running.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec30">Lab 11: First Script</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Write a script called <span class="docEmphasis">greetme</span> 
    that will do the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Contain a comment section with your name, the name of 
      this script, and the purpose of this script.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Greet the user.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print the date and the time.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print a calendar for this month.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print the name of your machine.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print the name and release of this operating system, (<span class="docEmphasis">cat 
      /etc/motd</span>).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print a list of all files in your parent directory.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print all the processes<span class="docEmphasis">root</span> 
      is running.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print the value of the <span class="docEmphasis">TERM,</span>
      <span class="docEmphasis">PATH,</span> and <span class="docEmphasis">HOME</span> 
      variables.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print your disk usage (<span class="docEmphasis">du</span>).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Use the<span class="docEmphasis">id</span> command to 
      print your group ID.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print <span class="docEmphasis">Please couldn't you 
      loan me $50.00?</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Tell the user <span class="docEmphasis">Good bye</span> 
      and the current hour (see <span class="docEmphasis">man</span> pages for 
      the <span class="docEmphasis">date</span> command).</span></li>
    </ol>
    </span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">Make sure your script is executable.</p>
    <pre><span class="docEmphasis">chmod +x greetme</span>
</pre>
    </td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>3:</b></td>
    <td>
    <p class="docText">What was the first line of your script? Why do you need 
    this line?</td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec31">Lab 12: Command Line Arguments</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Write a script called <span class="docEmphasis">rename</span> 
    that will take two arguments: the first argument is the name of the original 
    file and the second argument is the new name for the file.</p>
    <p class="docText">If the user does not provide two arguments, a usage 
    message will appear on the screen and the script will exit. Here is an 
    example of how the script works:</p>
    <pre>$ <span class="docEmphStrong">rename</span>
<span class="docEmphasis">Usage: rename oldfilename newfilename</span>
$

$ <span class="docEmphStrong">rename file1 file2</span>
<span class="docEmphasis">file1 has been renamed file2</span>
<span class="docEmphasis">Here is a listing of the directory:</span>
<span class="docEmphasis">a file2</span>
<span class="docEmphasis">b file.bak</span>
</pre>
    </td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">The following <span class="docEmphasis">find</span> 
    command (SunOS) will list all files in the <span class="docEmphasis">root</span> 
    partition that are larger than 100K and that have been modified in the last 
    week. (Check your <span class="docEmphasis">man</span> pages for the correct
    <span class="docEmphasis">find</span> syntax on your system.)</p>
    <pre><span class="docEmphStrong">find / –xdev –mtime –7 –size +200 –print</span>
</pre>
    <p class="docText">Write a script called <span class="docEmphasis">bigfiles</span> 
    that will take two arguments: One will be the <span class="docEmphasis">
    mtime</span> and one the <span class="docEmphasis">size</span> value. An 
    appropriate error message will be sent to <span class="docEmphasis">stderr</span> 
    if the user does not provide two arguments.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>3:</b></td>
    <td>
    <p class="docText">If you have time, write a script called
    <span class="docEmphasis">vib</span> that creates backup files for
    <span class="docEmphasis">vi.</span> The backup files will have the 
    extension <span class="docEmphasis">.bak</span> appended to the original 
    name.</td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec32">Lab 13: Getting User Input</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Write a script called <span class="docEmphasis">nosy</span> 
    that will do the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Ask the user's full name––first, last, and middle name.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Greet the user by his or her first name.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Ask the user's year of birth and calculate his or her 
      age (use<span class="docEmphasis">expr</span>).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Ask the user's login name and print his or her user ID 
      (<span class="docEmphasis">from /etc/passwd</span>).Tell the user his or 
      her home directory.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Show the user the processes he or she is running.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Tell the user the day of the week, and the current time 
      in nonmilitary time. The output should resemble</p>
      <p class="docList"><span class="docEmphasis"><tt>The day of the week is 
      Tuesday and the current time is 04:07:38 PM.</tt></span></span></li>
    </ol>
    </span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">Create a text file called <span class="docEmphasis">
    datafile</span> (unless this file has already been provided for you). Each 
    entry consists of fields separated by colons. The fields are as follows:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">First and last name</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Phone number</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Address</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Birth date</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Salary</span></li>
    </ol>
    </span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>3:</b></td>
    <td>
    <p class="docText">Create a script called <span class="docEmphasis">lookup</span> 
    that will do the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Contain a comment section with the script name, your 
      name, the date, and the reason for writing this script. The reason for 
      writing this script is to display the datafile in sorted order.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Sort the <span class="docEmphasis">datafile</span> by 
      last names.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Show the user the contents of the
      <span class="docEmphasis">datafile.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Tell the user the number of entries in the file.</span></li>
    </ol>
    </span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>4:</b></td>
    <td>
    <p class="docText">Try the <span class="docEmphasis">–x</span> and
    <span class="docEmphasis">–v</span> options for debugging your script. How 
    did you use these commands? How do they differ?</td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec33">Lab 14: Conditional Statements</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Write a script called <span class="docEmphasis">checking</span> 
    that will do the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Take a command line argument: a user's login name.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Test to see if a command line argument was provided.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Check to see if the user is in the
      <span class="docEmphasis">/etc/passwd</span> file. If so, it will print</span></li>
    </ol>
    </span>
    <pre><span class="docEmphasis">Found &lt;user&gt; in the /etc/passwd file.</span>
</pre>
    <p class="docText">Otherwise, it will print</p>
    <pre><span class="docEmphasis">No such user on our system.</span>
</pre>
    </td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">In the <span class="docEmphasis">lookup</span> script, 
    ask the user if he or she would like to add an entry to the
    <span class="docEmphasis">datafile.</span> If the answer is
    <span class="docEmphasis">yes</span> or <span class="docEmphasis">y:</span></p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Prompt the user for a new name, phone, address, birth 
      date, and salary. Each item will be stored in a separate variable. You 
      will provide the colons between the fields and append the information to 
      the <span class="docEmphasis">datafile.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Sort the file by last names. Tell the user you added 
      the entry, and show him or her the line preceded by the line number.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec34">Lab 15: Conditionals and File Testing</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Rewrite <span class="docEmphasis">checking.</span> After 
    checking whether the named user is in the <span class="docEmphasis">/etc/passwd</span> 
    file, the program will check to see if the user is logged on. If so, the 
    program will print all the processes that are running; otherwise, it will 
    tell the user</p>
    <pre><span class="docEmphasis">&lt;user&gt; is not logged on.</span>
</pre>
    </td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">The <span class="docEmphasis">lookup</span> script 
    depends on the <span class="docEmphasis">datafile</span> in order to run. In 
    the <span class="docEmphasis">lookup</span> script, check to see if the
    <span class="docEmphasis">datafile</span> exists and if it is readable and 
    writeable. Add a menu to the <span class="docEmphasis">lookup</span> script 
    to resemble the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><tt>Add entry.</tt></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><tt>Delete entry.</tt></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><tt>View entry.</tt></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><tt>Exit.</tt><ol class="docList" type="a">
        <li>
        <p class="docList">You already have the <span class="docEmphasis">Add 
        entr</span>y part of the script written. The <span class="docEmphasis">
        Add entr</span>y routine should now include code that will check to see 
        if the name is already in the <span class="docEmphasis">datafile</span> 
        and if it is, tell the user so. If the name is not there, add the new 
        entry.</li>
        <li>
        <p class="docList">Now write the code for the <span class="docEmphasis">
        Delete entry,</span> <span class="docEmphasis">View entry,</span> and
        <span class="docEmphasis">Exit</span> functions.</li>
        <li>
        <p class="docList">The <span class="docEmphasis">Delete</span> part of 
        the script should first check to see if the entry exists before trying 
        to remove it. If it does not exist, notify the user; otherwise, remove 
        the entry and tell the user you removed it. On exit, make sure that you 
        use a digit to represent the appropriate exit status.</li>
        <li>
        <p class="docList">How do you check the exit status from the command 
        line?</li>
      </ol>
      </span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec35">Lab 16: The Case Statement</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">The <span class="docEmphasis">ps</span> command is 
    different on UCB and AT&amp;T UNIX. On AT&amp;T UNIX, the command to list all 
    processes is</p>
    <pre><span class="docEmphasis">ps –ef</span>
</pre>
    <p class="docText">On UCB UNIX, the command is</p>
    <pre><span class="docEmphasis">ps –aux</span>
</pre>
    <p class="docText">Write a program called <span class="docEmphasis">systype</span> 
    that will check for a number of different system types. The cases to test 
    for will be</p>
    <blockquote>
      
      <p class="docList"><tt>AIX</tt></p>
      
      
      <p class="docList"><tt>IRIX</tt></p>
      
      
      <p class="docList"><tt>HP–UX</tt></p>
      
      
      <p class="docList"><tt>SCO</tt></p>
      
      
      <p class="docList"><tt>OSF1</tt></p>
      
      
      <p class="docList"><tt>ULTRIX</tt></p>
      
      
      <p class="docList"><tt>SunOS (Solaris / SunOS)</tt></p>
      
      
      <p class="docList"><tt>OS</tt></p>
      
    </blockquote>
    <p class="docText">Solaris, HP–UX, SCO, and IRIX are AT&amp;T-type systems. The 
    rest are BSDish.</p>
    <p class="docText">The version of UNIX you are using will be printed to
    <span class="docEmphasis">stdout.</span> The system name can be found with 
    the <span class="docEmphasis">uname –s</span> command or from the
    <span class="docEmphasis">/etc/motd</span> file.</td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch08lev2sec36">Lab 17: Loops</h4>
<p class="docText">Select one of the following:</p>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Write a program called <span class="docEmphasis">mchecker</span> 
    to check for new mail and write a message to the screen if new mail has 
    arrived.</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program will get the size of the mail spool file 
      for the user. (The spool files are found in <span class="docEmphasis">/usr/mail/$LOGNAME</span> 
      on AT&amp;T systems and <span class="docEmphasis">/usr/spool/mail/$USER</span> 
      on UCB systems. Use the <span class="docEmphasis">find</span> command if 
      you cannot locate the file.) The script will execute in a continuous loop, 
      once every 30 seconds. Each time the loop executes, it will compare the 
      size of the mail spool file with its size from the previous loop. If the 
      new size is greater than the old size, a message will be printed on your 
      screen, saying <span class="docEmphasis">Username, You have new mail.</span></span></li>
    </ol>
    </span>
    <p class="docText">The size of a file can be found by looking at the output 
    from<span class="docEmphasis">ls –l, wc –c or</span> from the
    <span class="docEmphasis">find</span> command.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">Write a program called <span class="docEmphasis">dusage</span> 
    that will mail a list of users, one at a time, a listing of the number of 
    blocks they are currently using. The list of users will be in a file called
    <span class="docEmphasis">potential_hogs.</span> One of the users listed in 
    the <span class="docEmphasis">potential_hogs</span> file will be
    <span class="docEmphasis">admin.</span></p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Use file testing to check that
      <span class="docEmphasis">potential_hogs</span> file exists and is 
      readable.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A loop will be used to iterate through the list of 
      users. Only those users who are using over 500 blocks will be sent mail. 
      The user <span class="docEmphasis">admin</span> will be skipped over 
      (i.e., he or she does not get a mail message). The mail message will be 
      stored in a <span class="docEmphasis">here</span>
      <span class="docEmphasis">document</span> in your
      <span class="docEmphasis">dusage</span> script.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Keep a list of the names of each person who received 
      mail. Do this by creating a log file. After everyone on the list has been 
      sent mail, print the number of people who received mail and a list of 
      their names.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h4 class="docSection2Title" id="ch08lev2sec37">Lab 18: Functions</h4>
<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Rewrite the <span class="docEmphasis">systype</span> 
    program from Lab 9 as a function that returns the name of the system. Use 
    this function to determine what options you will use with the
    <span class="docEmphasis">ps</span> command in the <span class="docEmphasis">
    checking</span> program.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">The <span class="docEmphasis">ps</span> command to list 
    all processes on AT&amp;T UNIX is</p>
    <pre><span class="docEmphasis">ps –ef</span>
</pre>
    </td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>3:</b></td>
    <td>
    <p class="docText">On BSD UNIX, the command is</p>
    <pre><span class="docEmphasis">ps –aux</span>
</pre>
    </td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>4:</b></td>
    <td>
    <p class="docText">Write a function called <span class="docEmphasis">cleanup</span> 
    that will remove all temporary files and exit the script. If the interrupt 
    or hangup signal is sent while the program is running, the
    <span class="docEmphasis">trap</span> command will call the
    <span class="docEmphasis">cleanup</span> function<span class="docEmphasis">.</span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>5:</b></td>
    <td>
    <p class="docText">Use a <span class="docEmphasis">here document</span> to 
    add a new menu item to the <span class="docEmphasis">lookup</span> script to 
    resemble the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><tt>Add entry</tt></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><tt>Delete entry</tt></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><tt>Change entry</tt></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><tt>View entry</tt></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><tt>Exit</tt></span></li>
    </ol>
    </span>
    <p class="docText">Write a function to handle each of the items in the menu. 
    After the user has selected a valid entry and the function has completed, 
    ask if the user would like to see the menu again. If an invalid entry is 
    entered, the program should print</p>
    <pre><span class="docEmphasis">Invalid entry, try again.</span>
</pre>
    <p class="docText">and the menu will be redisplayed.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>6:</b></td>
    <td>
    <p class="docText">Create a submenu under View entry in the
    <span class="docEmphasis">lookup</span> script. The user will be asked if he 
    or she would like to view specific information for a selected individual:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><tt>Phone</tt></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><tt>Address</tt></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><tt>Birthday</tt></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><tt>Salary</tt></span></li>
    </ol>
    </span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>7:</b></td>
    <td>
    <p class="docText">Use the <span class="docEmphasis">trap</span> command in 
    a script to perform a cleanup operation if the interrupt signal is sent 
    while the program is running.</td>
  </tr>
</table>

<blockquote>
<p class="docFootnote" id="EN8-1"><a class="docLink" href="#ENB8-1">[1]</a>&nbsp;&nbsp;If the
  <span class="docEmphasis">.profile</span> were executed directly as a script, 
  a subshell would be started. Then the variables would be set in the subshell, 
  but not in the login shell (parent shell).</p><p class="docFootnote" id="EN8-2"><a class="docLink" href="#ENB8-2">[2]</a>&nbsp;&nbsp;A variable set to 
  some value or to null will be displayed by using the <span class="docEmphasis">
  set</span> command, whereas an unset variable will not.</p><p class="docFootnote" id="EN8-3"><a class="docLink" href="#ENB8-3">[3]</a>&nbsp;&nbsp;The Korn shell 
  allows backquotes for command substitution for upward-compatibility, but 
  provides an alternate method as well.</p><p class="docFootnote" id="EN8-4"><a class="docLink" href="#ENB8-4">[4]</a>&nbsp;&nbsp;Remember, without 
  arguments, the <span class="docEmphasis">set</span> command displays all the 
  variables that have been set for this shell, local and exported. With options, 
  the <span class="docEmphasis">set</span> command turns on and off shell 
  control options such as <span class="docEmphasis">–x</span> and
  <span class="docEmphasis">–v.</span></p><p class="docFootnote" id="EN8-5"><a class="docLink" href="#ENB8-5">[5]</a>&nbsp;&nbsp;Unlike the C 
  shell, the Bourne shell does not support an <span class="docEmphasis">if</span> 
  statement without a <span class="docEmphasis">then,</span> even for a simple 
  statement.</p><p class="docFootnote" id="EN8-6"><a class="docLink" href="#ENB8-6">[6]</a>&nbsp;&nbsp;If using NIS+, 
  the command would read: <span class="docEmphasis">If nismatch &quot;$name&quot; 
  passwd.org_dir.</span></p><p class="docFootnote" id="EN8-7"><a class="docLink" href="#ENB8-7">[7]</a>&nbsp;&nbsp;If the
  <span class="docEmphasis">continue</span> command is given a number higher 
  than the number of loops, the loop exits.</p><p class="docFootnote" id="EN8-8"><a class="docLink" href="#ENB8-8">[8]</a>&nbsp;&nbsp;<span class="docEmphasis">$$</span> expands to the PID number of the current 
  shell. By appending this number to the filename, the filename is made unique.</p><p class="docFootnote" id="EN8-9"><a class="docLink" href="#ENB8-9">[9]</a>&nbsp;&nbsp;Bolsky, Morris 
  I., and Korn, David G., <i>The New KornShell Command and Programming Language</i> 
  (Englewood Cliffs, NJ: Prentice Hall PTR, 1995), p. 327.</p><p class="docFootnote" id="EN8-10"><a class="docLink" href="#ENB8-10">[10]</a>&nbsp;&nbsp;See the UNIX 
  manual pages (Section 3) for the C library function <span class="docEmphasis">
  getopt</span>.</p></blockquote>

<table width="100%" border="1" bgcolor="#EBEBFF"><tr><td width="5%" align="left" valign="middle"><a href="_chapter 7.htm"><img src="Larrow.gif" width="17" height="19" border="0"></a></td><td align="center" valign="middle"><a class="docLink" href="Front matter.htm">CONTENTS</a></td><td width="5%" align="right" valign="middle"><a href="_chapter 9.htm"><img src="Rarrow.gif" width="17" height="19" border="0"></a></td></tr></table></body>

</html>