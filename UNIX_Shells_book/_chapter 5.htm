<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Chapter 5</title>
<link rel="stylesheet" type="text/css" href="docsafari.css">
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body><table width="100%" border="1" bgcolor="#EBEBFF"><tr><td width="5%" align="left" valign="middle"><a href="_chapter 4.htm"><img src="Larrow.gif" width="17" height="19" border="0"></a></td><td align="center" valign="middle"><a class="docLink" href="Front matter.htm">CONTENTS</a></td><td width="5%" align="right" valign="middle"><a href="_chapter 6.htm"><img src="Rarrow.gif" width="17" height="19" border="0"></a></td></tr></table>


<h2 class="docChapterTitle">Chapter 5. The <span class="docEmphasis">awk</span> 
Utility: <span class="docEmphasis">awk</span> as a UNIX Tool</h2><ul><li>&nbsp;<a class="docLink" href="#ch05lev1sec1">5.1 What Is <span class="docEmphasis">awk?</span></a></li>
<li>&nbsp;<a class="docLink" href="#ch05lev1sec2">5.2 <span class="docEmphasis">awk</span>'s Format</a></li>
<li>&nbsp;<a class="docLink" href="#ch05lev1sec3">5.3 Formatting Output</a></li>
<li>&nbsp;<a class="docLink" href="#ch05lev1sec4">5.4 <span class="docEmphasis">awk</span> Commands from Within a File</a></li>
<li>&nbsp;<a class="docLink" href="#ch05lev1sec5">5.5 Records and Fields</a></li>
<li>&nbsp;<a class="docLink" href="#ch05lev1sec6">5.6 Patterns and Actions</a></li>
<li>&nbsp;<a class="docLink" href="#ch05lev1sec7">5.7 Regular Expressions</a></li>
<li>&nbsp;<a class="docLink" href="#ch05lev1sec8">5.8 <span class="docEmphasis">awk</span> Commands in a Script File</a></li>
<li>&nbsp;<a class="docLink" href="#ch05lev1sec9">5.9 Review</a></li>
<li>&nbsp;<a class="docLink" href="#ch05lev1sec10">UNIX TOOLS LAB EXERCISE</a></li>
</ul>
<p class="docText"><img alt="graphics/ch05.gif" src="ch05.gif" border="0" width="500" height="406"></p>

<h3 class="docSection1Title" id="ch05lev1sec1">5.1 What Is <span class="docEmphasis">awk?</span></h3>
<p class="docText"><span class="docEmphasis">Awk</span> is a programming 
language used for manipulating data and generating reports. The data may come 
from standard input, one or more files, or as output from a process.
<span class="docEmphasis">Awk</span> can be used at the command line for simple 
operations, or it can be written into programs for larger applications. Because
<span class="docEmphasis">awk</span> can manipulate data, it is an indispensable 
tool used in shell scripts and for managing small databases.</p>
<p class="docText"><span class="docEmphasis">Awk</span> scans a file (or input) 
line by line, from the first to the last line, searching for lines that match a 
specified pattern and performing selected actions (enclosed in curly braces) on 
those lines. If there is a pattern with no specific action, all lines that match 
the pattern are displayed; if there is an action with no pattern, all input 
lines specified by the action are executed upon.</p>
<h4 class="docSection2Title" id="ch05lev2sec1">5.1.1 What Does <span class="docEmphasis">awk</span> 
Stand for?</h4>
<p class="docText"><span class="docEmphasis">Awk</span> stands for the first 
initials in the last names of each of the authors of the language, Alfred Aho, 
Brian Kernighan, and Peter Weinberger. They could have called it
<span class="docEmphasis">wak</span> or <span class="docEmphasis">kaw,</span> 
but for whatever reason, <span class="docEmphasis">awk</span> won out.</p>
<h4 class="docSection2Title" id="ch05lev2sec2">5.1.2 Which <span class="docEmphasis">awk?</span></h4>
<p class="docText">There are a number of versions of <span class="docEmphasis">
awk:</span> old <span class="docEmphasis">awk,</span> new
<span class="docEmphasis">awk,</span> gnu <span class="docEmphasis">awk (gawk),</span> 
POSIX <span class="docEmphasis">awk,</span> and others.
<span class="docEmphasis">Awk</span> was originally written in 1977, and in 
1985, the original implementation was improved so that <span class="docEmphasis">
awk</span> could handle larger programs. Additional features included 
user-defined functions, dynamic regular expressions, processing multiple input 
files, and more. On most systems, the command is <span class="docEmphasis">awk</span> 
if using the old version, <span class="docEmphasis">nawk</span> if using the new 
version, and <span class="docEmphasis">gawk</span> if using the gnu version.<span id="ENB5-1"><a class="docLink" href="#EN5-1"><sup>[1]</sup></a></span></p>
<h3 class="docSection1Title" id="ch05lev1sec2">5.2 <span class="docEmphasis">awk</span>'s Format</h3>
<p class="docText">An <span class="docEmphasis">awk</span> program consists of 
the <span class="docEmphasis">awk</span> command, the program instructions 
enclosed in quotes (or in a file), and the name of the input file. If an input 
file is not specified, input comes from standard input (<span class="docEmphasis">stdin</span>), 
the keyboard.</p>
<p class="docText"><span class="docEmphasis">Awk</span> instructions consist of 
patterns, actions, or a combination of patterns and actions. A pattern is a 
statement consisting of an expression of some type. If you do not see the 
keyword <span class="docEmphasis">if,</span> but you <span class="docEmphasis">
think</span> the word <span class="docEmphasis">if</span> when evaluating the 
expression, it is a pattern. Actions consist of one or more statements separated 
by semicolons or newlines and enclosed in curly braces. Patterns cannot be 
enclosed in curly braces, and consist of regular expressions enclosed in forward 
slashes or expressions consisting of one or more of the many operators provided 
by <span class="docEmphasis">awk.</span></p>
<p class="docText"><span class="docEmphasis">Awk</span> commands can be typed at 
the command line or in <span class="docEmphasis">awk</span> script files. The 
input lines can come from files, pipes, or standard input.</p>
<h4 class="docSection2Title" id="ch05lev2sec3">5.2.1 Input from Files</h4>
<p class="docText">In the following examples, the percent sign (%) is the C 
shell prompt.</p>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>% nawk 'pattern' filename
% nawk '{action}' filename
% nawk 'pattern {action}' filename
</pre>
    </td>
  </tr>
</table>
<p class="docText">Here is a sample file called <span class="docEmphasis">
employees:</span></p>
<h5 id="ch05list01" class="docExampleTitle">Example 5.1 </h5>
<pre>% <span class="docEmphStrong">cat employees</span>
<span class="docEmphasis">Tom Jones     4424   5/12/66   543354</span>
<span class="docEmphasis">Mary Adams    5346   11/4/63   28765</span>
<span class="docEmphasis">Sally Chang   1654   7/22/54   650000</span>
<span class="docEmphasis">Billy Black   1683   9/23/44   336500</span>

% <span class="docEmphStrong">nawk '/Mary/' employees</span>
<span class="docEmphasis">Mary Adams    5346   11/4/63   28765</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText"><span class="docEmphasis">Nawk</span> prints all lines 
    that contain the pattern <span class="docEmphasis">Mary.</span></td>
  </tr>
</table>
<h5 id="ch05list02" class="docExampleTitle">Example 5.2 </h5>
<pre>% <span class="docEmphStrong">cat employees</span>
<span class="docEmphasis">Tom Jones     4424    5/12/66   543354</span>
<span class="docEmphasis">Mary Adams    5346    11/4/63   28765</span>
<span class="docEmphasis">Sally Chang   1654    7/22/54   650000</span>
<span class="docEmphasis">Billy Black   1683    9/23/44   336500</span>

% <span class="docEmphStrong">nawk '{print $1}' employees</span>
<span class="docEmphasis">Tom</span>
<span class="docEmphasis">Mary</span>
<span class="docEmphasis">Sally</span>
<span class="docEmphasis">Billy</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText"><span class="docEmphasis">Nawk</span> prints the first 
    field of file <span class="docEmphasis">employees,</span> where the field 
    starts at the left margin of the line and is delimited by whitespace.</td>
  </tr>
</table>
<h5 id="ch05list03" class="docExampleTitle">Example 5.3 </h5>
<pre>% <span class="docEmphStrong">cat employees</span>
<span class="docEmphasis">Tom Jones     4424    5/12/66   543354</span>
<span class="docEmphasis">Mary Adams    5346    11/4/63   28765</span>
<span class="docEmphasis">Sally Chang   1654    7/22/54   650000</span>
<span class="docEmphasis">Billy Black   1683    9/23/44   336500</span>

% <span class="docEmphStrong">nawk '/Sally/{print $1, $2}' employees</span>
<span class="docEmphasis">Sally Chang</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText"><span class="docEmphasis">Nawk</span> prints the first 
    and second fields of file <span class="docEmphasis">employees,</span> only 
    if the line contains the pattern <span class="docEmphasis">Sally.</span> 
    Remember, the field separator is whitespace.</td>
  </tr>
</table>
<h4 class="docSection2Title" id="ch05lev2sec4">5.2.2 Input from Commands</h4>
<p class="docText">The output from a UNIX command or commands can be piped to
<span class="docEmphasis">awk</span> for processing. Shell programs commonly use
<span class="docEmphasis">awk</span> for manipulating commands.</p>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>% command | nawk 'pattern'
% command | nawk '{action}'
% command | nawk 'pattern {action}'
</pre>
    </td>
  </tr>
</table>
<h5 id="ch05list04" class="docExampleTitle">Example 5.4 </h5>
<pre>1   % <span class="docEmphStrong">df | nawk '$4 &gt; 75000'</span>
    <span class="docEmphasis">/oracle   (/dev/dsk/c0t0d057 ):390780 blocks      105756 files</span>
    <span class="docEmphasis">/opt      (/dev/dsk/c0t0d058 ):1943994 blocks      49187 files</span>

2   % <span class="docEmphStrong">rusers  | nawk '/root$/{print  $1}'</span>
    <span class="docEmphasis">owl</span>
    <span class="docEmphasis">crow</span>
    <span class="docEmphasis">bluebird</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">df</span> command reports 
      the free disk space on file systems. The output of the
      <span class="docEmphasis">df</span> command is piped to
      <span class="docEmphasis">nawk</span> (new <span class="docEmphasis">awk</span>). 
      If the fourth field is greater than 75,000 blocks, the line is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">rusers</span> command 
      prints those logged on remote machines on the network. The output of the
      <span class="docEmphasis">rusers</span> command is piped to
      <span class="docEmphasis">nawk</span> as input. The first field is printed 
      if the regular expression <span class="docEmphasis">root</span> is matched 
      at the end of the line (<span class="docEmphasis">$</span>); that is, all 
      machine names are printed where <span class="docEmphasis">root</span> is 
      logged on.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch05lev1sec3">5.3 Formatting Output</h3>
<h4 class="docSection2Title" id="ch05lev2sec5">5.3.1 The <span class="docEmphasis">print</span> 
Function</h4>
<p class="docText">The action part of the <span class="docEmphasis">awk</span> 
command is enclosed in curly braces. If no action is specified and a pattern is 
matched, <span class="docEmphasis">awk</span> takes the default action, which is 
to print the lines that are matched to the screen. The <span class="docEmphasis">
print</span> function is used to print simple output that does not require fancy 
formatting. For more sophisticated formatting, the <span class="docEmphasis">
printf</span> or <span class="docEmphasis">sprintf</span> functions are used. If 
you are familiar with C, then you already know how <span class="docEmphasis">
printf</span> and <span class="docEmphasis">sprintf</span> work.</p>
<p class="docText">The <span class="docEmphasis">print</span> function can also 
be explicitly used in the action part of <span class="docEmphasis">awk</span> as
<span class="docEmphasis">{print}.</span> The <span class="docEmphasis">print</span> 
function accepts arguments as variables, computed values, or string constants. 
Strings must be enclosed in double quotes. Commas are used to separate the 
arguments; if commas are not provided, the arguments are concatenated together. 
The comma evaluates to the value of the output field separator (<span class="docEmphasis">OFS</span>), 
which is by default a space.</p>
<p class="docText">The output of the <span class="docEmphasis">print</span> 
function can be redirected or piped to another program, and the output of 
another program can be piped to <span class="docEmphasis">awk</span> for 
printing. (See &quot;Redirection&quot; on page 16 and &quot;Pipes&quot; on page 19.)</p>
<h5 id="ch05list05" class="docExampleTitle">Example 5.5 </h5>
<pre>% <span class="docEmphStrong">date</span>
<span class="docEmphasis">Wed Jul 28 22:23:16 PDT 2001</span>

% <span class="docEmphStrong">date | nawk '{ print &quot;Month: &quot; $2 &quot;\nYear: &quot; , $6 }'</span>
<span class="docEmphasis">Month: Jul</span>
<span class="docEmphasis">Year: 2001</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The output of the UNIX <span class="docEmphasis">date</span> 
    command will be piped to <span class="docEmphasis">nawk.</span> The string
    <span class="docEmphasis">Month:</span> is printed, followed by the second 
    field, the string containing the newline character,
    <span class="docEmphasis">\n,</span> and <span class="docEmphasis">Year:,</span> 
    followed by the sixth field (<span class="docEmphasis">$6</span>).</td>
  </tr>
</table>
<p class="docText"><b>Escape Sequences.</b> Escape sequences are represented by 
a backslash and a letter or number. They can be used in strings to represent 
tabs, newlines, form feeds, and so forth (see
<a class="docLink" href="#ch05table01">Table 5.1</a>).</p>
<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch05table01" class="docTableTitle">Table 5.1. <span class="docEmphasis">print</span> 
  Escape Sequences</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Escape Sequence</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\b</span>
    </td>
    <td class="docTableCell" vAlign="top">Backspace. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\f</span>
    </td>
    <td class="docTableCell" vAlign="top">Form feed. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\n</span>
    </td>
    <td class="docTableCell" vAlign="top">Newline. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\r</span>
    </td>
    <td class="docTableCell" vAlign="top">Carriage return. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\t</span>
    </td>
    <td class="docTableCell" vAlign="top">Tab. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\047</span>
    </td>
    <td class="docTableCell" vAlign="top">Octal value 47, a single quote. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\c</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">c</span> 
    represents any other character, e.g., \&quot;. </td>
  </tr>
</table>
<h5 id="ch05list06" class="docExampleTitle">Example 5.6 </h5>
<pre><span class="docEmphasis">Tom Jones      4424    5/12/66   543354</span>
<span class="docEmphasis">Mary Adams     5346    11/4/63   28765</span>
<span class="docEmphasis">Sally Chang    1654    7/22/54   650000</span>
<span class="docEmphasis">Billy Black    1683    9/23/44   336500</span>

% <span class="docEmphStrong">nawk '/Sally/{print &quot;\t\tHave a nice day, &quot; $1, $2 &quot;\!&quot;}' employees</span>
        <span class="docEmphasis">Have a nice day, Sally Chang!</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">If the line contains the pattern
    <span class="docEmphasis">Sally,</span> the <span class="docEmphasis">print</span> 
    function prints two tabs, the string <span class="docEmphasis">Have a nice 
    day,</span> the first (where <span class="docEmphasis">$1</span> is
    <span class="docEmphasis">Sally</span>) and second fields (where
    <span class="docEmphasis">$2</span> is <span class="docEmphasis">Chang</span>), 
    followed by a string containing two exclamation marks.</td>
  </tr>
</table>
<h4 class="docSection2Title" id="ch05lev2sec6">5.3.2 The <span class="docEmphasis">OFMT</span> 
Variable</h4>
<p class="docText">When printing numbers, you may want to control the format of 
the number. Normally this would be done with the <span class="docEmphasis">
printf</span> function, but the special <span class="docEmphasis">awk</span> 
variable, <span class="docEmphasis">OFMT,</span> can be set to control the 
printing of numbers when using the <span class="docEmphasis">print</span> 
function. It is set by default to &quot;<span class="docEmphasis">%.6g</span>&quot;<span class="docEmphasis">—</span>six 
significant digits to the right of the decimal are printed. (The following 
section describes how this value can be changed.)</p>
<h5 id="ch05list07" class="docExampleTitle">Example 5.7 </h5>
<pre>% <span class="docEmphStrong">nawk  'BEGIN{OFMT=&quot;%.2f&quot;; print 1.2456789, 12E–2}'</span>
<span class="docEmphasis">1.25  0.12</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The <span class="docEmphasis">OFMT</span> variable is set 
    so that floating point numbers (<span class="docEmphasis">f</span>) will be 
    printed with two numbers following the decimal point. The percent sign (%) 
    indicates a format is being specified.</td>
  </tr>
</table>
<h4 class="docSection2Title" id="ch05lev2sec7">5.3.3 The <span class="docEmphasis">printf</span> 
Function</h4>
<p class="docText">When printing output, you may want to specify the amount of 
space between fields so that columns line up neatly. Since the
<span class="docEmphasis">print</span> function with tabs does not always 
guarantee the desired output, the <span class="docEmphasis">printf</span> 
function can be used for formatting fancy output.</p>
<p class="docText">The <span class="docEmphasis">printf</span> function returns 
a formatted string to standard output, like the <span class="docEmphasis">printf</span> 
statement in C. The <span class="docEmphasis">printf</span> statement consists 
of a quoted control string that may be imbedded with format specifications and 
modifiers. The control string is followed by a comma and a list of 
comma-separated expressions that will be formatted according to the 
specifications stated in the control string. Unlike the
<span class="docEmphasis">print</span> function, <span class="docEmphasis">
printf</span> does not provide a newline. The escape sequence,
<span class="docEmphasis">\n,</span> must be provided if a newline is desired.</p>
<p class="docText">For each percent sign and format specifier, there must be a 
corresponding argument. To print a literal percent sign, two percent signs must 
be used. See <a class="docLink" href="#ch05table02">Table 5.2</a> for a list of
<span class="docEmphasis">printf</span> conversion characters and
<a class="docLink" href="#ch05table03">Table 5.3</a> for
<span class="docEmphasis">printf</span> modifiers. The format specifiers are 
preceded by a percent sign; see <a class="docLink" href="#ch05table04">Table 5.4</a> 
for a list of format <span class="docEmphasis">printf</span> specifiers.</p>
<p class="docText">When an argument is printed, the place where the output is 
printed is called the <span class="docEmphasis">field,</span> and the
<span class="docEmphasis">width</span> of the field is the number of characters 
contained in that field.</p>
<p class="docText">The pipe symbol (vertical bar) in the following examples, 
when part of the <span class="docEmphasis">printf</span> string, is part of the 
text and is used to indicate where the formatting begins and ends.</p>
<h5 id="ch05list08" class="docExampleTitle">Example 5.8 </h5>
<pre>1   % <span class="docEmphStrong">echo &quot;UNIX&quot; | nawk ' {printf &quot;|%–15s|\n&quot;, $1}'</span>
    (Output)
    |<span class="docEmphasis">UNIX</span>              |

2   % <span class="docEmphStrong">echo &quot;UNIX&quot; | nawk '{ printf &quot;|%15s|\n&quot;, $1}'</span>
    (Output)
    |              UNIX|
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of the <span class="docEmphasis">echo</span> 
      command, <span class="docEmphasis">UNIX,</span> is piped to
      <span class="docEmphasis">nawk.</span> The <span class="docEmphasis">
      printf</span> function contains a control string. The percent sign alerts
      <span class="docEmphasis">printf</span> that it will be printing a
      <span class="docEmphasis">15</span>-space, left-justified string enclosed 
      in vertical bars and terminated with a newline. The dash after the percent 
      sign indicates left justification. The control string is followed by a 
      comma and <span class="docEmphasis">$1.</span> The string
      <span class="docEmphasis">UNIX</span> will be formatted according to the 
      format specification in the control string.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The string <span class="docEmphasis">UNIX</span> is 
      printed in a right-justified, 15-space string, enclosed in vertical bars, 
      and terminated with a newline.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h5 id="ch05list09" class="docExampleTitle">Example 5.9 </h5>
<pre>% <span class="docEmphStrong">cat employees</span>
<span class="docEmphasis">Tom Jones     4424    5/12/66   543354</span>
<span class="docEmphasis">Mary Adams    5346    11/4/63   28765</span>
<span class="docEmphasis">Sally Chang   1654    7/22/54   650000</span>
<span class="docEmphasis">Billy Black   1683    9/23/44   336500</span>

% <span class="docEmphStrong">nawk '{printf &quot;The name is: %-15s ID  is %8d\n&quot;, $1, $3}' employees</span>
<span class="docEmphasis">The name is Tom               ID is4424</span>
<span class="docEmphasis">The name is Mary              ID is5346</span>
<span class="docEmphasis">The name is Sally             ID is1654</span>
<span class="docEmphasis">The name is Billy             ID is1683</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The string to be printed is enclosed in double quotes. 
    The first format specifier is <span class="docEmphasis">%-15s.</span> It has 
    a corresponding argument, <span class="docEmphasis">$1,</span> positioned 
    directly to the right of the comma after the closing quote in the control 
    string. The percent sign indicates a format specification: The dash means 
    left justify, the <span class="docEmphasis">15s</span> means 15-space 
    string. At this spot, print a left-justified, 15-space string followed by 
    the string <span class="docEmphasis">ID is</span> and a number.</p>
    <p class="docText">The <span class="docEmphasis">%8d</span> format specifies 
    that the decimal (integer) value of <span class="docEmphasis">$2</span> will 
    be printed in its place within the string. The number will be right 
    justified and take up eight spaces. Placing the quoted string and 
    expressions within parentheses is optional.</td>
  </tr>
</table>
<p>&nbsp;</p>
<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch05table02" class="docTableTitle">Table 5.2. <span class="docEmphasis">printf</span> 
  Conversion Characters</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Conversion Character</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Definition</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">c</span>
    </td>
    <td class="docTableCell" vAlign="top">Character. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">s</span>
    </td>
    <td class="docTableCell" vAlign="top">String. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">d</span>
    </td>
    <td class="docTableCell" vAlign="top">Decimal number. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">ld</span>
    </td>
    <td class="docTableCell" vAlign="top">Long decimal number. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">u</span>
    </td>
    <td class="docTableCell" vAlign="top">Unsigned decimal number. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">lu</span>
    </td>
    <td class="docTableCell" vAlign="top">Long unsigned decimal number. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">x</span>
    </td>
    <td class="docTableCell" vAlign="top">Hexadecimal number. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">lx</span>
    </td>
    <td class="docTableCell" vAlign="top">Long hexidecimal number. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">o</span>
    </td>
    <td class="docTableCell" vAlign="top">Octal number. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">lo</span>
    </td>
    <td class="docTableCell" vAlign="top">Long octal number. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">e</span>
    </td>
    <td class="docTableCell" vAlign="top">Floating point number in scientific 
    notation (<span class="docEmphasis">e</span>-notation). </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">f</span>
    </td>
    <td class="docTableCell" vAlign="top">Floating point number. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">g</span>
    </td>
    <td class="docTableCell" vAlign="top">Floating point number using either
    <span class="docEmphasis">e</span> or <span class="docEmphasis">f</span> 
    conversion, whichever takes the least space. </td>
  </tr>
</table>
<p>&nbsp;</p>
<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch05table03" class="docTableTitle">Table 5.3. <span class="docEmphasis">printf</span> 
  Modifiers</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Character</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Definition</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">-</span>
    </td>
    <td class="docTableCell" vAlign="top">Left-justification modifier. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">#</span>
    </td>
    <td class="docTableCell" vAlign="top">Integers in octal format are displayed 
    with a leading 0; integers in hexadecimal form are displayed with a leading 
    0<span class="docEmphasis">x.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">+</span>
    </td>
    <td class="docTableCell" vAlign="top">For conversions using
    <span class="docEmphasis">d,</span> <span class="docEmphasis">e,</span>
    <span class="docEmphasis">f,</span> and <span class="docEmphasis">g,</span> 
    integers are displayed with a numeric sign + or -. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">0</span>
    </td>
    <td class="docTableCell" vAlign="top">The displayed value is padded with 
    zeros instead of whitespace. </td>
  </tr>
</table>
<p>&nbsp;</p>
<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch05table04" class="docTableTitle">Table 5.4. <span class="docEmphasis">printf</span> 
  Format Specifiers</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Format Specifier</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">What 
    It Does</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top" colSpan="2"><span class="docEmphasis">
    Given x = 'A', y = 15, z = 2.3, and $1 = Bob Smith:</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">%c</span>
    </td>
    <td class="docTableCell" vAlign="top">
    <p class="docText">Prints a single ASCII character.</p>
    <p class="docText"><span class="docEmphasis">printf(&quot;The character is %c\n&quot;,x) 
    prints: The character is A.</span></td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">%d</span>
    </td>
    <td class="docTableCell" vAlign="top">
    <p class="docText">Prints a decimal number.</p>
    <p class="docText"><span class="docEmphasis">printf(&quot;The boy is %d years 
    old\n&quot;, y) prints: The boy is 15 years old.</span></td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">%e</span>
    </td>
    <td class="docTableCell" vAlign="top">
    <p class="docText">Prints the <span class="docEmphasis">e</span> notation of 
    a number.</p>
    <p class="docText"><span class="docEmphasis">printf(&quot;z is %e\n&quot;,z) prints: z 
    is 2.3e+01.</span></td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">%f</span>
    </td>
    <td class="docTableCell" vAlign="top">
    <p class="docText">Prints a floating point number.</p>
    <p class="docText"><span class="docEmphasis">printf(&quot;z is %f\n&quot;, 2.3 *2) 
    prints: z is 4.600000.</span></td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">%o</span>
    </td>
    <td class="docTableCell" vAlign="top">
    <p class="docText">Prints the octal value of a number.</p>
    <p class="docText"><span class="docEmphasis">printf(&quot;y is %o\n&quot;, y) prints: 
    z is 17.</span></td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">%s</span>
    </td>
    <td class="docTableCell" vAlign="top">
    <p class="docText">Prints a string of characters.</p>
    <p class="docText"><span class="docEmphasis">printf(&quot;The name of the culprit 
    is %s\n&quot;, $1) prints: The name of the culprit is Bob Smith.</span></td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">%x</span>
    </td>
    <td class="docTableCell" vAlign="top">
    <p class="docText">Prints the hex value of a number.</p>
    <p class="docText"><span class="docEmphasis">printf (&quot;y is %x\n&quot;, y) prints: 
    x is f.</span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch05lev1sec4">5.4 <span class="docEmphasis">awk</span> Commands 
from Within a File</h3>
<p class="docText">If <span class="docEmphasis">awk</span> commands are placed 
in a file, the <span class="docEmphasis">–f</span> option is used with the name 
of the <span class="docEmphasis">awk</span> file, followed by the name of the 
input file to be processed. A record is read into <span class="docEmphasis">awk</span>'s 
buffer and each of the commands in the <span class="docEmphasis">awk</span> file 
are tested and executed for that record. After <span class="docEmphasis">awk</span> 
has finished with the first record, it is discarded and the next record is read 
into the buffer, and so on. If an action is not controlled by a pattern, the 
default behavior is to print the entire record. If a pattern does not have an 
action associated with it, the default is to print the record where the pattern 
matches an input line.</p>
<h5 id="ch05list10" class="docExampleTitle">Example 5.10 </h5>
<pre>(The Database)
   <span class="docEmphasis">$1       $2         $3         $4           $5</span>
   <span class="docEmphasis">Tom      Jones      4424       5/12/66      543354</span>
   <span class="docEmphasis">Mary     Adams      5346       11/4/63      28765</span>
   <span class="docEmphasis">Sally    Chang      1654       7/22/54      650000</span>
   <span class="docEmphasis">Billy    Black      1683       9/23/44      336500</span>

   % <span class="docEmphStrong">cat awkfile</span>
1  /^Mary/{print &quot;Hello Mary!&quot;}
2  {print $1, $2, $3}

   % <span class="docEmphStrong">nawk –f awkfile employees</span>
   <span class="docEmphasis">Tom Jones 4424</span>
   <span class="docEmphasis">Hello Mary!</span>
   <span class="docEmphasis">Mary Adams 5346</span>
   <span class="docEmphasis">Sally Chang 1654</span>
   <span class="docEmphasis">Billy Black 1683</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the record begins with the regular expression
      <span class="docEmphasis">Mary,</span> the string
      <span class="docEmphasis">Hello Mary</span>! is printed. The action is 
      controlled by the pattern preceding it. Fields are separated by whitespace.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The first, second, and third field of
      <span class="docEmphasis">each</span> record are printed. The action 
      occurs for each line because there is not a pattern controlling the 
      action.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch05lev1sec5">5.5 Records and Fields</h3>
<h4 class="docSection2Title" id="ch05lev2sec8">5.5.1 Records</h4>
<p class="docText"><span class="docEmphasis">Awk</span> does not see input data 
as an endless string of characters, but sees it as having a format or structure. 
By default, each line is called a <span class="docEmphasis">record</span> and is 
terminated with a newline.</p>
<p class="docText"><b>The Record Separator.</b> By default, the output and input 
record separator (line separator) is a carriage return, stored in the built-in
<span class="docEmphasis">awk</span> variables <span class="docEmphasis">ORS</span> 
and <span class="docEmphasis">RS,</span> respectively. The
<span class="docEmphasis">ORS</span> and <span class="docEmphasis">RS</span> 
values can be changed, but only in a limited fashion.</p>
<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">$0</span> 
Variable. </span>An entire record is referenced as <span class="docEmphasis">$0</span> 
by <span class="docEmphasis">awk.</span> (When <span class="docEmphasis">$0</span> 
is changed by substitution or assignment, the value of <span class="docEmphasis">
NF,</span> the number of fields, may be changed.) The newline value is stored in
<span class="docEmphasis">awk</span>'s built-in variable
<span class="docEmphasis">RS,</span> a carriage return by default.</p>
<h5 id="ch05list11" class="docExampleTitle">Example 5.11 </h5>
<pre>% <span class="docEmphStrong">cat employees</span>
<span class="docEmphasis">Tom Jones     4424     5/12/66     543354</span>
<span class="docEmphasis">Mary Adams    5346     11/4/63     28765</span>
<span class="docEmphasis">Sally Chan    1654     7/22/54     650000</span>
<span class="docEmphasis">Billy Blac    1683     9/23/44     336500</span>

% <span class="docEmphStrong">nawk '{print $0}' employees</span>
<span class="docEmphasis">Tom Jones     4424     5/12/66     543354</span>
<span class="docEmphasis">Mary Adams    5346     11/4/63     28765</span>
<span class="docEmphasis">Sally Chang   1654     7/22/54     650000</span>
<span class="docEmphasis">Billy Black   1683     9/23/44     336500</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The <span class="docEmphasis">nawk</span> variable
    <span class="docEmphasis">$0</span> holds the current record. It is printed 
    to the screen. By default, <span class="docEmphasis">nawk</span> would also 
    print the record if the command were</p>
    <pre>% <span class="docEmphStrong">nawk '{print}' employees</span>
</pre>
    </td>
  </tr>
</table>
<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">NR</span> 
Variable.</span> The number of each record is stored in
<span class="docEmphasis">awk</span>'s built-in variable,
<span class="docEmphasis">NR.</span> After a record has been processed, the 
value of <span class="docEmphasis">NR</span> is incremented by one.</p>
<h5 id="ch05list12" class="docExampleTitle">Example 5.12 </h5>
<pre>% <span class="docEmphStrong">cat employees</span>
<span class="docEmphasis">Tom Jones     4424     5/12/66     543354</span>
<span class="docEmphasis">Mary Adams    5346     11/4/63     28765</span>
<span class="docEmphasis">Sally Chang   1654     7/22/54     650000</span>
<span class="docEmphasis">Billy Black   1683     9/23/44     336500</span>

% <span class="docEmphStrong">nawk '{print NR, $0}' employees</span>
<span class="docEmphasis">1 Tom Jones   4424     5/12/66     543354</span>
<span class="docEmphasis">2 Mary Adams  5346     11/4/63     28765</span>
<span class="docEmphasis">3 Sally Chang 1654     7/22/54     650000</span>
<span class="docEmphasis">4 Billy Black 1683     9/23/44     336500</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Each record, <span class="docEmphasis">$0,</span> is 
    printed as it is stored in the file and is preceded with the number of the 
    record, <span class="docEmphasis">NR.</span></td>
  </tr>
</table>
<h4 class="docSection2Title" id="ch05lev2sec9">5.5.2 Fields</h4>
<p class="docText">Each record consists of words called
<span class="docEmphasis">fields</span> which, by default, are separated by 
whitespace, that is, blank spaces or tabs. Each of these words is called a 
field, and <span class="docEmphasis">awk</span> keeps track of the number of 
fields in its built-in variable, <span class="docEmphasis">NF.</span> The value 
of <span class="docEmphasis">NF</span> can vary from line to line, and the limit 
is implementation-dependent, typically 100 fields per line. New fields can be 
created. The following example has four records (lines) and five fields 
(columns). Each record starts at the first field, represented as
<span class="docEmphasis">$1,</span> then moves to the second field,
<span class="docEmphasis">$2,</span> and so forth.</p>
<h5 id="ch05list13" class="docExampleTitle">Example 5.13 </h5>
<pre>(Fields are represented by a dollar sign and the number of the field.)
(The Database)

<span class="docEmphasis">$1        $2         $3        $4          $5</span>
<span class="docEmphasis">Tom       Jones      4424      5/12/66     543354</span>
<span class="docEmphasis">Mary      Adams      5346      11/4/63     28765</span>
<span class="docEmphasis">Sally     Chang      1654      7/22/54     650000</span>
<span class="docEmphasis">Billy     Black      1683      9/23/44     336500</span>

% <span class="docEmphStrong">nawk '{print NR, $1, $2, $5}'  employees</span>
<span class="docEmphasis">1 Tom Jones 543354</span>
<span class="docEmphasis">2 Mary Adams 28765</span>
<span class="docEmphasis">3 Sally Chang 650000</span>
<span class="docEmphasis">4 Billy Black 336500</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText"><span class="docEmphasis">Nawk</span> will print the 
    number of the record (<span class="docEmphasis">NR</span>), and the first, 
    second, and fifth fields (columns) of each line in the file.</td>
  </tr>
</table>
<h5 id="ch05list14" class="docExampleTitle">Example 5.14 </h5>
<pre>% <span class="docEmphStrong">nawk  '{print $0, NF}'  employees</span>
<span class="docEmphasis">Tom Jones      44234  5/12/66  543354    5</span>
<span class="docEmphasis">Mary Adams     5346   11/4/63  28765     5</span>
<span class="docEmphasis">Sally Chang    1654   7/22/54  650000    5</span>
<span class="docEmphasis">Billy Black    1683   9/23/44  336500    5</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText"><span class="docEmphasis">Nawk</span> will print each 
    record (<span class="docEmphasis">$0</span>) in the file, followed by the 
    number of fields.</td>
  </tr>
</table>
<h4 class="docSection2Title" id="ch05lev2sec10">5.5.3 Field Separators</h4>
<p class="docText"><b>The Input Field Separator.</b> <span class="docEmphasis">
Awk'</span>s built-in variable, <span class="docEmphasis">FS,</span> holds the 
value of the input field separator. When the default value of
<span class="docEmphasis">FS</span> is used, <span class="docEmphasis">awk</span> 
separates fields by spaces and/or tabs, stripping leading blanks and tabs. The
<span class="docEmphasis">FS</span> can be changed by assigning a new value to 
it, either in a <span class="docEmphasis">BEGIN</span> statement or at the 
command line. For now, we will assign the new value at the command line. To 
change the value of <span class="docEmphasis">FS</span> at the command line, the
<span class="docEmphasis">–F</span> option is used, followed by the character 
representing the new separator.</p>
<p class="docText"><span class="docEmphStrong">Changing the Field Separator at 
the Command Line</span></p>
<h5 id="ch05list15" class="docExampleTitle">Example 5.15 </h5>
<pre>% <span class="docEmphStrong">cat employees</span>
<span class="docEmphasis">Tom Jones:4424:5/12/66:543354</span>
<span class="docEmphasis">Mary Adams:5346:11/4/63:28765</span>
<span class="docEmphasis">Sally Chang:1654:7/22/54:650000</span>
<span class="docEmphasis">Billy Black:1683:9/23/44:336500</span>

% <span class="docEmphStrong">nawk –F: '/Tom Jones/{print $1, $2}'  employees2</span>
<span class="docEmphasis">Tom Jones  4424</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The <span class="docEmphasis">–F</span> option is used to 
    reassign the value of the input field separator at the command line. When a 
    colon is placed directly after the <span class="docEmphasis">–F</span> 
    option, <span class="docEmphasis">nawk</span> will look for colons to 
    separate the fields in the <span class="docEmphasis">employees</span> file.</td>
  </tr>
</table>
<p class="docText"><b>Using More Than One Field Separator.</b> You may specify 
more than one input separator. If more than one character is used for the field 
separator, <span class="docEmphasis">FS,</span> then the string is a regular 
expression and is enclosed in square brackets. In the following example, the 
field separator is a space, colon, or tab. (The old version of
<span class="docEmphasis">awk</span> did not support this feature.)</p>
<h5 id="ch05list16" class="docExampleTitle">Example 5.16 </h5>
<pre>% <span class="docEmphStrong">nawk –F'[ :\t]'  '{print $1, $2, $3}' employees</span>
<span class="docEmphasis">Tom Jones 4424</span>
<span class="docEmphasis">Mary Adams 5346</span>
<span class="docEmphasis">Sally Chang 1654</span>
<span class="docEmphasis">Billy Black 1683</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The <span class="docEmphasis">–F</span> option is 
    followed by a regular expression enclosed in brackets. If a space, colon, or 
    tab is encountered, <span class="docEmphasis">nawk</span> will use that 
    character as a field separator. The expression is surrounded by quotes so 
    that the shell will not pounce on the metacharacters for its own. (Remember 
    that the shell uses brackets for filename expansion.)</td>
  </tr>
</table>
<p class="docText"><b>The Output Field Separator.</b> The default output field 
separator is a single space and is stored in <span class="docEmphasis">awk</span>'s 
internal variable, <span class="docEmphasis">OFS.</span> In all of the examples 
thus far, we have used the <span class="docEmphasis">print</span> statement to 
send output to the screen. The comma that is used to separate fields in
<span class="docEmphasis">print</span> statements evaluates to whatever the
<span class="docEmphasis">OFS</span> has been set. If the default is used, the 
comma inserted between <span class="docEmphasis">$1</span> and
<span class="docEmphasis">$2</span> will evaluate to a single space and the
<span class="docEmphasis">print</span> function will print the fields with a 
space between them. The <span class="docEmphasis">OFS</span> can be changed.</p>
<p class="docText">The fields are jammed together because the comma was not used 
to separate the fields. The <span class="docEmphasis">OFS</span> will not be 
evaluated unless the comma separates the fields.</p>
<h5 id="ch05list17" class="docExampleTitle">Example 5.17 </h5>
<pre>% <span class="docEmphStrong">cat employees2</span>
<span class="docEmphasis">Tom Jones:4424:5/12/66:543354</span>
<span class="docEmphasis">Mary Adams:5346:11/4/63:28765</span>
<span class="docEmphasis">Sally Chang:1654:7/22/54:650000</span>
<span class="docEmphasis">Billy Black:1683:9/23/44:336500</span>

(The Command Line)
% <span class="docEmphStrong">nawk –F: '/Tom Jones/{print $1, $2, $3, $4}' employees2</span>
<span class="docEmphasis">Tom Jones  4424 5/12/66  543354</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The output field separator, a space, is stored in
    <span class="docEmphasis">nawk</span>'s <span class="docEmphasis">OFS</span> 
    variable. The comma between the fields evaluates to whatever is stored in
    <span class="docEmphasis">OFS.</span> The fields are printed to standard 
    output separated by a space.</td>
  </tr>
</table>
<h5 id="ch05list18" class="docExampleTitle">Example 5.18 </h5>
<pre>% <span class="docEmphStrong">nawk –F: '/Tom Jones/{print $1 $2 $3 $4}' employees2</span>
<span class="docEmphasis">Tom Jones44245/12/66543354</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <pre>% <span class="docEmphStrong">nawk –F: '/Tom Jones/{print $0}' employees2</span>
<span class="docEmphasis">Tom Jones:4424:5/12/66:543354</span>
</pre>
    <p class="docText">The <span class="docEmphasis">$0</span> variable holds 
    the current record exactly as it is found in the input file. The record will 
    be printed as-is.</td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch05lev1sec6">5.6 Patterns and Actions</h3>
<h4 class="docSection2Title" id="ch05lev2sec11">5.6.1 Patterns</h4>
<p class="docText"><span class="docEmphasis">Awk</span>
<span class="docEmphasis">patterns</span> control what actions
<span class="docEmphasis">awk</span> will take on a line of input. A pattern 
consists of a regular expression, an expression resulting in a true or false 
condition, or a combination of these. The default action is to print each line 
where the expression results in a true condition. When reading a pattern 
expression, there is an implied <span class="docEmphasis">if</span> statement. 
When an <span class="docEmphasis">if</span> is implied, there can be no curly 
braces surrounding it. When the <span class="docEmphasis">if</span> is explicit, 
it becomes an action statement and the syntax is different. (See &quot;<a class="docLink" href="_chapter 7.htm#ch07lev1sec7">Conditional 
Statements</a>&quot;.)</p>
<h5 id="ch05list19" class="docExampleTitle">Example 5.19 </h5>
<pre>% <span class="docEmphStrong">cat employees</span>
<span class="docEmphasis">Tom Jones      4424    5/12/66   543354</span>
<span class="docEmphasis">Mary Adams     5346    11/4/63   28765</span>
<span class="docEmphasis">Sally Chang    1654    7/22/54   650000</span>
<span class="docEmphasis">Billy Black    1683    9/23/44   336500</span>


(The Command Line)
1    <span class="docEmphStrong">nawk '/Tom/' employees</span>
     <span class="docEmphasis">Tom Jones   4424  5/12/66   543354</span>

2    <span class="docEmphStrong">nawk '$3 &lt; 4000' employees</span>
     <span class="docEmphasis">Sally Chang 1654  7/22/54   650000</span>
     <span class="docEmphasis">Billy Black 1683  9/23/44   336500</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the pattern <span class="docEmphasis">Tom</span> is 
      matched in the input file, the record is printed. The default action is to 
      print the line if no explicit action is specified. This is equivalent to</p>
      <pre><span class="docEmphStrong">nawk '$0 ~ /Tom/{print $0}' employees</span>
</pre>
      </span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the third field is less than
      <span class="docEmphasis">4000,</span> the record is printed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h4 class="docSection2Title" id="ch05lev2sec12">5.6.2 Actions</h4>
<p class="docText"><span class="docEmphasis">Actions</span> are statements 
enclosed within curly braces and separated by semicolons.<span id="ENB5-2"><a class="docLink" href="#EN5-2"><sup>[2]</sup></a></span> 
If a pattern precedes an action, the pattern dictates when the action will be 
performed. Actions can be simple statements or complex groups of statements. 
Statements are separated by semicolons, or by a newline if placed on their own 
line.</p>
<blockquote>
  <pre><span class="docEmphStrong">nawk '/Tom/\{print &quot;hi Tom&quot;\};\{x=5\}' file</span></pre>
</blockquote>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>{ action }
</pre>
    </td>
  </tr>
</table>
<h5 id="ch05list20" class="docExampleTitle">Example 5.20 </h5>
<pre>{ print $1, $2 }
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The action is to print fields <span class="docEmphasis">1</span> 
    and <span class="docEmphasis">2.</span></p>
    <p class="docText">Patterns can be associated with actions. Remember, 
    actions are statements enclosed in curly braces. A pattern controls the 
    action from the first open curly brace to the first closing curly brace. If 
    an action follows a pattern, the first opening curly brace must be on the 
    same line as the pattern. Patterns are <span class="docEmphasis">never</span> 
    enclosed in curly braces.</td>
  </tr>
</table>
<p>&nbsp;</p>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>pattern{ action statement; action statement; etc. }
       or
pattern{
       action statement
       action statement
}
</pre>
    </td>
  </tr>
</table>
<h5 id="ch05list21" class="docExampleTitle">Example 5.21 </h5>
<pre>% <span class="docEmphStrong">nawk '/Tom/{print &quot;Hello there, &quot;  $1}' employees</span>
<span class="docEmphasis">Hello there, Tom</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">If the record contains the pattern
    <span class="docEmphasis">Tom,</span> the string <span class="docEmphasis">
    Hello there, Tom</span> will print.</p>
    <p class="docText">A pattern with no action displays all lines matching the 
    pattern. String-matching patterns contain regular expressions enclosed in 
    forward slashes.</td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch05lev1sec7">5.7 Regular Expressions</h3>
<p class="docText">A <span class="docEmphasis">regular expression</span> to
<span class="docEmphasis">awk</span> is a pattern that consists of characters 
enclosed in forward slashes. <span class="docEmphasis">Awk</span> supports the 
use of regular expression metacharacters (same as <span class="docEmphasis">
egrep</span>) to modify the regular expression in some way. If a string in the 
input line is matched by the regular expression, the resulting condition is 
true, and any actions associated with the expression are executed. If no action 
is specified and an input line is matched by the regular expression, the record 
is printed. See <a class="docLink" href="#ch05table05">Table 5.5</a>.</p>
<h5 id="ch05list22" class="docExampleTitle">Example 5.22 </h5>
<pre>% <span class="docEmphStrong">nawk  '/Mary/'  employees</span>
<span class="docEmphasis">Mary Adams     5346   11/4/63   28765</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">All lines in the <span class="docEmphasis">employees</span> 
    file containing the regular expression pattern <span class="docEmphasis">
    Mary</span> are displayed.</td>
  </tr>
</table>
<h5 id="ch05list23" class="docExampleTitle">Example 5.23 </h5>
<pre>% <span class="docEmphStrong">nawk  '/Mary/{print $1, $2}'  employees</span>
<span class="docEmphasis">Mary Adams</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The first and second fields of all lines in the
    <span class="docEmphasis">employees</span> file containing the regular 
    expression pattern <span class="docEmphasis">Mary</span> are displayed.</td>
  </tr>
</table>
<p>&nbsp;</p>
<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch05table05" class="docTableTitle">Table 5.5. <span class="docEmphasis">awk</span> 
  Regular Expression Metacharacters</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">^</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches at the beginning of string.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches at the end of string. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">.</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches for a single character. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">*</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches for zero or more of preceding 
    character. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">+</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches for one or more of preceding 
    character. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">?</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches for zero or one of preceding 
    character. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ABC]</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches for any one character in the 
    set of characters, i.e., <span class="docEmphasis">A, B,</span> or
    <span class="docEmphasis">C.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[^ABC]</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches character not in the set of 
    characters, i.e., <span class="docEmphasis">A, B,</span> or
    <span class="docEmphasis">C.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[A–Z]</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches for any character in the range 
    from <span class="docEmphasis">A</span> to <span class="docEmphasis">Z.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">A|B</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches either
    <span class="docEmphasis">A</span> or <span class="docEmphasis">B.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">(AB)+</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches one or more sets of
    <span class="docEmphasis">AB.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">\*</span>
    </td>
    <td class="docTableCell" vAlign="top">Matches for a literal asterisk. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&amp;</span>
    </td>
    <td class="docTableCell" vAlign="top">Used in the replacement string, to 
    represent what was found in the search string. </td>
  </tr>
</table>
<h5 id="ch05list24" class="docExampleTitle">Example 5.24 </h5>
<pre>% <span class="docEmphStrong">nawk  '/^Mary/'  employees</span>
<span class="docEmphasis">Mary Adams    5346   11/4/63   28765</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">All lines in the <span class="docEmphasis">employees</span> 
    file that start with the regular expression <span class="docEmphasis">Mary</span> 
    are displayed<span class="docEmphasis">.</span></td>
  </tr>
</table>
<h5 id="ch05list25" class="docExampleTitle">Example 5.25 </h5>
<pre>% <span class="docEmphStrong">nawk  '/^[A-Z][a-z]+ /'  employees</span>
<span class="docEmphasis">Tom Jones     4424   5/12/66   543354</span>
<span class="docEmphasis">Mary Adams    5346   11/4/63   28765</span>
<span class="docEmphasis">Sally Chang   1654   7/22/54   650000</span>
<span class="docEmphasis">Billy Black   1683   9/23/44   336500</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">All lines in the <span class="docEmphasis">employees</span> 
    file where the line begins with an uppercase letter, followed by one or more 
    lowercase letters, followed by a space are displayed.</td>
  </tr>
</table>
<h4 class="docSection2Title" id="ch05lev2sec13">5.7.1 The <span class="docEmphasis">match</span> 
Operator</h4>
<p class="docText">The <span class="docEmphasis">match</span> operator, the 
tilde (~), is used to match an expression within a record or field.</p>
<h5 id="ch05list26" class="docExampleTitle">Example 5.26 </h5>
<pre>% <span class="docEmphStrong">cat employees</span>
<span class="docEmphasis">Tom Jones     44234  5/12/66   543354</span>
<span class="docEmphasis">Mary Adams    5346   11/4/63   28765</span>
<span class="docEmphasis">Sally Chang   1654   7/22/54   650000</span>
<span class="docEmphasis">Billy Black   1683   9/23/44   336500</span>

% <span class="docEmphStrong">nawk '$1 ~ /[Bb]ill/' employees</span>
<span class="docEmphasis">Billy Black    1683    9/23/44   336500</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Any lines matching <span class="docEmphasis">Bill</span> 
    or <span class="docEmphasis">bill</span> in the first field are displayed.</td>
  </tr>
</table>
<h5 id="ch05list27" class="docExampleTitle">Example 5.27 </h5>
<pre>% <span class="docEmphStrong">nawk '$1 !~ /ly$/' employees</span>
<span class="docEmphasis">Tom Jones     4424    5/12/66   543354</span>
<span class="docEmphasis">Mary Adams    5346    11/4/63   28765</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Any lines not matching <span class="docEmphasis">ly,</span> 
    when <span class="docEmphasis">ly</span> is at the end of the first field 
    are displayed.</td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch05lev1sec8">5.8 <span class="docEmphasis">awk</span> Commands 
in a Script File</h3>
<p class="docText">When you have multiple <span class="docEmphasis">awk</span> 
pattern/action statements, it is often much easier to put the statements in a 
script. The script is a file containing <span class="docEmphasis">awk</span> 
comments and statements. If statements and actions are on the same line, they 
are separated by semicolons. If statements are on separate lines, semicolons are 
not necessary. If an action follows a pattern, the opening curly brace must be 
on the same line as the pattern. Comments are preceded by a pound (#) sign.</p>
<h5 id="ch05list28" class="docExampleTitle">Example 5.28 </h5>
<pre>% <span class="docEmphStrong">cat employees</span>
<span class="docEmphasis">Tom Jones:4424:5/12/66:54335</span>
<span class="docEmphasis">Mary Adams:5346:11/4/63:28765</span>
<span class="docEmphasis">Billy Black:1683:9/23/44:336500</span>
<span class="docEmphasis">Sally Chang:1654:7/22/54:65000</span>
<span class="docEmphasis">Jose Tomas:1683:9/23/44:33650</span>

(The <span class="docEmphasis">Awk</span> Script)
% <span class="docEmphStrong">cat info</span>
1   <span class="docEmphasis"># My first awk script by Jack Sprat</span>
    <span class="docEmphasis"># Script name: info; Date: February 28, 2001</span>
2   /Tom/{print  &quot;Tom's birthday is &quot;$3}
3   /Mary/{print NR, $0}
4   /^Sally/{print &quot;Hi Sally. &quot;  $1 &quot; has a salary of  $&quot; $4 &quot;.&quot;}
    <span class="docEmphasis"># End of info script</span>

(The Command Line)
5   % <span class="docEmphStrong">nawk –F: –f info employees2</span>
    <span class="docEmphasis">Tom's birthday is 5/12/66</span>
    <span class="docEmphasis">2 Mary Adams:5346:11/4/63:28765</span>
    <span class="docEmphasis">Hi Sally. Sally Chang has a salary of $65000.</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">These are comment lines.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the regular expression <span class="docEmphasis">Tom</span> 
      is matched against an input line, the string <span class="docEmphasis">
      Tom's birthday is</span> and the value of the third field (<span class="docEmphasis">$3</span>) 
      are printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the regular expression <span class="docEmphasis">
      Mary</span> is matched against an input line, the action block prints
      <span class="docEmphasis">NR,</span> the number of the current record, and 
      the record.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the regular expression <span class="docEmphasis">
      Sally</span> is found at the beginning of the input line, the string
      <span class="docEmphasis">Hi Sally.</span> is printed, followed by the 
      value of the first field (<span class="docEmphasis">$1</span>), the string
      <span class="docEmphasis">has a salary of $,</span> and the value of the 
      fourth field (<span class="docEmphasis">$4</span>).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">nawk</span> command is 
      followed by the <span class="docEmphasis">–F:</span> option, specifying 
      the colon to be the field separator. The <span class="docEmphasis">–f</span> 
      option is followed by the name of the <span class="docEmphasis">awk</span> 
      script. <span class="docEmphasis">Awk</span> will read instructions from 
      the <span class="docEmphasis">info</span> file. The input file,
      <span class="docEmphasis">employees2,</span> is next.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch05lev1sec9">5.9 Review</h3>
<p class="docText">The examples in this section use a sample database, called
<span class="docEmphasis">datafile.</span> In the database, the input field 
separator, <span class="docEmphasis">FS,</span> is whitespace, the default. The 
number of fields, <span class="docEmphasis">NF,</span> is
<span class="docEmphasis">8.</span> The number may vary from line to line, but 
in this file, the number of fields is fixed. The record separator,
<span class="docEmphasis">RS,</span> is the newline, which separates each line 
of the file. <span class="docEmphasis">Awk</span> keeps track of the number of 
each record in the <span class="docEmphasis">NR</span> variable. The output 
field separator, <span class="docEmphasis">OFS,</span> is a space. If a comma is 
used to separate fields, when the line is printed, each field printed will be 
separated by a space.</p>
<h4 class="docSection2Title" id="ch05lev2sec14">5.9.1 Simple Pattern Matching</h4>
<pre>% <span class="docEmphStrong">cat datafile</span>
<span class="docEmphasis">northwest          NW    Joel Craig          3.0     .98     3       4</span>
<span class="docEmphasis">western            WE    Sharon Kelly        5.3     .97     5       23</span>
<span class="docEmphasis">southwest          SW    Chris Foster        2.7     .8      2       18</span>
<span class="docEmphasis">southern           SO    May Chin            5.1     .95     4       15</span>
<span class="docEmphasis">southeast          SE    Derek Johnson       4.0     .7      4       17</span>
<span class="docEmphasis">eastern            EA    Susan Beal          4.4     .84     5       20</span>
<span class="docEmphasis">northeast          NE    TJ Nichols          5.1     .94     3       13</span>
<span class="docEmphasis">north              NO    Val Shultz          4.5     .89     5       9</span>
<span class="docEmphasis">central            CT    Sheri Watson        5.7     .94     5       13</span>
</pre>
<h5 id="ch05list29" class="docExampleTitle">Example 5.29 </h5>
<pre><span class="docEmphStrong">nawk '/west/'  datafile</span>
<span class="docEmphasis">northwest     NW      Joel Craig         3.0  .98  3      4</span>
<span class="docEmphasis">western       WE      Sharon Kelly       5.3  .97  5      23</span>
<span class="docEmphasis">southwest     SW      Chris Foster       2.7  .8   2      18</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">All lines containing the pattern
    <span class="docEmphasis">west</span> are printed.</td>
  </tr>
</table>
<h5 id="ch05list30" class="docExampleTitle">Example 5.30 </h5>
<pre><span class="docEmphStrong">nawk '/^north/' datafile</span>
<span class="docEmphasis">northwest     NW      Joel Craig          3.0  .98  3    4</span>
<span class="docEmphasis">northeast     NE      TJ Nichols          5.1  .94  3    13</span>
<span class="docEmphasis">north         NO      Val Shultz          4.5  .89  5    9</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">All lines beginning with the pattern
    <span class="docEmphasis">north</span> are printed.</td>
  </tr>
</table>
<h5 id="ch05list31" class="docExampleTitle">Example 5.31 </h5>
<pre><span class="docEmphStrong">nawk '/^(no|so)/' datafile</span>
<span class="docEmphasis">northwest     NW      Joel Craig          3.0  .98  3    4</span>
<span class="docEmphasis">southwest     SW      Chris Foster        2.7  .8   2    18</span>
<span class="docEmphasis">southern      SO      May Chin            5.1  .95  4    15</span>
<span class="docEmphasis">southeast     SE      Derek Johnson       4.0  .7   4    17</span>
<span class="docEmphasis">northeast     NE      TJ Nichols          5.1  .94  3    13</span>
<span class="docEmphasis">north         NO      Val Shultz          4.5  .89  5    9</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">All lines beginning with the pattern
    <span class="docEmphasis">no</span> or <span class="docEmphasis">so</span> 
    are printed.</td>
  </tr>
</table>
<h4 class="docSection2Title" id="ch05lev2sec15">5.9.2 Simple Actions</h4>
<h5 id="ch05list32" class="docExampleTitle">Example 5.32 </h5>
<pre><span class="docEmphStrong">nawk '{print $3, $2}' datafile</span>
<span class="docEmphasis">Joel NW</span>
<span class="docEmphasis">Sharon WE</span>
<span class="docEmphasis">Chris SW</span>
<span class="docEmphasis">May SO</span>
<span class="docEmphasis">Derek SE</span>
<span class="docEmphasis">Susan EA</span>
<span class="docEmphasis">TJ NE</span>
<span class="docEmphasis">Val NO</span>
<span class="docEmphasis">Sheri CT</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The output field separator, <span class="docEmphasis">
    OFS,</span> is a space by default. The comma between
    <span class="docEmphasis">$3</span> and <span class="docEmphasis">$2</span> 
    is translated to the value of the <span class="docEmphasis">OFS.</span> The 
    third field is printed, followed by a space and the second field.</td>
  </tr>
</table>
<pre><span class="docEmphStrong">% cat datafile</span>
<span class="docEmphasis">northwest           NW   Joel Craig           3.0    .98     3     4</span>
<span class="docEmphasis">western             WE   Sharon Kelly         5.3    .97     5     23</span>
<span class="docEmphasis">southwest           SW   Chris Foster         2.7    .8      2     18</span>
<span class="docEmphasis">southern            SO   May Chin             5.1    .95     4     15</span>
<span class="docEmphasis">southeast           SE   Derek Johnson        4.0    .7      4     17</span>
<span class="docEmphasis">eastern             EA   Susan Beal           4.4    .84     5     20</span>
<span class="docEmphasis">northeast           NE   TJ Nichols           5.1    .94     3     13</span>
<span class="docEmphasis">north               NO   Val Shultz           4.5    .89     5     9</span>
<span class="docEmphasis">central             CT   Sheri Watson         5.7    .94     5     13</span>
</pre>
<h5 id="ch05list33" class="docExampleTitle">Example 5.33 </h5>
<pre><span class="docEmphStrong">nawk '{print $3 $2}' datafile</span>
<span class="docEmphasis">JoelNW</span>
<span class="docEmphasis">SharonWE</span>
<span class="docEmphasis">ChrisSW</span>
<span class="docEmphasis">MaySO</span>
<span class="docEmphasis">DerekSE</span>
<span class="docEmphasis">SusanEA</span>
<span class="docEmphasis">TJNE</span>
<span class="docEmphasis">ValNO</span>
<span class="docEmphasis">SheriCT</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The third field is followed by the second field. Since 
    the comma does not separate fields <span class="docEmphasis">$3</span> and
    <span class="docEmphasis">$2,</span> the output is displayed without spaces 
    between the fields.</td>
  </tr>
</table>
<h5 id="ch05list34" class="docExampleTitle">Example 5.34 </h5>
<pre><span class="docEmphStrong">nawk 'print $1' datafile</span>
<span class="docEmphasis">nawk: syntax error at source line 1</span>
 <span class="docEmphasis">context is</span>
         <span class="docEmphasis">&gt;&gt;&gt; print &lt;&lt;&lt;  $1</span>
<span class="docEmphasis">nawk: bailing out at source line 1</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">This is the <span class="docEmphasis">nawk</span> (new
    <span class="docEmphasis">awk</span>) error message.
    <span class="docEmphasis">Nawk</span> error messages are much more verbose 
    than those of the old <span class="docEmphasis">awk.</span> In this program, 
    the curly braces are missing in the action statement.</td>
  </tr>
</table>
<h5 id="ch05list35" class="docExampleTitle">Example 5.35 </h5>
<pre><span class="docEmphStrong">awk 'print $1' datafile</span>
<span class="docEmphasis">awk: syntax error near line 1</span>
<span class="docEmphasis">awk: bailing out near line 1</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">This is the <span class="docEmphasis">awk</span> (old
    <span class="docEmphasis">awk</span>) error message. Old
    <span class="docEmphasis">awk</span> programs were difficult to debug since 
    almost all errors produced this same message. The curly braces are missing 
    in the action statement.</td>
  </tr>
</table>
<h5 id="ch05list36" class="docExampleTitle">Example 5.36 </h5>
<pre><span class="docEmphStrong">nawk '{print $0}' datafile</span>
<span class="docEmphasis">northwest     NW      Joel Craig          3.0  .98  3    4</span>
<span class="docEmphasis">western       WE      Sharon Kelly        5.3  .97  5    23</span>
<span class="docEmphasis">southwest     SW      Chris Foster        2.7  .8   2    18</span>
<span class="docEmphasis">southern      SO      May Chin            5.1  .95  4    15</span>
<span class="docEmphasis">southeast     SE      Derek Johnson       4.0  .7   4    17</span>
<span class="docEmphasis">eastern       EA      Susan Beal          4.4  .84  5    20</span>
<span class="docEmphasis">northeast     NE      TJ Nichols          5.1  .94  3    13</span>
<span class="docEmphasis">north         NO      Val Shultz          4.5  .89  5    9</span>
<span class="docEmphasis">central       CT      Sheri Watson        5.7  .94  5    13</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Each record is printed. <span class="docEmphasis">$0</span> 
    holds the current record.</td>
  </tr>
</table>
<h5 id="ch05list37" class="docExampleTitle">Example 5.37 </h5>
<pre><span class="docEmphStrong">nawk '{print &quot;Number of fields: &quot;NF}' datafile</span>
<span class="docEmphasis">Number of fields: 8</span>
<span class="docEmphasis">Number of fields: 8</span>
<span class="docEmphasis">Number of fields: 8</span>
<span class="docEmphasis">Number of fields: 8</span>
<span class="docEmphasis">Number of fields: 8</span>
<span class="docEmphasis">Number of fields: 8</span>
<span class="docEmphasis">Number of fields: 8</span>
<span class="docEmphasis">Number of fields: 8</span>
<span class="docEmphasis">Number of fields: 8</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">There are 8 fields in each record. The built-in
    <span class="docEmphasis">awk</span> variable <span class="docEmphasis">NF</span> 
    holds the number of fields and is reset for each record.</td>
  </tr>
</table>
<pre>% <span class="docEmphStrong">cat datafile</span>
<span class="docEmphasis">northwest           NW   Joel Craig          3.0    .98    3     4</span>
<span class="docEmphasis">western             WE   Sharon Kelly        5.3    .97    5     23</span>
<span class="docEmphasis">southwest           SW   Chris Foster        2.7    .8     2     18</span>
<span class="docEmphasis">southern            SO   May Chin            5.1    .95    4     15</span>
<span class="docEmphasis">southeast           SE   Derek Johnson       4.0    .7     4     17</span>
<span class="docEmphasis">eastern             EA   Susan Beal          4.4    .84    5     20</span>
<span class="docEmphasis">northeast           NE   TJ Nichols          5.1    .94    3     13</span>
<span class="docEmphasis">north               NO   Val Shultz          4.5    .89    5     9</span>
<span class="docEmphasis">central             CT   Sheri Watson        5.7    .94    5     13</span>
</pre>
<h4 class="docSection2Title" id="ch05lev2sec16">5.9.3 Regular Expressions in Pattern and Action 
Combinations</h4>
<h5 id="ch05list38" class="docExampleTitle">Example 5.38 </h5>
<pre><span class="docEmphStrong">nawk '/northeast/{print $3, $2}' datafile</span>
<span class="docEmphasis">TJ NE</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">If the record contains (or matches) the pattern
    <span class="docEmphasis">northeast,</span> the third field, followed by the 
    second field, is printed.</td>
  </tr>
</table>
<h5 id="ch05list39" class="docExampleTitle">Example 5.39 </h5>
<pre><span class="docEmphStrong">nawk '/E/' datafile</span>
<span class="docEmphasis">western       WE      Sharon Kelly         5.3  .97  5    23</span>
<span class="docEmphasis">southeast     SE      Derek Johnson        4.0  .7   4    17</span>
<span class="docEmphasis">eastern       EA      Susan Beal           4.4  .84  5    20</span>
<span class="docEmphasis">northeast     NE      TJ Nichols           5.1  .94  3    13</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">If the record contains an <span class="docEmphasis">E,</span> 
    the entire record is printed.</td>
  </tr>
</table>
<h5 id="ch05list40" class="docExampleTitle">Example 5.40 </h5>
<pre><span class="docEmphStrong">nawk '/^[ns]/{print $1}' datafile</span>
<span class="docEmphasis">northwest</span>
<span class="docEmphasis">southwest</span>
<span class="docEmphasis">southern</span>
<span class="docEmphasis">southeast</span>
<span class="docEmphasis">northeast</span>
<span class="docEmphasis">north</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">If the record begins with an <span class="docEmphasis">n</span> 
    or <span class="docEmphasis">s,</span> the first field is printed.</td>
  </tr>
</table>
<h5 id="ch05list41" class="docExampleTitle">Example 5.41 </h5>
<pre><span class="docEmphStrong">nawk '$5 ~ /\.[7-9]+/' datafile</span>
<span class="docEmphasis">southwest     SW     Chris Foster       2.7  .8  2    18</span>
<span class="docEmphasis">central       CT     Sheri Watson       5.7  .94 5    13</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">If the fifth field (<span class="docEmphasis">$5</span>) 
    contains a literal period, followed by one or more numbers between
    <span class="docEmphasis">7</span> and <span class="docEmphasis">9,</span> 
    the record is printed.</td>
  </tr>
</table>
<h5 id="ch05list42" class="docExampleTitle">Example 5.42 </h5>
<pre><span class="docEmphStrong">nawk '$2 !~ /E/{print $1, $2}' datafile</span>
<span class="docEmphasis">northwest NW</span>
<span class="docEmphasis">southwest SW</span>
<span class="docEmphasis">southern SO</span>
<span class="docEmphasis">north NO</span>
<span class="docEmphasis">central CT</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">If the second field does not contain the pattern
    <span class="docEmphasis">E,</span> the first field followed by the second 
    field (<span class="docEmphasis">$1, $2</span>) is printed.</td>
  </tr>
</table>
<pre>% <span class="docEmphStrong">cat datafile</span>
<span class="docEmphasis">northwest           NW   Joel Craig           3.0    .98    3    4</span>
<span class="docEmphasis">western             WE   Sharon Kelly         5.3    .97    5    23</span>
<span class="docEmphasis">southwest           SW   Chris Foster         2.7    .8     2    18</span>
<span class="docEmphasis">southern            SO   May Chin             5.1    .95    4    15</span>
<span class="docEmphasis">southeast           SE   Derek Johnson        4.0    .7     4    17</span>
<span class="docEmphasis">eastern             EA   Susan Beal           4.4    .84    5    20</span>
<span class="docEmphasis">northeast           NE   TJ Nichols           5.1    .94    3    13</span>
<span class="docEmphasis">north               NO   Val Shultz           4.5    .89    5    9</span>
<span class="docEmphasis">central             CT   Sheri Watson         5.7    .94    5    13</span>
</pre>
<h5 id="ch05list43" class="docExampleTitle">Example 5.43 </h5>
<pre><span class="docEmphStrong">nawk '$3 ~ /^Joel/{print $3 &quot; is a nice guy.&quot;}' datafile</span>
<span class="docEmphasis">Joel is a nice guy.</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">If the third field (<span class="docEmphasis">$3</span>) 
    begins with the pattern <span class="docEmphasis">Joel,</span> the third 
    field followed by the string <span class="docEmphasis">is a nice guy.</span> 
    is printed. Note that a space is included in the string if it is to be 
    printed.</td>
  </tr>
</table>
<h5 id="ch05list44" class="docExampleTitle">Example 5.44 </h5>
<pre><span class="docEmphStrong">nawk '$8 ~ /[0-9][0-9]$/{print $8}' datafile</span>
<span class="docEmphasis">23</span>
<span class="docEmphasis">18</span>
<span class="docEmphasis">15</span>
<span class="docEmphasis">17</span>
<span class="docEmphasis">20</span>
<span class="docEmphasis">13</span>
<span class="docEmphasis">13</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">If the eighth field (<span class="docEmphasis">$8</span>) 
    ends in two digits, it is printed.</td>
  </tr>
</table>
<h5 id="ch05list45" class="docExampleTitle">Example 5.45 </h5>
<pre><span class="docEmphStrong">nawk '$4 ~ /Chin$/{print &quot;The price is $&quot; $8 &quot;.&quot;}' datafile</span>
The price is $15.
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">If the fourth field (<span class="docEmphasis">$4</span>) 
    ends with <span class="docEmphasis">Chin,</span> the string enclosed in 
    double quotes (<span class="docEmphasis">&quot;The price is $&quot;</span>), the 
    eighth field (<span class="docEmphasis">$8</span>), and the string 
    containing a period are printed.</td>
  </tr>
</table>
<h5 id="ch05list46" class="docExampleTitle">Example 5.46 </h5>
<pre><span class="docEmphStrong">nawk '/TJ/{print $0}' datafile</span>
<span class="docEmphasis">northeast     NE      TJ Nichols           5.1   .94    3    13</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">If the record contains the pattern
    <span class="docEmphasis">TJ, $0</span> (the record) is printed.</td>
  </tr>
</table>
<h4 class="docSection2Title" id="ch05lev2sec17">5.9.4 Input Field Separators</h4>
<pre>% <span class="docEmphStrong">cat datafile2</span>
<span class="docEmphasis">Joel Craig:northwest:NW:3.0:.98:3:4</span>
<span class="docEmphasis">Sharon Kelly:western:WE:5.3:.97:5:23</span>
<span class="docEmphasis">Chris Foster:southwest:SW:2.7:.8:2:18</span>
<span class="docEmphasis">May Chin:southern:SO:5.1:.95:4:15</span>
<span class="docEmphasis">Derek Johnson:southeast:SE:4.0:.7:4:17</span>
<span class="docEmphasis">Susan Beal:eastern:EA:4.4:.84:5:20</span>
<span class="docEmphasis">TJ Nichols:northeast:NE:5.1:.94:3:13</span>
<span class="docEmphasis">Val Shultz:north:NO:4.5:.89:5:9</span>
<span class="docEmphasis">Sheri Watson:central:CT:5.7:.94:5:13</span>
</pre>
<h5 id="ch05list47" class="docExampleTitle">Example 5.47 </h5>
<pre><span class="docEmphStrong">nawk '{print $1}' datafile2</span>
<span class="docEmphasis">Joel</span>
<span class="docEmphasis">Sharon</span>
<span class="docEmphasis">Chris</span>
<span class="docEmphasis">May</span>
<span class="docEmphasis">Derek</span>
<span class="docEmphasis">Susan</span>
<span class="docEmphasis">TJ</span>
<span class="docEmphasis">Val</span>
<span class="docEmphasis">Sheri</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The default input field separator is whitespace. The 
    first field (<span class="docEmphasis">$1</span>) is printed.</td>
  </tr>
</table>
<pre>% <span class="docEmphStrong">cat datafile2</span>
<span class="docEmphasis">Joel Craig:northwest:NW:3.0:.98:3:4</span>
<span class="docEmphasis">Sharon Kelly:western:WE:5.3:.97:5:23</span>
<span class="docEmphasis">Chris Foster:southwest:SW:2.7:.8:2:18</span>
<span class="docEmphasis">May Chin:southern:SO:5.1:.95:4:15</span>
<span class="docEmphasis">Derek Johnson:southeast:SE:4.0:.7:4:17</span>
<span class="docEmphasis">Susan Beal:eastern:EA:4.4:.84:5:20</span>
<span class="docEmphasis">TJ Nichols:northeast:NE:5.1:.94:3:13</span>
<span class="docEmphasis">Val Shultz:north:NO:4.5:.89:5:9</span>
<span class="docEmphasis">Sheri Watson:central:CT:5.7:.94:5:13</span>
</pre>
<h5 id="ch05list48" class="docExampleTitle">Example 5.48 </h5>
<pre><span class="docEmphStrong">nawk -F: '{print $1}' datafile2</span>
<span class="docEmphasis">Joel Craig</span>
<span class="docEmphasis">Sharon Kelly</span>
<span class="docEmphasis">Chris Foster</span>
              <span class="docEmphasis">&lt;more output here&gt;</span>
<span class="docEmphasis">Val Shultz</span>
<span class="docEmphasis">Sheri Watson</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The <span class="docEmphasis">–F</span> option specifies 
    the colon as the input field separator. The first field (<span class="docEmphasis">$1</span>) 
    is printed.</td>
  </tr>
</table>
<h5 id="ch05list49" class="docExampleTitle">Example 5.49 </h5>
<pre><span class="docEmphStrong">nawk '{print &quot;Number of fields: &quot;NF}' datafile2</span>
<span class="docEmphasis">Number of fields: 2</span>
<span class="docEmphasis">Number of fields: 2</span>
<span class="docEmphasis">Number of fields: 2</span>
              <span class="docEmphasis">&lt;more of the same output here&gt;</span>
<span class="docEmphasis">Number of fields: 2</span>
<span class="docEmphasis">Number of fields: 2</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Since the field separator is the default (whitespace) the 
    number of fields for each record is 2. The only space is between the first 
    and last name.</td>
  </tr>
</table>
<h5 id="ch05list50" class="docExampleTitle">Example 5.50 </h5>
<pre><span class="docEmphStrong">nawk -F: '{print &quot;Number of fields: &quot;NF}' datafile2</span>
<span class="docEmphasis">Number of fields: 7</span>
<span class="docEmphasis">Number of fields: 7</span>
<span class="docEmphasis">Number of fields: 7</span>
              <span class="docEmphasis">&lt;more of the same output here&gt;</span>
<span class="docEmphasis">Number of fields: 7</span>
<span class="docEmphasis">Number of fields: 7</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Since the field separator is a colon, the number of 
    fields in each record is <span class="docEmphasis">7.</span></td>
  </tr>
</table>
<h5 id="ch05list51" class="docExampleTitle">Example 5.51 </h5>
<pre><span class="docEmphStrong">nawk -F&quot;[ :]&quot; '{print $1, $2}' datafile2</span>
<span class="docEmphasis">Joel Craig northwest</span>
<span class="docEmphasis">Sharon Kelly western</span>
<span class="docEmphasis">Chris Foster southwest</span>
<span class="docEmphasis">May Chin southern</span>
<span class="docEmphasis">Derek Johnson southeast</span>
<span class="docEmphasis">Susan Beal eastern</span>
<span class="docEmphasis">TJ Nichols northeast</span>
<span class="docEmphasis">Val Shultz north</span>
<span class="docEmphasis">Sheri Watson central</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Multiple field separators can be specified with
    <span class="docEmphasis">nawk</span> as a regular expression. Either a 
    space or a colon will be designated as a field separator. The first and 
    second fields (<span class="docEmphasis">$1, $2</span>) are printed.</td>
  </tr>
</table>
<pre>% <span class="docEmphStrong">cat datafile</span>
<span class="docEmphasis">northwest           NW   Joel Craig           3.0    .98    3    4</span>
<span class="docEmphasis">western             WE   Sharon Kelly         5.3    .97    5    23</span>
<span class="docEmphasis">southwest           SW   Chris Foster         2.7    .8     2    18</span>
<span class="docEmphasis">southern            SO   May Chin             5.1    .95    4    15</span>
<span class="docEmphasis">southeast           SE   Derek Johnson        4.0    .7     4    17</span>
<span class="docEmphasis">eastern             EA   Susan Beal           4.4    .84    5    20</span>
<span class="docEmphasis">northeast           NE   TJ Nichols           5.1    .94    3    13</span>
<span class="docEmphasis">north               NO   Val Shultz           4.5    .89    5    9</span>
<span class="docEmphasis">central             CT   Sheri Watson         5.7    .94    5    13</span>
</pre>
<h4 class="docSection2Title" id="ch05lev2sec18">5.9.5 <span class="docEmphasis">awk</span> 
Scripting</h4>
<h5 id="ch05list52" class="docExampleTitle">Example 5.52 </h5>
<pre><span class="docEmphStrong">cat nawk.sc1</span>
<span class="docEmphasis"># This is a comment</span>
<span class="docEmphasis"># This is my first awk script</span>
1   /^north/{print $1, $2, $3}
2   /^south/{print &quot;The &quot; $1 &quot; district.&quot;}

<span class="docEmphStrong">nawk -f nawk.sc1 datafile</span>
<span class="docEmphasis">3   northwest NW Joel</span>
    <span class="docEmphasis">The southwest district.</span>
    <span class="docEmphasis">The southern district.</span>
    <span class="docEmphasis">The southeast district.</span>
    <span class="docEmphasis">northeast NE TJ</span>
    <span class="docEmphasis">north NO Val</span>
</pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the record begins with the pattern
      <span class="docEmphasis">north,</span> the first, second, and third 
      fields (<span class="docEmphasis">$1, $2, $3</span>) are printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the record begins with the pattern
      <span class="docEmphasis">south,</span> the string
      <span class="docEmphasis">The,</span> followed by the value of the first 
      field (<span class="docEmphasis">$1</span>), and the string
      <span class="docEmphasis">district.</span> are printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">–f</span> option precedes 
      the name of the <span class="docEmphasis">awk</span> script file, followed 
      by the input file that is to be processed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch05lev1sec10">UNIX TOOLS LAB EXERCISE</h3>
<h4 class="docSection2Title" id="ch05lev2sec19">Lab 3: <span class="docEmphasis">awk</span> 
Exercise</h4>
<p class="docText">Mike Harrington:(510) 548-1278:250:100:175</p>
<p class="docText">Christian Dobbins:(408) 538-2358:155:90:201</p>
<p class="docText">Susan Dalsass:(206) 654-6279:250:60:50</p>
<p class="docText">Archie McNichol:(206) 548-1348:250:100:175</p>
<p class="docText">Jody Savage:(206) 548-1278:15:188:150</p>
<p class="docText">Guy Quigley:(916) 343-6410:250:100:175</p>
<p class="docText">Dan Savage:(406) 298-7744:450:300:275</p>
<p class="docText">Nancy McNeil:(206) 548-1278:250:80:75</p>
<p class="docText">John Goldenrod:(916) 348-4278:250:100:175</p>
<p class="docText">Chet Main:(510) 548-5258:50:95:135</p>
<p class="docText">Tom Savage:(408) 926-3456:250:168:200</p>
<p class="docText">Elizabeth Stachelin:(916) 440-1763:175:75:300</p>
<p class="docText">The database above contains the names, phone numbers, and 
money contributions to the party campaign for the past three months.</p>
<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Print all the phone numbers.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">Print <span class="docEmphasis">Dan</span>'s phone 
    number.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>3:</b></td>
    <td>
    <p class="docText">Print <span class="docEmphasis">Susan</span>'s name and 
    phone number.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>4:</b></td>
    <td>
    <p class="docText">Print all last names beginning with
    <span class="docEmphasis">D.</span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>5:</b></td>
    <td>
    <p class="docText">Print all first names beginning with either a
    <span class="docEmphasis">C</span> or <span class="docEmphasis">E.</span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>6:</b></td>
    <td>
    <p class="docText">Print all first names containing only four characters.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>7:</b></td>
    <td>
    <p class="docText">Print the first names of all those in the
    <span class="docEmphasis">916</span> area code.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>8:</b></td>
    <td>
    <p class="docText">Print <span class="docEmphasis">Mike</span>'s campaign 
    contributions. Each value should be printed with a leading dollar sign; 
    e.g., $250 $100 $175.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>9:</b></td>
    <td>
    <p class="docText">Print last names followed by a comma and the first name.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>10:</b></td>
    <td>
    <p class="docText">Write an <span class="docEmphasis">awk</span> script 
    called <span class="docEmphasis">facts</span> that:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Prints full names and phone numbers for the
      <span class="docEmphasis">Savages.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Prints <span class="docEmphasis">Chet</span>'s 
      contributions.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Prints all those who contributed
      <span class="docEmphasis">$250</span> the first month.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<blockquote>
<p class="docFootnote" id="EN5-1"><a class="docLink" href="#ENB5-1">[1]</a>&nbsp;&nbsp;On SCO UNIX, the 
  new version is spelled <span class="docEmphasis">awk,</span> and on Linux, the 
  gnu version is spelled <span class="docEmphasis">awk.</span> This text 
  pertains primarily to the new <span class="docEmphasis">awk,</span>
  <span class="docEmphasis">nawk.</span> The gnu implementation,
  <span class="docEmphasis">gawk,</span> is fully upward-compatible with
  <span class="docEmphasis">nawk.</span></p><p class="docFootnote" id="EN5-2"><a class="docLink" href="#ENB5-2">[2]</a>&nbsp;&nbsp;On some versions 
  of <span class="docEmphasis">awk,</span> actions must be separated by 
  semicolons or newlines, and the statements within the curly braces also must 
  be separated by semicolons or newlines. SVR4's <span class="docEmphasis">nawk</span> 
  requires the use of semicolons or newlines to separate statements within an 
  action, but does not require the use of semicolons to separate actions; for 
  example, the two actions that follow do not need a semicolon:</p></blockquote>
<table width="100%" border="1" bgcolor="#EBEBFF"><tr><td width="5%" align="left" valign="middle"><a href="_chapter 4.htm"><img src="Larrow.gif" width="17" height="19" border="0"></a></td><td align="center" valign="middle"><a class="docLink" href="Front matter.htm">CONTENTS</a></td><td width="5%" align="right" valign="middle"><a href="_chapter 6.htm"><img src="Rarrow.gif" width="17" height="19" border="0"></a></td></tr></table></body>

</html>