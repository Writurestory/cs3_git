<html>

<head>
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Chapter 12</title>
<link rel="stylesheet" type="text/css" href="docsafari.css">
<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body><table width="100%" border="1" bgcolor="#EBEBFF"><tr><td width="5%" align="left" valign="middle"><a href="_chapter 11.htm"><img src="Larrow.gif" width="17" height="19" border="0"></a></td><td align="center" valign="middle"><a class="docLink" href="Front matter.htm">CONTENTS</a></td><td width="5%" align="right" valign="middle"><a href="_chapter 13.htm"><img src="Rarrow.gif" width="17" height="19" border="0"></a></td></tr></table>


<h2 class="docChapterTitle">Chapter 12. Programming with the
<span class="docEmphasis">bash</span> Shell</h2><ul><li>&nbsp;<a class="docLink" href="#ch12lev1sec1">12.1 Introduction</a></li>
<li>&nbsp;<a class="docLink" href="#ch12lev1sec2">12.2 Reading User Input</a></li>
<li>&nbsp;<a class="docLink" href="#ch12lev1sec3">12.3 Arithmetic</a></li>
<li>&nbsp;<a class="docLink" href="#ch12lev1sec4">12.4 Positional Parameters and Command Line Arguments</a></li>
<li>&nbsp;<a class="docLink" href="#ch12lev1sec5">12.5 Conditional Constructs and Flow Control</a></li>
<li>&nbsp;<a class="docLink" href="#ch12lev1sec6">12.6 Looping Commands</a></li>
<li>&nbsp;<a class="docLink" href="#ch12lev1sec7">12.7 Functions</a></li>
<li>&nbsp;<a class="docLink" href="#ch12lev1sec8">12.8 Trapping Signals</a></li>
<li>&nbsp;<a class="docLink" href="#ch12lev1sec9">12.9 Debugging</a></li>
<li>&nbsp;<a class="docLink" href="#ch12lev1sec10">12.10 Processing Command Line Options with<span class="docEmphasis">getopts</span></a></li>
<li>&nbsp;<a class="docLink" href="#ch12lev1sec11">12.11 The <span class="docEmphasis">eval</span> Command and Parsing the Command Line</a></li>
<li>&nbsp;<a class="docLink" href="#ch12lev1sec12">12.12 <span class="docEmphasis">bash</span> Options</a></li>
<li>&nbsp;<a class="docLink" href="#ch12lev1sec13">12.13 Shell Built-In Commands</a></li>
<li>&nbsp;<a class="docLink" href="#ch12lev1sec14">BASH SHELL LAB EXERCISES</a></li>
</ul>
<p class="docText">
<img alt="graphics/ch12.gif" src="ch12.gif" border="0" width="500" height="412"></p>
<h3 class="docSection1Title" id="ch12lev1sec1">12.1 Introduction</h3>
<p class="docText">When commands are executed from within a file, instead of
from the command line, the file is called a shell script and the shell is
running noninteractively. When the <span class="docEmphasis">bash</span> shell
starts running noninteractively, it looks for the environment variable,
<span class="docEmphasis">BASH_ENV</span> (<span class="docEmphasis">ENV</span>)
and starts up the file (normally <span class="docEmphasis">.bashrc</span>)
assigned as its value. After the <span class="docEmphasis">BASH_ENV</span> file
has been read, the shell will start executing commands in the script.<span id="ENB12-1"><a class="docLink" href="#EN12-1"><sup>[1]</sup></a></span></p>
<h4 class="docSection2Title" id="ch12lev2sec1">12.1.1 The Steps in Creating a Shell Script</h4>
<p class="docText">A shell script is normally written in an editor and consists
of commands interspersed with comments. Comments are preceded by a pound sign
and consist of text used to document what is going on.</p>
<p class="docText"><b>The First Line.</b> The first line at the top left corner
of the script will indicate the program that will be executing the lines in the
script. This line, commonly called the <span class="docEmphasis">shbang</span>
line, is written as</p>
<pre>#!/bin/bash</pre>
<p class="docText">The <span class="docEmphasis">#!</span> is called a magic
number and is used by the kernel to identify the program that should be
interpreting the lines in the script. This line must be the top line of your
script. The <span class="docEmphasis">bash</span> program can also accept
arguments to modify its behavior. See
<a class="docLink" href="#ch12table08">Table
12.8</a> for a list of <span class="docEmphasis">bash</span> options.</p>
<p class="docText"><b>Comments.</b> <span class="docEmphasis">Comments</span>
are lines preceded by a pound sign (<span class="docEmphasis">#</span>) and can
be on a line by themselves or on a line following a script command. They are
used to document your script. It is sometimes difficult to understand what the
script is supposed to do if it is not commented. Although comments are
important, they are often too sparse or not used at all. Try to get used to
commenting what you are doing not only for someone else, but also for yourself.
Two days from now you may not recall exactly what you were trying to do.</p>
<p class="docText"><span class="docEmphStrong">Executable Statements and
<span class="docEmphasis">bash</span> Shell Constructs.</span> A
<span class="docEmphasis">bash</span> shell program consists of a combination of
UNIX commands, <span class="docEmphasis">bash</span> shell commands, programming
constructs, and comments.</p>
<p class="docText"><b>Making the Script Executable.</b> When you create a file,
it is not given the execute permission. You need this permission to run your
script. Use the <span class="docEmphasis">chmod</span> command to turn on the
execute permission.</p>
<h5 id="ch12list01" class="docExampleTitle">Example 12.1 </h5>
<pre>1   $ <span class="docEmphStrong">chmod +x myscript</span>
2   $ <span class="docEmphStrong">ls -lF  myscript</span>
    <span class="docEmphasis">-rwxr-xr-x    1  ellie   0 Jul  13:00 myscript*</span></pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">chmod</span> command is
      used to turn on the execute permission for the user, group, and others.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of the <span class="docEmphasis">ls</span>
      command indicates that all users have execute permission on the
      <span class="docEmphasis">myscript</span> file. The asterisk at the end of
      the filename also indicates that this is an executable program.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<p class="docText"><b>A Scripting Session.</b> In the following example, the
user will create a script in the editor. After the user saves the file, the
execute permissions are turned on, and the script is executed. If there are
errors in the program, the shell will respond immediately.</p>
<h5 id="ch12list02" class="docExampleTitle">Example 12.2 </h5>
<pre>(The Script)
1   #!/bin/bash
2   # <span class="docEmphasis">This is the first Bash shell program of the day.</span>
    # <span class="docEmphasis">Scriptname: greetings</span>
    # <span class="docEmphasis">Written by:  Barbara Bashful</span>
3   echo &quot;Hello $LOGNAME, it's nice talking to you.&quot;
4   echo &quot;Your present working directory is 'pwd'.&quot;
    echo &quot;You are working on a machine called 'uname -n'.&quot;
    echo &quot;Here is a list of your files.&quot;
5   ls    <span class="docEmphasis"># List files in the present working directory</span>
6   echo  &quot;Bye for now $LOGNAME. The time is 'date +%T'!&quot;

(The Command Line)
    $ <span class="docEmphStrong">greetings</span>     <span class="docEmphasis"># Don't forget to turn turn on x permission!</span>
    <span class="docEmphasis">bash: ./greetings: Permission denied.</span>

    $ <span class="docEmphStrong">chmod +x greetings</span>
    $ <span class="docEmphStrong">greetings</span>  <span class="docEmphasis">or</span>  <span class="docEmphStrong">./greetings</span>
3   <span class="docEmphasis">Hello barbara, it's nice talking to you.</span>
4   <span class="docEmphasis">Your present working directory is /home/lion/barbara/prog</span>
    <span class="docEmphasis">You are working on a machine called lion.</span>
    <span class="docEmphasis">Here is a list of your files.</span>

5   <span class="docEmphasis">Afile        cplus    letter     prac</span>
    <span class="docEmphasis">Answerbook   cprog    library    prac1</span>
    <span class="docEmphasis">bourne       joke     notes      perl5</span>
6   <span class="docEmphasis">Bye for now barbara. The time is 18:05:07!</span></pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The first line of the script, <span class="docEmphasis">
      #!/bin/bash,</span> lets the kernel know what interpreter will execute the
      lines in this program, in this case the <span class="docEmphasis">bash</span>
      (Bourne Again shell) interpreter.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The comments are nonexecutable lines preceded by a
      pound sign. They can be on a line by themselves or appended to a line
      after a command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After variable substitution is performed by the shell,
      the <span class="docEmphasis">echo</span> command displays the line on the
      screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After command substitution is performed by the shell,
      the <span class="docEmphasis">echo</span> command displays the line on the
      screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">ls</span> command is
      executed. The comment will be ignored by the shell.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">echo</span> command
      displays the string enclosed within double quotes. Variables and command
      substitution (backquotes) are expanded when placed within double quotes.
      In this case, the quotes were really not necessary.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch12lev1sec2">12.2 Reading User Input</h3>
<h4 class="docSection2Title" id="ch12lev2sec2">12.2.1 Variables (Review)</h4>
<p class="docText">In the last chapter we talked about declaring and unsetting
variables. Variables are set local to the current shell or as environment
variables. Unless your shell script will invoke another script, variables are
normally set as local variables within a script. (See &quot;<a class="docLink" href="_chapter 7.htm#ch07lev1sec1">Variables</a>&quot;.)</p>
<p class="docText">To extract the value from a variable, precede the variable
with a dollar sign. You can enclose the variable within double quotes and the
dollar sign will be interpreted by the shell for variable expansion. Variable
expansion is not performed if the variable is enclosed in single quotes.</p>
<h5 id="ch12list03" class="docExampleTitle">Example 12.3 </h5>
<pre>1   name=&quot;John Doe&quot; <span class="docEmphasis">or</span> declare name=&quot;John Doe&quot;   <span class="docEmphasis"># local variable</span>
2   export NAME=&quot;John Doe&quot;    <span class="docEmphasis"># global variable</span>
3   echo &quot;$name&quot; &quot;$NAME&quot;      <span class="docEmphasis"># extract the value</span>
</pre>
<h4 class="docSection2Title" id="ch12lev2sec3">12.2.2 The <span class="docEmphasis">read</span>
Command</h4>
<p class="docText">The <span class="docEmphasis">read</span> command is a
built-in command used to read input from the terminal or from a file (see
<a class="docLink" href="#ch12table01">Table 12.1</a>). The
<span class="docEmphasis">read</span> command takes a line of input until a
newline is reached. The newline at the end of a line will be translated into a
null byte when read. If no names are supplied, the line read is assigned to the
special built-in variable, <span class="docEmphasis">REPLY.</span> You can also
use the <span class="docEmphasis">read</span> command to cause a program to stop
until the user hits Enter. To see how the <span class="docEmphasis">read</span>
command is most effectively used for reading lines of input from a file, see &quot;<a class="docLink" href="#ch12lev1sec6">Looping
Commands</a>&quot;. The <span class="docEmphasis">–r</span> option to
<span class="docEmphasis">read</span> causes the backslash/newline pair to be
ignored; the backslash is treated as part of the line. The
<span class="docEmphasis">read</span> command has four options to control its
behavior: <span class="docEmphasis">–a, –e, –p,</span> and
<span class="docEmphasis">–r.</span><span id="ENB12-2"><a class="docLink" href="#EN12-2"><sup>[2]</sup></a></span></p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch12table01" class="docTableTitle">Table 12.1. The <span class="docEmphasis">read</span>
  Command</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Format</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">read answer</span>
    </td>
    <td class="docTableCell" vAlign="top">Reads a line from standard input and
    assigns it to the variable <span class="docEmphasis">answer.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">read first
    last</span> </td>
    <td class="docTableCell" vAlign="top">Reads a line from standard input to
    the first whitespace or newline, putting the first word typed into the
    variable <span class="docEmphasis">first</span> and the rest of the line
    into the variable <span class="docEmphasis">last.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">read</span>
    </td>
    <td class="docTableCell" vAlign="top">Reads a line from standard input and
    assigns it to the built-in variable, <span class="docEmphasis">REPLY.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">read –a
    arrayname</span> </td>
    <td class="docTableCell" vAlign="top">Reads a list of words into an array
    called <span class="docEmphasis">arrayname.</span><sup class="docFootnote"><a class="docLink" href="#ch12tabfn03">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">read –e</span>
    </td>
    <td class="docTableCell" vAlign="top">Used in interactive shells with
    command line editing in effect; e.g., if editor is <span class="docEmphasis">
    vi,</span> <span class="docEmphasis">vi</span> commands can be used on the
    input line.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn03">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">read –p
    prompt</span> </td>
    <td class="docTableCell" vAlign="top">Prints a prompt, waits for input, and
    stores input in <span class="docEmphasis">REPLY</span> variable.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn03">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">read –r line</span>
    </td>
    <td class="docTableCell" vAlign="top">Allows the input to contain a
    backslash.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn03">[a]</a></sup></td>
  </tr>
</table>

<blockquote>
  <p class="docFootnote"><sup><a name="ch12tabfn03">[a]</a></sup> Not
  implemented on versions of <span class="docEmphasis">bash</span> prior to 2.0.</p>
</blockquote>
<h5 id="ch12list04" class="docExampleTitle">Example 12.4 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis">#</span> <span class="docEmphasis">Scriptname: nosy</span>
    echo -e &quot;Are you happy? \c&quot;
1   <span class="docEmphStrong">read answer</span>
    echo &quot;$answer is the right response.&quot;
    echo -e &quot;What is your full name? \c&quot;
2   <span class="docEmphStrong">read first middle last</span>
    echo &quot;Hello  $first&quot;

    echo –n &quot;Where do you work? &quot;
3   <span class="docEmphStrong">read</span>
4   echo I guess $REPLY keeps you busy!
-----------------------------------------------------<sup class="docFootnote"><a class="docLink" href="#ch12fn04">[a]</a></sup>
5   <span class="docEmphStrong">read -p</span> &quot;Enter your job title: &quot;
6   echo &quot;I thought you might be an $REPLY.&quot;

7   echo -n &quot;Who are your best friends? &quot;
8   <span class="docEmphStrong">read -a friends</span>
9   echo &quot;Say hi to <span class="docEmphStrong">${friends[2]}.&quot;</span>
-------------------------------------------------------
(The Output)
    $ <span class="docEmphStrong">nosy</span>
    <span class="docEmphasis">Are you happy?</span> <span class="docEmphBoldItalic">Yes</span>
1   <span class="docEmphasis">Yes is the right response.</span>
2   <span class="docEmphasis">What is your full name?</span> <span class="docEmphBoldItalic">Jon Jake Jones</span>
    <span class="docEmphasis">Hello Jon</span>
3   <span class="docEmphasis">Where do you work?</span> <span class="docEmphBoldItalic">the</span> <span class="docEmphBoldItalic">Chico Nut Factory</span>
4   <span class="docEmphasis">I guess the Chico Nut Factory keeps you busy!</span>
5   <span class="docEmphasis">Enter your job title:</span> <span class="docEmphBoldItalic">Accountant</span>
6   <span class="docEmphasis">I thought you might be an Accountant.</span>
7,8 <span class="docEmphasis">Who are your best friends?</span>  <span class="docEmphBoldItalic">Melvin Tim Ernesto</span>
9   <span class="docEmphasis">Say hi to Ernesto.</span>
</pre>
<blockquote>
  <p class="docFootnote"><sup><a name="ch12fn04">[a]</a></sup> The commands
  listed below this line are not implemented on versions of
  <span class="docEmphasis">bash</span> prior to 2.x.</p>
</blockquote>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">read</span> command
      accepts a line of user input and assigns the input to the variable
      <span class="docEmphasis">answer.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">read</span> command
      accepts input from the user and assigns the first word of input to the
      variable <span class="docEmphasis">first,</span> the second word of input
      to the variable <span class="docEmphasis">middle,</span> and all the rest
      of the words up to the end of the line to the variable
      <span class="docEmphasis">last.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A line is read from standard input and stored in the
      built-in <span class="docEmphasis">REPLY</span> variable.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of the <span class="docEmphasis">REPLY</span>
      variable is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">With the <span class="docEmphasis">–p</span> option,
      the <span class="docEmphasis">read</span> command produces a prompt,
      <span class="docEmphasis">Enter your job title:</span> and stores the line
      of input in the special built-in <span class="docEmphasis">REPLY</span>
      variable.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of the <span class="docEmphasis">REPLY</span>
      variable is displayed in the string.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked to enter input.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">With the <span class="docEmphasis">–a</span> option,
      the <span class="docEmphasis">read</span> command takes input as an array
      of words. The array is called <span class="docEmphasis">friends.</span>
      The elements read into the array are <span class="docEmphasis">Melvin,
      Tim,</span> and <span class="docEmphasis">Ernesto.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The third element of the <span class="docEmphasis">
      friends</span> array, <span class="docEmphasis">Ernesto,</span> is
      printed. Array indices start at 0.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list05" class="docExampleTitle">Example 12.5 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: printer_check</span>
    <span class="docEmphasis"># Script to clear a hung-up printer</span>
1   if [ $LOGNAME != root ]
    then
       echo &quot;Must have root privileges to run this program&quot;
       exit 1
    fi
2   cat &lt;&lt; EOF
    Warning: All jobs in the printer queue will be removed.
    Please turn off the printer now. Press return when you
    are ready to continue. Otherwise press Control C.
    EOF
3   <span class="docEmphStrong">read JUNK</span>      <span class="docEmphasis"># Wait until the user turns off the printer</span>
    echo
4   /etc/rc.d/init.d/lpd stop       <span class="docEmphasis"># Stop the printer</span>
5   echo -e &quot;\nPlease turn the printer on now.&quot;
6   echo &quot;Press Enter to continue&quot;
7   <span class="docEmphStrong">read JUNK</span>                <span class="docEmphasis"># Stall until the user turns the printer</span>
                             <span class="docEmphasis"># back on</span>
    echo                     <span class="docEmphasis"># A blank line is printed</span>
8   /etc/rc.d/init.d/lpd start     <span class="docEmphasis"># Start the printer</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Checks to see if user is <span class="docEmphasis">
      root.</span> If not, sends an error and exits.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Creates a <span class="docEmphasis">here document.</span>
      Warning message is displayed on the screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">read</span> command waits
      for user input. When the user presses Enter, the variable
      <span class="docEmphasis">JUNK</span> accepts whatever is typed. The
      variable is not used for anything. The <span class="docEmphasis">read</span>
      in this case is used to wait until the user turns off the printer, comes
      back, and presses Enter.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">lpd</span> program stops
      the printer daemon.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Now it's time to turn the printer back on!</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked to press Enter when ready.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Whatever the user types is read into the variable
      <span class="docEmphasis">JUNK,</span> and when Enter is pressed, the
      program will resume execution.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">lpd</span> program starts
      the print daemons.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch12lev1sec3">12.3 Arithmetic</h3>
<h4 class="docSection2Title" id="ch12lev2sec4">12.3.1 Integers (<span class="docEmphasis">declare</span>
and <span class="docEmphasis">let</span> Commands)</h4>
<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
declare</span> Command.</span> Variables can be declared as integers with the
<span class="docEmphasis">declare –i</span> command. If you attempt to assign
any string value, <span class="docEmphasis">bash</span> assigns
<span class="docEmphasis">0</span> to the variable. Arithmetic can be performed
on variables that have been declared as integers. (If the variable has not been
declared as an integer, the built-in <span class="docEmphasis">let</span>
command allows arithmetic operations. See &quot;The let Command&quot; on page 732.) If you
attempt to assign a floating point number, <span class="docEmphasis">bash</span>
reports a syntax error<span class="docEmphasis">.</span> Numbers can also be
represented in different bases such as <span class="docEmphasis">binary, octal,</span>
and <span class="docEmphasis">hex.</span></p>
<h5 id="ch12list06" class="docExampleTitle">Example 12.6 </h5>
<pre>1   $ <span class="docEmphStrong">declare –i num</span>

2   $ <span class="docEmphStrong">num=hello</span>
    $ echo $num
    <span class="docEmphasis">0</span>

3   $ <span class="docEmphStrong">num=5 + 5</span>
    <span class="docEmphasis">bash: +: command not found</span>

4   $ <span class="docEmphStrong">num=5+5</span>
    $ echo $num
    <span class="docEmphasis">10</span>

5   $ <span class="docEmphStrong">num=4*6</span>
    $ echo $num
    <span class="docEmphasis">24</span>

6   $ <span class="docEmphStrong">num=&quot;4 * 6&quot;</span>
    $ echo $num
    <span class="docEmphasis">24</span>

7   $ <span class="docEmphStrong">num=6.5</span>
    <span class="docEmphasis">bash:</span> <span class="docEmphasis">num: 6.5: sytax error in expression (remainder of</span>
     <span class="docEmphasis">expression is &quot;.5&quot;)</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">declare</span> command
      with the <span class="docEmphasis">–i</span> option creates an integer
      variable <span class="docEmphasis">num.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Trying to assign the string <span class="docEmphasis">
      hello</span> to the integer variable <span class="docEmphasis">num</span>
      causes the string to be stored as zero.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The whitespace must be quoted or removed unless the
      <span class="docEmphasis">let</span> command is used.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The whitespace is removed and arithmetic is performed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Multiplication is performed and the result assigned to
      <span class="docEmphasis">num.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The whitespace is quoted so that the multiplication can
      be performed and to keep the shell from expanding the wildcard (*).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Because the variable is set to integer, adding a
      fractional part causes a <span class="docEmphasis">bash</span> syntax
      error.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Listing Integers.</b> The <span class="docEmphasis">
declare</span> command with only the <span class="docEmphasis">–i</span>
argument will list all preset integers and their values, as shown in the
following display.</p>
<pre>$ <span class="docEmphStrong">declare –i</span>
<span class="docEmphasis">declare -ir EUID=&quot;15&quot;          # effective user id</span>
<span class="docEmphasis">declare -ir PPID=&quot;235&quot;         # parent process id</span>
<span class="docEmphasis">declare -ir UID=&quot;15&quot;           # user id</span>
</pre>
<p class="docText"><b>Representing and Using Different Bases.</b> Numbers can be
represented in decimal (base 10, the default), octal (base 8), hexadecimal (base
16), and a range from base 2 to 36.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>variable=base#number-in-that-base
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list07" class="docExampleTitle">Example 12.7 </h5>
<pre><span class="docEmphStrong">n=2#101</span>   <span class="docEmphasis">Base is 2; number 101 is in base 2</span>
</pre>
<h5 id="ch12list08" class="docExampleTitle">Example 12.8 </h5>
<pre>(The Command Line)
1  $ <span class="docEmphStrong">declare -i x=017</span>
   $ echo $x
   <span class="docEmphasis">15</span>
2  $ <span class="docEmphStrong">x=2#101</span>
   $ echo $x
   <span class="docEmphasis">5</span>
3  $ <span class="docEmphStrong">x=8#17</span>
   $ echo $x
   <span class="docEmphasis">15</span>
4  $ <span class="docEmphStrong">x=16#b</span>
   $ echo $x
   <span class="docEmphasis">11</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">declare</span> function
      is used to assign an integer variable <span class="docEmphasis">x</span>
      the octal value <span class="docEmphasis">017.</span> Octal numbers must
      start with a leading zero. <span class="docEmphasis">15,</span> the
      decimal value of <span class="docEmphasis">017,</span> is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable, <span class="docEmphasis">x,</span> is
      assigned the value of <span class="docEmphasis">101</span> (binary).
      <span class="docEmphasis">2</span> represents the base, separated by a #,
      and the number in that base, <span class="docEmphasis">101.</span> The
      value of <span class="docEmphasis">x</span> is printed as decimal,
      <span class="docEmphasis">5.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">x</span> is
      assigned the value of <span class="docEmphasis">17</span> (octal). The
      value of <span class="docEmphasis">x</span> is printed as decimal,
      <span class="docEmphasis">15.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">x</span> is
      assigned the value of <span class="docEmphasis">b</span> (hexadecimal).
      The value of <span class="docEmphasis">x</span> is decimal
      <span class="docEmphasis">11.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText">The <span class="docEmphasis">let</span> Command. The
<span class="docEmphasis">let</span> command is a <span class="docEmphasis">bash</span>
shell built-in command that is used to perform integer arithmetic and numeric
expression testing. To see what <span class="docEmphasis">let</span> operators
your version of <span class="docEmphasis">bash</span> supports, type at the
prompt:</p>
<pre>help let
</pre>
<p class="docText">A list of the operators is also found in
<a class="docLink" href="#ch12table04">Table
12.4</a>.</p>
<h5 id="ch12list09" class="docExampleTitle">Example 12.9 </h5>
<pre>1   $ <span class="docEmphStrong">i=5</span>  <span class="docEmphasis">or</span> <span class="docEmphStrong">let i=5</span>

2   $ <span class="docEmphStrong">let i=i+1</span>
    $ <span class="docEmphStrong">echo $i</span>
    <span class="docEmphasis">6</span>

3   $ <span class="docEmphStrong">let &quot;i = i + 2&quot;</span>
    $ <span class="docEmphStrong">echo $i</span>
    <span class="docEmphasis">8</span>

4   $ <span class="docEmphStrong">let &quot;i+=1&quot;</span>
    $ <span class="docEmphStrong">echo $i</span>
    <span class="docEmphasis">9</span>

5   $ <span class="docEmphStrong">i=3</span>

6   $ <span class="docEmphStrong">(( i+=4))</span>
    $ <span class="docEmphStrong">echo $i</span>
    <span class="docEmphasis">7</span>

7   $ <span class="docEmphStrong">(( i=i-2 ))</span>
    $ <span class="docEmphStrong">echo $i</span>
    <span class="docEmphasis">5</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">i</span> is
      assigned the value <span class="docEmphasis">5.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">let</span> command will
      add <span class="docEmphasis">1</span> to the value of
      <span class="docEmphasis">i.</span> The <span class="docEmphasis">$</span>
      (dollar sign) is not required for variable substitution when performing
      arithmetic.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The quotes are needed if the arguments contain
      whitespace.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The shortcut operator, <span class="docEmphasis">+=,</span>
      is used to add <span class="docEmphasis">1</span> to the value of
      <span class="docEmphasis">i.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">i</span> is
      assigned the value 5.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The double parentheses can be used to replace
      <span class="docEmphasis">let.</span><sup class="docFootnote"><a class="docLink" href="#ch12fn05">[a]</a></sup></p>
      <p class="docList">4 is added and assigned to <span class="docEmphasis">i.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">2 is subtracted from <span class="docEmphasis">i.</span>
      We could have also written <span class="docEmphasis">i–=2</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<blockquote>
  <p class="docFootnote"><sup><a name="ch12fn05">[a]</a></sup> Double
  parentheses <span class="docEmphasis">(( ))</span> are used to replace
  <span class="docEmphasis">let</span> on versions of <span class="docEmphasis">
  bash</span> 2.x.</p>
</blockquote>
<h4 class="docSection2Title" id="ch12lev2sec5">12.3.2 Floating Point Arithmetic</h4>
<p class="docText"><span class="docEmphasis">Bash</span> supports only integer
arithmetic, but the <span class="docEmphasis">bc,</span>
<span class="docEmphasis">awk,</span> and <span class="docEmphasis">nawk</span>
utilities are useful if you need to perform more complex calculations.</p>
<h5 id="ch12list10" class="docExampleTitle">Example 12.10 </h5>
<pre>(The Command Line)
1   $ <span class="docEmphStrong">n='echo &quot;scale=3; 13 / 2&quot; | bc'</span>
    $ <span class="docEmphStrong">echo $n</span>
    <span class="docEmphasis">6.500</span>

2   <span class="docEmphStrong">product='gawk -v x=2.45 -v y=3.123 'BEGIN{printf &quot;%.2f\n&quot;,x*y}''</span>
    $ <span class="docEmphStrong">echo $product</span>
    <span class="docEmphasis">7.65</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of the <span class="docEmphasis">echo</span>
      command is piped to the <span class="docEmphasis">bc</span> program. The
      scale is set to <span class="docEmphasis">3,</span> which is the number of
      significant digits to the right of the decimal point that will be printed.
      The calculation is to divide <span class="docEmphasis">13</span> by
      <span class="docEmphasis">2.</span> The entire pipeline is enclosed in
      backquotes. Command substitution will be performed and the output assigned
      to the variable <span class="docEmphasis">n.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">gawk</span> program gets
      its values from the argument list passed in at the command line,
      <span class="docEmphasis">x=2.45</span> <span class="docEmphasis">y=3.123.</span>
      After the numbers are multiplied, the <span class="docEmphasis">printf</span>
      function formats and prints the result with a precision of two places to
      the right of the decimal point. The output is assigned to the variable
      <span class="docEmphasis">product.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>


<h3 class="docSection1Title" id="ch12lev1sec4">12.4 Positional Parameters and Command Line
Arguments</h3>
<h4 class="docSection2Title" id="ch12lev2sec6">12.4.1 Positional Parameters</h4>
<p class="docText">Information can be passed into a script via the command line.
Each word (separated by whitespace) following the scriptname is called an
argument.</p>
<p class="docText">Command line arguments can be referenced in scripts with
positional parameters; for example, <span class="docEmphasis">$1</span> for the
first argument, <span class="docEmphasis">$2</span> for the second argument,
<span class="docEmphasis">$3</span> for the third argument, and so on. After
<span class="docEmphasis">$9,</span> curly braces are used to keep the number as
one number. For example, positional parameter <span class="docEmphasis">10</span>
is referenced as <span class="docEmphasis">${10}.</span> The
<span class="docEmphasis">$#</span> variable is used to test for the number of
parameters, and <span class="docEmphasis">$*</span> is used to display all of
them. Positional parameters can be set or reset with the
<span class="docEmphasis">set</span> command. When the <span class="docEmphasis">
set</span> command is used, any positional parameters previously set are cleared
out. See <a class="docLink" href="#ch12table02">Table 12.2</a>.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch12table02" class="docTableTitle">Table 12.2. Positional Parameters</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Positional Parameter</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">What
    It References</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$0</span>
    </td>
    <td class="docTableCell" vAlign="top">References the name of the script.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$#</span>
    </td>
    <td class="docTableCell" vAlign="top">Holds the value of the number of
    positional parameters. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$*</span>
    </td>
    <td class="docTableCell" vAlign="top">Lists all of the positional
    parameters. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$@</span>
    </td>
    <td class="docTableCell" vAlign="top">Means the same as
    <span class="docEmphasis">$*,</span> except when enclosed in double quotes.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&quot;$*&quot;</span>
    </td>
    <td class="docTableCell" vAlign="top">Expands to a single argument (e.g., &quot;<span class="docEmphasis">$1
    $2 $3</span>&quot;). </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">&quot;$@&quot;</span>
    </td>
    <td class="docTableCell" vAlign="top">Expands to separate arguments (e.g., &quot;<span class="docEmphasis">$1</span>&quot;
    &quot;<span class="docEmphasis">$2</span>&quot; &quot;<span class="docEmphasis">$3</span>&quot;).
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">$1 … ${10}</span>
    </td>
    <td class="docTableCell" vAlign="top">References individual positional
    parameters. </td>
  </tr>
</table>

<h5 id="ch12list11" class="docExampleTitle">Example 12.11 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis">#</span> <span class="docEmphasis">Scriptname: greetings2</span>
    echo &quot;This script is called $0.&quot;
1   <span class="docEmphStrong">echo  &quot;$0  $1 and $2&quot;</span>
    echo &quot;The number of positional parameters is $#&quot;
    -----------------------------------------------------------
(The Command Line)
    $ <span class="docEmphStrong">chmod +x greetings2</span>
2   $ <span class="docEmphStrong">greetings2</span>
    <span class="docEmphasis">This script is called  greetings2.</span>
    <span class="docEmphasis">greetings  and</span>
    <span class="docEmphasis">The number of positional paramters is</span>

3   $ <span class="docEmphStrong">greetings2 Tommy</span>
    <span class="docEmphasis">This script is called greetings2.</span>
    <span class="docEmphasis">greetings Tommy and</span>
    <span class="docEmphasis">The number of positional parameters is 1</span>

4   $ <span class="docEmphStrong">greetings2 Tommy Kimberly</span>
    <span class="docEmphasis">This script is called greetings2.</span>
    <span class="docEmphasis">greetings Tommy and Kimberly</span>
    <span class="docEmphasis">The number of positional parameters is 2</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">In the script <span class="docEmphasis">greetings2,</span>
      positional parameter <span class="docEmphasis">$0</span> references the
      scriptname, <span class="docEmphasis">$1</span> the first command line
      agreement, and <span class="docEmphasis">$2</span> the second command line
      agreement.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">greetings2</span> script
      is executed without any arguments passed. The output illustrates that the
      script is called <span class="docEmphasis">greetings2</span> (<span class="docEmphasis">$0</span>
      in the script) and that <span class="docEmphasis">$1</span> and
      <span class="docEmphasis">$2</span> were never assigned anything;
      therefore, their values are null and nothing is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This time, one argument is passed,
      <span class="docEmphasis">Tommy.</span> <span class="docEmphasis">Tommy</span>
      is assigned to positional parameter <span class="docEmphasis">1.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Two arguments are entered, <span class="docEmphasis">
      Tommy</span> and <span class="docEmphasis">Kimberly. Tommy</span> is
      assigned to <span class="docEmphasis">$1</span> and
      <span class="docEmphasis">Kimberly</span> is assigned to
      <span class="docEmphasis">$2.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec7">12.4.2 The <span class="docEmphasis">set</span>
Command and Positional Parameters</h4>
<p class="docText">The <span class="docEmphasis">set</span> command with
arguments resets the positional parameters.<span id="ENB12-3"><a class="docLink" href="#EN12-3"><sup>[3]</sup></a></span>
Once reset, the old parameter list is lost. To unset all of the positional
parameters, use <span class="docEmphasis">set – –.</span>
<span class="docEmphasis">$0</span> is always the name of the script.</p>
<h5 id="ch12list12" class="docExampleTitle">Example 12.12 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: args</span>
    <span class="docEmphasis"># Script to test command line arguments</span>
1   echo The name of this script is <span class="docEmphStrong">$0.</span>
2   echo The arguments are <span class="docEmphStrong">$*.</span>
3   echo The first argument is <span class="docEmphStrong">$1.</span>
4   echo The second argument is <span class="docEmphStrong">$2.</span>
5   echo The number of arguments is <span class="docEmphStrong">$#.</span>
6   <span class="docEmphStrong">oldargs=$*</span>
7   <span class="docEmphStrong">set Jake Nicky Scott</span>    <span class="docEmphasis"># Reset the positional parameters</span>
8   echo All the positional parameters are <span class="docEmphStrong">$*.</span>
9   echo The number of postional parameters is <span class="docEmphStrong">$#.</span>
10  echo &quot;Good–bye for now, <span class="docEmphStrong">$1.</span>&quot;
11  <span class="docEmphStrong">set $(date)</span>             <span class="docEmphasis"># Reset the positional parameters</span>
12  <span class="docEmphStrong">echo The date is $2 $3, $6.</span>
13  echo &quot;The value of \$oldargs is $oldargs.&quot;
14  <span class="docEmphStrong">set $oldargs</span>
15  echo $1 $2 $3

(The Output)
    $ <span class="docEmphStrong">args a b c d</span>
1   <span class="docEmphasis">The name of this script is</span> <span class="docEmphBoldItalic">args</span><span class="docEmphasis">.</span>
2   <span class="docEmphasis">The arguments are</span> <span class="docEmphBoldItalic">a b c d.</span>
3   <span class="docEmphasis">The first argument is</span> <span class="docEmphBoldItalic">a.</span>
4   <span class="docEmphasis">The second argument is</span> <span class="docEmphBoldItalic">b.</span>
5   <span class="docEmphasis">The number of arguments is</span> <span class="docEmphBoldItalic">4.</span>
8   <span class="docEmphasis">All the positional parameters are</span> <span class="docEmphBoldItalic">Jake Nicky Scott.</span>
9   <span class="docEmphasis">The number of positional parameters is</span> <span class="docEmphBoldItalic">3.</span>
10  <span class="docEmphasis">Good-bye for now,</span> <span class="docEmphBoldItalic">Jake.</span>
12  <span class="docEmphasis">The date is Mar 25, 2001.</span>
13  <span class="docEmphasis">The value of $oldargs is a b c d.</span>
15  <span class="docEmphasis">Wed Mar 25</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The name of the script is stored in the
      <span class="docEmphasis">$0</span> variable.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$*</span> represents all of
      the positional parameters.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$1</span> represents the
      first positional parameter (command line argument).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$2</span> represents the
      second positional parameter.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$#</span> is the total number
      of positional parameters (command line arguments).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All positional parameters are saved in a variable
      called <span class="docEmphasis">oldargs.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command allows
      you to reset the positional parameters, clearing out the old list. Now,
      <span class="docEmphasis">$1</span> is <span class="docEmphasis">Jake,</span>
      <span class="docEmphasis">$2</span> is <span class="docEmphasis">Nicky,</span>
      and <span class="docEmphasis">$3</span> is <span class="docEmphasis">
      Scott.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$*</span> represents all of
      the parameters, <span class="docEmphasis">Jake, Nicky,</span> and
      <span class="docEmphasis">Scott.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$#</span> represents the
      number of parameters, <span class="docEmphasis">3.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$1</span> is
      <span class="docEmphasis">Jake.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After command substitution is performed, i.e.,
      <span class="docEmphasis">date</span> is executed, the positional
      parameters are reset to the output of the <span class="docEmphasis">date</span>
      command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The new values of <span class="docEmphasis">$2, $3,</span>
      and <span class="docEmphasis">$6</span> are displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The values saved in <span class="docEmphasis">oldargs</span>
      are printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command
      creates positional parameters from the values stored in
      <span class="docEmphasis">oldargs.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The first three positional parameters are displayed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list13" class="docExampleTitle">Example 12.13 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: checker</span>
    <span class="docEmphasis"># Script to demonstrate the use of special variable</span>
    <span class="docEmphasis"># modifiers and arguments</span>
1   <span class="docEmphStrong">name=${1:?&quot;requires an argument&quot; }</span>
    echo Hello $name

(The Command Line)
2   $ <span class="docEmphStrong">checker</span>
    <span class="docEmphasis">checker: 1: requires an argument</span>
3   $ <span class="docEmphStrong">checker Sue</span>
    <span class="docEmphasis">Hello Sue</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The special variable modifier <span class="docEmphasis">
      :?</span> will check whether <span class="docEmphasis">$1</span> has a
      value. If not, the script exits and the message is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program is executed without an argument.
      <span class="docEmphasis">$1</span> is not assigned a value; an error is
      displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">checker</span> program is
      given a command line argument, <span class="docEmphasis">Sue.</span> In
      the script, <span class="docEmphasis">$1</span> is assigned
      <span class="docEmphasis">Sue.</span> The program continues.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">How <span class="docEmphasis">$*</span>
and <span class="docEmphasis">$@</span> Differ.</span> The
<span class="docEmphasis">$*</span> and <span class="docEmphasis">$@</span>
differ only when enclosed in double quotes. When <span class="docEmphasis">$*</span>
is enclosed within double quotes, the parameter list becomes a single string.
When <span class="docEmphasis">$@</span> is enclosed within double quotes, each
of the parameters is quoted; that is, each word is treated as a separate string.</p>
<h5 id="ch12list14" class="docExampleTitle">Example 12.14 </h5>
<pre>1   $ <span class="docEmphStrong">set 'apple pie' pears peaches</span>
2   $ <span class="docEmphStrong">for i in $*</span>
    &gt; <span class="docEmphStrong">do</span>
    &gt; <span class="docEmphStrong">echo $i</span>
    &gt; <span class="docEmphStrong">done</span>
    <span class="docEmphasis">apple</span>
    <span class="docEmphasis">pie</span>
    <span class="docEmphasis">pears</span>
    <span class="docEmphasis">peaches</span>

3   $ <span class="docEmphStrong">set 'apple pie' pears peaches</span>
4   $ <span class="docEmphStrong">for i in &quot;$*&quot;</span>
    &gt; <span class="docEmphStrong">do</span>
    &gt; <span class="docEmphStrong">echo $i</span>
    &gt; <span class="docEmphStrong">done</span>
    <span class="docEmphasis">apple pie pears peaches</span>

5   $ <span class="docEmphStrong">set 'apple pie' pears peaches</span>
6   $ <span class="docEmphStrong">for i in $@</span>
    &gt; <span class="docEmphStrong">do</span>
    &gt; <span class="docEmphStrong">echo $i</span>
    &gt; <span class="docEmphStrong">done</span>
    <span class="docEmphasis">apple</span>
    <span class="docEmphasis">pie</span>
    <span class="docEmphasis">pears</span>
    <span class="docEmphasis">peaches</span>

7   $ <span class="docEmphStrong">set 'apple pie' pears peaches</span>
8   $ <span class="docEmphStrong">for i in &quot;$@&quot;</span>         # <span class="docEmphasis">At last!!</span>
    &gt; <span class="docEmphStrong">do</span>
    &gt; <span class="docEmphStrong">echo $i</span>
    &gt; <span class="docEmphStrong">done</span>
    <span class="docEmphasis">apple pie</span>
    <span class="docEmphasis">pears</span>
    <span class="docEmphasis">peaches</span></pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The positional parameters are set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When <span class="docEmphasis">$*</span> is expanded,
      the quotes surrounding <span class="docEmphasis">apple pie</span> are
      stripped; <span class="docEmphasis">apple</span> and
      <span class="docEmphasis">pie</span> become two separate words. The
      <span class="docEmphasis">for</span> loop assigns each of the words, in
      turn, to the variable <span class="docEmphasis">i,</span> and then prints
      the value of <span class="docEmphasis">i.</span> Each time through the
      loop, the word on the left is shifted off, and the next word is assigned
      to the variable <span class="docEmphasis">i.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The positional parameters are set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">By enclosing <span class="docEmphasis">$*</span> in
      double quotes, the entire parameter list becomes one string,
      <span class="docEmphasis">apple pie pears peaches.</span> The entire list
      is assigned to <span class="docEmphasis">i</span> as a single word. The
      loop makes one iteration.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The positional parameters are set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Unquoted, <span class="docEmphasis">$@</span> and
      <span class="docEmphasis">$*</span> behave the same way (see entry 2 of
      this explanation).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The positional parameters are set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">By surrounding <span class="docEmphasis">$@</span> with
      double quotes, each of the positional parameters is treated as a quoted
      string. The list would be <span class="docEmphasis">apple pie,</span>
      <span class="docEmphasis">pears,</span> and <span class="docEmphasis">
      peaches.</span> The desired result is finally achieved.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch12lev1sec5">12.5 Conditional Constructs and Flow Control</h3>
<h4 class="docSection2Title" id="ch12lev2sec8">12.5.1 Exit Status</h4>
<p class="docText">Conditional commands allow you to perform some task(s) based
on whether a condition succeeds or fails. The <span class="docEmphasis">if</span>
command is the simplest form of decision-making; the <span class="docEmphasis">
if/else</span> commands allow a two-way decision; and the
<span class="docEmphasis">if/elif/else</span> commands allow a multiway
decision.</p>
<p class="docText"><span class="docEmphasis">Bash</span> allows you to test two
types of conditions: the success or failure of commands or whether an expression
is true or false. In either case, the exit status is always used. An exit status
of zero indicates success or true, and an exit status that is nonzero indicates
failure or false. The <span class="docEmphasis">?</span> status variable
contains a numeric value representing the exit status. To refresh your memory on
how exit status works, look at <a class="docLink" href="#ch12list15">Example
12.15</a>.</p>
<h5 id="ch12list15" class="docExampleTitle">Example 12.15 </h5>
<pre>    (At the Command Line)

1   $ <span class="docEmphStrong">name=Tom</span>
2   $ <span class="docEmphStrong">grep &quot;$name&quot;  /etc/passwd</span>
    <span class="docEmphasis">Tom:8ZKX2F:5102:40:Tom Savage:/home/tom:/bin/sh</span>
3   $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">0             # Success!</span>
4   $ <span class="docEmphStrong">name=Fred</span>
5   $ <span class="docEmphStrong">grep &quot;$name&quot; /etc/passwd</span>
    $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">1              # Failure</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">name</span> is
      assigned the string <span class="docEmphasis">Tom.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">grep</span> command will
      search for string <span class="docEmphasis">Tom</span> in the
      <span class="docEmphasis">passwd</span> file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">?</span> variable
      contains the exit status of the last command executed; in this case, the
      exit status of <span class="docEmphasis">grep.</span> If
      <span class="docEmphasis">grep</span> is successful in finding the string
      <span class="docEmphasis">Tom,</span> it will return an exit status of
      zero. The <span class="docEmphasis">grep</span> command was successful.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">name</span> is
      assigned <span class="docEmphasis">Fred.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">grep</span> command
      searches for Fred in the <span class="docEmphasis">passwd</span> file and
      is unable to find him. The <span class="docEmphasis">?</span> variable has
      a value of 1, indicating that <span class="docEmphasis">grep</span>
      failed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec9">12.5.2 The Built-In <span class="docEmphasis">test</span>
Command</h4>
<p class="docText">To evaluate an expression, the built-in
<span class="docEmphasis">test</span> command is commonly used. This command is
also linked to the bracket symbol. Either the <span class="docEmphasis">test</span>
command itself can be used, or the expression can be enclosed in set of single
brackets. Shell metacharacter expansion is not performed on expressions
evaluated with the simple <span class="docEmphasis">test</span> command or when
square brackets are used. Since word splitting is performed on variables,
strings containing whitespace must be quoted. (See
<a class="docLink" href="#ch12list16">Example 12.16</a>.)</p>
<p class="docText">On versions of <span class="docEmphasis">bash</span> 2.x,
double brackets <span class="docEmphasis">[[ ]]</span> (the built-in compound
<span class="docEmphasis">test</span> command) can be used to evaluate
expressions. Word splitting is not performed on variables and pattern matching
is done, allowing the expansion of metacharacters. A literal string containing
whitespace must be quoted and if a string (with or without whitespace) is to be
evaluated as an exact string, rather than part of a pattern, it too must be
enclosed in quotes. The logical operators <span class="docEmphasis">&amp;&amp;</span> (<span class="docEmphasis">and</span>)
and || (<span class="docEmphasis">or</span>) replace the
<span class="docEmphasis">–a</span> and <span class="docEmphasis">–o</span>
operators used with the simple <span class="docEmphasis">test</span> command.
(See <a class="docLink" href="#ch12list17">Example 12.17</a>.)</p>
<p class="docText">Although the <span class="docEmphasis">test</span> command
can evaluate arithmetic expressions, you may prefer to use the
<span class="docEmphasis">let</span> command with its rich set of C-like
operators (<span class="docEmphasis">bash</span> 2.x). The
<span class="docEmphasis">let</span> command can be represented alternatively by
enclosing its expression in a set of double parentheses. (See
<a class="docLink" href="#ch12list18">Example 12.18</a>.)</p>
<p class="docText">Whether you are using the <span class="docEmphasis">test</span>
command, compound command, or <span class="docEmphasis">let</span> command, the
result of an expression is tested, with zero status indicating success and
nonzero status indicating failure. (See
<a class="docLink" href="_chapter 11.htm#ch11table10">Table
11.10</a>.)</p>
<p class="docText">The following examples illustrate how the exit status is
tested with the built-in <span class="docEmphasis">test</span> command and the
alternate form of <span class="docEmphasis">test,</span> a set of single
brackets <span class="docEmphasis">[ ];</span> the compound command, a set of
double brackets <span class="docEmphasis">[[ ]];</span> and the
<span class="docEmphasis">let</span> command, a set of double parentheses
<span class="docEmphasis">(( )).</span></p>
<h5 id="ch12list16" class="docExampleTitle">Example 12.16 </h5>
<pre>    (The <span class="docEmphasis">test</span> Command)
    (At the Command Line)

1   $ <span class="docEmphStrong">name=Tom</span>
2   $ <span class="docEmphStrong">grep &quot;$name&quot; /etc/passwd</span>
3   $ <span class="docEmphStrong">echo $?</span>
4   $ <span class="docEmphStrong">test $name != Tom</span>
5   $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">1</span>            <span class="docEmphasis"># Failure</span>
6   $ <span class="docEmphStrong">[ $name = Tom ]</span>
        # <span class="docEmphasis">Brackets replace the test command</span>
7   $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">0</span>
8   $ <span class="docEmphStrong">[ $name = [Tt]?? ]</span>
    $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">1</span>
9   $ <span class="docEmphStrong">x=5</span>
    $ <span class="docEmphStrong">y=20</span>
10  $ <span class="docEmphStrong">[ $x -gt $y ]</span>
    $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">1</span>
11  $ <span class="docEmphStrong">[ $x -le $y ]</span>
    $ <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">0</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">name</span> is
      assigned the string <span class="docEmphasis">Tom.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">grep</span> command will
      search for string <span class="docEmphasis">Tom</span> in the
      <span class="docEmphasis">passwd</span> file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">?</span> variable
      contains the exit status of the last command executed, in this case, the
      exit status of <span class="docEmphasis">grep.</span> If
      <span class="docEmphasis">grep</span> is successful in finding the string
      <span class="docEmphasis">Tom,</span> it will return an exit status of
      zero. The <span class="docEmphasis">grep</span> command was successful.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">test</span> command is
      used to evaluate strings, numbers, and perform file testing. Like all
      commands, it returns an exit status. If the exit status is zero, the
      expression is true; if the exit status is one, the expression evaluates to
      false. There <span class="docEmphasis">must</span> be spaces surrounding
      the equal sign. The value of <span class="docEmphasis">name</span> is
      tested to see if it is not equal to <span class="docEmphasis">Tom.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The test fails and returns an exit status of one.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The brackets are an alternate notation for the
      <span class="docEmphasis">test</span> command. There must be spaces after
      the first bracket. The expression is tested to see if
      <span class="docEmphasis">name</span> evaluates to the string
      <span class="docEmphasis">Tom.</span> <span class="docEmphasis">Bash</span>
      allows either a single or double equal sign to be used to test for
      equality of strings.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The exit status of the test is
      <span class="docEmphasis">0.</span> The test was successful because
      <span class="docEmphasis">$name</span> is equal to
      <span class="docEmphasis">Tom.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">test</span> command does
      not allow wildcard expansion. Because the question mark is treated as a
      literal character, the test fails. <span class="docEmphasis">Tom</span>
      and <span class="docEmphasis">[Tt]??</span> are not equal. The exit status
      is <span class="docEmphasis">1,</span> indicating that the text in line 8
      failed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">x</span> and
      <span class="docEmphasis">y</span> are given numeric values.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">test</span> command uses
      numeric relational operators to test its operands; in this example it
      tests if <span class="docEmphasis">$x</span> is greater than (<span class="docEmphasis">–gt</span>)
      <span class="docEmphasis">$y,</span> and returns <span class="docEmphasis">
      0</span> exit status if true, <span class="docEmphasis">1</span> if false.
      (See <a class="docLink" href="#ch12table03">Table 12.3</a>.)</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Tests if <span class="docEmphasis">$x</span> less than
      or equal to (<span class="docEmphasis">–le</span>)
      <span class="docEmphasis">$y,</span> returning <span class="docEmphasis">0</span>
      exit status if true,<span class="docEmphasis">1</span> if false.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list17" class="docExampleTitle">Example 12.17 </h5>
<pre>(The compound <span class="docEmphasis">test</span> command)(bash 2.x)
    $ name=Tom; friend=Joseph
1   $ <span class="docEmphStrong">[[ $name == [Tt]om ]]</span>      <span class="docEmphasis"># Wildcards allowed</span>
    $ echo $?
    <span class="docEmphasis">0</span>
2   $ <span class="docEmphStrong">[[ $name == [Tt]om &amp;&amp; $friend == &quot;Jose&quot; ]]</span>
    $ echo $?
    <span class="docEmphasis">1</span>
3   $ <span class="docEmphStrong">shopt -s extglob</span>           <span class="docEmphasis"># Turns on extended pattern matching</span>
4   $ <span class="docEmphStrong">name=Tommy</span>
5   $ <span class="docEmphStrong">[[ $name == [Tt]o+(m)y ]]</span>
    $ echo $?
    <span class="docEmphasis">0</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If using the compound <span class="docEmphasis">test</span>
      command, shell metacharacters can be used in string tests. In this
      example, the expression is tested for string equality where
      <span class="docEmphasis">name</span> can match either
      <span class="docEmphasis">Tom</span> or <span class="docEmphasis">tom</span>
      or <span class="docEmphasis">tommy,</span> etc. If the expression is true,
      the exit status (?) is <span class="docEmphasis">0.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The logical operators <span class="docEmphasis">&amp;&amp;</span>
      (<span class="docEmphasis">and</span>) and <span class="docEmphasis">||</span>
      (<span class="docEmphasis">or</span>) can be used with the compound test.
      If <span class="docEmphasis">&amp;&amp;</span> is used, both expressions must be
      true, and if the first expression evaluates as false, no further checking
      is done. With the || logical operator, only one of the expressions must be
      true. If the first expression evaluates true, no further checking is done.
      Note that <span class="docEmphasis">&quot;Jose&quot;</span> is quoted. If not
      quoted, the <span class="docEmphasis">friend</span> variable would be
      checked to see if it contained the pattern <span class="docEmphasis">Jose.</span>
      <span class="docEmphasis">Jose</span> would match, and so would
      <span class="docEmphasis">Joseph.</span> The expression evaluates to false
      because the second condition is not true. The exit status is
      <span class="docEmphasis">1.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Extended pattern matching is turned on with the
      built-in <span class="docEmphasis">shopt</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable is assigned the value
      <span class="docEmphasis">Tommy.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">In this test, the expression is tested for string
      equality using the new pattern-matching metacharacters. It tests if
      <span class="docEmphasis">name</span> matches a string starting with
      <span class="docEmphasis">T</span> or <span class="docEmphasis">t,</span>
      followed by an <span class="docEmphasis">o,</span> one or more
      <span class="docEmphasis">m</span> characters, and a
      <span class="docEmphasis">y.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list18" class="docExampleTitle">Example 12.18 </h5>
<pre>    (The <span class="docEmphasis">let</span> Command) (bash 2.x)
    (At the Command Line)
1   $ <span class="docEmphStrong">x=2</span>
    $ <span class="docEmphStrong">y=3</span>

2   <span class="docEmphStrong">(( x &gt; 2 ))</span>
    <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">1</span>

3   <span class="docEmphStrong">(( x &lt; 2 ))</span>
    <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">0</span>

4   <span class="docEmphStrong">(( x == 2 &amp;&amp; y == 3 ))</span>
    <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">0</span>

5   <span class="docEmphStrong">(( x &gt; 2 || y &lt; 3 ))</span>
    <span class="docEmphStrong">echo $?</span>
    <span class="docEmphasis">1</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">x</span> and
      <span class="docEmphasis">y</span> are assigned numeric values.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The double parentheses replace the
      <span class="docEmphasis">let</span> command to evaluate the numeric
      expression. If x is greater than y, the exit status is
      <span class="docEmphasis">0.</span> Because the condition is not true, the
      exit status is <span class="docEmphasis">1.</span> The
      <span class="docEmphasis">?</span> variable holds the exit status of the
      last command executed; i.e., the <span class="docEmphasis">(( ))</span>
      command. Note: To evaluate a variable, the dollar sign is not necessary
      when the variable is enclosed in <span class="docEmphasis">(( )).</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The double parentheses evaluate the expression. If
      <span class="docEmphasis">x</span> is less than <span class="docEmphasis">
      2,</span> and exit status of <span class="docEmphasis">0</span> is
      returned; otherwise, <span class="docEmphasis">1</span> is returned.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The compound expression is evaluated. The expression is
      tested as follows: if <span class="docEmphasis">x</span> is equal to
      <span class="docEmphasis">2</span> <span class="docEmphasis">and</span>
      <span class="docEmphasis">y</span> is equal to <span class="docEmphasis">3</span>
      (i.e., <span class="docEmphasis">both</span> expressions are true), then
      an exit status of <span class="docEmphasis">0</span> is returned;
      otherwise, <span class="docEmphasis">1</span> is returned.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The compound expression is evaluated. The expression is
      tested as follows: if <span class="docEmphasis">x</span> is greater than
      <span class="docEmphasis">2</span> <span class="docEmphasis">or</span>
      <span class="docEmphasis">y</span> is less than <span class="docEmphasis">
      3</span> (i.e., <span class="docEmphasis">one</span> of the expressions is
      true), then an exit status of 0 is returned; otherwise,
      <span class="docEmphasis">1</span> is returned.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p>&nbsp;</p>
<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch12table03" class="docTableTitle">Table 12.3. The <span class="docEmphasis">test</span>
  Command Operators</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">Test
    Operator</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Tests True If</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphStrong">String
    Test</span> </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ string1 =
    string2 ]</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">String1</span>
    is equal to <span class="docEmphasis">String2 (space surrounding =
    required).</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[
    string1==string2 ]</span> </td>
    <td class="docTableCell" vAlign="top">(Can be used instead of the single =
    sign on <span class="docEmphasis">bash</span> versions 2.x.) </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ string1 !=
    string2 ]</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">String1</span>
    is not equal to <span class="docEmphasis">String2 (space surrounding !=
    required).</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ string ]</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">String</span>
    is not null. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ –z string
    ]</span> </td>
    <td class="docTableCell" vAlign="top">Length of <span class="docEmphasis">
    string</span> is zero. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ –n string
    ]</span> </td>
    <td class="docTableCell" vAlign="top">Length of <span class="docEmphasis">
    string</span> is nonzero. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ –l string
    ]</span> </td>
    <td class="docTableCell" vAlign="top">Length of <span class="docEmphasis">
    string</span> (number of characters). </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">Examples: </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">test –n
    $word</span> or <span class="docEmphasis">[ –n $word ]</span>
    <span class="docEmphasis">test tom = sue</span> or <span class="docEmphasis">
    [ tom = sue ]</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphStrong">Logical
    Test</span> </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ string1 –a
    string1 ]</span> </td>
    <td class="docTableCell" vAlign="top">Both <span class="docEmphasis">string1</span>
    <span class="docEmphStrong">and</span> <span class="docEmphasis">string2</span>
    are true. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ string1 –o
    string2 ]</span> </td>
    <td class="docTableCell" vAlign="top">Either <span class="docEmphasis">
    string1</span> <span class="docEmphStrong">or</span>
    <span class="docEmphasis">string2</span> is true. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ ! string1
    ]</span> </td>
    <td class="docTableCell" vAlign="top">Not a <span class="docEmphasis">
    string1</span> match. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphStrong">Logical
    Test (Compound Test)</span><sup class="docFootnote"><a class="docLink" href="#ch12tabfn07">[a]</a></sup>
    </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[[ pattern1
    &amp;&amp; pattern2 ]]</span> </td>
    <td class="docTableCell" vAlign="top">Both <span class="docEmphasis">
    pattern1</span> <span class="docEmphStrong">and</span>
    <span class="docEmphasis">pattern2</span> are true. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[[ pattern1
    || pattern2 ]]</span> </td>
    <td class="docTableCell" vAlign="top">Either <span class="docEmphasis">
    pattern1</span> <span class="docEmphStrong">or</span>
    <span class="docEmphasis">pattern2</span> is true. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[[ ! pattern
    ]]</span> </td>
    <td class="docTableCell" vAlign="top">Not a <span class="docEmphasis">
    pattern</span> match. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphStrong">Integer
    Test</span> </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ int1 –eq
    int2 ]</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Int1</span>
    is equal to <span class="docEmphasis">int2.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ int1 –ne
    int2 ]</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Int1</span>
    is not equal to <span class="docEmphasis">int2.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ int1 –gt
    int2 ]</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Int1</span>
    is greater than <span class="docEmphasis">int2.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ int1 –ge
    int2 ]</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Int1</span>
    is greater than or equal to <span class="docEmphasis">int2.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ int1 –lt
    int2 ]</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Int1</span>
    is less than <span class="docEmphasis">int2.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ int1 –le
    int2 ]</span> </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Int1</span>
    is less than or equal to <span class="docEmphasis">int2.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphStrong">Binary
    Operators for File Testing</span> </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ file1 –nt
    file2 ]</span> </td>
    <td class="docTableCell" vAlign="top">True if <span class="docEmphasis">
    file1</span> is newer than <span class="docEmphasis">file2</span> (according
    to modification date). </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ file1 –ot
    file2 ]</span> </td>
    <td class="docTableCell" vAlign="top">True if <span class="docEmphasis">
    file1</span> is older than <span class="docEmphasis">file2.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">[ file1 –ef
    file2 ]</span> </td>
    <td class="docTableCell" vAlign="top">True if <span class="docEmphasis">
    file1</span>and <span class="docEmphasis">file2</span> have the same device
    or inode numbers. </td>
  </tr>
</table>

<blockquote>
  <p class="docFootnote"><sup><a name="ch12tabfn07">[a]</a></sup> With the
  compound test, <span class="docEmphasis">pattern</span> can contain pattern
  matching metacharacters; for exact string testing, <span class="docEmphasis">
  pattern2</span> must be enclosed in quotes.</p>
</blockquote>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch12table04" class="docTableTitle">Table 12.4. The <span class="docEmphasis">let</span>
  Command Operators</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Operator</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">– + </td>
    <td class="docTableCell" vAlign="top">Unary minus and plus. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">! ~ </td>
    <td class="docTableCell" vAlign="top">Logical and bitwise not (negation).
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">* / % </td>
    <td class="docTableCell" vAlign="top">Multiply, divide, remainder. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">+ – </td>
    <td class="docTableCell" vAlign="top">Add, subtract. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top" colSpan="2">
    <span class="docEmphBoldItalic">let</span> <span class="docEmphStrong">
    Operators Not Implemented Prior</span> <span class="docEmphStrong">to</span>
    <span class="docEmphBoldItalic">bash</span> <span class="docEmphStrong">2.x</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">&lt;&lt; &gt;&gt; </td>
    <td class="docTableCell" vAlign="top">Bitwise left shift, right shift. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">&lt;= &gt;= &lt; &gt; </td>
    <td class="docTableCell" vAlign="top">Comparison operators. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">== != </td>
    <td class="docTableCell" vAlign="top">Equal to and not equal to. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">&amp; </td>
    <td class="docTableCell" vAlign="top">Bitwise <span class="docEmphasis">and.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">^ </td>
    <td class="docTableCell" vAlign="top">Bitwise exclusive
    <span class="docEmphasis">or.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">| </td>
    <td class="docTableCell" vAlign="top">Bitwise <span class="docEmphasis">or.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">&amp;&amp; </td>
    <td class="docTableCell" vAlign="top">Logical <span class="docEmphasis">and.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">|| </td>
    <td class="docTableCell" vAlign="top">Logical <span class="docEmphasis">or.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">= *= /= %= += –= &lt;&lt;= &gt;&gt;= &amp;= ^= |= </td>
    <td class="docTableCell" vAlign="top">Assignment and shortcut assignment.
    </td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec10">12.5.3 The <span class="docEmphasis">if</span>
Command</h4>
<p class="docText">The simplest form of conditional is the
<span class="docEmphasis">if</span> command. The command (a
<span class="docEmphasis">bash</span> built-in or executable) following the
<span class="docEmphasis">if</span> construct is executed and its exit status is
returned. The exit status is usually determined by the programmer who wrote the
utility. If the exit status is zero, the command succeeded and the statement(s)
after the <span class="docEmphasis">then</span> keyword are executed. In the C
shell, the expression following the <span class="docEmphasis">if</span> command
is a Boolean-type expression as in C. But in the Bash, Bourne, and Korn shells,
the statement following the <span class="docEmphasis">if</span> is a command or
group of commands. If the exit status of the command being evaluated is zero,
the block of statements after the <span class="docEmphasis">then</span> is
executed until <span class="docEmphasis">fi</span> is reached. The
<span class="docEmphasis">fi</span> terminates the <span class="docEmphasis">if</span>
block. If the exit status is nonzero, meaning that the command failed in some
way, the statement(s) after the <span class="docEmphasis">then</span> keyword
are ignored and control goes to the line directly after the
<span class="docEmphasis">fi</span> statement.</p>
<p class="docText">It is important that you know the exit status of the commands
being tested. For example, the exit status of <span class="docEmphasis">grep</span>
is reliable in letting you know whether <span class="docEmphasis">grep</span>
found the pattern it was searching for in a file. If <span class="docEmphasis">
grep</span> is successful in its search, it returns a zero exit status; if not,
it returns one. The <span class="docEmphasis">sed</span> and g<span class="docEmphasis">awk</span>
programs also search for patterns, but they will report a successful exit status
regardless of whether they find the pattern. The criterion for success with
<span class="docEmphasis">sed</span> and <span class="docEmphasis">gawk</span>
is correct syntax, not functionality.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>    if <span class="docEmphStrong">command</span>
    then
        command
        command
    fi
------------------------------------

(Using <span class="docEmphBoldItalic">test</span> for numbers and strings -- old format)

    if <span class="docEmphBoldItalic">test</span> expression
    then
        command
    fi
              <span class="docEmphasis">or</span>

    if <span class="docEmphStrong">[</span> string/numeric expression <span class="docEmphStrong">]</span> then
           command
    fi
-------------------------------------

(Using <span class="docEmphBoldItalic">test</span> for strings -- new formst)

    if <span class="docEmphStrong">[[</span> string expression <span class="docEmphStrong">]]</span> then
           command
    fi

(Using <span class="docEmphBoldItalic">let</span> for numbers -- new format)

    if <span class="docEmphStrong">((</span> numeric expression <span class="docEmphStrong">))</span>

--------------------------------------
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list19" class="docExampleTitle">Example 12.19 </h5>
<pre>1   <span class="docEmphStrong">if grep &quot;$name&quot; /etc/passwd &gt; /dev/null 2&gt;&amp;1</span>
2   <span class="docEmphStrong">then</span>
         echo Found $name!
3   <span class="docEmphStrong">fi</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">grep</span> command
      searches for its argument, <span class="docEmphasis">name,</span> in the
      <span class="docEmphasis">/etc/passwd</span> database. Standard output and
      standard error are redirected to <span class="docEmphasis">/dev/null,</span>
      the UNIX bit bucket.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the exit status of the <span class="docEmphasis">
      grep</span> command is zero, the program goes to the
      <span class="docEmphasis">then</span> statement and executes commands
      until <span class="docEmphasis">fi</span> is reached. Indentation of
      commands between the <span class="docEmphasis">then</span> and
      <span class="docEmphasis">fi</span> keywords is a convention used to make
      the program more readable, and hence, easier to debug.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> terminates the
      list of commands following the <span class="docEmphasis">then</span>
      statement.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list20" class="docExampleTitle">Example 12.20 </h5>
<pre>1   echo  &quot;Are you o.k. (y/n) ?&quot;
    read answer
2   <span class="docEmphStrong">if [ &quot;$answer&quot; = Y -o &quot;$answer&quot; =</span> <span class="docEmphBoldItalic">y</span> <span class="docEmphStrong">]</span>
    <span class="docEmphStrong">then</span>
        echo  &quot;Glad to hear it.&quot;
3   <span class="docEmphStrong">fi</span>

4   <span class="docEmphStrong">if [ $answer = Y -o &quot;$answer&quot; =</span> <span class="docEmphBoldItalic">y</span> <span class="docEmphStrong">]</span>
    <span class="docEmphasis">[: too many arguments</span>

    -------------------------------------------
5   <span class="docEmphStrong">if [[ $answer == [Y</span><span class="docEmphBoldItalic">y</span><span class="docEmphStrong">]* || $answer == Maybe ]]</span><sup class="docFootnote"><a class="docLink" href="#ch12fn08">[a]</a></sup>
    then
        echo  &quot;Glad to hear it.&quot;
    <span class="docEmphStrong">fi</span>

6   <span class="docEmphStrong">shopt -s extglob</span>

7   answer=&quot;not really&quot;

8   <span class="docEmphStrong">if [[ $answer = [Nn]o?( way|t really) ]]</span>
    then
        echo &quot;So sorry. &quot;
    fi
</pre>
<blockquote>
  <p class="docFootnote"><sup><a name="ch12fn08">[a]</a></sup> Lines 5 through 8
  are only implemented on versions of <span class="docEmphasis">bash</span> 2.x.</p>
</blockquote>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked the question and told to respond. The
      <span class="docEmphasis">read</span> command waits for a response.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">test</span> command,
      represented by square brackets, is used to test expressions. It returns an
      exit status of zero if the expression is true and nonzero if the
      expression is false. If the variable <span class="docEmphasis">answer</span>
      evaluates to <span class="docEmphasis">Y</span> or
      <span class="docEmphasis">y,</span> the commands after the
      <span class="docEmphasis">then</span> statement are executed. (The
      <span class="docEmphasis">test</span> command does not allow the use of
      wildcards when testing expressions, and spaces must surround the square
      brackets, as well as the = operators. See
      <a class="docLink" href="#ch12table03">Table 12.3</a>.)
      <span class="docEmphasis">$answer</span> is double quoted to hold it
      together as a single string. Otherwise the <span class="docEmphasis">test</span>
      command will fail.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> terminates the
      <span class="docEmphasis">if</span> on line 2.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">test</span> command fails
      if more than one word appears before the = operator. For example, if the
      user entered <span class="docEmphasis">yes, you betcha,</span> the
      <span class="docEmphasis">answer</span> variable would evaluate to three
      words, causing the <span class="docEmphasis">test</span> to fail,
      <span class="docEmphasis">unless $answer</span> is enclosed in double
      quotes. The resulting error message is shown here.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The compound command operators
      <span class="docEmphasis">[[ ]]</span> allow the expansion of shell
      metacharacters in a string expression. The variable does not need quotes
      surrounding it, even if it contains more than one word, as it did with the
      old <span class="docEmphasis">test</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">shopt</span> built-in, if
      set to <span class="docEmphasis">extglob,</span> allows expanded parameter
      expansion. See
      <a class="docLink" href="_chapter 11.htm#ch11table12">
      Table 11.12</a>.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">answer</span> variable is
      set to the string <span class="docEmphasis">&quot;not really&quot;.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Extended pattern matching is used here. The expression
      reads, <span class="docEmphasis">if the value of the</span> answer
      <span class="docEmphasis">variable matches a string starting with</span>
      no <span class="docEmphasis">or</span> No <span class="docEmphasis">and if
      followed by zero or one occurrences of the expression in the parentheses,
      the expression is true.</span> The expression could be evaluated to
      <span class="docEmphasis">no, No, no way, No way, not really,</span> or
      <span class="docEmphasis">Not really.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
exit</span> Command and the <span class="docEmphasis">?</span> Variable.</span>
The <span class="docEmphasis">exit</span> command is used to terminate the
script and return to the command line. You may want the script to exit if some
condition occurs. The argument given to the <span class="docEmphasis">exit</span>
command is a number ranging from 0 to 255. If the program exits with zero as an
argument, the program exited with success. A nonzero argument indicates some
kind of failure. The argument given to the <span class="docEmphasis">exit</span>
command is stored in the shell's <span class="docEmphasis">?</span> variable.</p>
<h5 id="ch12list21" class="docExampleTitle">Example 12.21 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat bigfiles</span>

    <span class="docEmphasis"># Name: bigfiles</span>
    <span class="docEmphasis"># Purpose: Use the find command to find any files in the root</span>
    <span class="docEmphasis"># partition that have not been modified within the past n (any</span>
    <span class="docEmphasis"># number within 30 days) days and are larger than 20 blocks</span>
    <span class="docEmphasis"># (512-byte blocks)</span>
1   <span class="docEmphStrong">if (( $# != 2 ))</span><sup class="docFootnote"><a class="docLink" href="#ch12fn09">[a]</a></sup>        <span class="docEmphasis">#</span> [ $# -ne 2 ]
    then
       echo  &quot;Usage:   $0 mdays size &quot; 1&gt;&amp;2
       <span class="docEmphStrong">exit 1</span>
2   fi
3   <span class="docEmphStrong">if (( $1 &lt;  0 || $1 &gt; 30 ))</span><sup class="docFootnote"><a class="docLink" href="#ch12fn10">[b]</a></sup>     <span class="docEmphasis">#</span> [ $1 -lt 0 -o $1 -gt 30 ]
    then

       echo &quot;mdays is out of range&quot;
       <span class="docEmphStrong">exit 2</span>
4   fi
5   <span class="docEmphStrong">if (( $2 &lt;= 20 ))</span>      <span class="docEmphasis">#</span> [ $2 -le 20 ]
    then
       echo &quot;size is out of range&quot;
       <span class="docEmphStrong">exit 3</span>
6   fi

7   <span class="docEmphStrong">find / -xdev -mtime $1 -size +$2</span>

(The Command Line)
$ <span class="docEmphStrong">bigfiles</span>
<span class="docEmphasis">Usage: bigfiles mdays size</span>

$ <span class="docEmphStrong">echo $?</span>
<span class="docEmphasis">1</span>

$ <span class="docEmphStrong">bigfiles 400 80</span>
<span class="docEmphasis">mdays is out of range</span>

$ <span class="docEmphStrong">echo $?</span>
<span class="docEmphasis">2</span>

$ <span class="docEmphStrong">bigfiles 25 2</span>
<span class="docEmphasis">size is out of range</span>

$ <span class="docEmphStrong">echo $?</span>
<span class="docEmphasis">3</span>

$ <span class="docEmphStrong">bigfiles 2 25</span>
<span class="docEmphasis">(Output of find prints here)</span>
</pre>
<blockquote>
  <p class="docFootnote"><sup><a name="ch12fn09">[a]</a></sup> Not implemented
  on versions prior to <span class="docEmphasis">bash</span> 2.x. On older
  versions could also be written <tt>if let $(( $# != 2 ))</tt>.</p>
</blockquote>
<blockquote>
  <p class="docFootnote"><sup><a name="ch12fn10">[b]</a></sup> Same as above. On
  older versions could also be written <tt>if let $(( $1 &lt; 0 || $1 &gt; 30 )</tt>.</p>
</blockquote>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The statement reads: <span class="docEmphasis">If the
      number of arguments is not equal to 2, print the error message and send it
      to standard error, then exit the script with an exit status of 1.</span>
      Either the built-in <span class="docEmphasis">test</span> command or the
      <span class="docEmphasis">let</span> command can be used to test numeric
      expressions.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> marks the end
      of the block of statements after <span class="docEmphasis">then.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The statement reads: <span class="docEmphasis">If the
      value of the first positional parameter passed in from the command line is
      less than 0 or greater than 30, then print the message and exit with a
      status of 2.</span> See <a class="docLink" href="#ch12table04">Table 12.4</a>
      for numeric operators.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> ends the
      <span class="docEmphasis">if</span> block.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The statement reads: <span class="docEmphasis">If the
      value of the second positional parameter passed in at the command line is
      less than or equal to 20 (512-byte blocks), then print the message and
      exit with a status of 3.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> ends the
      <span class="docEmphasis">if</span> block.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">find</span> command
      starts its search in the root directory. The <span class="docEmphasis">–xdev</span>
      option prevents <span class="docEmphasis">find</span> from searching other
      partitions. The <span class="docEmphasis">–mtime</span> option takes a
      number argument, which is the number of days since the file was modified,
      and the <span class="docEmphasis">–size</span> option takes a number
      argument, which is the size of the file in 512-byte blocks.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Checking for Null Values.</b> When checking for null
values in a variable, use double quotes to hold the null value or the
<span class="docEmphasis">test</span> command will fail.</p>
<h5 id="ch12list22" class="docExampleTitle">Example 12.22 </h5>
<pre>(The Script)
1   <span class="docEmphStrong">if [ &quot;$name&quot; = &quot;&quot; ]</span>     <span class="docEmphasis"># Alternative to</span>  <span class="docEmphStrong">[ ! &quot;$name&quot; ]</span>
                            <span class="docEmphasis"># or</span> <span class="docEmphStrong">[ -z &quot;$name&quot; ]</span>
    then
       echo The name variable is null
    fi

(From System <span class="docEmphasis">showmount</span> program, which displays all remotely mounted
systems)
    <span class="docEmphStrong">remotes=$(/usr/sbin/showmount)</span>
2   <span class="docEmphStrong">if [ &quot;X${remotes}&quot; != &quot;X&quot; ]</span>
    then
       /usr/sbin/wall ${remotes}
                    ...
3   fi
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">name</span> variable
      evaluates to null, the test is true. The double quotes are used to
      represent null.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">showmount</span> command
      lists all clients remotely mounted from a host machine. The command will
      list either one or more clients, or nothing. The variable
      <span class="docEmphasis">remotes</span> will either have a value assigned
      or will be null. The letter <span class="docEmphBoldItalic">X</span>
      precedes the variable <span class="docEmphasis">remotes</span> when being
      tested. If <span class="docEmphasis">remotes</span> evaluates to null, no
      clients are remotely logged on and <span class="docEmphasis">X</span> will
      be equal to <span class="docEmphasis">X,</span> causing the program to
      start execution again on line 3. If the variable has a value, for example,
      the hostname <span class="docEmphasis">pluto,</span> the expression would
      read <span class="docEmphasis">if Xpluto != X,</span> and the
      <span class="docEmphasis">wall</span> command would be executed. (All
      users on remote machines will be sent a message.) The purpose of using
      <span class="docEmphasis">X</span> in the expression is to guarantee that
      even if the value of <span class="docEmphasis">remotes</span> is null,
      there will always be a placeholder on either side of the
      <span class="docEmphasis">!=</span> operator in the expression.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> terminates the
      <span class="docEmphasis">if.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">Nested <span class="docEmphasis">
if</span> Commands.</span> When <span class="docEmphasis">if</span> statements
are nested, the <span class="docEmphasis">fi</span> statement always goes with
the nearest <span class="docEmphasis">if</span> statement. Indenting the nested
<span class="docEmphasis">if</span>s makes it easier to see which
<span class="docEmphasis">if</span> statement goes with which
<span class="docEmphasis">fi</span> statement.</p>
<h4 class="docSection2Title" id="ch12lev2sec11">12.5.4 The <span class="docEmphasis">if/else</span>
Command</h4>
<p class="docText">The <span class="docEmphasis">if/else</span> commands allow a
two-way decision-making process. If the command after the
<span class="docEmphasis">if</span> fails, the commands after the
<span class="docEmphasis">else</span> are executed.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>if  command
then
    command(s)
else
    command(s)
fi
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list23" class="docExampleTitle">Example 12.23 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: grepit</span>
1   <span class="docEmphStrong">if grep &quot;$name&quot; /etc/passwd &gt;&amp; /dev/null; then</span>
        echo Found $name!
3   <span class="docEmphStrong">else</span>
4       echo &quot;Can't find $name.&quot;
        exit 1
5   <span class="docEmphStrong">fi</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">grep</span> command
      searches for its argument, <span class="docEmphasis">name,</span> in the
      NIS <span class="docEmphasis">passwd</span> database. Because the user
      does not need to see the output, standard output and standard error are
      redirected to <span class="docEmphasis">/dev/null,</span> the UNIX bit
      bucket.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the exit status of the <span class="docEmphasis">
      ypmatch</span> command is zero, program control goes to the
      <span class="docEmphasis">then</span> statement and executes commands
      until <span class="docEmphasis">else</span> is reached.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The commands under the <span class="docEmphasis">else</span>
      statement are executed if the <span class="docEmphasis">ypmatch</span>
      command fails to find <span class="docEmphasis">$name</span> in the
      <span class="docEmphasis">passwd</span> database; that is, the exit status
      of <span class="docEmphasis">ypmatch</span> must be nonzero for the
      commands in the <span class="docEmphasis">else</span> block to be
      executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the value in <span class="docEmphasis">$name</span>
      is not found in the <span class="docEmphasis">passwd</span> database, this
      <span class="docEmphasis">echo</span> statement is executed and the
      program exits with a value of <span class="docEmphasis">1,</span>
      indicating failure.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> terminates the
      <span class="docEmphasis">if.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list24" class="docExampleTitle">Example 12.24 </h5>
<pre>(The Script)
#!/bin/bash
<span class="docEmphasis"># Scriptname: idcheck</span>
<span class="docEmphasis"># purpose:check user id to see if user is root.</span>
<span class="docEmphasis"># Only root has a uid of 0.</span>
<span class="docEmphasis"># Format for id output:uid=9496(ellie) gid=40 groups=40</span>
<span class="docEmphasis"># root's uid=0</span>

1   <span class="docEmphStrong">id='id | gawk –F'[=(]'  '{print $2}''</span>      <span class="docEmphasis"># get user id</span>
    echo your user id is: $id
2   <span class="docEmphStrong">if</span>  (( id == 0 ))<sup class="docFootnote"><a class="docLink" href="#ch12fn11">[a]</a></sup>   <span class="docEmphasis">#</span> <span class="docEmphasis">[ $id –eq 0 ] (See cd file: idcheck2)</span>
    <span class="docEmphStrong">then</span>
3       echo &quot;you are superuser.&quot;
4   <span class="docEmphStrong">else</span>
        echo &quot;you are not superuser.&quot;
5   <span class="docEmphStrong">fi</span>

    (The Command Line)
6   $ <span class="docEmphStrong">idcheck</span>
    <span class="docEmphasis">your user id is: 9496</span>
    <span class="docEmphasis">you are not superuser.</span>
7   $ <span class="docEmphStrong">su</span>
    <span class="docEmphasis">Password:</span>
8   # <span class="docEmphStrong">idcheck</span>
    <span class="docEmphasis">your user id is: 0</span>
    <span class="docEmphasis">you are superuser</span>
</pre>
<blockquote>
  <p class="docFootnote"><sup><a name="ch12fn11">[a]</a></sup> Not implemented
  on versions of <span class="docEmphasis">bash</span> prior to 2.x.</p>
</blockquote>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <blockquote>

      <p class="docList">1. The <span class="docEmphasis">id</span> command is
      piped to the <span class="docEmphasis">gawk</span> command.
      <span class="docEmphasis">Nawk</span> uses an equal sign and open
      parenthesis as field separators, extracts the user ID from the output, and
      assigns the output to the variable <span class="docEmphasis">id.</span></p>


      <p class="docList">2,3,4. If the value of <span class="docEmphasis">id</span>
      is equal to zero, then line 3 is executed. If <span class="docEmphasis">id</span>
      is not equal to zero, the <span class="docEmphasis">else</span> statements
      are executed.</p>


      <p class="docList">5. The <span class="docEmphasis">fi</span> marks the
      end of the <span class="docEmphasis">if</span> command.</p>


      <p class="docList">6. The <span class="docEmphasis">idcheck</span> script
      is executed by the current user, whose UID is 9496.</p>


      <p class="docList">7. The <span class="docEmphasis">su</span> command
      switches the user to <span class="docEmphasis">root.</span></p>


      <p class="docList">8. The <span class="docEmphasis">#</span> prompt
      indicates that the superuser (root) is the new user. The UID for root is
      <span class="docEmphasis">0.</span></p>

    </blockquote>
    </td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec12">12.5.5 The <span class="docEmphasis">if/elif/else</span>
Command</h4>
<p class="docText">The <span class="docEmphasis">if/elif/else</span> commands
allow a multiway decision-making process. If the command following the
<span class="docEmphasis">if</span> fails, the command following the
<span class="docEmphasis">elif</span> is tested. If that command succeeds, the
commands under its <span class="docEmphasis">then</span> statement are executed.
If the command after the <span class="docEmphasis">elif</span> fails, the next
<span class="docEmphasis">elif</span> command is checked. If none of the
commands succeeds, the <span class="docEmphasis">else</span> commands are
executed. The <span class="docEmphasis">else</span> block is called the default.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>if  command
then
    command(s)
elif command
then
    commands(s)
elif command
then
    command(s)
else
    command(s)
fi
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list25" class="docExampleTitle">Example 12.25 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: tellme</span>
    <span class="docEmphasis"># Using the old-style test command</span>

1   echo -n &quot;How old are you? &quot;
    read age
2   <span class="docEmphStrong">if [ $age -lt 0 -o $age -gt 120 ]</span>
    then
       echo  &quot;Welcome to our planet! &quot;
       exit 1
    fi
3   <span class="docEmphStrong">if  [ $age -ge 0 -a $age -le 12 ]</span>
    <span class="docEmphStrong">then</span>
       echo &quot;A child is a garden of verses&quot;
    <span class="docEmphStrong">elif [ $age -ge 12 -a $age -le 19 ]</span>
    <span class="docEmphStrong">then</span>
       echo &quot;Rebel without a cause&quot;
    <span class="docEmphStrong">elif [ $age -ge 20 -a  $age -le 29 ]</span>
    <span class="docEmphStrong">then</span>
       echo &quot;You got the world by the tail!!&quot;
    <span class="docEmphStrong">elif [ $age -ge  30 -a  $age -le 39 ]</span>
    <span class="docEmphStrong">then</span>
       echo &quot;Thirty something...&quot;
4   <span class="docEmphStrong">else</span>
       echo &quot;Sorry I asked&quot;
5   <span class="docEmphStrong">fi</span>


(The Output)
$ <span class="docEmphStrong">tellme</span>
<span class="docEmphasis">How old are you?</span> <span class="docEmphBoldItalic">200</span>
<span class="docEmphasis">Welcome to our planet!</span>

$ <span class="docEmphStrong">tellme</span>
<span class="docEmphasis">How old are you?</span> <span class="docEmphBoldItalic">13</span>
<span class="docEmphasis">Rebel without a cause</span>

$ <span class="docEmphStrong">tellme</span>
<span class="docEmphasis">How old are you?</span> <span class="docEmphBoldItalic">55</span>
<span class="docEmphasis">Sorry I asked</span>
----------------------------------------------------------
    #!/bin/bash
    <span class="docEmphasis"># Using the new (( )) compound let command</span>
    <span class="docEmphasis"># Scriptname: tellme2</span>

1   echo -n &quot;How old are you? &quot;
    read age
2   <span class="docEmphStrong">if (( age &lt; 0 || age &gt; 120 ))</span>
    then
       echo &quot;Welcome to our planet! &quot;
       exit 1
    fi
3   <span class="docEmphStrong">if ((age &gt;= 0 &amp;&amp; age &lt;= 12))</span>
    <span class="docEmphStrong">then</span>
       echo &quot;A child is a garden of verses&quot;
    <span class="docEmphStrong">elif ((age &gt;= 13 &amp;&amp; age &lt;= 19 ))</span>
    <span class="docEmphStrong">then</span>
       echo &quot;Rebel without a cause&quot;
    <span class="docEmphStrong">elif (( age &gt;= 19 &amp;&amp;  age &lt;=  29 ))</span>
    <span class="docEmphStrong">then</span>
       echo &quot;You got the world by the tail!!&quot;
    <span class="docEmphStrong">elif</span>  <span class="docEmphStrong">(( age &gt;=  30 &amp;&amp;  age &lt;= 39 ))</span>
    <span class="docEmphStrong">then</span>
       echo &quot;Thirty something...&quot;
4   <span class="docEmphStrong">else</span>
       echo &quot;Sorry I asked&quot;
5   <span class="docEmphStrong">fi</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked for input. The input is assigned to
      the variable <span class="docEmphasis">age.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A numeric test is performed by the
      <span class="docEmphasis">test</span> command. If
      <span class="docEmphasis">age</span> is less than
      <span class="docEmphasis">0</span> or greater than
      <span class="docEmphasis">120,</span> the <span class="docEmphasis">echo</span>
      command is executed and the program terminates with an exit status of one.
      The interactive shell prompt will appear.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A numeric test is performed by the
      <span class="docEmphasis">test</span> command. If
      <span class="docEmphasis">age</span> is greater than or equal to
      <span class="docEmphasis">0</span> and less than or equal to
      <span class="docEmphasis">12,</span> the <span class="docEmphasis">test</span>
      command returns exit status zero, true, and the statement after the
      <span class="docEmphasis">then</span> is executed. Otherwise, program
      control goes to the <span class="docEmphasis">elif.</span> If that test is
      false, the next <span class="docEmphasis">elif</span> is tested.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">else</span> construct is
      the default. If none of the above statements are true, the
      <span class="docEmphasis">else</span> commands will be executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> terminates the
      initial <span class="docEmphasis">if</span> statement.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec13">12.5.6 File Testing</h4>
<p class="docText">Often when you are writing scripts, your script will require
that there are certain files available and that those files have specific
permissions, are of a certain type, or have other attributes. You will find file
testing a necessary part of writing dependable scripts.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch12table05" class="docTableTitle">Table 12.5. File Test Operators</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">Test
    Operator</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Tests True If</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–b filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Block special file. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–c filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Character special file. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–d filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Directory existence. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–e filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File existence. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–f filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Regular file existence and not a
    directory. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–G filename</span>
    </td>
    <td class="docTableCell" vAlign="top">True if file exists and is owned by
    the effective group ID. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–g filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Set-group-ID is set. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–k filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Sticky bit is set. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–L filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File is a symbolic link. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–p filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File is a named pipe. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–O filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File exists and is owned by the
    effective user ID. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–r filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File is readable. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–S filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File is a socket. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–s filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File is nonzero size. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–t fd</span>
    </td>
    <td class="docTableCell" vAlign="top">True if <span class="docEmphasis">fd</span>
    (file descriptor) is opened on a terminal. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–u filename</span>
    </td>
    <td class="docTableCell" vAlign="top">Set-user-ID bit is set. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–w filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File is writeable. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–x filename</span>
    </td>
    <td class="docTableCell" vAlign="top">File is executable. </td>
  </tr>
</table>

<h5 id="ch12list26" class="docExampleTitle">Example 12.26 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Using the old style test command</span>
    <span class="docEmphasis"># filename: perm_check</span>
    <span class="docEmphStrong">file=./testing</span>


1   <span class="docEmphStrong">if [ -d $file ]</span>
    <span class="docEmphStrong">then</span>
       echo &quot;$file is a directory&quot;
2   <span class="docEmphStrong">elif [ -f $file ]</span>
    <span class="docEmphStrong">then</span>
3      <span class="docEmphStrong">if [ -r $file -a -w $file -a -x $file ]</span>
       <span class="docEmphStrong">then</span>     <span class="docEmphasis"># nested if command</span>
            echo &quot;You have read,write,and execute \
            permission on $file.&quot;
4      <span class="docEmphStrong">fi</span>
5   <span class="docEmphStrong">else</span>
       echo &quot;$file is neither a file nor a directory. &quot;
6   <span class="docEmphStrong">fi</span>

----------------------------------------------------------
    #!/bin/bash
    <span class="docEmphasis"># Using the new compound operator for test (( ))</span><sup class="docFootnote"><a class="docLink" href="#ch12fn12">[a]</a></sup>
    <span class="docEmphasis"># filename: perm_check2</span>
    <span class="docEmphStrong">file=./testing</span>


1   <span class="docEmphStrong">if [[ -d $file ]]</span>
    <span class="docEmphStrong">then</span>
       echo &quot;$file is a directory&quot;
2   <span class="docEmphStrong">elif [[ -f $file ]]</span>
    <span class="docEmphStrong">then</span>
3      <span class="docEmphStrong">if [[ -r $file &amp;&amp; -w $file &amp;&amp; -x $file ]]</span>
       <span class="docEmphStrong">then</span>     <span class="docEmphasis"># nested if command</span>
           echo &quot;You have read,write,and execute \
           permission on $file.&quot;
4      <span class="docEmphStrong">fi</span>
5   <span class="docEmphStrong">else</span>
       echo &quot;$file is neither a file nor a directory. &quot;
6   <span class="docEmphStrong">fi</span>
</pre>
<blockquote>
  <p class="docFootnote"><sup><a name="ch12fn12">[a]</a></sup> New-style test
  with compound operators not implemented before <span class="docEmphasis">bash</span>
  2.x.</p>
</blockquote>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the file <span class="docEmphasis">testing</span> is
      a directory, print <span class="docEmphasis">testing is a directory.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the file <span class="docEmphasis">testing</span> is
      not a directory, <span class="docEmphasis">else if</span> the file is a
      plain file, then…</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the file <span class="docEmphasis">testing</span> is
      readable and writeable, and executable, then…</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> terminates the
      innermost <span class="docEmphasis">if</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">else</span> commands are
      executed <span class="docEmphasis">if</span> lines 1 and 2 are not true.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This <span class="docEmphasis">fi</span> goes with the
      first <span class="docEmphasis">if.</span></span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec14">12.5.7 The <span class="docEmphasis">null</span>
Command</h4>
<p class="docText">The <span class="docEmphasis">null</span> command,
represented by a colon, is a built-in, do-nothing command that returns an exit
status of zero. It is used as a placeholder after an <span class="docEmphasis">
if</span> command when you have nothing to say, but need a command or the
program will produce an error message because it requires something after the
<span class="docEmphasis">then</span> statement. Often the null command is used
as an argument to the <span class="docEmphasis">loop</span> command to make the
loop a forever loop.</p>
<h5 id="ch12list27" class="docExampleTitle">Example 12.27 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># filename: name_grep</span>
1   name=Tom
2   <span class="docEmphStrong">if grep &quot;$name&quot; databasefile &gt;&amp; /dev/null</span>
    then
3      <span class="docEmphStrong">:</span>
4   else
       echo &quot;$1 not found in databasefile&quot;
       exit 1
    fi
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">name</span> is
      assigned the string <span class="docEmphasis">Tom.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">if</span> command tests
      the exit status of the <span class="docEmphasis">grep</span> command. If
      <span class="docEmphasis">Tom</span> is found in the database file, the
      <span class="docEmphasis">null</span> command, a colon, is executed and
      does nothing. Both output and errors are redirected to
      <span class="docEmphasis">/dev/null.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The colon is the <span class="docEmphasis">null</span>
      command. It does nothing other than returning a <span class="docEmphasis">
      0</span> exit status.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">What we really want to do is print an error message and
      exit if <span class="docEmphasis">Tom</span> is <span class="docEmphasis">
      not</span> <span class="docEmphasis">found.</span> The commands after the
      <span class="docEmphasis">else</span> will be executed if the
      <span class="docEmphasis">grep</span> command fails.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list28" class="docExampleTitle">Example 12.28 </h5>
<pre>(The Command Line)
1   $ <span class="docEmphStrong">DATAFILE=</span>
2   $ <span class="docEmphStrong">: ${DATAFILE:=$HOME/db/datafile}</span>
    $ <span class="docEmphStrong">echo $DATAFILE</span>
    <span class="docEmphasis">/home/jody/ellie/db/datafile</span>
3   $ <span class="docEmphStrong">: ${DATAFILE:=$HOME/junk}</span>
    $ <span class="docEmphStrong">echo $DATAFILE</span>
    <span class="docEmphasis">/home/jody/ellie/db/datafile</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">DATAFILE</span>
      is assigned null.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The colon command is a do-nothing command. The modifier
      (:=) returns a value that can be assigned to a variable or used in a test.
      In this example, the expression is passed as an argument to the do-nothing
      command. The shell will perform variable substitution; that is, assign the
      pathname to <span class="docEmphasis">DATAFILE</span> if
      <span class="docEmphasis">DATAFILE</span> does not already have a value.
      The variable <span class="docEmphasis">DATAFILE</span> is permanently set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Because the variable has already been set, it will not
      be reset with the default value provided on the right of the modifier.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list29" class="docExampleTitle">Example 12.29 </h5>
<pre>(The Script)
    #!/bin/bash
1   <span class="docEmphasis"># Scriptname: wholenum</span>
    <span class="docEmphasis"># Purpose:The expr command tests that the user enters an</span>
    <span class="docEmphasis"># integer</span>
    <span class="docEmphasis">#</span>
    echo &quot;Enter an integer.&quot;
    read number
2   if <span class="docEmphStrong">expr &quot;$number&quot; + 0 &gt;&amp; /dev/null</span>
    then
3      :
    else
4      echo &quot;You did not enter an integer value.&quot;
       exit 1
5   fi
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked to enter an integer. The number is
      assigned to the variable <span class="docEmphasis">number.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">expr</span> command
      evaluates the expression. If addition can be performed, the number is a
      whole number and <span class="docEmphasis">expr</span> returns a
      successful exit status. All output is redirected to the bit bucket
      <span class="docEmphasis">/dev/null.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If <span class="docEmphasis">expr</span> is successful,
      it returns a zero exit status, and the colon command does nothing.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">expr</span> command
      fails, it returns a nonzero exit status, the <span class="docEmphasis">
      echo</span> command displays the message, and the program exits.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">fi</span> ends the
      <span class="docEmphasis">if</span> block.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec15">12.5.8 The <span class="docEmphasis">case</span>
Command</h4>
<p class="docText">The <span class="docEmphasis">case</span> command is a
multiway branching command used as an alternative to <span class="docEmphasis">
if/elif</span> commands. The value of the <span class="docEmphasis">case</span>
variable is matched against <span class="docEmphasis">value1, value2,</span> and
so forth, until a match is found. When a value matches the
<span class="docEmphasis">case</span> variable, the commands following the value
are executed until the double semicolons are reached. Then execution starts
after the word <span class="docEmphasis">esac</span> (<span class="docEmphasis">case</span>
spelled backward).</p>
<p class="docText">If the <span class="docEmphasis">case</span> variable is not
matched, the program executes the commands after the <span class="docEmphasis">
*),</span> the default value, until <span class="docEmphasis">;;</span> or
<span class="docEmphasis">esac</span> is reached. The <span class="docEmphasis">
*)</span> value functions the same as the <span class="docEmphasis">else</span>
statement in <span class="docEmphasis">if/else</span> conditionals. The
<span class="docEmphasis">case</span> values allow the use of shell wildcards
and the vertical bar (pipe symbol) for <span class="docEmphasis">or</span>ing
two values.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>case variable in
value1)
   command(s)
   ;;
value2)
   command(s)
   ;;
*)
command(s)
   ;;
esac
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list30" class="docExampleTitle">Example 12.30 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: xcolors</span>
1   echo -n &quot;Choose a foreground color for your xterm window: &quot;
    read color
2   <span class="docEmphStrong">case &quot;$color&quot; in</span>
3   <span class="docEmphStrong">[Bb]l??)</span>
4       xterm -fg blue -fn terminal &amp;
5       <span class="docEmphStrong">;;</span>
6   <span class="docEmphStrong">[Gg]ree*)</span>
        xterm -fg darkgreen -fn terminal &amp;
        <span class="docEmphStrong">;;</span>
7   <span class="docEmphStrong">red | orange)</span>              <span class="docEmphasis"># The vertical bar means &quot;or&quot;</span>
        xterm -fg &quot;$color&quot;  -fn terminal &amp;
        <span class="docEmphStrong">;;</span>
8   <span class="docEmphStrong">*)</span>
        xterm -fn terminal
        <span class="docEmphStrong">;;</span>
9   <span class="docEmphStrong">esac</span>
10  echo  &quot;Out of case command&quot;
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked for input. The input is assigned to
      the variable <span class="docEmphasis">color.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">case</span> command
      evaluates the expression <span class="docEmphasis">$color.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the color begins with a <span class="docEmphasis">B</span>
      or <span class="docEmphasis">b,</span> followed by the letter
      <span class="docEmphasis">l</span> and any two characters, the
      <span class="docEmphasis">case</span> expression matches the first value.
      The value is terminated with a single closed parenthesis. The wildcards
      are shell metacharacters used for filename expansion.The
      <span class="docEmphasis">xterm</span> command sets the foreground color
      to blue.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The statement is executed if the value in line number 3
      matches the <span class="docEmphasis">case</span> expression.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The double semicolons are required after the last
      command in this block of commands. Control branches to line 10 when the
      semicolons are reached. The script is easier to debug if the semicolons
      are on their own line.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">case</span> expression
      matches a <span class="docEmphasis">G</span> or <span class="docEmphasis">
      g,</span> followed by the letters <span class="docEmphasis">ree</span> and
      ending in zero or more of any other characters, the
      <span class="docEmphasis">xterm</span> command is executed. The double
      semicolons terminate the block of statements and control branches to line
      10.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The vertical bar is used as an
      <span class="docEmphasis">or</span> conditional operator. If the
      <span class="docEmphasis">case</span> expression matches either
      <span class="docEmphasis">red</span> or <span class="docEmphasis">orange,</span>
      the <span class="docEmphasis">xterm</span> command is executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is the default value. If none of the above values
      match the <span class="docEmphasis">case</span> expression, the commands
      after the <span class="docEmphasis">*)</span> are executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">esac</span> statement
      terminates the <span class="docEmphasis">case</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After one of the <span class="docEmphasis">case</span>
      values are matched, execution continues here.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">Creating Menus with the
<span class="docEmphasis">here document</span> and <span class="docEmphasis">
case</span> Command.</span> The <span class="docEmphasis">here</span>
<span class="docEmphasis">document</span> and <span class="docEmphasis">case</span>
command are often used together. The <span class="docEmphasis">here</span>
<span class="docEmphasis">document</span> is used to create a menu of choices
that will be displayed to the screen. The user will be asked to select one of
the menu items, and the <span class="docEmphasis">case</span> command will test
against the set of choices to execute the appropriate command.</p>
<h5 id="ch12list31" class="docExampleTitle">Example 12.31 </h5>
<pre>(From the <span class="docEmphasis">.bash_profile</span> File)
    echo &quot;Select a terminal type:  &quot;
1   <span class="docEmphStrong">cat &lt;&lt;- ENDIT</span>
       <span class="docEmphStrong">1) unix</span>
       <span class="docEmphStrong">2) xterm</span>
       <span class="docEmphStrong">3) sun</span>
2   <span class="docEmphStrong">ENDIT</span>
3   read choice
4   <span class="docEmphStrong">case &quot;$choice&quot; in</span>
5   <span class="docEmphStrong">1)</span>  TERM=unix
        export TERM
        ;;
    <span class="docEmphStrong">2)</span>  TERM=xterm
        export TERM
        ;;
6   <span class="docEmphStrong">3)</span>  TERM=sun
        export TERM
        ;;
7   <span class="docEmphStrong">esac</span>
8   echo &quot;TERM is $TERM.&quot;

(The Output)
$ <span class="docEmphStrong">. .bash_profile</span>
    <span class="docEmphasis">Select a terminal type:</span>
    <span class="docEmphasis">1) unix</span>
    <span class="docEmphasis">2) xterm</span>
    <span class="docEmphasis">3) sun</span>
    <span class="docEmphBoldItalic">2                &lt;--</span> <span class="docEmphasis">User input</span>
    <span class="docEmphasis">TERM is xterm.</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If this segment of script is put in the
      <span class="docEmphasis">.bash_profile,</span> when you log on, you will
      be given a chance to select the proper terminal type. The
      <span class="docEmphasis">here</span> <span class="docEmphasis">document</span>
      is used to display a menu of choices.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user-defined <span class="docEmphasis">ENDIT</span>
      terminator marks the end of the <span class="docEmphasis">here</span>
      <span class="docEmphasis">document.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">read</span> command
      stores the user input in the variable <span class="docEmphasis">TERM.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">case</span> command
      evaluates the variable <span class="docEmphasis">TERM</span> and compares
      that value with one of the values preceding the closing parenthesis:
      <span class="docEmphasis">1, 2,</span> or <span class="docEmphasis">*.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The first value tested is <span class="docEmphasis">1.</span>
      If there is a match, the terminal is set to a <span class="docEmphasis">
      unix.</span> The <span class="docEmphasis">TERM</span> variable is
      exported so that subshells will inherit it.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A default value is not required. The
      <span class="docEmphasis">TERM</span> variable is normally assigned in
      <span class="docEmphasis">/etc/profile</span> at login time. If the choice
      is <span class="docEmphasis">3,</span> the terminal is set to a
      <span class="docEmphasis">sun.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">esac</span> terminates
      the <span class="docEmphasis">case</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After the <span class="docEmphasis">case</span> command
      has finished, this line is executed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch12lev1sec6">12.6 Looping Commands</h3>
<p class="docText">Looping commands are used to execute a command or group of
commands a set number of times or until a certain condition is met. The
<span class="docEmphasis">bash</span> shell has three types of loops: the
<span class="docEmphasis">for</span> loop, the <span class="docEmphasis">while</span>
loop, and the <span class="docEmphasis">until</span> loop.</p>
<h4 class="docSection2Title" id="ch12lev2sec16">12.6.1 The <span class="docEmphasis">for</span>
Command</h4>
<p class="docText">The <span class="docEmphasis">for</span> looping command is
used to execute commands a finite number of times on a list of items. For
example, you might use this loop to execute the same commands on a list of files
or usernames. The <span class="docEmphasis">for</span> command is followed by a
user-defined variable, the keyword <span class="docEmphasis">in,</span> and a
list of words. The first time in the loop, the first word from the wordlist is
assigned to the variable, and then shifted off the list. Once the word is
assigned to the variable, the body of the loop is entered, and commands between
the <span class="docEmphasis">do</span> and <span class="docEmphasis">done</span>
keywords are executed. The next time around the loop, the second word is
assigned to the variable, and so on. The body of the loop starts at the
<span class="docEmphasis">do</span> keyword and ends at the
<span class="docEmphasis">done</span> keyword. When all of the words in the list
have been shifted off, the loop ends and program control continues after the
<span class="docEmphasis">done</span> keyword.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>for variable in word_list
do
   command(s)
done
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list32" class="docExampleTitle">Example 12.32 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: forloop</span>
1   <span class="docEmphStrong">for pal in Tom Dick Harry Joe</span>
2   <span class="docEmphStrong">do</span>
3       echo &quot;Hi $pal&quot;
4   <span class="docEmphStrong">done</span>
5   echo &quot;Out of loop&quot;

(The Output)
$ <span class="docEmphStrong">forloop</span>
<span class="docEmphasis">Hi Tom</span>
<span class="docEmphasis">Hi Dick</span>
<span class="docEmphasis">Hi Harry</span>
<span class="docEmphasis">Hi Joe</span>
<span class="docEmphasis">Out of loop</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This <span class="docEmphasis">for</span> loop will
      iterate through the list of names, <span class="docEmphasis">Tom, Dick,
      Harry,</span> and <span class="docEmphasis">Joe,</span> shifting each one
      off (to the left and assigning its value to the user-defined variable,
      <span class="docEmphasis">pal</span>) after it is used. As soon as all of
      the words are shifted and the wordlist is empty, the loop ends and
      execution starts after the <span class="docEmphasis">done</span> keyword.
      The first time in the loop, the variable <span class="docEmphasis">pal</span>
      will be assigned the word <span class="docEmphasis">Tom.</span> The second
      time through the loop, <span class="docEmphasis">pal</span> will be
      assigned <span class="docEmphasis">Dick,</span> the next time
      <span class="docEmphasis">pal</span> will be assigned
      <span class="docEmphasis">Harry,</span> and the last time
      <span class="docEmphasis">pal</span> will be assigned
      <span class="docEmphasis">Joe.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">do</span> keyword is
      required after the wordlist. If it is used on the same line, the list must
      be terminated with a semicolon. Example:</p>
      <pre>for pal in Tom Dick Harry Joe; do
</pre>
      </span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is the body of the loop. After
      <span class="docEmphasis">Tom</span> is assigned to the variable
      <span class="docEmphasis">pal,</span> the commands in the body of the loop
      (i.e., all commands between the <span class="docEmphasis">do</span> and
      <span class="docEmphasis">done</span> keywords) are executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> keyword ends
      the loop. Once the last word in the list (<span class="docEmphasis">Joe</span>)
      has been assigned and shifted off, the loop exits, and execution starts at
      line 2.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Control resumes here when the loop exits.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list33" class="docExampleTitle">Example 12.33 </h5>
<pre>(The Command Line)
1   $ <span class="docEmphStrong">cat mylist</span>
    <span class="docEmphasis">tom</span>
    <span class="docEmphasis">patty</span>
    <span class="docEmphasis">ann</span>
    <span class="docEmphasis">jake</span>

(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: mailer</span>
2   <span class="docEmphStrong">for person in $(cat mylist)</span>
    <span class="docEmphStrong">do</span>
3      mail $person &lt; letter
       echo $person was sent a letter.
4   <span class="docEmphStrong">done</span>
5   echo &quot;The letter has been sent.&quot;
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The contents of a file called <span class="docEmphasis">
      mylist</span> are displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Command substitution is performed and the contents of
      <span class="docEmphasis">mylist</span> becomes the wordlist. The first
      time in the loop, <span class="docEmphasis">tom</span> is assigned to the
      variable <span class="docEmphasis">person,</span> then it is shifted off
      to be replaced with <span class="docEmphasis">patty,</span> and so forth.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">In the body of the loop, each user is mailed a copy of
      a file called <span class="docEmphasis">letter.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> keyword marks
      the end of this loop iteration.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When all of the users in the list have been sent mail
      and the loop has exited, this line is executed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list34" class="docExampleTitle">Example 12.34 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: backup</span>
    <span class="docEmphasis"># Purpose: Create backup files and store</span>
    <span class="docEmphasis"># them in a backup directory.</span>
    <span class="docEmphasis">#</span>
1   dir=/home/jody/ellie/backupscripts
2   <span class="docEmphStrong">for file in memo[1-5]</span>
    <span class="docEmphStrong">do</span>
3      if [ -f $file ]
       then
            cp $file $dir/$file.bak
            echo &quot;$file is backed up in $dir&quot;
       fi
4   <span class="docEmphStrong">done</span>

(The Output)
<span class="docEmphasis">memo1 is backed up in /home/jody/ellie/backupscripts</span>
<span class="docEmphasis">memo2 is backed up in /home/jody/ellie/backupscripts</span>
<span class="docEmphasis">memo3 is backed up in /home/jody/ellie/backupscripts</span>
<span class="docEmphasis">memo4 is backed up in /home/jody/ellie/backupscripts</span>
<span class="docEmphasis">memo5 is backed up in /home/jody/ellie/backupscripts</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">dir</span> is
      assigned the directory where the backup scripts are to be stored.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The wordlist will consist of all files in the current
      working directory with names starting with <span class="docEmphasis">memo</span>
      and ending with numbers between <span class="docEmphasis">1</span> and
      <span class="docEmphasis">5.</span> Each filename will be assigned, one at
      time, to the variable <span class="docEmphasis">file</span> for each
      iteration of the loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When the body of the loop is entered, the file will be
      tested to make sure it exists and is a real file. If so, it will be copied
      into the directory <span class="docEmphasis">/home/jody/ellie/backupscripts</span>
      with the <span class="docEmphasis">.bak</span> extension appended to its
      name.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> marks the end
      of the loop.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">$*</span>
and <span class="docEmphasis">$@</span> Variables in Wordlists.</span> When
expanded, the <span class="docEmphasis">$*</span> and <span class="docEmphasis">
$@</span> are the same unless enclosed in double quotes.
<span class="docEmphasis">$*</span> evaluates to one string, whereas
<span class="docEmphasis">$@</span> evaluates to a list of separate words.</p>
<h5 id="ch12list35" class="docExampleTitle">Example 12.35 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: greet</span>
1   <span class="docEmphStrong">for name in $*</span>        <span class="docEmphasis"># same as for name in $@</span>
2   <span class="docEmphStrong">do</span>
       echo Hi $name
3   <span class="docEmphStrong">done</span>
(The Command Line)
$ <span class="docEmphStrong">greet Dee Bert Lizzy Tommy</span>
<span class="docEmphasis">Hi Dee</span>
<span class="docEmphasis">Hi Bert</span>
<span class="docEmphasis">Hi Lizzy</span>
<span class="docEmphasis">Hi Tommy</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$*</span> and
      <span class="docEmphasis">$@</span> expand to a list of all the positional
      parameters, in this case, the arguments passed in from the command line:
      <span class="docEmphasis">Dee,</span> <span class="docEmphasis">Bert,</span>
      <span class="docEmphasis">Lizzy,</span> and <span class="docEmphasis">
      Tommy.</span> Each name in the list will be assigned, in turn, to the
      variable <span class="docEmphasis">name</span> in the
      <span class="docEmphasis">for</span> loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The commands in the body of the loop are executed until
      the list is empty.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> keyword marks
      the end of the loop body.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list36" class="docExampleTitle">Example 12.36 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: permx</span>

1   <span class="docEmphStrong">for file</span>         <span class="docEmphasis"># Empty wordlist</span>
    <span class="docEmphStrong">do</span>

2     if [ -f $file -a ! -x $file ] or if [[ -f $file &amp;&amp; ! -x $file ]]<sup class="docFootnote"><a class="docLink" href="#ch12fn13">[a]</a></sup>
      then

3          chmod +x $file
           echo $file now has execute permission
      fi
    <span class="docEmphStrong">done</span>

(The Command Line)
4   $ <span class="docEmphStrong">permx *</span>
    <span class="docEmphasis">addon now has execute permission</span>
    <span class="docEmphasis">checkon now has execute permission</span>

    <span class="docEmphasis">doit now has execute permission</span>
</pre>
<blockquote>
  <p class="docFootnote"><sup><a name="ch12fn13">[a]</a></sup>
  <span class="docEmphasis">Bash</span> 2.x only.</p>
</blockquote>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">for</span> loop is not
      provided with a wordlist, it iterates through the positional parameters.
      This is the same as <span class="docEmphasis">for file</span> in
      <span class="docEmphasis">$*.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The filenames are coming in from the command line. The
      shell expands the asterisk (*) to all filenames in the current working
      directory. If the file is a plain file and does not have execute
      permission, line 3 is executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Execute permission is added for each file being
      processed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">At the command line, the asterisk will be evaluated by
      the shell as a wildcard and all files in the current directory will be
      replaced for the *. The files will be passed as arguments to the
      <span class="docEmphasis">permx</span> script.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec17">12.6.2 The <span class="docEmphasis">while</span>
Command</h4>
<p class="docText">The <span class="docEmphasis">while</span> command evaluates
the command following it and, if its exit status is zero, the commands in the
body of the loop (commands between <span class="docEmphasis">do</span> and
<span class="docEmphasis">done</span>) are executed. When the
<span class="docEmphasis">done</span> keyword is reached, control is returned to
the top of the loop and the <span class="docEmphasis">while</span> command
checks the exit status of the command again. Until the exit status of the
command being evaluated by the <span class="docEmphasis">while</span> becomes
nonzero, the loop continues. When the exit status reaches nonzero, program
execution starts after the <span class="docEmphasis">done</span> keyword.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>while command
do
   command(s)
done
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list37" class="docExampleTitle">Example 12.37 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: num</span>
1   <span class="docEmphStrong">num=0</span>      <span class="docEmphasis"># Initialize num</span>
2   <span class="docEmphStrong">while (( $num</span> &lt; <span class="docEmphStrong">10 ))</span><sup class="docFootnote"><a class="docLink" href="#ch12fn14">[a]</a></sup>  <span class="docEmphasis"># or</span>  while [ num -lt 10 ]
    <span class="docEmphStrong">do</span>
       echo  -n &quot;$num &quot;
3      <span class="docEmphStrong">let num+=1</span>           <span class="docEmphasis">#</span> <span class="docEmphasis">Increment num</span>
    <span class="docEmphStrong">done</span>
4   echo -e &quot;\nAfter loop exits, continue running here&quot;

(The Output)
    <span class="docEmphasis">0 1 2 3 4 5 6 7 8 9</span>
4   <span class="docEmphasis">After loop exits, continue running here</span>
</pre>
<blockquote>
  <p class="docFootnote"><sup><a name="ch12fn14">[a]</a></sup> Versions of
  <span class="docEmphasis">bash</span> 2.x use this form.</p>
</blockquote>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is the initialization step. The variable
      <span class="docEmphasis">num</span> is assigned <span class="docEmphasis">
      0.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> command is
      followed by the <span class="docEmphasis">let</span> command. The
      <span class="docEmphasis">let</span> command evaluates the arithmetic
      expression, returning an exit status of <span class="docEmphasis">0</span>
      (true) if the condition is true; i.e., if the value of
      <span class="docEmphasis">num</span> is less than
      <span class="docEmphasis">10,</span> the body of the loop is entered.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">In the body of the loop, the value of
      <span class="docEmphasis">num</span> is incremented by one. If the value
      of <span class="docEmphasis">num</span> never changes, the loop would
      iterate infinitely or until the process is killed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After the loop exits, the <span class="docEmphasis">
      echo</span> command (with the <span class="docEmphasis">–e</span> option)
      prints a newline and the string.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list38" class="docExampleTitle">Example 12.38 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: quiz</span>
1   echo &quot;Who was the 2nd U.S. president to be impeached?&quot;
    read answer
2   <span class="docEmphStrong">while [[ &quot;$answer&quot; != &quot;Bill Clinton&quot; ]]</span>
3   <span class="docEmphStrong">do</span>
         echo &quot;Wrong try again!&quot;
4        <span class="docEmphStrong">read answer</span>
5   <span class="docEmphStrong">done</span>
6   echo You got it!

(The Output)
$ <span class="docEmphStrong">quiz</span>
<span class="docEmphasis">Who was the 2nd U.S. president to be impeached?</span> <span class="docEmphBoldItalic">Ronald Reagan</span>
<span class="docEmphasis">Wrong try again!</span>
<span class="docEmphasis">Who was the 2nd U.S. president to be impeached?</span>  <span class="docEmphBoldItalic">I give up</span>
<span class="docEmphasis">Wrong try again!</span>
<span class="docEmphasis">Who was the 2nd U.S. president to be impeached?</span>  <span class="docEmphBoldItalic">Bill Clinton</span>
<span class="docEmphasis">You got it!</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">echo</span> command
      prompts the user, <span class="docEmphasis">Who was the 2nd U.S. president
      to be impeached?</span> The <span class="docEmphasis">read</span> command
      waits for input from the user. The input will be stored in the variable
      <span class="docEmphasis">answer.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> loop is
      entered and the <span class="docEmphasis">test</span> command, the
      bracket, tests the expression. If the variable <span class="docEmphasis">
      answer</span> does not exactly equal the string <span class="docEmphasis">
      Bill Clinton,</span> the body of the loop is entered and commands between
      the <span class="docEmphasis">do</span> and <span class="docEmphasis">done</span>
      are executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">do</span> keyword is the
      start of the loop body.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked to re-enter input.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> keyword marks
      the end of the loop body. Control is returned to the top of the
      <span class="docEmphasis">while</span> loop, and the expression is tested
      again. As long as <span class="docEmphasis">answer</span> does not
      evaluate to <span class="docEmphasis">Bill Clinton,</span> the loop will
      continue to iterate. When the user enters <span class="docEmphasis">Bill
      Clinton,</span> the loop ends. Program control goes to line 6.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When the body of the loop ends, control starts here.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list39" class="docExampleTitle">Example 12.39 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat sayit</span>
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: sayit</span>
    echo  Type q to quit.
    go=start
1   <span class="docEmphStrong">while [ -n &quot;$go&quot; ]</span>   <span class="docEmphasis"># Make sure to double quote the variable</span>
    <span class="docEmphStrong">do</span>
2      echo -n I love you.
3      read word
4      <span class="docEmphStrong">if</span> <span class="docEmphStrong">[[ $word == [Qq] ]]</span>
       then         <span class="docEmphasis"># [ &quot;$word&quot; = q -o &quot;$word&quot; = Q ]  Old style</span>
           echo &quot;I'll always love you!&quot;
           <span class="docEmphStrong">go=</span>
       fi
    <span class="docEmphStrong">done</span>

(The Output)
$ <span class="docEmphStrong">sayit</span>
<span class="docEmphasis">Type q to quit.</span>
<span class="docEmphasis">I love you.         &lt;-- When user presses Enter, the program continues</span>
<span class="docEmphasis">I love you.</span>
<span class="docEmphasis">I love you</span>
<span class="docEmphasis">I love you.</span>
<span class="docEmphasis">I love you.</span><span class="docEmphStrong">q</span>
<span class="docEmphasis">I'll always love you!</span>
$
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td><span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The command after the <span class="docEmphasis">while</span>
      is executed and its exit status tested. The <span class="docEmphasis">–n</span>
      option to the <span class="docEmphasis">test</span> command tests for a
      non-null string. Because <span class="docEmphasis">go</span> initially has
      a value, the test is successful, producing a zero exit status. If the
      variable <span class="docEmphasis">go</span> is not enclosed in double
      quotes and the variable is null, the <span class="docEmphasis">test</span>
      command would complain</p>
      <pre>go: test: argument expected
</pre>
      </span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The loop is entered. The string
      <span class="docEmphasis">I love you</span> is echoed to the screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">read</span> command waits
      for user input.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The expresson is tested. If the user enters a
      <span class="docEmphasis">q</span> or <span class="docEmphasis">Q,</span>
      the string <span class="docEmphasis">I'll always love you!</span> is
      displayed, and the variable <span class="docEmphasis">go</span> is set to
      null. When the <span class="docEmphasis">while</span> loop is re-entered,
      the test is unsuccessful because the variable is null. The loop
      terminates. Control goes to the line after the <span class="docEmphasis">
      done</span> statement. In this example, the script will terminate because
      there are no more lines to execute.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec18">12.6.3 The <span class="docEmphasis">until</span>
Command</h4>
<p class="docText">The <span class="docEmphasis">until</span> command is used
like the <span class="docEmphasis">while</span> command, but executes the loop
statements only if the command after <span class="docEmphasis">until</span>
fails, i.e., if the command returns an exit status of nonzero. When the
<span class="docEmphasis">done</span> keyword is reached, control is returned to
the top of the loop and the <span class="docEmphasis">until</span> command
checks the exit status of the command again. Until the exit status of the
command being evaluated by <span class="docEmphasis">until</span> becomes zero,
the loop continues. When the exit status reaches zero, the loop exits, and
program execution starts after the <span class="docEmphasis">done</span>
keyword.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>until command
do
   command(s)
done
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list40" class="docExampleTitle">Example 12.40 </h5>
<pre>    #!/bin/bash
1   <span class="docEmphStrong">until who | grep linda</span>
2   <span class="docEmphStrong">do</span>
       sleep 5
3   <span class="docEmphStrong">done</span>
    talk linda@dragonwings
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">until</span> loop tests
      the exit status of the last command in the pipeline,
      <span class="docEmphasis">grep.</span> The <span class="docEmphasis">who</span>
      command lists who is logged on this machine and pipes its output to
      <span class="docEmphasis">grep.</span> The <span class="docEmphasis">grep</span>
      command will return a zero exit status (success) only when it finds user
      <span class="docEmphasis">linda.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If user <span class="docEmphasis">linda</span> has not
      logged on, the body of the loop is entered and the program sleeps for five
      seconds.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When <span class="docEmphasis">linda</span> logs on,
      the exit status of the <span class="docEmphasis">grep</span> command will
      be zero and control will go to the statements following the
      <span class="docEmphasis">done</span> keyword.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list41" class="docExampleTitle">Example 12.41 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat hour</span>
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: hour</span>
1   <span class="docEmphStrong">let</span> <span class="docEmphStrong">hour=0</span>
2   until <span class="docEmphStrong">(( hour &gt; 24 ))</span><sup class="docFootnote"><a class="docLink" href="#ch12fn15">[a]</a></sup> # <span class="docEmphasis">or</span> [ $hour -gt 24 ]
    <span class="docEmphStrong">do</span>
3      case &quot;$hour&quot; in
       [0-9]|1[0-1])   echo &quot;Good morning!&quot;
            ;;
       12) echo &quot;Lunch time.&quot;

           ;;
       1[3-7]) echo &quot;Siesta time.&quot;
           ;;
       *)  echo &quot;Good night.&quot;
           ;;
       esac
4      <span class="docEmphStrong">let hour+=1</span>    <span class="docEmphasis"># Don't forget to increment the hour</span>
5   <span class="docEmphStrong">done</span>

(The Output)
$ <span class="docEmphStrong">hour</span>
<span class="docEmphasis">Good morning!</span>
<span class="docEmphasis">Good morning</span>
    <span class="docEmphasis">...</span>
<span class="docEmphasis">Lunch time.</span>
<span class="docEmphasis">Siesta time.</span>
    <span class="docEmphasis">...</span>
<span class="docEmphasis">Good night.</span>
    <span class="docEmphasis">...</span>
</pre>
<blockquote>
  <p class="docFootnote"><sup><a name="ch12fn15">[a]</a></sup> Versions of
  <span class="docEmphasis">bash</span> 2.x use this form.</p>
</blockquote>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable <span class="docEmphasis">hour</span> is
      initialized to <span class="docEmphasis">0.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">let</span> command tests
      the arithmetic expression to test for an hour greater than or equal to
      <span class="docEmphasis">24.</span> If the hour is not greater than or
      equal to <span class="docEmphasis">24,</span> the body of the loop is
      entered. The <span class="docEmphasis">until</span> loop is entered if the
      command following it returns a nonzero exit status. Until the condition is
      true, the loop continues to iterate.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">case</span> command
      evaluates the <span class="docEmphasis">hour</span> variable and tests
      each of the <span class="docEmphasis">case</span> statements for a match.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">hour</span> variable is
      incremented with the <span class="docEmphasis">let</span> command before
      control returns to the top of the loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> command marks
      the end of the loop body.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec19">12.6.4 The <span class="docEmphasis">select</span>
Command and Menus</h4>
<p class="docText">The <span class="docEmphasis">here document</span> is an easy
method for creating menus, but <span class="docEmphasis">bash</span> introduces
another looping mechanism, called the <span class="docEmphasis">select</span>
loop, used primarily for creating menus. A menu of numerically listed items is
displayed to standard error. The <span class="docEmphasis">PS3</span> prompt is
used to prompt the user for input; by default, <span class="docEmphasis">PS3</span>
is #?. After the <span class="docEmphasis">PS3</span> prompt is displayed, the
shell waits for user input. The input should be one of the numbers in the menu
list. The input is stored in the special shell <span class="docEmphasis">REPLY</span>
variable. The number in the <span class="docEmphasis">REPLY</span> variable is
associated with the string to the right of the parentheses in the list of
selections.</p>
<p class="docText">The <span class="docEmphasis">case</span> command is used
with the <span class="docEmphasis">select</span> command to allow the user to
make a selection from the menu and, based on that selection, execute commands.
The <span class="docEmphasis">LINES</span> and <span class="docEmphasis">COLUMNS</span>
variables can be used to determine the layout of the menu items displayed on the
terminal. (These variables are built in to versions of <span class="docEmphasis">
bash</span> 2.x, but are not built in to earlier versions; if they have not been
defined, you can define and export them in the <span class="docEmphasis">.bash_profile.</span>)
The output is displayed to standard error, each item preceded by a number and
closing parenthesis, and the <span class="docEmphasis">PS3</span> prompt is
displayed at the bottom of the menu. Because the <span class="docEmphasis">
select</span> command is a looping command, it is important to remember to use
either the <span class="docEmphasis">break</span> command to get out of the
loop, or the <span class="docEmphasis">exit</span> command to exit the script.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>select var in wordlist
do
   command(s)
done
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list42" class="docExampleTitle">Example 12.42 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis">#</span> <span class="docEmphasis">Scriptname: runit</span>
1   <span class="docEmphStrong">PS3=&quot;Select a program to execute: &quot;</span>
2   <span class="docEmphStrong">select program  in 'ls -F' pwd date</span>
3   <span class="docEmphStrong">do</span>
4       <span class="docEmphStrong">$program</span>
5   <span class="docEmphStrong">done</span>

(The Command Line)
<span class="docEmphBoldItalic">Select a program to execute: 2</span>
<span class="docEmphasis">1) ls -F</span>
<span class="docEmphasis">2) pwd</span>
<span class="docEmphasis">3) date</span>
<span class="docEmphasis">/home/ellie</span>
<span class="docEmphBoldItalic">Select a program to execute: 1</span>
<span class="docEmphasis">1) ls -F</span>
<span class="docEmphasis">2) pwd</span>
<span class="docEmphasis">3) date</span>
<span class="docEmphasis">12abcrty abc12  doit* progs/  xyz</span>
<span class="docEmphBoldItalic">Select a program to execute: 3</span>
<span class="docEmphasis">1) ls -F</span>
<span class="docEmphasis">2) pwd</span>
<span class="docEmphasis">3) date</span>
<span class="docEmphasis">Sun Mar 12 13:28:25 PST 2001</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">PS3</span> prompt is
      assigned the string that will appear below the menu that the
      <span class="docEmphasis">select</span> loop displays. This prompt is
      <span class="docEmphasis">$#</span> by default and is sent to standard
      error, the screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">select</span> loop
      consists of a variable called <span class="docEmphasis">program</span> and
      the three-word list that will be displayed in the menu:
      <span class="docEmphasis">ls –F,</span> <span class="docEmphasis">pwd,</span>
      and <span class="docEmphasis">date.</span> The words in this list are UNIX
      commands, but they could be any words, e.g., <span class="docEmphasis">
      red, green, yellow,</span> or <span class="docEmphasis">cheese, bread,
      milk,</span> <span class="docEmphasis">crackers.</span> If the word has a
      space, it must be quoted; e.g., <tt>'</tt><span class="docEmphasis">ls –F</span><tt>'</tt></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">do</span> keyword starts
      the body of the <span class="docEmphasis">select</span> loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When the user selects numbers in the menu, that number
      will be equated with the word value to the right of the number after the
      parentheses. For example, if he selects number 2, that is associated with
      <span class="docEmphasis">pwd</span> and <span class="docEmphasis">pwd</span>
      is stored in the <span class="docEmphasis">program</span> variable.
      <span class="docEmphasis">$program</span> evaluates to the executable
      command, <span class="docEmphasis">pwd;</span> the command is executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> keyword marks
      the end of the body of statements in the <span class="docEmphasis">select</span>
      loop. Control will return to the top of the loop. This loop will continue
      to execute until the user presses ^C.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list43" class="docExampleTitle">Example 12.43 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis">#</span> Scriptname name: goodboys
1   <span class="docEmphStrong">PS3=&quot;Please choose one of the three boys : &quot;</span>
2   <span class="docEmphStrong">select choice in tom dan guy</span>
3   <span class="docEmphStrong">do</span>
4      case $choice in
       tom)
          echo Tom is a cool dude!
5         <span class="docEmphStrong">break;;</span>           <span class="docEmphasis"># break out of the select loop</span>
6      dan | guy )
          echo Dan and Guy are both wonderful.
          break;;
       *)
7         <span class="docEmphStrong">echo &quot;$REPLY is not one of your choices&quot; 1&gt;&amp;2</span>
          echo &quot;Try again.&quot;
          ;;
8      esac
9   <span class="docEmphStrong">done</span>

(The Command Line)
$ <span class="docEmphStrong">goodboys</span>
<span class="docEmphasis">1) tom</span>
<span class="docEmphasis">2) dan</span>
<span class="docEmphasis">3) guy</span>
<span class="docEmphasis">Please choose one of the three boys :</span> <span class="docEmphBoldItalic">2</span>
<span class="docEmphasis">Dan and Guy are both wonderful.</span>

<span class="docEmphStrong">$ goodboys</span>
<span class="docEmphasis">1) tom</span>
<span class="docEmphasis">2) dan</span>
<span class="docEmphasis">3) guy</span>
<span class="docEmphasis">Please choose one of the three boys :</span> <span class="docEmphBoldItalic">4</span>
<span class="docEmphasis">4 is not one of your choices</span>
<span class="docEmphasis">Try again.</span>
<span class="docEmphasis">Please choose one of the three boys :</span> <span class="docEmphBoldItalic">1</span>
<span class="docEmphasis">Tom is a cool dude!</span>
$
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">PS3</span> prompt will be
      printed above the menu created by the <span class="docEmphasis">select</span>
      loop on line 2.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">select</span> loop is
      entered. It causes the words in its list to be displayed as a numbered
      menu.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The loop body starts here.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The variable choice is assigned the first value on the
      list, after which the value is shifted off the list and the next item will
      be first.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">break</span> statement
      sends loop control after line 9.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If either <span class="docEmphasis">dan</span> or
      <span class="docEmphasis">guy</span> are selected, the following
      <span class="docEmphasis">echo</span> command is executed, followed by the
      <span class="docEmphasis">break</span> command, sending control after line
      9.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The built-in <span class="docEmphasis">REPLY</span>
      variable contains the number of the current list item; i.e.,
      <span class="docEmphasis">1,</span> <span class="docEmphasis">2,</span> or
      <span class="docEmphasis">3.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This marks the end of the <span class="docEmphasis">
      case</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> marks the end
      of the <span class="docEmphasis">select</span> loop.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list44" class="docExampleTitle">Example 12.44 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: ttype</span>
    <span class="docEmphasis"># Purpose: set the terminal type</span>
    <span class="docEmphasis"># Author: Andy Admin</span>
1   <span class="docEmphStrong">COLUMNS=60</span>
2   <span class="docEmphStrong">LINES=1</span>
3   <span class="docEmphStrong">PS3=&quot;Please enter the terminal type: &quot;</span>
4   <span class="docEmphStrong">select choice in wyse50 vt200 xterm sun</span>
    do
5      <span class="docEmphStrong">case $REPLY in</span>
       1)
6          export TERM=$choice
           echo &quot;TERM=$choice&quot;
           break;;            <span class="docEmphasis"># break out of the select loop</span>
       2 | 3 )
           export TERM=$choice

           echo &quot;TERM=$choice&quot;
           break;;
       4)
           export TERM=$choice
           echo &quot;TERM=$choice&quot;
           break;;
       *)
7          echo -e &quot;$REPLY is not a valid choice. Try again\n&quot; 1&gt;&amp;2
8          <span class="docEmphStrong">REPLY=</span>    <span class="docEmphasis"># Causes the menu to be redisplayed</span>
              ;;
       esac
9   <span class="docEmphStrong">done</span>
(The Command Line)
$ <span class="docEmphStrong">ttype</span>
<span class="docEmphBoldItalic">1) wyse50    2) vt200   3) xterm    4) sun</span>
<span class="docEmphasis">Please enter the terminal type :</span> <span class="docEmphBoldItalic">4</span>
<span class="docEmphasis">TERM=sun</span>

<span class="docEmphStrong">$ ttype</span>
<span class="docEmphBoldItalic">1) wyse50    2) vt200   3) xterm    4) sun</span>
<span class="docEmphasis">Please enter the terminal type :</span> <span class="docEmphBoldItalic">3</span>
<span class="docEmphasis">TERM=xterm</span>

<span class="docEmphStrong">$ ttype</span>
<span class="docEmphBoldItalic">1) wyse50    2) vt200   3) xterm    4) sun</span>
<span class="docEmphasis">Please enter the terminal type :</span> <span class="docEmphBoldItalic">7</span>
<span class="docEmphasis">7 is not a valid choice. Try again.</span>

<span class="docEmphBoldItalic">1) wyse50    2) vt200   3) xterm    4) sun</span>
<span class="docEmphasis">Please enter the terminal type:</span> <span class="docEmphBoldItalic">2</span>
<span class="docEmphasis">TERM=vt200</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">COLUMNS</span> variable
      is set to the width of the terminal display in columns for menus created
      with the <span class="docEmphasis">select</span> loop. The default is 80.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">LINES</span> variable
      controls the vertical display of the <span class="docEmphasis">select</span>
      menu on the terminal. The default is 24 lines. When you change the
      <span class="docEmphasis">LINES</span> value to <span class="docEmphasis">
      1,</span> the menu items will be printed on one line, instead of
      vertically as in the last example.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">PS3</span> prompt is set
      and will appear under the menu choices.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">select</span> loop will
      print a menu with four selections: <span class="docEmphasis">wyse50,</span>
      <span class="docEmphasis">vt200,</span> <span class="docEmphasis">xterm,</span>
      and <span class="docEmphasis">sun.</span> The variable
      <span class="docEmphasis">choice</span> will be assigned one of these
      values based on the user's response held in the <span class="docEmphasis">
      REPLY</span> variable. If <span class="docEmphasis">REPLY</span> is 1,
      <span class="docEmphasis">wyse50</span> is assigned to
      <span class="docEmphasis">choice;</span> if <span class="docEmphasis">
      REPLY</span> is 2, <span class="docEmphasis">vt200</span> is assigned to
      <span class="docEmphasis">choice;</span> if <span class="docEmphasis">
      REPLY</span> is 3, <span class="docEmphasis">xterm</span> is assigned to
      <span class="docEmphasis">choice;</span> and if <span class="docEmphasis">
      REPLY</span> is 4, <span class="docEmphasis">sun</span> is assigned to
      <span class="docEmphasis">choice.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">REPLY</span> variable
      evaluates to the user's input selection.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The terminal type is assigned, exported, and printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the user does not enter a number between 1 and 4, he
      or she will be prompted again. Note that the menu does not appear, just
      the <span class="docEmphasis">PS3</span> prompt.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">REPLY</span> variable
      is set to null<span class="docEmphasis">, e.g., REPLY=,</span> the menu
      will be redisplayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The end of the <span class="docEmphasis">select</span>
      loop.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec20">12.6.5 Loop Control</h4>
<p class="docText">If some condition occurs, you may want to break out of a
loop, return to the top of the loop, or provide a way to stop an infinite loop.
The <span class="docEmphasis">bash</span> shell provides loop control commands
to handle these kinds of situations.</p>
<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
shift</span> Command.</span> The <span class="docEmphasis">shift</span> command
shifts the parameter list to the left a specified number of times. The
<span class="docEmphasis">shift</span> command without an argument shifts the
parameter list once to the left. Once the list is shifted, the parameter is
removed permanently. Often, the <span class="docEmphasis">shift</span> command
is used in a <span class="docEmphasis">while</span> loop when iterating through
a list of positional parameters.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>shift [n]
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list45" class="docExampleTitle">Example 12.45 </h5>
<pre>(Without a Loop)
(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: shifter</span>
1   set joe mary tom sam
2   <span class="docEmphStrong">shift</span>
3   echo $*
4   <span class="docEmphStrong">set $(date)</span>
5   echo  $*
6   <span class="docEmphStrong">shift 5</span>
7   echo  $*
8   <span class="docEmphStrong">shift 2</span>

(The Output)
3   <span class="docEmphasis">mary tom sam</span>
5   <span class="docEmphasis">Thu Mar 16 10:00:12 PST 2001</span>
7   <span class="docEmphasis">2001</span>
8   <span class="docEmphBoldItalic">shift: shift count must be &lt;= $#</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command sets
      the positional parameters. <span class="docEmphasis">$1</span> is assigned
      <span class="docEmphasis">joe,</span> <span class="docEmphasis">$2</span>
      is assigned <span class="docEmphasis">mary,</span>
      <span class="docEmphasis">$3</span> is assigned <span class="docEmphasis">
      tom,</span> and <span class="docEmphasis">$4</span> is assigned
      <span class="docEmphasis">sam.</span> <span class="docEmphasis">$*</span>
      represents all of the parameters.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">shift</span> command
      shifts the positional parameters to the left; <span class="docEmphasis">
      joe</span> is shifted off.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The parameter list is printed after the shift.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command resets
      the positional parameters to the output of the UNIX
      <span class="docEmphasis">date</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The new parameter list is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This time the list is shifted <span class="docEmphasis">
      5</span> times to the left.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The new parameter list is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">By attempting to shift more times than there are
      parameters, the shell sends a message to standard error stating that the
      <span class="docEmphasis">shift</span> command cannot shift more off more
      parameters that it has. <span class="docEmphasis">$#</span> is the total
      number of positional parameters. On versions of <span class="docEmphasis">
      bash</span> 2.x, no error message occurs.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list46" class="docExampleTitle">Example 12.46 </h5>
<pre>(With a Loop)
(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Name: doit</span>
    <span class="docEmphasis"># Purpose: shift through command line arguments</span>
    <span class="docEmphasis"># Usage: doit [args]</span>
1    <span class="docEmphStrong">while (( $# &gt; 0 ))</span><sup class="docFootnote"><a class="docLink" href="#ch12fn16">[a]</a></sup>  # <span class="docEmphasis">or</span> [ $# -gt 0 ]
     do
2       <span class="docEmphStrong">echo  $*</span>
3       <span class="docEmphStrong">shift</span>
4    done

(The Command Line)
$ <span class="docEmphStrong">doit a b c d e</span>
<span class="docEmphasis">a b c d e</span>
<span class="docEmphasis">b c d e</span>
<span class="docEmphasis">c d e</span>
<span class="docEmphasis">d e</span>
<span class="docEmphasis">e</span>
</pre>
<blockquote>
  <p class="docFootnote"><sup><a name="ch12fn16">[a]</a></sup> Not implemented
  of versions of <span class="docEmphasis">bash</span> prior to 2.x.</p>
</blockquote>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">let</span> command tests
      the numeric expression. If the number of positional parameters (<span class="docEmphasis">$#</span>)
      is greater than <span class="docEmphasis">0,</span> the body of the loop
      is entered. The positional parameters are coming from the command line as
      arguments. There are five.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All positional parameters are printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The parameter list is shifted once to the left.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The body of the loop ends here; control returns to the
      top of the loop. Each time the loop is entered, the
      <span class="docEmphasis">shift</span> command causes the parameter list
      to be decreased by one. After the first shift, <span class="docEmphasis">
      $#</span> (number of positional parameters) is four. When
      <span class="docEmphasis">$#</span> has been decreased to zero, the loop
      ends.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list47" class="docExampleTitle">Example 12.47 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: dater</span>
    <span class="docEmphasis"># Purpose: set positional parameters with the set command</span>
    <span class="docEmphasis"># and shift through the parameters.</span>

1   <span class="docEmphStrong">set $(date)</span>
2   while <span class="docEmphStrong">(( $# &gt; 0 ))</span> <span class="docEmphasis"># or</span>  [ $# -gt 0 ]  <span class="docEmphasis">Old style</span>
    do
3       echo $1
4       <span class="docEmphStrong">shift</span>
    done

(The Output)
$ <span class="docEmphStrong">dater</span>
<span class="docEmphasis">Wed</span>
<span class="docEmphasis">Mar</span>
<span class="docEmphasis">15</span>
<span class="docEmphasis">19:25:00</span>
<span class="docEmphasis">PST</span>
<span class="docEmphasis">2001</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">set</span> command takes
      the output of the <span class="docEmphasis">date</span> command and
      assigns the output to positional parameters <span class="docEmphasis">$1</span>
      through <span class="docEmphasis">$6.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> command
      tests whether the number of positional parameters (<span class="docEmphasis">$#</span>)
      is greater than <span class="docEmphasis">0.</span> If true, the body of
      the loop is entered.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">echo</span> command
      displays the value of <span class="docEmphasis">$1,</span> the first
      positional parameter.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">shift</span> command
      shifts the parameter list once to the left. Each time through the loop,
      the list is shifted until the list is empty. At that time,
      <span class="docEmphasis">$#</span> will be zero and the loop terminates.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText">The <span class="docEmphasis">break</span> Command. The
built-in <span class="docEmphasis">break</span> command is used to force
immediate exit from a loop, but not from a program. (To leave a program, the
<span class="docEmphasis">exit</span> command is used.) After the
<span class="docEmphasis">break</span> command is executed, control starts after
the <span class="docEmphasis">done</span> keyword. The <span class="docEmphasis">
break</span> command causes an exit from the innermost loop, so if you have
nested loops, the <span class="docEmphasis">break</span> command takes a number
as an argument, allowing you to break out of a specific outer loop. If you are
nested in three loops, the outermost loop is loop number 3, the next nested loop
is loop number 2, and the innermost nested loop is loop number 1. The
<span class="docEmphasis">break</span> is useful for exiting from an infinite
loop.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>break [n]
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list48" class="docExampleTitle">Example 12.48 </h5>
<p class="docText">
<img alt="graphics/12prfig01.gif" src="12prfig01.gif" border="0" width="500" height="191"></p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">true</span> command is a
      UNIX command that always exits with zero status. It is often used to start
      an infinite loop. It is okay to put the <span class="docEmphasis">do</span>
      statement on the same line as the <span class="docEmphasis">while</span>
      command, as long as a semicolon separates them. The body of the loop is
      entered.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked for input. The user's input is
      assigned to the variable <span class="docEmphasis">answer.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If <span class="docEmphasis">$answer</span> evaluates
      to <span class="docEmphasis">Y</span> or <span class="docEmphasis">y,</span>
      control goes to line 4.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">break</span> command is
      executed, the loop is exited, and control goes to line 7. The line
      <span class="docEmphasis">Here we are</span> is printed. Until the user
      answers with a <span class="docEmphasis">Y</span> or
      <span class="docEmphasis">y,</span> the program will continue to ask for
      input. This could go on forever!</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the test fails in line 3, the
      <span class="docEmphasis">else</span> commands are executed. When the body
      of the loop ends at the <span class="docEmphasis">done</span> keyword,
      control starts again at the top of the <span class="docEmphasis">while</span>
      at line 1.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is the end of the loop body.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Control starts here after the <span class="docEmphasis">
      break</span> command is executed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">The <span class="docEmphasis">
continue</span> Command.</span> The <span class="docEmphasis">continue</span>
command returns control to the top of the loop if some condition becomes true.
All commands below the <span class="docEmphasis">continue</span> will be
ignored. If nested within a number of loops, the <span class="docEmphasis">
continue</span> command returns control to the innermost loop. If a number is
given as its argument, control can then be started at the top of any loop. If
you are nested in three loops, the outermost loop is loop number 3, the next
nested loop is loop number 2, and the innermost nested loop is loop number 1.<span id="ENB12-4"><a class="docLink" href="#EN12-4"><sup>[4]</sup></a></span>
</p>


<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>continue [n]
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list49" class="docExampleTitle">Example 12.49 </h5>
<p class="docText">
<img alt="graphics/12prfig02.gif" src="12prfig02.gif" border="0" width="500" height="300"></p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After command substitution, <span class="docEmphasis">
      $(cat mail_list</span>) or <tt>'</tt><span class="docEmphasis">cat
      mail_list</span><tt>'</tt>, the <span class="docEmphasis">for</span> loop
      will iterate through the list of names from the file called
      <span class="docEmphasis">mail_list.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the name matches <span class="docEmphasis">richard,</span>
      the <span class="docEmphasis">continue</span> command is executed and
      control goes back to top of the loop where the loop expression is
      evaluated. Because <span class="docEmphasis">richard</span> has already
      been shifted off the list, the next user, <span class="docEmphasis">
      melanie,</span> will be assigned to the variable <span class="docEmphasis">
      name.</span> Old style: <span class="docEmphasis">if [ &quot;$name&quot; = richard ]
      ; then</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">continue</span> command
      returns control to the top of the loop, skipping any commands in the rest
      of the loop body.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">All users in the list, except <span class="docEmphasis">
      richard,</span> will be mailed a copy of the file
      <span class="docEmphasis">memo.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is the end of the loop body.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Nested Loops and Loop Control.</b> When you are using
nested loops, the <span class="docEmphasis">break</span> and
<span class="docEmphasis">continue</span> commands can be given a numeric,
integer argument so that control can go from the inner loop to an outer loop.</p>
<h5 id="ch12list50" class="docExampleTitle">Example 12.50 </h5>
<p class="docText">
<img alt="graphics/12prfig03.gif" src="12prfig03.gif" border="0" width="500" height="591"></p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The outer <span class="docEmphasis">for</span> loop is
      started. The first time in the loop, <span class="docEmphasis">Jan</span>
      is assigned to <span class="docEmphasis">month.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The inner <span class="docEmphasis">for</span> loop
      starts. The first time in this loop, <span class="docEmphasis">1</span> is
      assigned to <span class="docEmphasis">week.</span> The inner loop iterates
      completely before going back to the outer loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the user enters either an <span class="docEmphasis">
      n</span> or presses Enter, line 4 is executed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">continue</span> command
      with an argument of 2 starts control at the top of the second outermost
      loop. The <span class="docEmphasis">continue</span> without an argument
      returns control to the top of the innermost loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Control is returned to the innermost
      <span class="docEmphasis">for</span> loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This <span class="docEmphasis">done</span> terminates
      the innermost loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This <span class="docEmphasis">done</span> terminates
      the outermost loop.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec21">12.6.6 I/O Redirection and Subshells</h4>
<p class="docText">Input can be piped or redirected to a loop from a file.
Output can also be piped or redirected to a file from a loop. The shell starts a
subshell to handle I/O redirection and pipes. Any variables defined within the
loop will not be known to the rest of the script when the loop terminates.</p>
<p class="docText"><b>Redirecting the Output of the Loop to a File.</b> Output
from a <span class="docEmphasis">bash</span> loop can be sent to a file rather
than to the screen. See <a class="docLink" href="#ch12list51">Example 12.51</a>.</p>
<h5 id="ch12list51" class="docExampleTitle">Example 12.51 </h5>
<pre>(The Command Line)
1   $ <span class="docEmphStrong">cat memo</span>
    <span class="docEmphasis">abc</span>
    <span class="docEmphasis">def</span>
    <span class="docEmphasis">ghi</span>

(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Program name: numberit</span>
    <span class="docEmphasis"># Put line numbers on all lines of memo</span>
2   if let $(( $# &lt;  1 ))
    then
3       echo &quot;Usage: $0 filename &quot; &gt;&amp;2
        exit 1
    fi
4   count=1                      <span class="docEmphasis"># Initialize count</span>
5   <span class="docEmphStrong">cat $1 | while read line</span>
    <span class="docEmphasis"># Input is coming from file provided at command line</span>
    do
6      let $((count == 1)) &amp;&amp; echo &quot;Processing file $1...&quot; &gt; /dev/tty
7      echo -e &quot;$count\t$line&quot;
8      let count+=1
9   <span class="docEmphStrong">done &gt; tmp$$</span>              <span class="docEmphasis"># Output is going to a temporary file</span>
10  mv tmp$$ $1

(The Command Line)
11  $ <span class="docEmphStrong">numberit memo</span>
    <span class="docEmphasis">Processing file memo...</span>

12  $ <span class="docEmphStrong">cat memo</span>
    <span class="docEmphasis">1   abc</span>
    <span class="docEmphasis">2   def</span>
    <span class="docEmphasis">3   ghi</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The contents of file <span class="docEmphasis">memo</span>
      are displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the user did not provide a command line argument
      when running this script, the number of arguments (<span class="docEmphasis">$#</span>)
      will be less than one and the error message appears.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The usage message is sent to <span class="docEmphasis">
      stderr</span> (<span class="docEmphasis">&gt;&amp;2</span>) if the number of
      arguments is less than <span class="docEmphasis">1.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">count</span> variable is
      assigned the value <span class="docEmphasis">1.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The UNIX <span class="docEmphasis">cat</span> command
      displays the contents of the filename stored in <span class="docEmphasis">
      $1,</span> and the output is piped to the <span class="docEmphasis">while</span>
      loop. The <span class="docEmphasis">read</span> command is assigned the
      first line of the file the first time in the loop, the second line of the
      file the next time through the loop, and so forth. The
      <span class="docEmphasis">read</span> command returns a zero exit status
      if it is successful in reading input and one if it fails.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the value of <span class="docEmphasis">count</span>
      is <span class="docEmphasis">1,</span> the <span class="docEmphasis">echo</span>
      command is executed and its output is sent to <span class="docEmphasis">
      /dev/tty,</span> the screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">echo</span> command
      prints the value of <span class="docEmphasis">count,</span> followed by
      the line in the file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">count</span> is
      incremented by one.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The output of this entire loop, each line of the file
      in <span class="docEmphasis">$1,</span> is redirected to the file
      <span class="docEmphasis">tmp$$,</span> with the exception of the first
      line of the file, which is redirected to the terminal,
      <span class="docEmphasis">/dev/tty.</span><sup class="docFootnote"><a class="docLink" href="#ch12fn18">[a]</a></sup></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">tmp</span> file is
      renamed to the filename assigned to <span class="docEmphasis">$1.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program is executed. The file to be processed is
      called <span class="docEmphasis">memo.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The file <span class="docEmphasis">memo</span> is
      displayed after the script has finished, demonstrating that line numbers
      have been prepended to each line.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<blockquote>
  <p class="docFootnote"><sup><a name="ch12fn18">[a]</a></sup>
  <span class="docEmphasis">$$</span> expands to the PID number of the current
  shell. By appending this number to the filename, the filename is made unique.</p>
</blockquote>
<p class="docText"><b>Piping the Output of a Loop to a UNIX Command.</b> Output
can be either piped to another command(s) or redirected to a file.</p>
<h5 id="ch12list52" class="docExampleTitle">Example 12.52 </h5>
<pre>(The Script)
    #!/bin/bash
1   <span class="docEmphStrong">for i in 7 9 2 3 4  5</span>
2   <span class="docEmphStrong">do</span>
       echo  $i
3   <span class="docEmphStrong">done | sort –n</span>

(The Output)
<span class="docEmphasis">2</span>
<span class="docEmphasis">3</span>
<span class="docEmphasis">4</span>
<span class="docEmphasis">5</span>
<span class="docEmphasis">7</span>
<span class="docEmphasis">9</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">for</span> loop iterates
      through a list of unsorted numbers.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">In the body of the loop, the numbers are printed. This
      output will be piped into the UNIX <span class="docEmphasis">sort</span>
      command, a numerical sort.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The pipe is created after the <span class="docEmphasis">
      done</span> keyword. The loop is run in a subshell.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Running Loops in the Background.</b> Loops can be executed
to run in the background. The program can continue without waiting for the loop
to finish processing.</p>
<h5 id="ch12list53" class="docExampleTitle">Example 12.53 </h5>
<pre>(The Script)
    #!/bin/bash
1   <span class="docEmphStrong">for person in bob jim joe sam</span>
    <span class="docEmphStrong">do</span>
2       mail $person &lt; memo
3   <span class="docEmphStrong">done &amp;</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">for</span> loop shifts
      through each of the names in the wordlist: <span class="docEmphasis">bob,
      jim, joe,</span> and <span class="docEmphasis">sam.</span> Each of the
      names is assigned to the variable <span class="docEmphasis">person,</span>
      in turn.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">In the body of the loop, each person is sent the
      contents of the <span class="docEmphasis">memo</span> file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The ampersand at the end of the
      <span class="docEmphasis">done</span> keyword causes the loop to be
      executed in the background. The program will continue to run while the
      loop is executing.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec22">12.6.7 <span class="docEmphasis">IFS</span> and
Loops</h4>
<p class="docText">The shell's internal field separator (<span class="docEmphasis">IFS</span>)
evaluates to spaces, tabs, and the newline character. It is used as a word
(token) separator for commands that parse lists of words, such as
<span class="docEmphasis">read, set,</span> and <span class="docEmphasis">for.</span>
It can be reset by the user if a different separator will be used in a list.
Before changing its value, it is a good idea to save the original value of the
<span class="docEmphasis">IFS</span> in another variable. Then it is easy to
return to its default value, if needed.</p>
<h5 id="ch12list54" class="docExampleTitle">Example 12.54 </h5>
<pre>(The Script )
$ <span class="docEmphStrong">cat runit2</span>
    #/bin/bash
    <span class="docEmphasis"># Script is called runit.</span>
    <span class="docEmphasis"># IFS is the internal field separator and defaults to</span>
    <span class="docEmphasis"># spaces, tabs, and newlines.</span>
    <span class="docEmphasis"># In this script it is changed to a colon.</span>
1   <span class="docEmphStrong">names=Tom:Dick:Harry:John</span>
2   <span class="docEmphStrong">oldifs=&quot;$IFS&quot;</span>           <span class="docEmphasis"># Save the original value of IFS</span>
3   <span class="docEmphStrong">IFS=&quot;:&quot;</span>
4   <span class="docEmphStrong">for persons in $names</span>
    do
5       echo  Hi $persons
    done
6   <span class="docEmphStrong">IFS=&quot;$oldifs&quot;</span>            <span class="docEmphasis"># Reset the IFS to old value</span>
7   <span class="docEmphStrong">set Jill Jane Jolene</span>     <span class="docEmphasis"># Set positional parameters</span>
8   <span class="docEmphStrong">for girl in $*</span>
    do
9       echo Howdy $girl
    done

(The Output)
    $ <span class="docEmphStrong">runit2</span>
5   <span class="docEmphasis">Hi Tom</span>
    <span class="docEmphasis">Hi Dick</span>
    <span class="docEmphasis">Hi Harry</span>
    <span class="docEmphasis">Hi John</span>
9   <span class="docEmphasis">Howdy Jill</span>
    <span class="docEmphasis">Howdy Jane</span>
    <span class="docEmphasis">Howdy Jolene</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">names</span> variable is
      set to the string <span class="docEmphasis">Tom:Dick:Harry:John.</span>
      Each of the words is separated by a colon.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of <span class="docEmphasis">IFS,</span>
      whitespace, is assigned to another variable, <span class="docEmphasis">
      oldifs.</span> Since the value of the <span class="docEmphasis">IFS</span>
      is whitespace, it must be quoted to preserve it.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">IFS</span> is assigned a
      colon. Now the colon is used to separate words.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After variable substitution, the
      <span class="docEmphasis">for</span> loop will iterate through each of the
      names, using the colon as the internal field separator between the words.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Each of the names in the wordlist are displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">IFS</span> is reassigned
      its original value stored in <span class="docEmphasis">oldifs.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The positional parameters are set.
      <span class="docEmphasis">$1</span> is assigned <span class="docEmphasis">
      Jill,</span> <span class="docEmphasis">$2</span> is assigned
      <span class="docEmphasis">Jane,</span> and <span class="docEmphasis">$3</span>
      is assigned <span class="docEmphasis">Jolene.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$*</span> evaluates to all
      the positional parameters, <span class="docEmphasis">Jill, Jane,</span>
      and <span class="docEmphasis">Jolene.</span> The <span class="docEmphasis">
      for</span> loop assigns each of the names to the <span class="docEmphasis">
      girl</span> variable, in turn, through each iteration of the loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Each of the names in the parameter list is displayed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch12lev1sec7">12.7 Functions</h3>
<p class="docText">Functions were introduced to the Bourne shell in AT&amp;T's UNIX
SystemVR2 and have been enhanced in the Bourne Again shell. A function is a name
for a command or group of commands. Functions are used to modularize your
program and make it more efficient. They are executed in context of the current
shell. In other words, a child process is not spawned as it is when running an
executable program such as <span class="docEmphasis">ls.</span> You may even
store functions in another file and load them into your script when you are
ready to use them.</p>
<p class="docText">Here is a review of some of the important rules about using
functions.</p>
<span style="FONT-WEIGHT: bold">
<ol class="docList" type="1">
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">The shell determines whether you are using an alias, a
  function, a built-in command, or an executable program (or script) found on
  the disk. It looks for aliases first, then functions, built-in commands, and
  last, executables.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">A function must be defined before it is used.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">The function runs in the current environment; it shares
  variables with the script that invoked it, and lets you pass arguments by
  assigning them as positional parameters. Local variables can be created within
  a function by using the <span class="docEmphasis">local</span> function.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">If you use the <span class="docEmphasis">exit</span>
  command in a function, you exit the entire script. If you exit the function,
  you return to where the script left off when the function was invoked.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">The <span class="docEmphasis">return</span> statement in a
  function returns the exit status of the last command executed within the
  function or the value of the argument given.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">Functions can be exported to subshells with the
  <span class="docEmphasis">export –f</span> built-in command.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">To list functions and definitions, use the
  <span class="docEmphasis">declare –f</span> command. To list just function
  names, use <span class="docEmphasis">declare –F.</span><span id="ENB12-5"><a class="docLink" href="#EN12-5"><sup>[5]</sup></a></span></p>
  </span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">Traps, like variables, are global within functions. They
  are shared by both the script and the functions invoked in the script. If a
  trap is defined in a function, it is also shared by the script. This could
  have unwanted side effects.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">If functions are stored in another file, they can be loaded
  into the current script with the <span class="docEmphasis">source</span> or
  <span class="docEmphasis">dot</span> command.</span></li>
  <li><span style="FONT-WEIGHT: normal">
  <p class="docList">Functions can be recursive; i.e., they can call themselves.
  There is no limit imposed for the number of recursive calls.</span></li>
</ol>
</span>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>function function_name { commands ; commands; }
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list55" class="docExampleTitle">Example 12.55 </h5>
<pre><span class="docEmphStrong">function dir { echo &quot;Directories: &quot;;ls -l|awk '/^d/ {print $NF}'; }</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">The keyword <span class="docEmphasis">function</span> is
    followed by the name of the function <span class="docEmphasis">dir.</span>
    (Sometimes empty parentheses follow the function name, but they are not
    necessary.) The commands within the curly braces will be executed when
    <span class="docEmphasis">dir</span> is typed. The purpose of the function
    is to list only the subdirectories below the present working directory. The
    spaces surrounding the first curly brace are required.</td>
  </tr>
</table>

<p class="docText"><b>To Unset a Function.</b> To remove a function from memory,
use the <span class="docEmphasis">unset</span> command.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>unset -f function_name
</pre>
    </td>
  </tr>
</table>

<p class="docText"><b>Exporting Functions.</b> Functions may be exported so that
subshells know about them.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>export -f function_name
</pre>
    </td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec23">12.7.1 Function Arguments and the Return Value</h4>
<p class="docText">Because the function is executed within the current shell,
the variables will be known to both the function and the shell. Any changes made
to your environment in the function will also be made to the shell.</p>
<p class="docText"><b>Arguments.</b> Arguments can be passed to functions by
using positional parameters. The positional parameters are private to the
function; that is, arguments to the function will not affect any positional
parameters used outside the function. See <a class="docLink" href="#ch12list56">
Example 12.56</a>.</p>
<p class="docText"><span class="docEmphStrong">The Built-In
<span class="docEmphasis">local</span> Function.</span> To create local
variables that are private to the function and will disappear after the function
exits, use the built-in <span class="docEmphasis">local</span> function. See
<a class="docLink" href="#ch12list57">Example 12.57</a>.</p>
<p class="docText"><span class="docEmphStrong">The Built-In
<span class="docEmphasis">return</span> Function.</span> The
<span class="docEmphasis">return</span> command can be used to exit the function
and return control to the program at the place where the function was invoked.
(Remember, if you use <span class="docEmphasis">exit</span> anywhere in your
script, including within a function, the script terminates.) The return value of
a function is really just the value of the exit status of the last command in
the script, unless you give a specific argument to the <span class="docEmphasis">
return</span> command. If a value is assigned to the <span class="docEmphasis">
return</span> command, that value is stored in the <span class="docEmphasis">?</span>
variable and can hold an integer value between zero and 256. Because the
<span class="docEmphasis">return</span> command is limited to returning only an
integer between zero and 256, you can use command substitution to capture the
output of a function. Place the entire function in parentheses preceded by a
<span class="docEmphasis">$,</span> e.g., <span class="docEmphasis">$(function_name),</span>
or traditional backquotes to capture and assign the output to a variable just as
you would if getting the output of a UNIX command.</p>
<h5 id="ch12list56" class="docExampleTitle">Example 12.56 </h5>
<pre>(Passing Arguments)
(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: checker</span>
    <span class="docEmphasis"># Purpose: Demonstrate function and arguments</span>

1   function Usage { echo &quot;error: $*&quot; 2&gt;&amp;1; exit 1; }

2   if (( $# != 2 ))
    then
3       <span class="docEmphStrong">Usage &quot;$0: requires two arguments&quot;</span>
    fi
4   if [[ ! ( -r $1 &amp;&amp; -w $1 ) ]]
    then
5       <span class="docEmphStrong">Usage &quot;$1: not readable and writeable&quot;</span>
    fi


6   echo The arguments are: $*
 &lt;  Program continues here &gt;


(Output)
$ <span class="docEmphStrong">checker</span>
<span class="docEmphasis">error: checker: requires two arguments</span>

$ <span class="docEmphStrong">checker file1 file2</span>
<span class="docEmphasis">error: file1: not readable and writeable</span>

$ <span class="docEmphStrong">checker filex file2</span>
<span class="docEmphasis">The arguments are filex file2</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <blockquote>

      <p class="docList">1. The function called <span class="docEmphasis">Usage</span>
      is defined. It will be used to send an error message to standard error
      (the screen). Its arguments consist of any string of characters sent when
      the function is called. The arguments are stored in
      <span class="docEmphasis">$*,</span> the special variable that contains
      all positional parameters. Within a function, positional parameters are
      local and have no effect on those positional parameters used outside the
      function.</p>


      <p class="docList">2. If the number of arguments begin passed into the
      script from the command line does not equal 2, the program branches to
      line 3.</p>


      <p class="docList">3. When the <span class="docEmphasis">Usage</span>
      function is called, the string <span class="docEmphasis">$0: requires two
      arguments</span> is passed to the function and stored in the
      <span class="docEmphasis">$*</span> varable. The <span class="docEmphasis">
      echo</span> statement will then send the message to standard error and the
      script will exit with an exit status of 1 to indicate that something went
      wrong.<sup class="docFootnote"><a class="docLink" href="#ch12fn20">[a]</a></sup></p>


      <p class="docList">4,5. If the first argument coming into the program from
      the command line is not the name of a readable and writeable file, the
      <span class="docEmphasis">Usage</span> function will be called with
      <span class="docEmphasis">$1: not readable and writeable</span> as its
      argument.</p>


      <p class="docList">6. The arguments coming into the script from the
      command line are stored in <span class="docEmphasis">$*.</span> This has
      no effect on the <span class="docEmphasis">$*</span> in the function.</p>

    </blockquote>
    </td>
  </tr>
</table>

<blockquote>
  <p class="docFootnote"><sup><a name="ch12fn20">[a]</a></sup> With the old
  <span class="docEmphasis">test</span> form, the expression is written <tt>if [
  ! \( -r $1 -a -w $1 \) ]</tt>.</p>
</blockquote>
<h5 id="ch12list57" class="docExampleTitle">Example 12.57 </h5>
<pre>(Using the return Command)
(The Script)
$ <span class="docEmphStrong">cat do_increment</span>
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: do_increment</span>
1   <span class="docEmphStrong">increment ()</span>  <span class="docEmphStrong">{</span>
2      <span class="docEmphStrong">local sum;</span>     <span class="docEmphasis"># sum is known only in this function</span>
3      let &quot;sum=$1 + 1&quot;
4      <span class="docEmphStrong">return $sum</span>    <span class="docEmphasis"># Return the value of sum to the script.</span>
    <span class="docEmphStrong">}</span>
5   echo  –n &quot;The sum is &quot;
6   <span class="docEmphStrong">increment</span> <span class="docEmphStrong">5</span>    <span class="docEmphasis">#</span> <span class="docEmphasis">Call function increment; pass 5 as a</span>
                   <span class="docEmphasis"># parameter. 5 becomes $1 for the increment</span>
                   <span class="docEmphasis"># function.</span>
<span class="docEmphStrong">7   echo $?</span>        <span class="docEmphasis"># The return value is stored in $?</span>
8   echo  $sum     <span class="docEmphasis"># The variable &quot;sum&quot; is not known here</span>

(The Output)
    $ <span class="docEmphStrong">do_increment</span>
4,6 <span class="docEmphasis">The sum is 6</span>
8
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The function called <span class="docEmphasis">increment</span>
      is defined.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The built-in <span class="docEmphasis">local</span>
      function makes variable <span class="docEmphasis">sum</span> local
      (private) to this function. It will not exist outside the function. When
      the function exits, it will be removed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When the function is called, the value of the first
      argument, <span class="docEmphasis">$1,</span> will be incremented by one
      and the result assigned to <span class="docEmphasis">sum.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">return</span> built-in
      command, when given an argument, returns to the main script after the line
      where the function was invoked. It stores its argument in the
      <span class="docEmphasis">?</span> variable.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The string is echoed to the screen.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">increment</span> function
      is called with an argument of <span class="docEmphasis">5.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When the function returns, its exit status is stored in
      the <span class="docEmphasis">?</span> variable. The exit status is the
      exit value of the last command executed in the function unless an explicit
      argument is used in the <span class="docEmphasis">return</span> statement.
      The argument for <span class="docEmphasis">return</span> must be an
      integer between 0 and 255.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Although the <span class="docEmphasis">sum</span> was
      defined in the function <span class="docEmphasis">increment,</span> it is
      local in scope, and therefore also not known outside the function. Nothing
      is printed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list58" class="docExampleTitle">Example 12.58 </h5>
<pre>(Using Command Substitution)
(The Script)
$ <span class="docEmphStrong">cat do_square</span>
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: do_square</span>
1   <span class="docEmphStrong">function square</span> {
      local sq     <span class="docEmphasis"># sq is local to the function</span>
      let &quot;sq=$1 * $1&quot;
      echo &quot;Number to be squared is $1.&quot;
2     echo &quot;The result is $sq &quot;
    }
3   echo &quot;Give me a number to square. &quot;
    read number
4   <span class="docEmphStrong">value_returned=$(square $number)</span> <span class="docEmphasis"># Command substitution</span>
5   echo   &quot;$value_returned&quot;

(The Output)
    $ <span class="docEmphStrong">do_square</span>
3   <span class="docEmphasis">Give me a number to square.</span>
    <span class="docEmphBoldItalic">10</span>
5   <span class="docEmphasis">Number to be squared is 10.</span>
    <span class="docEmphasis">The result is 100</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The function called <span class="docEmphasis">square</span>
      is defined. Its purpose, when called, is to multiply its argument,
      <span class="docEmphasis">$1,</span> times itself.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The result of squaring the number is printed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is asked for input. This is the line where the
      program starts executing.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The function <span class="docEmphasis">square</span> is
      called with a number (input from the user) as its argument. Command
      substitution is performed because the function is enclosed in parentheses
      preceded by a <span class="docEmphasis">$.</span> The output of the
      function, both of its <span class="docEmphasis">echo</span> statements, is
      assigned to the variable <span class="docEmphasis">value_returned.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value returned from the command substitution is
      printed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec24">12.7.2 Functions and the <span class="docEmphasis">
source</span> (or <span class="docEmphasis">dot</span>) Command</h4>
<p class="docText"><b>Storing Functions.</b> Functions are often defined in the
.<span class="docEmphasis">profile</span> file so that when you log in, they
will be defined. Functions can be exported, and they can be stored in a file.
Then when you need the function, the <span class="docEmphasis">source</span> or
<span class="docEmphasis">dot</span> command is used with the name of the file
to activate the definitions of the functions within it.</p>
<h5 id="ch12list59" class="docExampleTitle">Example 12.59 </h5>
<pre>1   $ <span class="docEmphStrong">cat myfunctions</span>
2   <span class="docEmphBoldItalic">function go() {</span>
       <span class="docEmphasis">cd $HOME/bin/prog</span>
       <span class="docEmphasis">PS1=''pwd' &gt; '</span>
       <span class="docEmphasis">ls</span>
    <span class="docEmphasis">}</span>
3   <span class="docEmphBoldItalic">function greetings() {</span> <span class="docEmphasis">echo &quot;Hi $1! Welcome to my world.&quot; ; }</span>

4   $ <span class="docEmphStrong">source myfunctions</span>
5   $ <span class="docEmphStrong">greetings george</span>
    <span class="docEmphasis">Hi george! Welcome to my world.</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The file <span class="docEmphasis">myfunctions</span>
      is displayed. It contains two function definitions.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The first function defined is called
      <span class="docEmphasis">go.</span> It sets the primary prompt to the
      present working directory.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The second function defined is called
      <span class="docEmphasis">greetings.</span> It will greet the name of the
      user passed in as an argument.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">source or dot</span>
      command loads the contents of the file <span class="docEmphasis">
      myfunctions</span> into the shell's memory. Now both functions are defined
      for this shell.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">greetings</span> function
      is invoked and executed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list60" class="docExampleTitle">Example 12.60 </h5>
<pre>(The <span class="docEmphasis">dbfunctions</span> file shown below contains functions to be used by the
main program.  See cd for complete script.)
1   $ <span class="docEmphStrong">cat dbfunctions</span>
2   <span class="docEmphStrong">function</span> <span class="docEmphStrong">addon ()</span> {    <span class="docEmphasis"># Function defined in file dbfunctions</span>
3      while true
       do
          echo &quot;Adding information &quot;
          echo &quot;Type the full name of employee &quot;
          read name
          echo &quot;Type address for employee &quot;
          read address
          echo &quot;Type start date for employee (4/10/88 ) :&quot;
          read startdate
          echo $name:$address:$startdate
          echo –n &quot;Is this correct? &quot;
          read ans
          case &quot;$ans&quot;  in
          [Yy]*)
                  echo &quot;Adding info...&quot;
                  echo $name:$address:$startdate&gt;&gt;datafile
                  sort –u datafile –o datafile
                  echo –n &quot;Do you want to go back to the main menu? &quot;
             read ans
             if [[ $ans == [Yy] ]]
             then

4                <span class="docEmphStrong">return</span>     <span class="docEmphasis"># Return to calling program</span>
             else

5                continue   <span class="docEmphasis"># Go to the top of the loop</span>
             fi
             ;;
          *)
          echo &quot;Do you want to try again? &quot;
          read answer
          case &quot;$answer&quot; in
          [Yy]*) continue;;
          *) exit;;
          esac
             ;;
       esac
    done
6   }   <span class="docEmphasis"># End of function definition</span>

-------------------------------------------------------------
(The Command Line)
7   $ <span class="docEmphStrong">more mainprog</span>
    #!/bin/bash
    # <span class="docEmphasis">Scriptname: mainprog</span>
    <span class="docEmphasis"># This is the main script that will call the function, addon</span>

    datafile=$HOME/bourne/datafile
8   <span class="docEmphStrong">source dbfunctions</span>   <span class="docEmphasis"># The file is loaded into memory</span>
        if [ ! –e $datafile ]
    then
        echo &quot;$(basename $datafile) does not exist&quot; &gt;&amp;2
        exit 1
    fi
9      echo &quot;Select one: &quot;
       cat &lt;&lt;EOF
           [1] Add info
           [2] Delete info
           [3] Update info
           [4] Exit
       EOF
       read choice
       case $choice in
10        1) <span class="docEmphStrong">addon</span>       <span class="docEmphasis"># Calling the addon function</span>
                 ;;
          2) <span class="docEmphStrong">delete</span>      <span class="docEmphasis"># Calling the delete function</span>
                 ;;
          3) update
                 ;;
          4)
             echo Bye
             exit 0
                  ;;
          *) echo Bad choice
             exit 2
                  ;;
       esac
       echo Returned from function call
       echo The name is $name
       <span class="docEmphasis"># Variable set in the function are known in this shell.</span>
   done
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">dbfunctions</span> file
      is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">addon</span> function is
      defined. Its function is to add new information to the
      <span class="docEmphasis">datafile.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A <span class="docEmphasis">while</span> loop is
      entered. It will loop forever unless a loop control statement such as
      <span class="docEmphasis">break</span> or <span class="docEmphasis">
      cotinue</span> is included in the body of the loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">return</span> command
      sends control back to the calling program where the function was called.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Control is returned to the top of the
      <span class="docEmphasis">while</span> loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The closing curly brace ends the function definition.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is the main script. The function
      <span class="docEmphasis">addon</span> will be used in this script.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">source</span> command
      loads the file <span class="docEmphasis">dbfunctions</span> into the
      program's memory. Now the function <span class="docEmphasis">addon</span>
      is defined for this script and available for use. It is as though you had
      just defined the function right here in the script.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A menu is displayed with the <span class="docEmphasis">
      here</span> <span class="docEmphasis">document.</span> The user is asked
      to select a menu item.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">addon</span> function is
      invoked.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch12lev1sec8">12.8 Trapping Signals</h3>
<p class="docText">While your program is running, if you press Control-C or
Control-\, your program terminates as soon as the signal arrives. There are
times when you would rather not have the program terminate immediately after the
signal arrives. You could arrange to ignore the signal and keep running or
perform some sort of cleanup operation before actually exiting the script. The
<span class="docEmphasis">trap</span> command allows you to control the way a
program behaves when it receives a signal.</p>
<p class="docText">A <span class="docEmphasis">signal</span> is defined as an
asynchronous message that consists of a number that can be sent from one process
to another, or by the operating system to a process if certain keys are pressed
or if something exceptional happens.<span id="ENB12-6"><a class="docLink" href="#EN12-6"><sup>[6]</sup></a></span>
The <span class="docEmphasis">trap</span> command tells the shell to terminate
the command currently in execution upon the receipt of a signal. If the
<span class="docEmphasis">trap</span> command is followed by commands within
quotes, the command string will be executed upon receipt of a specified signal.
The shell reads the command string twice, once when the trap is set, and again
when the signal arrives. If the command string is surrounded by double quotes,
all variable and command substitution will be performed when the trap is set the
first time. If single quotes enclose the command string, variable and command
substitution do not take place until the signal is detected and the trap is
executed.</p>
<p class="docText">Use the command <span class="docEmphasis">kill –l</span> or
<span class="docEmphasis">trap –l</span> to get a list of all signals.
<a class="docLink" href="#ch12table06">Table 12.6</a> provides a list of signal
numbers and their corresponding names.</p>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">FORMAT</h2>
    <pre>trap 'command; command' signal-number
trap 'command; command' signal-name
</pre>
    </td>
  </tr>
</table>

<h5 id="ch12list61" class="docExampleTitle">Example 12.61 </h5>
<pre><span class="docEmphStrong">trap 'rm tmp*; exit 1'  0 1 2 15</span>
trap 'rm tmp*; exit 1'  EXIT HUP INT TERM
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">When any of the signals <span class="docEmphasis">1</span>
    (hangup), <span class="docEmphasis">2</span> (interrupt), or
    <span class="docEmphasis">15</span> (software termination) arrives, remove
    all the <span class="docEmphasis">tmp</span> files and exit.</td>
  </tr>
</table>

<p class="docText">If an interrupt comes in while the script is running, the
<span class="docEmphasis">trap</span> command lets you handle the interrupt
signal in several ways. You can let the signal behave normally (default), ignore
the signal, or create a handler function to be called when the signal arrives.</p>
<p class="docText">Signal names such as <span class="docEmphasis">HUP</span> and
<span class="docEmphasis">INT</span> are normally prefixed with
<span class="docEmphasis">SIG,</span> for example, <span class="docEmphasis">
SIGHUP,</span> <span class="docEmphasis">SIGINT,</span> and so forth.<span id="ENB12-7"><a class="docLink" href="#EN12-7"><sup>[7]</sup></a></span>
The <span class="docEmphasis">bash</span> shell allows you to use symbolic names
for the signals, which are the signal names without the
<span class="docEmphasis">SIG</span> prefix, or you can use the numeric value
for the signal. See <a class="docLink" href="#ch12table06">Table 12.6</a>. A
pseudo signal name <span class="docEmphasis">EXIT,</span> or the number 0, will
cause the trap to be executed when the shell exits.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch12table06" class="docTableTitle">Table 12.6. Signal Numbers and Signals (<span class="docEmphasis">kill
  –l</span>)</h5>
  </caption>
  <colgroup span="4" align="left">
  </colgroup>
  <tr>
    <td class="docTableCell" vAlign="top">1) <span class="docEmphasis">SIGHUP</span>
    </td>
    <td class="docTableCell" vAlign="top">9) <span class="docEmphasis">SIGKILL</span>
    </td>
    <td class="docTableCell" vAlign="top">18) <span class="docEmphasis">SIGCONT</span>
    </td>
    <td class="docTableCell" vAlign="top">26) <span class="docEmphasis">
    SIGVTALRM</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">2) <span class="docEmphasis">SIGINT</span>
    </td>
    <td class="docTableCell" vAlign="top">10) <span class="docEmphasis">SIGUSR1</span>
    </td>
    <td class="docTableCell" vAlign="top">19) <span class="docEmphasis">SIGSTOP</span>
    </td>
    <td class="docTableCell" vAlign="top">27) <span class="docEmphasis">SIGPROF</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">3) <span class="docEmphasis">SIGQUIT</span>
    </td>
    <td class="docTableCell" vAlign="top">11) <span class="docEmphasis">SIGSEGV</span>
    </td>
    <td class="docTableCell" vAlign="top">20) <span class="docEmphasis">SIGTSTP</span>
    </td>
    <td class="docTableCell" vAlign="top">28) <span class="docEmphasis">SIGWINCH</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">4) <span class="docEmphasis">SIGILL</span>
    </td>
    <td class="docTableCell" vAlign="top">12) <span class="docEmphasis">SIGUSR2</span>
    </td>
    <td class="docTableCell" vAlign="top">21) <span class="docEmphasis">SIGTTIN</span>
    </td>
    <td class="docTableCell" vAlign="top">29) <span class="docEmphasis">SIGIO</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">5) <span class="docEmphasis">SIGTRAP</span>
    </td>
    <td class="docTableCell" vAlign="top">13) <span class="docEmphasis">SIGPIPE</span>
    </td>
    <td class="docTableCell" vAlign="top">22) <span class="docEmphasis">SIGTTOU</span>
    </td>
    <td class="docTableCell" vAlign="top">30) <span class="docEmphasis">SIGPWR</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">6) <span class="docEmphasis">SIGABRT</span>
    </td>
    <td class="docTableCell" vAlign="top">14) <span class="docEmphasis">SIGALRM</span>
    </td>
    <td class="docTableCell" vAlign="top">23) <span class="docEmphasis">SIGURG</span>
    </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">7) <span class="docEmphasis">SIGBUS</span>
    </td>
    <td class="docTableCell" vAlign="top">15) <span class="docEmphasis">SIGTERM</span>
    </td>
    <td class="docTableCell" vAlign="top">24) <span class="docEmphasis">SIGXCPU</span>
    </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top">8) <span class="docEmphasis">SIGFPE</span>
    </td>
    <td class="docTableCell" vAlign="top">17) <span class="docEmphasis">SIGCHLD</span>
    </td>
    <td class="docTableCell" vAlign="top">25) <span class="docEmphasis">SIGXFSZ</span>
    </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
  </tr>
</table>

<p class="docText"><b>Resetting Signals.</b> To reset a signal to its default
behavior, the <span class="docEmphasis">trap</span> command is followed by the
signal name or number. <span class="docEmphasis">Traps</span> set in functions
are recognized by the shell that invoked the function, once the function has
been called. Any traps set outside the function are also recognized with the
function.</p>
<h5 id="ch12list62" class="docExampleTitle">Example 12.62 </h5>
<pre><span class="docEmphStrong">trap 2</span>  <span class="docEmphasis">or</span>  <span class="docEmphStrong">trap INT</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Resets the default action for signal
    <span class="docEmphasis">2,</span> <span class="docEmphasis">SIGINT.</span>
    The default action is to kill the process when the interrupt key (Control-C)
    is pressed.</td>
  </tr>
</table>

<p class="docText"><b>Ignoring Signals</b> . If the <span class="docEmphasis">
trap</span> command is followed by a pair of empty quotes, the signals listed
will be ignored by the process.</p>
<h5 id="ch12list63" class="docExampleTitle">Example 12.63 </h5>
<pre><span class="docEmphStrong">trap &quot; &quot; 1 2</span>  <span class="docEmphasis">or</span>    <span class="docEmphStrong">trap &quot;&quot; HUP INT</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Signals <span class="docEmphasis">1</span> (<span class="docEmphasis">SIGHUP</span>)
    and <span class="docEmphasis">2</span> (<span class="docEmphasis">SIGINT</span>)
    will be ignored by the shell process.</td>
  </tr>
</table>

<p class="docText"><b>Listing Traps.</b> To list all traps and the commands
assigned to them, type <span class="docEmphasis">trap.</span></p>
<h5 id="ch12list64" class="docExampleTitle">Example 12.64 </h5>
<pre>(At the command line)
1   $ trap 'echo &quot;Caught ya!; exit&quot;' 2
2   $ trap
    trap -- 'echo &quot;Caught ya!; exit 1&quot;' SIGINT
3   $ <span class="docEmphStrong">trap -</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">trap</span> command is
      set to exit on signal 2 (Control-C).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">trap</span> command
      without an argument lists all set traps.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the argument is a dash, all signals are reset to
      their original values, i.e., whatever they were when the shell started up.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list65" class="docExampleTitle">Example 12.65 </h5>
<pre>(The Script)
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: trapping</span>
    <span class="docEmphasis"># Script to illustrate the trap command and signals</span>
    <span class="docEmphasis"># Can use the signal numbers or bash abbreviations seen</span>
    <span class="docEmphasis"># below. Cannot use SIGINT, SIGQUIT, etc.</span>
1   <span class="docEmphStrong">trap 'echo &quot;Control–C will not terminate $0.&quot;'  INT</span>
2   <span class="docEmphStrong">trap 'echo &quot;Control–\ will not terminate $0.&quot;'  QUIT</span>
3   <span class="docEmphStrong">trap 'echo &quot;Control–Z will not terminate $0.&quot;'  TSTP</span>
4   echo  &quot;Enter any string after the prompt.
    When you are ready to exit, type \&quot;stop\&quot;.&quot;
5   <span class="docEmphStrong">while true</span>
    do
6       echo –n &quot;Go ahead...&gt; &quot;
7       read
8       if [[ $REPLY == [Ss]top ]]
        then
9          break
        fi
10  <span class="docEmphStrong">done</span>
(The Output)
    $ <span class="docEmphStrong">trapping</span>
4   <span class="docEmphasis">Enter any string after the prompt.</span>
    <span class="docEmphasis">When you are ready to exit, type &quot;stop&quot;.</span>
6   <span class="docEmphasis">Go ahead...&gt; this is it^C</span>
1   <span class="docEmphBoldItalic">Control–C will not terminate trapping.</span>
6   <span class="docEmphasis">Go ahead...&gt; this is it again^Z</span>
3   <span class="docEmphBoldItalic">Control–Z will not terminate trapping.</span>
6   <span class="docEmphasis">Go ahead...&gt; this is never it|^\</span>
2   <span class="docEmphBoldItalic">Control–\ will not terminate trapping.</span>
6   <span class="docEmphasis">Go ahead...&gt; stop</span>
    $
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The first <span class="docEmphasis">trap</span> catches
      the <span class="docEmphasis">INT</span> signal, Control-C. If Control-C
      is pressed while the program is running, the command enclosed in quotes
      will be executed. Instead of aborting, the program will print
      <span class="docEmphasis">Control-C will not terminate trapping</span> and
      continue to prompt the user for input.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The second <span class="docEmphasis">trap</span>
      command will be executed when the user presses Control-\, the
      <span class="docEmphasis">QUIT</span> signal. The string
      <span class="docEmphasis">Control-\ will not terminate trapping</span>
      will be displayed and the program will continue to run. This signal,
      <span class="docEmphasis">SIGQUIT</span> by default, kills the process and
      produces a core file.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The third <span class="docEmphasis">trap</span> command
      will be executed when the user presses Control-Z, the
      <span class="docEmphasis">TSTP</span> signal. The string
      <span class="docEmphasis">Control-Z will not terminate trapping</span>
      will be displayed, and the program will continue to run. This signal
      normally causes the program to be suspended in the background if job
      control is implemented.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The user is prompted for input.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> loop is
      entered.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The string <span class="docEmphasis">Go ahead…&gt;</span>
      is printed and the program waits for input (see <span class="docEmphasis">
      read</span> on the next line).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">read</span> command
      assigns user input to the built-in <span class="docEmphasis">REPLY</span>
      variable.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the value of <span class="docEmphasis">REPLY</span>
      matches <span class="docEmphasis">Stop</span> or <span class="docEmphasis">
      stop,</span> the <span class="docEmphasis">break</span> command causes the
      loop to exit and the program will terminate. Entering
      <span class="docEmphasis">Stop</span> or <span class="docEmphasis">stop</span>
      is the only way we will get out of this program unless it is killed with
      the <span class="docEmphasis">kill</span> command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">break</span> command
      causes the body of the loop to be exited.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">done</span> keyword marks
      the end of the loop.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><b>Resetting Signals.</b> To reset a signal to its default
behavior, the <span class="docEmphasis">trap</span> command is followed by the
signal name or number.</p>
<h5 id="ch12list66" class="docExampleTitle">Example 12.66 </h5>
<pre><span class="docEmphStrong">trap 2</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Resets the default action for signal
    <span class="docEmphasis">2,</span> <span class="docEmphasis">SIGINT,</span>
    which is used to kill a process, i.e., Control-C.</td>
  </tr>
</table>

<h5 id="ch12list67" class="docExampleTitle">Example 12.67 </h5>
<pre><span class="docEmphStrong">trap 'trap 2'</span> <span class="docEmphStrong">2</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <p class="docText">Sets the default action for signal
    <span class="docEmphasis">2</span> (<span class="docEmphasis">SIGINT</span>)
    to execute the command string within quotes when the signal arrives. The
    user must press Control-C twice to terminate the program. The first
    <span class="docEmphasis">trap</span> catches the signal, the second
    <span class="docEmphasis">trap</span> resets the trap back to its default
    action, which is to kill the process.</td>
  </tr>
</table>

<p class="docText"><b>Traps in Functions.</b> If you use a trap to handle a
signal in a function, it will affect the entire script, once the function is
called. The trap is global to the script. In the following example, the trap is
set to ignore the interrupt key, ^C. This script had to be killed with the
<span class="docEmphasis">kill</span> command to stop the looping. It
demonstrates potential undesirable side effects when using traps in functions.</p>
<h5 id="ch12list68" class="docExampleTitle">Example 12.68 </h5>
<pre>(The Script)
    #!/bin/bash
1   <span class="docEmphStrong">function trapper () {</span>
       echo &quot;In trapper&quot;
2      <span class="docEmphStrong">trap 'echo &quot;Caught in a trap!&quot;' INT</span>
       <span class="docEmphasis"># Once set, this trap affects the entire script. Anytime</span>
       <span class="docEmphasis"># ^C is entered, the script will ignore it.</span>
    <span class="docEmphStrong">}</span>
3   while :
    do
       echo &quot;In the main script&quot;
4      <span class="docEmphStrong">trapper</span>
5      echo &quot;Still in main&quot;
       sleep 5
    done
(The Output)
$ <span class="docEmphStrong">trapper</span>
<span class="docEmphasis">In the main script</span>
<span class="docEmphasis">In trapper</span>
<span class="docEmphasis">Still in main</span>
<span class="docEmphasis">^CCaught in a trap!</span>
<span class="docEmphasis">In the main script</span>
<span class="docEmphasis">In trapper</span>
<span class="docEmphasis">Still in main</span>
<span class="docEmphasis">^CCaught in a trap!</span>
<span class="docEmphasis">In the main script</span></pre>
<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">trapper</span> function
      is defined. All variables and traps set in the function are global to the
      script.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">trap</span> command will
      ignore <span class="docEmphasis">INT,</span> signal
      <span class="docEmphasis">2,</span> the interrupt key (^C). If ^C is
      pressed, the message <span class="docEmphasis">Caught in a trap</span> is
      printed, and the script continues forever. The script can be killed with
      the <span class="docEmphasis">kill</span> command or Ctrl-\.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The main script starts a forever loop.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The function <span class="docEmphasis">trapper</span>
      is called.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">When the function returns, execution starts here.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch12lev1sec9">12.9 Debugging</h3>
<p class="docText">By using the <span class="docEmphasis">–n</span> option to
the <span class="docEmphasis">bash</span> command, you can check the syntax of
your scripts without really executing any of the commands. If there is a syntax
error in the script, the shell will report the error. If there are no errors,
nothing is displayed.</p>
<p class="docText">The most commonly used method for debugging scripts is the
<span class="docEmphasis">set</span> command with the <span class="docEmphasis">
–x</span> option, or <span class="docEmphasis">bash</span> invoked with the
<span class="docEmphasis">–x</span> option and the scriptname. See
<a class="docLink" href="#ch12table07">Table 12.7</a> for a list of debugging
options. These options allow an execution trace of your script. Each command
from your script is displayed after substitution has been performed, and then
the command is executed. When a line from your script is displayed, it is
preceded with a plus (+) sign.</p>
<p class="docText">With the verbose option turned on, or by invoking the shell
with the –<span class="docEmphasis">v</span> option (<span class="docEmphasis">bash
–v</span> scriptname), each line of the script will be displayed just as it was
typed in the script, and then executed.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch12table07" class="docTableTitle">Table 12.7. Debugging Options</h5>
  </caption>
  <colgroup span="3" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Command</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Option</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">What
    It Does</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">bash –x
    scriptname</span> </td>
    <td class="docTableCell" vAlign="top">Echo option </td>
    <td class="docTableCell" vAlign="top">Displays each line of script after
    variable substitutions and before execution. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">bash –v
    scriptname</span> </td>
    <td class="docTableCell" vAlign="top">Verbose option </td>
    <td class="docTableCell" vAlign="top">Displays each line of script before
    execution, just as you typed it. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">bash –n
    scriptname</span> </td>
    <td class="docTableCell" vAlign="top">Noexec option </td>
    <td class="docTableCell" vAlign="top">Interprets but does not execute
    commands. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">set –x</span>
    </td>
    <td class="docTableCell" vAlign="top">Turns on echo </td>
    <td class="docTableCell" vAlign="top">Traces execution in a script. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">set +x</span>
    </td>
    <td class="docTableCell" vAlign="top">Turns off echo </td>
    <td class="docTableCell" vAlign="top">Turns off tracing. </td>
  </tr>
</table>

<h5 id="ch12list69" class="docExampleTitle">Example 12.69 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat todebug</span>
    #!/bin/bash
    <span class="docEmphasis"># Scriptname: todebug</span>

1   name=&quot;Joe Shmoe&quot;
    if [[ $name == &quot;Joe Blow&quot; ]]
    then
        printf &quot;Hello $name\n&quot;
    fi

    declare -i num=1
    while (( num &lt; 5 ))
    do
        let num+=1
    done
    printf &quot;The total is %d\n&quot;, $num

(The Output)
2 <span class="docEmphStrong">bash -x todebug</span>
<span class="docEmphasis">+ name=Joe Shmoe</span>
<span class="docEmphasis">+ [[ Joe Shmoe == \J\o\e\\B\l\o\w ]]</span>
<span class="docEmphasis">+ declare -i num=1</span>
<span class="docEmphasis">+ ((  num &lt; 5  ))</span>
<span class="docEmphasis">+ let num+=1</span>
<span class="docEmphasis">+ ((  num &lt; 5  ))</span>
<span class="docEmphasis">+ let num+=1</span>
<span class="docEmphasis">+ ((  num &lt; 5  ))</span>
<span class="docEmphasis">+ let num+=1</span>
<span class="docEmphasis">+ ((  num &lt; 5  ))</span>
<span class="docEmphasis">+ let num+=1</span>
<span class="docEmphasis">+ ((  num &lt; 5  ))</span>
<span class="docEmphasis">+ printf 'The total is %d\n,' 5</span>
<span class="docEmphasis">The total is 5</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The script is called <span class="docEmphasis">todebug.</span>
      You can watch the script run with the –<span class="docEmphasis">x</span>
      switch turned on. Each iteration of the loop is displayed and the values
      of variables are printed as they are set and when they change.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">Bash</span> is invoked with
      the <span class="docEmphasis">–x</span> option. Echoing is turned on. Each
      line of the script will be displayed to the screen prepended with a plus
      sign (+). Variable substitution is performed before the line is displayed.
      The result of the execution of the command appears after the line has been
      displayed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch12lev1sec10">12.10 Processing Command Line Options with
<span class="docEmphasis">getopts</span></h3>
<p class="docText">If you are writing scripts that require a number of command
line options, positional parameters are not always the most efficient. For
example, the UNIX <span class="docEmphasis">ls</span> command takes a number of
command line options and arguments. (An option requires a leading dash; an
argument does not.) Options can be passed to the program in several ways:
<span class="docEmphasis">ls –laFi, ls –i –a –l –F, ls –ia –F,</span> and so
forth. If you have a script that requires arguments, positional parameters might
be used to process the arguments individually, such as <span class="docEmphasis">
ls –l –i –F</span> . Each dash option would be stored in
<span class="docEmphasis">$1, $2,</span> and <span class="docEmphasis">$3,</span>
respectively. But, what if the user listed all of the options as one dash
option, as in <span class="docEmphasis">ls –liF?</span> Now the
<span class="docEmphasis">–liF</span> would all be assigned to
<span class="docEmphasis">$1</span> in the script. The <span class="docEmphasis">
getopts</span> function makes it possible to process command line options and
arguments in the same way they are processed by the <span class="docEmphasis">ls</span>
program.<span id="ENB12-8"><a class="docLink" href="#EN12-8"><sup>[8]</sup></a></span>
The <span class="docEmphasis">getopts</span> function will allow the
<span class="docEmphasis">runit</span> program to process its arguments using
any variety of combinations.</p>
<h5 id="ch12list70" class="docExampleTitle">Example 12.70 </h5>
<pre>(The Command Line )
1   $ <span class="docEmphStrong">runit –x –n  200 filex</span>

2   $ <span class="docEmphStrong">runit –xn200 filex</span>

3   $ <span class="docEmphStrong">runit –xy</span>

4   $ <span class="docEmphStrong">runit –yx –n 30</span>

5   $ <span class="docEmphStrong">runit –n250 –xy filey</span>

( any other combination of these arguments )
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program <span class="docEmphasis">runit</span>
      takes four arguments: <span class="docEmphasis">x</span> is an option,
      <span class="docEmphasis">n</span> is an option requiring a number
      argument after it, and <span class="docEmphasis">filex</span> is an
      argument that stands alone.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program <span class="docEmphasis">runit</span>
      combines the options <span class="docEmphasis">x</span> and
      <span class="docEmphasis">n</span> and the number argument
      <span class="docEmphasis">200;</span> <span class="docEmphasis">filex</span>
      is also an argument.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program <span class="docEmphasis">runit</span> is
      invoked with the <span class="docEmphasis">x</span> and
      <span class="docEmphasis">y</span> options combined.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program <span class="docEmphasis">runit</span> is
      invoked with the <span class="docEmphasis">y</span> and
      <span class="docEmphasis">x</span> options combined; the
      <span class="docEmphasis">n</span> option is passed separately, as is the
      number argument, <span class="docEmphasis">30.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program <span class="docEmphasis">runit</span> is
      invoked with the <span class="docEmphasis">n</span> option combined with
      the number argument, the <span class="docEmphasis">x</span> and
      <span class="docEmphasis">y</span> options are combined, and the
      <span class="docEmphasis">filey</span> is separate.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText">Before getting into all the details of the
<span class="docEmphasis">runit</span> program, we examine the line from the
program where <span class="docEmphasis">getopts</span> is used to see how it
processes the arguments.</p>
<h5 id="ch12list71" class="docExampleTitle">Example 12.71 </h5>
<pre>(A Line from the Script Called &quot;runit&quot;)

<span class="docEmphStrong">while getopts :xyn: name</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">x,</span>
      <span class="docEmphasis">y,</span> and <span class="docEmphasis">n</span>
      are the options. In this example the first option is preceded by a colon.
      This tells <span class="docEmphasis">getopts</span> to use silent error
      reporting. If there is a colon after one of the options, the option
      expects an argument separated from it by whitespace. An argument is a word
      that does not begin with a dash. <span class="docEmphasis">–n</span>
      requires an argument.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Any options typed at the command line must begin with a
      dash.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Any options that do not contain a dash tell
      <span class="docEmphasis">getopts</span> that the option list has ended.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Each time <span class="docEmphasis">getopts</span> is
      called, it places the next option value it finds in the variable
      <span class="docEmphasis">name.</span> (You can use any variable name
      here.) If an illegal argument is given, <span class="docEmphasis">name</span>
      is assigned a question mark.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong"><span class="docEmphasis">getopts</span>
Scripts.</span> The following examples illustrate how <span class="docEmphasis">
getopts</span> processes arguments.</p>
<h5 id="ch12list72" class="docExampleTitle">Example 12.72 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat opts1</span>
    <span class="docEmphasis">#!/bin/bash</span>
    <span class="docEmphasis"># Program: opts1</span>
    <span class="docEmphasis"># Using getopts –– First try ––</span>
1   <span class="docEmphStrong">while getopts xy options</span>
    do
2       case $options in
3       x) echo &quot;you entered –x as an option&quot;;;
        y) echo &quot;you entered –y as an option&quot;;;
        esac
    done

(The Command Line)
4   $ <span class="docEmphStrong">opts1 –x</span>
    <span class="docEmphasis">you entered –x as an option</span>
5   $ <span class="docEmphStrong">opts1 –xy</span>
    <span class="docEmphasis">you entered –x as an option</span>
    <span class="docEmphasis">you entered –y as an option</span>
6   $ <span class="docEmphStrong">opts1 –y</span>
    <span class="docEmphasis">you entered –y as an option</span>
7   $ <span class="docEmphStrong">opts1 –b</span>
    <span class="docEmphasis">opts1:   illegal option --  b</span>
8   $ <span class="docEmphStrong">opts1 b</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">getopts</span> command is
      used as a condition for the <span class="docEmphasis">while</span>
      command. The valid options for this program are listed after the
      <span class="docEmphasis">getopts</span> command; they are
      <span class="docEmphasis">x</span> and <span class="docEmphasis">y.</span>
      Each option is tested in the body of the loop, one after the other. Each
      option will be assigned to the variable <span class="docEmphasis">options,</span>
      without the leading dash. When there are no longer any arguments to
      process, <span class="docEmphasis">getopts</span> will exit with a nonzero
      status, causing the <span class="docEmphasis">while</span> loop to
      terminate.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">case</span> command is
      used to test each of the possible options found in the
      <span class="docEmphasis">options</span> variable, either
      <span class="docEmphasis">x</span> or <span class="docEmphasis">y.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If <span class="docEmphasis">x</span> was an option,
      the string <span class="docEmphasis">you entered x as an option</span> is
      displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">At the command line, the <span class="docEmphasis">
      opts1</span> script is given an <span class="docEmphasis">x</span> option,
      a legal option to be processed by <span class="docEmphasis">getopts.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">At the command line, the <span class="docEmphasis">
      opts1</span> script is given an <span class="docEmphasis">xy</span>
      option; <span class="docEmphasis">x</span> and <span class="docEmphasis">y</span>
      are legal options to be processed by <span class="docEmphasis">getopts.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">At the command line, the <span class="docEmphasis">
      opts1</span> script is given a <span class="docEmphasis">y</span> option,
      a legal option to be processed by <span class="docEmphasis">getopts.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">opts1</span> script is
      given a <span class="docEmphasis">b</span> option, an illegal option.
      <span class="docEmphasis">Getopts</span> sends an error message to
      <span class="docEmphasis">stderr.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">An option without a dash prepended to it is not an
      option and causes <span class="docEmphasis">getopts</span> to stop
      processing arguments.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list73" class="docExampleTitle">Example 12.73 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat opts2</span>
    #!/bin/bash
    <span class="docEmphasis"># Program: opts2</span>
    <span class="docEmphasis"># Using getopts –– Second try ––</span>
1   <span class="docEmphStrong">while getopts xy options 2&gt; /dev/null</span>
    do
2       case $options in
        x) echo &quot;you entered –x as an option&quot;;;
        y) echo &quot;you entered –y as an option&quot;;;
3       <span class="docEmphStrong">\?) echo &quot;Only -x and -y are valid options&quot;  1&gt;&amp;2;;</span>
        esac
    done

(The Command Line)
    $ <span class="docEmphStrong">opts2 –x</span>
    <span class="docEmphasis">you entered –x as an option</span>

    $ <span class="docEmphStrong">opts2 –y</span>
    <span class="docEmphasis">you entered –y as an option</span>

    $ <span class="docEmphStrong">opts2 xy</span>

    $ <span class="docEmphStrong">opts2 –xy</span>
    <span class="docEmphasis">you entered –x as an option</span>
    <span class="docEmphasis">you entered –y as an option</span>

4   $ <span class="docEmphStrong">opts2 –g</span>
    <span class="docEmphasis">Only -x and -y are valid options</span>

5   $ <span class="docEmphStrong">opts2 –c</span>
    <span class="docEmphasis">Only -x and -y are valid options</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If there is an error message from
      <span class="docEmphasis">getopts,</span> it is redirected to
      <span class="docEmphasis">/dev/null.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the option is a bad option, a question mark will be
      assigned to the <span class="docEmphasis">options</span> variable. The
      <span class="docEmphasis">case</span> command can be used to test for the
      question mark, allowing you to print your own error message to standard
      error.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">options</span>
      variable is assigned the question mark, the <span class="docEmphasis">case</span>
      statement is executed. The question mark is protected with the backslash
      so that the shell does not see it as a wildcard and try to perform
      filename substitution.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">g</span> is not a legal
      option. A question mark is assigned to the variable
      <span class="docEmphasis">options</span> and the error message is
      displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">c</span> is not a legal
      option. A question mark is assigned to the variable
      <span class="docEmphasis">options</span> and the error message is
      displayed.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<p class="docText"><span class="docEmphStrong">Special <span class="docEmphasis">
getopts</span> Variables.</span> The <span class="docEmphasis">getopts</span>
function provides two variables to help keep track of arguments:
<span class="docEmphasis">OPTIND</span> and <span class="docEmphasis">OPTARG.</span>
<span class="docEmphasis">OPTIND</span> is a special variable that is
initialized to one and is incremented each time <span class="docEmphasis">
getopts</span> completes processing a command line argument to the number of the
next argument <span class="docEmphasis">getopts</span> will process. The
<span class="docEmphasis">OPTARG</span> variable contains the value of a legal
argument. See <a class="docLink" href="#ch12list74">Examples 12.74</a> and
<a class="docLink" href="#ch12list75">12.75</a>.</p>
<h5 id="ch12list74" class="docExampleTitle">Example 12.74 </h5>
<pre>(The Script)
$ <span class="docEmphStrong">cat opts3</span>
    #!/bin/bash
    <span class="docEmphasis"># Program: opts3</span>
    <span class="docEmphasis"># Using getopts –– Third try ––</span>
1   <span class="docEmphStrong">while getopts dq: options</span>
    do
       <span class="docEmphStrong">case $options in</span>
2           d) echo &quot;–d is a valid switch &quot;;;
3           q) echo &quot;The argument for -q is $OPTARG&quot;;;
            \?) echo &quot;Usage:opts3 -dq filename ... &quot; 1&gt;&amp;2;;
       esac
    done

(The Command Line)
4   $ <span class="docEmphStrong">opts3 –d</span>
    <span class="docEmphasis">–d is a valid switch</span>

5   $ <span class="docEmphStrong">opts3 -q  foo</span>
    <span class="docEmphasis">The argument for -q is foo</span>

6   $ <span class="docEmphStrong">opts3 -q</span>
    <span class="docEmphasis">Usage:opts3 -dq filename ...</span>

7   $ <span class="docEmphStrong">opts3 –e</span>
    <span class="docEmphasis">Usage:opts3 -dq filename ...</span>

8   $ <span class="docEmphStrong">opts3 e</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> command
      tests the exit status of <span class="docEmphasis">getopts;</span> if
      <span class="docEmphasis">getopts</span> can successfully process an
      argument, it returns zero exit status, and the body of the
      <span class="docEmphasis">while</span> loop is entered. The colon appended
      to the argument list means that the <span class="docEmphasis">q</span>
      option requires an argument. The argument will be stored in the special
      variable, <span class="docEmphasis">OPTARG.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">One of the legal options is <span class="docEmphasis">
      d.</span> If <span class="docEmphasis">d</span> is entered as an option,
      the <span class="docEmphasis">d</span> (without the dash) is stored in the
      <span class="docEmphasis">options</span> variable.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">One of the legal options is <span class="docEmphasis">
      q.</span> The <span class="docEmphasis">q</span> option requires an
      argument. There must be a space between the <span class="docEmphasis">q</span>
      option and its argument. If <span class="docEmphasis">q</span> is entered
      as an option followed by an argument, the <span class="docEmphasis">q,</span>
      without the dash, is stored in the <span class="docEmphasis">options</span>
      variable and the argument is stored in the <span class="docEmphasis">
      OPTARG</span> variable. If an argument does not follow the
      <span class="docEmphasis">q</span> option, the question mark is stored in
      the variable <span class="docEmphasis">options.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">d</span> option is a
      legal option to <span class="docEmphasis">opts3.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">q</span> option with an
      argument is also a legal option to <span class="docEmphasis">opts3.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">q</span> option without
      an argument is an error.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">e</span> option is
      invalid. A question mark is stored in the <span class="docEmphasis">
      options</span> variable if the option is illegal.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The option is prepended with neither a dash nor a plus
      sign. The <span class="docEmphasis">getopts</span> command will not
      process it as an option and returns a nonzero exit status. The
      <span class="docEmphasis">while</span> loop is terminated.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list75" class="docExampleTitle">Example 12.75 </h5>
<pre>$ <span class="docEmphStrong">cat opts4</span>
    #!/bin/bash
    <span class="docEmphasis"># Program: opts4</span>
    <span class="docEmphasis"># Using getopts –– Fourth try ––</span>
1   <span class="docEmphStrong">while getopts xyz: arguments 2&gt;/dev/null</span>
    do
       <span class="docEmphStrong">case $arguments  in
</span>2      x) echo &quot;you entered -x as an option .&quot;;;
       y) echo &quot;you entered -y as an option.&quot; ;;
3      z) echo &quot;you entered -z as an option.&quot;
           echo &quot;\$OPTARG is $OPTARG.&quot;;;
4      \?) echo &quot;Usage opts4 [-xy] [-z  argument]&quot;
           exit 1;;
       esac
    done
5   echo &quot; The number of arguments passed was $(( $OPTIND - 1 ))&quot;

(The Command Line)
$ <span class="docEmphStrong">opts4 -xyz foo</span>
<span class="docEmphasis">You entered -x as an option.</span>
<span class="docEmphasis">You entered -y as an option.</span>
<span class="docEmphasis">You entered -z as an option.</span>
<span class="docEmphasis">$OPTARG is foo.</span>
<span class="docEmphasis">The number of arguments passed was 2.</span>
$ <span class="docEmphStrong">opts4 -x -y -z  boo</span>
<span class="docEmphasis">You entered -x as an option.</span>
<span class="docEmphasis">You entered -y as an option.</span>
<span class="docEmphasis">You entered -z as an option.</span>
<span class="docEmphasis">$OPTARG is boo.</span>
<span class="docEmphasis">The number of arguments passed was 4.</span>

$ <span class="docEmphStrong">opts4 -d</span>
<span class="docEmphasis">Usage: opts4  [-xy] [-z argument]</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">while</span> command
      tests the exit status of <span class="docEmphasis">getopts;</span> if
      <span class="docEmphasis">getopts</span> can successfully process an
      argument, it returns zero exit status, and the body of the
      <span class="docEmphasis">while</span> loop is entered. The colon appended
      to the <span class="docEmphasis">z</span> option tells
      <span class="docEmphasis">getopts</span> that an argument must follow the
      <span class="docEmphasis">–z</span> option. If the option takes an
      argument, the argument is stored in the <span class="docEmphasis">getopts</span>
      built-in variable <span class="docEmphasis">OPTARG.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If <span class="docEmphasis">x</span> is given as an
      option, it is stored in the variable <span class="docEmphasis">arguments.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If <span class="docEmphasis">z</span> is given as an
      option with an argument, the argument is stored in the built-in variable
      <span class="docEmphasis">OPTARG.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If an invalid option is entered, the question mark is
      stored in the variable <span class="docEmphasis">arguments</span> and an
      error message is displayed.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The special <span class="docEmphasis">getopts</span>
      variable <span class="docEmphasis">OPTIND</span> holds the number of the
      next option to be processed. Its value is always one more than the actual
      number of command line arguments.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch12lev1sec11">12.11 The <span class="docEmphasis">eval</span>
Command and Parsing the Command Line</h3>
<p class="docText">The <span class="docEmphasis">eval</span> command evaluates a
command line, performs all shell substitutions, and then executes the command
line. It is used when normal parsing of the command line is not flexible enough
for what we want to do.</p>
<h5 id="ch12list76" class="docExampleTitle">Example 12.76 </h5>
<pre>1   $ <span class="docEmphStrong">set a b c d</span>
2   $ <span class="docEmphStrong">echo The last argument is \$$#</span>
3   <span class="docEmphasis">The last argument is $4</span>

4   $ <span class="docEmphStrong">eval echo The last argument is \$$#</span>
    <span class="docEmphasis">The last argument is d</span>

5   $ <span class="docEmphStrong">set -x</span>
    $ <span class="docEmphStrong">eval echo The last argument is \$$#</span>
    <span class="docEmphasis">+ eval echo the last argument is '$4'</span>
    <span class="docEmphasis">++ echo the last argument is d</span>
    <span class="docEmphasis">The last argument is d</span>
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Four positional parameters are set.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The desired result is to print the value of the last
      positional parameter. The <span class="docEmphasis">\$</span> will print a
      literal dollar sign. The <span class="docEmphasis">$#</span> evaluates to
      <span class="docEmphasis">4,</span> the number of positional parameters.
      After the shell evaluates the <span class="docEmphasis">$#,</span> it does
      not parse the line again to get the value of <span class="docEmphasis">$4.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList"><span class="docEmphasis">$4</span> is printed instead
      of the last argument.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">After the shell performs variable substitution, the
      <span class="docEmphasis">eval</span> command performs the variable
      substitution and then executes the <span class="docEmphasis">echo</span>
      command.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Turn on the echoing to watch the order of parsing.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h5 id="ch12list77" class="docExampleTitle">Example 12.77 </h5>
<pre>(From Shutdown Program)
1   <span class="docEmphStrong">eval '/usr/bin/id | /usr/bin/sed 's/[^a-z0-9=].*//''</span>
2   if [ &quot;${uid:=0}&quot; -ne 0 ]
    then
3      echo $0: Only root can run $0
       exit 2
    fi
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">This is a tricky one. The <span class="docEmphasis">id</span>
      program's output is sent to <span class="docEmphasis">sed</span> to
      extract the <span class="docEmphasis">uid</span> part of the string. The
      output for <span class="docEmphasis">id</span> is</p>
      <pre><span class="docEmphasis">uid=9496(ellie) gid=40 groups=40</span>
<span class="docEmphasis">uid=0(root) gid=1(daemon) groups=1(daemon)</span>
</pre>
      <p class="docList">The <span class="docEmphasis">sed</span> regular
      expression reads: <span class="docEmphasis">Starting at the beginning of
      the string, find any character that is not a letter, number, or an equal
      sign and remove that character and all characters following it.</span> The
      result is to substitute everything from the first opening parenthesis to
      the end of the line with nothing. What is left is either:
      <span class="docEmphasis">uid=9496</span> or <span class="docEmphasis">uid=0.</span></p>
      <p class="docList">After <span class="docEmphasis">eval</span> evaluates
      the command line, it then executes the resulting command:</p>
      <pre><span class="docEmphasis">uid=9496</span>
</pre>
      <p class="docList">or</p>
      <pre><span class="docEmphasis">uid=0</span>
</pre>
      <p class="docList">For example, if the user's ID is
      <span class="docEmphasis">root,</span> the command executed would be
      <span class="docEmphasis">uid=0.</span> This creates a local variable in
      the shell called <span class="docEmphasis">uid</span> and assigns zero to
      it.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The value of the <span class="docEmphasis">uid</span>
      variable is tested for zero, using command modifiers.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">If the <span class="docEmphasis">uid</span> is not
      zero, the <span class="docEmphasis">echo</span> command displays the
      scriptname (<span class="docEmphasis">$0</span>) and the message.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch12lev1sec12">12.12 <span class="docEmphasis">bash</span> Options</h3>
<h4 class="docSection2Title" id="ch12lev2sec25">12.12.1 Shell Invocation Options</h4>
<p class="docText">When the shell is started using the <span class="docEmphasis">
bash</span> command, it can take options to modify its behavior. There are two
types of options: single-character options and multicharacter options. The
single-character options consist of a single leading dash followed by a single
character. The multicharacter options consist of two leading dashes and any
number of characters. Multicharacter options must appear before single-character
options. An interactive login shell normally starts up with
<span class="docEmphasis">–i</span> (start an interactive shell),
<span class="docEmphasis">–s</span> (read from standard input), and
<span class="docEmphasis">–m</span> (enable job control). See
<a class="docLink" href="#ch12table08">Table 12.8</a>.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch12table08" class="docTableTitle">Table 12.8. <span class="docEmphasis">bash</span>
  2.x Shell Invocation Options</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Option</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–c string</span>
    </td>
    <td class="docTableCell" vAlign="top">Commands are read from
    <span class="docEmphasis">string.</span> Any arguments after
    <span class="docEmphasis">string</span> are assigned to positional
    parameters, starting at <span class="docEmphasis">$0.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–D</span>
    </td>
    <td class="docTableCell" vAlign="top">A list of double quoted strings,
    preceded by a <span class="docEmphasis">$,</span> are printed to standard
    output. These strings are subject to language translation when the current
    locale is not C or POSIX. The <span class="docEmphasis">–n</span> option is
    implied; no commands will be executed. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–i</span>
    </td>
    <td class="docTableCell" vAlign="top">Shell is in the interactive mode.
    <span class="docEmphasis">TERM,</span> <span class="docEmphasis">QUIT,</span>
    and <span class="docEmphasis">INTERRUPT</span> are ignored. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–s</span>
    </td>
    <td class="docTableCell" vAlign="top">Commands are read from standard input
    and allow the setting of positional parameters. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–r</span>
    </td>
    <td class="docTableCell" vAlign="top">Starts a restricted shell. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">– –</span>
    </td>
    <td class="docTableCell" vAlign="top">Signals the end of options and
    disables further option processing. Any arguments after – – or – are treated
    as filenames and arguments. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–
    –dump–strings</span> </td>
    <td class="docTableCell" vAlign="top">Same as <span class="docEmphasis">–D.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">– –help</span>
    </td>
    <td class="docTableCell" vAlign="top">Displays a usage message for a
    built-in command and exits. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">– –login</span>
    </td>
    <td class="docTableCell" vAlign="top">Causes <span class="docEmphasis">bash</span>
    to be invoked as a login shell. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">– –noediting</span>
    </td>
    <td class="docTableCell" vAlign="top">When <span class="docEmphasis">bash</span>
    is running interactively, does not use the Readline library. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">– –noprofile</span>
    </td>
    <td class="docTableCell" vAlign="top">When starting up,
    <span class="docEmphasis">bash</span> does not read the initialization
    files: <span class="docEmphasis">/etc/profile,</span>
    <span class="docEmphasis">~/.bash_profile,</span> <span class="docEmphasis">
    ~/.bash_login,</span> or <span class="docEmphasis">~/.profile.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">– –norc</span>
    </td>
    <td class="docTableCell" vAlign="top">For interactive shells,
    <span class="docEmphasis">bash</span> will not read the
    <span class="docEmphasis">~/.bashrc</span> file. Turned on by default, if
    running shell as <span class="docEmphasis">sh.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">– –posix</span>
    </td>
    <td class="docTableCell" vAlign="top">Changes the behavior of
    <span class="docEmphasis">bash</span> to match the POSIX 1003.2 standard, if
    otherwise it wouldn't. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">– –quiet</span>
    </td>
    <td class="docTableCell" vAlign="top">Displays no information at shell
    startup, the default. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">– –rcfile
    file</span> </td>
    <td class="docTableCell" vAlign="top">If <span class="docEmphasis">bash</span>
    is interactive, uses this intialization file instead of
    <span class="docEmphasis">~/.bashrc.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–
    –restricted</span> </td>
    <td class="docTableCell" vAlign="top">Starts a restricted shell. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">– –verbose</span>
    </td>
    <td class="docTableCell" vAlign="top">Turns on verbose; same as
    <span class="docEmphasis">–v.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">– –version</span>
    </td>
    <td class="docTableCell" vAlign="top">Displays version information about
    this <span class="docEmphasis">bash</span> shell and exit. </td>
  </tr>
</table>
<p>&nbsp;</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch12table09" class="docTableTitle">Table 12.9. <span class="docEmphasis">bash</span>
  (Versions Prior to 2.x) Shell Invocation Options</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–c string</span>
    </td>
    <td class="docTableCell" vAlign="top">Commands are read from
    <span class="docEmphasis">string.</span> Any arguments after
    <span class="docEmphasis">string</span> are assigned to positional
    parameters, starting at <span class="docEmphasis">$0.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–D</span>
    </td>
    <td class="docTableCell" vAlign="top">A list of double quoted strings,
    preceded by a <span class="docEmphasis">$,</span> are printed to standard
    output. These strings are subject to language translation when the current
    locale is not C or POSIX. The <span class="docEmphasis">–n</span> option is
    implied; no commands will be executed. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–i</span>
    </td>
    <td class="docTableCell" vAlign="top">Shell is in the interactive mode.
    <span class="docEmphasis">TERM,</span> <span class="docEmphasis">QUIT,</span>
    and <span class="docEmphasis">INTERRUPT</span> are ignored. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–s</span>
    </td>
    <td class="docTableCell" vAlign="top">Commands are read from standard input
    and allows the setting of positional parameters. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–r</span>
    </td>
    <td class="docTableCell" vAlign="top">Starts a restricted shell. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–</span>
    </td>
    <td class="docTableCell" vAlign="top">Signals the end of options and
    disables further option processing. Any arguments after – – or – are treated
    as filenames and arguments. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–login</span>
    </td>
    <td class="docTableCell" vAlign="top">Causes <span class="docEmphasis">bash</span>
    to be invoked as a login shell. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–nobraceexpansion</span>
    </td>
    <td class="docTableCell" vAlign="top">Curly brace expansion is turned off.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–nolineediting</span>
    </td>
    <td class="docTableCell" vAlign="top">When <span class="docEmphasis">bash</span>
    is running interactively, does not use the Readline library. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–noprofile</span>
    </td>
    <td class="docTableCell" vAlign="top">When starting up,
    <span class="docEmphasis">bash</span> does not read the initialization
    files: <span class="docEmphasis">/etc/profile,</span>
    <span class="docEmphasis">~/.bash_profile,</span> <span class="docEmphasis">
    ~/.bash_login,</span> or <span class="docEmphasis">~/.profile.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–posix</span>
    </td>
    <td class="docTableCell" vAlign="top">Changes the behavior of
    <span class="docEmphasis">bash</span> to match the POSIX standard, if
    otherwise it wouldn't. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–quiet</span>
    </td>
    <td class="docTableCell" vAlign="top">Displays no information at shell
    startup, the default. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–rcfile file</span>
    </td>
    <td class="docTableCell" vAlign="top">If <span class="docEmphasis">bash</span>
    is interactive, uses this intialization file instead of
    <span class="docEmphasis">~/.bashrc.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–verbose</span>
    </td>
    <td class="docTableCell" vAlign="top">Turns on verbose; same as
    <span class="docEmphasis">–v.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–version</span>
    </td>
    <td class="docTableCell" vAlign="top">Displays version information about
    this <span class="docEmphasis">bash</span> shell and exit. </td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec26">12.12.2 The <span class="docEmphasis">set</span>
Command and Options</h4>
<p class="docText">The <span class="docEmphasis">set</span> command can be used
to turn shell options on and off, as well as for handling command line
arguments. To turn an option on, the dash (–) is prepended to the option; to
turn an option off, the plus sign (+) is prepended to the option. See
<a class="docLink" href="#ch12table10">Table 12.10</a> for a list of
<span class="docEmphasis">set</span> options.</p>
<h5 id="ch12list78" class="docExampleTitle">Example 12.78 </h5>
<pre>1   $ set -f

2   $ echo *
    *

3   $ echo ??
    ??

4   $ set +f
</pre>

<table cellSpacing="0" width="90%" border="1" align="center">
  <tr>
    <td>
    <h2 class="docSidebarTitle">EXPLANATION</h2>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="1">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">f</span> option is turned
      on, disabling filename expansion.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The asterisk is not expanded.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The question marks are not expanded.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The <span class="docEmphasis">f</span> is turned off;
      filename expansion is enabled.</span></li>
    </ol>
    </span></td>
  </tr>
</table>
<p>&nbsp;</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch12table10" class="docTableTitle">Table 12.10. The Built-In <span class="docEmphasis">
  set</span> Command Options</h5>
  </caption>
  <colgroup span="3" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">Name
    of Option</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Shortcut Switch</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">What
    It Does</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">allexport</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–a</span>
    </td>
    <td class="docTableCell" vAlign="top">Automatically marks new or modified
    variables for export from the time the option is set, until unset. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">braceexpand</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–B</span>
    </td>
    <td class="docTableCell" vAlign="top">Enables brace expansion, and is a
    default setting.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn19">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">emacs</span>
    </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
    <td class="docTableCell" vAlign="top">For command line editing, uses the
    <span class="docEmphasis">emacs</span> built-in editor, and is a default
    setting. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">errexit</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–e</span>
    </td>
    <td class="docTableCell" vAlign="top">If a command returns a nonzero exit
    status (fails), exits. Not set when reading initialization files. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">histexpand</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–H</span>
    </td>
    <td class="docTableCell" vAlign="top">Enables <span class="docEmphasis">!</span>
    and <span class="docEmphasis">!!</span> when performing history
    substitution, and is a default setting.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn19">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">history</span>
    </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
    <td class="docTableCell" vAlign="top">Enables command line history; on by
    default.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn19">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">ignoreeof</span>
    </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
    <td class="docTableCell" vAlign="top">Disables EOF (Control-D) from exiting
    a shell; must type exit. Same as setting shell variable,
    <span class="docEmphasis">IGNOREEOF=10.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">keyword</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–k</span>
    </td>
    <td class="docTableCell" vAlign="top">Places keyword arguments in the
    environment for a command.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn19">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">
    interactive-comments</span> </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
    <td class="docTableCell" vAlign="top">For interactive shells, a leading # is
    used to comment out any text remaining on the line. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">monitor</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–m</span>
    </td>
    <td class="docTableCell" vAlign="top">Allows job control. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">noclobber</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–C</span>
    </td>
    <td class="docTableCell" vAlign="top">Protects files from being overwritten
    when redirection is used. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">noexec</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–n</span>
    </td>
    <td class="docTableCell" vAlign="top">Reads commands, but does not execute
    them. Used to check the syntax of scripts. Not on when running
    interactively. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">noglob</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–d</span>
    </td>
    <td class="docTableCell" vAlign="top">Disables pathname expansion; i.e.,
    turns off wildcards. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">notify</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–b</span>
    </td>
    <td class="docTableCell" vAlign="top">Notifies user when background job
    finishes </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">nounset</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–u</span>
    </td>
    <td class="docTableCell" vAlign="top">Displays an error when expanding a
    variable that has not been set. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">onecmd</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–t</span>
    </td>
    <td class="docTableCell" vAlign="top">Exits after reading and executing one
    command.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn19">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">physical</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–P</span>
    </td>
    <td class="docTableCell" vAlign="top">If set, does not follow symbolic links
    when typing <span class="docEmphasis">cd</span> or <span class="docEmphasis">
    pwd.</span> The physical directory is used instead. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">posix</span>
    </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
    <td class="docTableCell" vAlign="top">Shell behavior is changed if the
    default operation doesn't match the POSIX standard. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">privileged</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–p</span>
    </td>
    <td class="docTableCell" vAlign="top">When set, the shell does not read the
    <span class="docEmphasis">.profile</span> or <span class="docEmphasis">ENV</span>
    file and shell functions are not inherited from the environment;
    automatically set for <span class="docEmphasis">setuid</span> scripts. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">posix</span>
    </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
    <td class="docTableCell" vAlign="top">Changes the default behavior to POSIX
    1003.2. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">verbose</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–v</span>
    </td>
    <td class="docTableCell" vAlign="top">Turns on the <span class="docEmphasis">
    verbose</span> mode for debugging. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">vi</span>
    </td>
    <td class="docTableCell" vAlign="top">&nbsp;</td>
    <td class="docTableCell" vAlign="top">For command line editing, uses the
    <span class="docEmphasis">vi</span> built-in editor. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">xtrace</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">–x</span>
    </td>
    <td class="docTableCell" vAlign="top">Turns on the echo mode for debugging.
    </td>
  </tr>
</table>

<blockquote>
  <p class="docFootnote"><sup><a name="ch12tabfn19">[a]</a></sup> Option applies
  only to versions of <span class="docEmphasis">bash</span> 2.x.</p>
</blockquote>
<h4 class="docSection2Title" id="ch12lev2sec27">12.12.3 The <span class="docEmphasis">shopt</span>
Command and Options</h4>
<p class="docText">The <span class="docEmphasis">shopt</span> (<span class="docEmphasis">bash</span>
2.x) command can also be used to turn shell options on and off.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch12table11" class="docTableTitle">Table 12.11. The <span class="docEmphasis">shopt</span>
  Command Options</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Option</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Meaning</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">cdable_vars</span>
    </td>
    <td class="docTableCell" vAlign="top">If an argument to the
    <span class="docEmphasis">cd</span> built-in command is not a directory, it
    is assumed to be the name of a variable whose value is the directory to
    change to. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">cdspell</span>
    </td>
    <td class="docTableCell" vAlign="top">Corrects minor errors in the spelling
    of a directory name in a <span class="docEmphasis">cd</span> command. The
    errors checked for are transposed characters, a missing character, and a
    character too many. If a correction is found, the corrected path is printed,
    and the command proceeds. Only used by interactive shells. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">checkhash</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Bash</span>
    checks that a command found in the hash table exists before trying to
    execute it. If a hashed command no longer exists, a normal path search is
    performed. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">checkwinsize</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Bash</span>
    checks the window size after each command and, if necessary, updates the
    values of <span class="docEmphasis">LINES</span> and
    <span class="docEmphasis">COLUMNS.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">cmdhist</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Bash</span>
    attempts to save all lines of a multiple-line command in the same history
    entry. This allows easy re-editing of multiline commands. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">dotglob</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Bash</span>
    includes filenames beginning with a dot (.) in the results of filename
    expansion. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">execfail</span>
    </td>
    <td class="docTableCell" vAlign="top">A noninteractive shell will not exit
    if it cannot execute the file specified as an argument to the
    <span class="docEmphasis">exec</span> built-in command. An interactive shell
    does not exit if <span class="docEmphasis">exec</span> fails. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">
    expand_aliases</span> </td>
    <td class="docTableCell" vAlign="top">Aliases are expanded. Enabled by
    default. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">extglob</span>
    </td>
    <td class="docTableCell" vAlign="top">The extended pattern matching features
    (regular expression metacharacters derived from Korn shell for filename
    expansion) are enabled. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">histappend</span>
    </td>
    <td class="docTableCell" vAlign="top">The history list is appended to the
    file named by the value of the <span class="docEmphasis">HISTFILE</span>
    variable when the shell exits, rather than overwriting the file. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">histreedit</span>
    </td>
    <td class="docTableCell" vAlign="top">If <span class="docEmphasis">readline</span>
    is being used, a user is given the opportunity to re-edit a failed history
    substitution. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">histverify</span>
    </td>
    <td class="docTableCell" vAlign="top">If set, and <span class="docEmphasis">
    readline</span> is being used, the results of history substitution are not
    immediately passed to the shell parser. Instead, the resulting line is
    loaded into the <span class="docEmphasis">readline</span> editing buffer,
    allowing further modification. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">hostcomplete</span>
    </td>
    <td class="docTableCell" vAlign="top">If set, and <span class="docEmphasis">
    readline</span> is being used, <span class="docEmphasis">bash</span> will
    attempt to perform hostname completion when a word containing an @ is being
    completed. Enabled by default. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">huponexit</span>
    </td>
    <td class="docTableCell" vAlign="top">If set, <span class="docEmphasis">bash</span>
    will send SIGHUP (hangup signal) to all jobs when an interactive login shell
    exits. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">
    interactive_comments</span> </td>
    <td class="docTableCell" vAlign="top">Allows a word beginning with # to
    cause that word and all remaining characters on that line to be ignored in
    an interactive shell. Enabled by default. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">lithist</span>
    </td>
    <td class="docTableCell" vAlign="top">If enabled, and the
    <span class="docEmphasis">cmdhist</span> option is enabled, multiline
    commands are saved to the history with embedded newlines rather than using
    semicolon separators where possible. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">mailwarn</span>
    </td>
    <td class="docTableCell" vAlign="top">If set, and a file that
    <span class="docEmphasis">bash</span> is checking for mail has been accessed
    since the last time it was checked, the message <span class="docEmphasis">
    The mail in mailfile has been read</span> is displayed. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">nocaseglob</span>
    </td>
    <td class="docTableCell" vAlign="top">If set, <span class="docEmphasis">bash</span>
    matches filenames in a case-insensitive fashion when performing filename
    expansion. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">nullglob</span>
    </td>
    <td class="docTableCell" vAlign="top">If set, <span class="docEmphasis">bash</span>
    allows filename patterns that match no files to expand to a null string,
    rather than themselves. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">promptvars</span>
    </td>
    <td class="docTableCell" vAlign="top">If set, prompt strings undergo
    variable and parameter expansion after being expanded. Enabled by default.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">
    restricted_shell</span> </td>
    <td class="docTableCell" vAlign="top">The shell sets this option if it is
    started in restricted mode. The value may not be changed. This is not reset
    when the startup files are executed, allowing the startup files to discover
    whether or not a shell is restricted. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">
    shift_verbose</span> </td>
    <td class="docTableCell" vAlign="top">If this is set, the
    <span class="docEmphasis">shift</span> built-in prints an error message when
    the shift count exceeds the number of positional parameters. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">sourcepath</span>
    </td>
    <td class="docTableCell" vAlign="top">If set, the <span class="docEmphasis">
    source</span> built-in uses the value of <span class="docEmphasis">PATH</span>
    to find the directory containing the file supplied as an argument. Enabled
    by default. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">source</span>
    </td>
    <td class="docTableCell" vAlign="top">A synonym for dot (.). </td>
  </tr>
</table>
<h3 class="docSection1Title" id="ch12lev1sec13">12.13 Shell Built-In Commands</h3>
<p class="docText">The shell has a number of commands that are built-in to its
source code. Because the commands are built-in, the shell doesn't have to locate
them on disk, making execution much faster. The <span class="docEmphasis">help</span>
feature provided with bash give you online help for any built-in command. The
built-in commands are listed in <a class="docLink" href="#ch12table12">Table
12.12</a>.</p>

<table cellSpacing="0" cellPadding="1" width="100%" border="1">
  <caption>
  <h5 id="ch12table12" class="docTableTitle">Table 12.12. Built-In Commands</h5>
  </caption>
  <colgroup span="2" align="left">
  </colgroup>
  <tr>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">
    Command</span> </th>
    <th class="docTableHeader" vAlign="top"><span class="docEmphBoldItalic">What
    It Does</span> </th>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">.</span>
    </td>
    <td class="docTableCell" vAlign="top">Executes program in context of current
    process; same as <span class="docEmphasis">source.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">. file</span>
    </td>
    <td class="docTableCell" vAlign="top">The <span class="docEmphasis">dot</span>
    command reads and executes command from file. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">:</span>
    </td>
    <td class="docTableCell" vAlign="top">Do-nothing command; returns
    <span class="docEmphasis">0</span> exit status. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">alias</span>
    </td>
    <td class="docTableCell" vAlign="top">Lists and creates &quot;nicknames&quot; for
    existing commands. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">bg</span>
    </td>
    <td class="docTableCell" vAlign="top">Puts a job in the background. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">bind</span>
    </td>
    <td class="docTableCell" vAlign="top">Displays current key and function
    bindings, or binds keys to a <span class="docEmphasis">readline</span>
    function or macro.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn20">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">break</span>
    </td>
    <td class="docTableCell" vAlign="top">Breaks out of the innermost loop. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">break [n]</span>
    </td>
    <td class="docTableCell" vAlign="top">See &quot;The break Command&quot; 780. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">builtin [sh–builtin
    [args]]</span> </td>
    <td class="docTableCell" vAlign="top">Runs a shell built-in, passing it args,
    and returning 0 exit status. Useful if a function and built-in have the same
    name.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn20">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">cd [arg]</span>
    </td>
    <td class="docTableCell" vAlign="top">Changes the directory to home if no
    arg or to value of arg. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">command
    command [arg]</span> </td>
    <td class="docTableCell" vAlign="top">Runs a command even if a function has
    the same name; i.e., bypasses function lookup.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn20">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">continue [n]</span>
    </td>
    <td class="docTableCell" vAlign="top">See &quot;The continue Command&quot; on page
    781. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">declare [var]</span>
    </td>
    <td class="docTableCell" vAlign="top">Displays all variables or declares
    variables with optional attributes.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn20">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">dirs</span>
    </td>
    <td class="docTableCell" vAlign="top">Displays a list of currently
    remembered directories resulting from <span class="docEmphasis">pushd.</span>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">disown</span>
    </td>
    <td class="docTableCell" vAlign="top">Removes an active job from the job
    table. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">echo [args]</span>
    </td>
    <td class="docTableCell" vAlign="top">Displays <span class="docEmphasis">
    args</span> terminated with a newline. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">enable</span>
    </td>
    <td class="docTableCell" vAlign="top">Enables and disables shell built-in
    commands.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn20">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">eval [args]</span>
    </td>
    <td class="docTableCell" vAlign="top">Reads <span class="docEmphasis">args</span>
    as input to the shell and executes the resulting command(s). </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">exec command</span>
    </td>
    <td class="docTableCell" vAlign="top">Runs command in place of this shell.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">exit [n]</span>
    </td>
    <td class="docTableCell" vAlign="top">Exits the shell with status
    <span class="docEmphasis">n.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">export [var]</span>
    </td>
    <td class="docTableCell" vAlign="top">Makes <span class="docEmphasis">var</span>
    known to subshells. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">fc</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">History</span>'s
    fix command for editing history commands. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">fg</span>
    </td>
    <td class="docTableCell" vAlign="top">Puts background job into foreground.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">getopts</span>
    </td>
    <td class="docTableCell" vAlign="top">Parses and processes command line
    options. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">hash</span>
    </td>
    <td class="docTableCell" vAlign="top">Controls the internal hash table for
    quicker searches for commands. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">help
    [command]</span> </td>
    <td class="docTableCell" vAlign="top">Displays helpful info about built-in
    commands and, if command is specified, detailed help about that built-in
    command.<sup class="docFootnote"><a class="docLink" href="#ch12tabfn20">[a]</a></sup>
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">history</span>
    </td>
    <td class="docTableCell" vAlign="top">Displays the <span class="docEmphasis">
    history</span> list with line numbers. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">jobs</span>
    </td>
    <td class="docTableCell" vAlign="top">Lists jobs put in the background. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">kill
    [–signal process]</span> </td>
    <td class="docTableCell" vAlign="top">Sends the signal to the PID number or
    job number of the process. Type <span class="docEmphasis">kill –l</span> for
    a list of signals. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">let</span>
    </td>
    <td class="docTableCell" vAlign="top">Used for evaluating arithmetic
    expressions and assigning results of arithmetic calculations to variables.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">local</span>
    </td>
    <td class="docTableCell" vAlign="top">Used in functions to restrict the
    scope of variables to the function. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">logout</span>
    </td>
    <td class="docTableCell" vAlign="top">Exits the login shell. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">popd</span>
    </td>
    <td class="docTableCell" vAlign="top">Removes entries from the directory
    stack. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">pushd</span>
    </td>
    <td class="docTableCell" vAlign="top">Adds entries to the directory stack.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">pwd</span>
    </td>
    <td class="docTableCell" vAlign="top">Prints present working directory. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">read [var]</span>
    </td>
    <td class="docTableCell" vAlign="top">Reads line from standard input into
    variable <span class="docEmphasis">var.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">readonly [var]</span>
    </td>
    <td class="docTableCell" vAlign="top">Makes variable
    <span class="docEmphasis">var</span> read-only. Cannot be reset. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">return [n]</span>
    </td>
    <td class="docTableCell" vAlign="top">Returns from a function where
    <span class="docEmphasis">n</span> is the exit value given to the return.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">set</span>
    </td>
    <td class="docTableCell" vAlign="top">Sets options and positional
    parameters. See
    <a class="docLink" href="#ch12table02">
    Table 12.2</a>. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">shift [n]</span>
    </td>
    <td class="docTableCell" vAlign="top">Shifts positional parameters to the
    left <span class="docEmphasis">n</span> times. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">stop pid</span>
    </td>
    <td class="docTableCell" vAlign="top">Halts execution of the process number
    PID. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">suspend</span>
    </td>
    <td class="docTableCell" vAlign="top">Stops execution of the current shell
    (but not if a login shell). </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">test</span>
    </td>
    <td class="docTableCell" vAlign="top">Checks file types and evaluates
    conditional expressions. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">times</span>
    </td>
    <td class="docTableCell" vAlign="top">Prints accumulated user and system
    <span class="docEmphasis">times</span> for processes run from this shell.
    </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">trap [arg]
    [n]</span> </td>
    <td class="docTableCell" vAlign="top">When shell receives signal
    <span class="docEmphasis">n</span> ( 0, 1, 2, or 15), executes
    <span class="docEmphasis">arg.</span> </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">type
    [command]</span> </td>
    <td class="docTableCell" vAlign="top">Prints the type of command; e.g.,
    <span class="docEmphasis">pwd</span> is a built-in shell command. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">typeset</span>
    </td>
    <td class="docTableCell" vAlign="top">Same as <span class="docEmphasis">
    declare.</span> Sets variables and gives them attributes. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">ulimit</span>
    </td>
    <td class="docTableCell" vAlign="top">Diplays and sets process resource
    limits. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">umask [octal
    digits]</span> </td>
    <td class="docTableCell" vAlign="top">Sets user file creation mode mask for
    owner, group, and others. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">unalias</span>
    </td>
    <td class="docTableCell" vAlign="top">Unsets aliases. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">unset [name]</span>
    </td>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">Unset</span>
    value of variable or function. </td>
  </tr>
  <tr>
    <td class="docTableCell" vAlign="top"><span class="docEmphasis">wait [pid#n]</span>
    </td>
    <td class="docTableCell" vAlign="top">Waits for background process with PID
    number <span class="docEmphasis">n</span> and reports termination status.
    </td>
  </tr>
</table>
<blockquote>
  <p class="docFootnote"><sup><a name="ch12tabfn20">[a]</a></sup> Option applies
  to <span class="docEmphasis">bash</span> 2.x. and later.</p>
</blockquote>
<h3 class="docSection1Title" id="ch12lev1sec14">BASH SHELL LAB EXERCISES</h3>
<h4 class="docSection2Title" id="ch12lev2sec28">Lab 49: First Script</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Write a script called <span class="docEmphasis">greetme</span>
    that will do the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Contain a comment section with your name, the name of
      this script, and the purpose of this script.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Greet the user.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print the date and the time.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print a calendar for this month.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print the name of your machine.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print the name and release of this operating system, (<span class="docEmphasis">cat
      /etc/motd</span>).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print a list of all files in your parent directory.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print all the processes<span class="docEmphasis">root</span>
      is running.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print the value of the <span class="docEmphasis">TERM,</span>
      <span class="docEmphasis">PATH,</span> and <span class="docEmphasis">HOME</span>
      variables.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print your disk usage (<span class="docEmphasis">du</span>).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Use the<span class="docEmphasis">id</span> command to
      print your group ID.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Print <span class="docEmphasis">Please couldn't you
      loan me $50.00?</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Tell the user <span class="docEmphasis">Good bye</span>
      and the current hour (see <span class="docEmphasis">man</span> pages for
      the <span class="docEmphasis">date</span> command).</span></li>
    </ol>
    </span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">Make sure your script is executable.</p>
    <pre><span class="docEmphasis">chmod +x greetme</span>
</pre>
    </td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>3:</b></td>
    <td>
    <p class="docText">What was the first line of your script? Why do you need
    this line?</td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec29">Lab 50: Command Line Arguments</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Write a script called <span class="docEmphasis">rename</span>
    that will take two arguments: the first argument is the name of the original
    file and the second argument is the new name for the file.</p>
    <p class="docText">If the user does not provide two arguments, a usage
    message will appear on the screen and the script will exit. Here is an
    example of how the script works:</p>
    <pre>$ <span class="docEmphStrong">rename</span>
<span class="docEmphasis">Usage: rename oldfilename newfilename</span>
$
$ <span class="docEmphStrong">rename file1 file2</span>
<span class="docEmphasis">file1 has been renamed file2</span>
<span class="docEmphasis">Here is a listing of the directory:</span>
<span class="docEmphasis">a file2</span>
<span class="docEmphasis">b file.bak</span>
</pre>
    </td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">The following <span class="docEmphasis">find</span>
    command (SunOS) will list all files in the <span class="docEmphasis">root</span>
    partition that are larger than 100K and that have been modified in the last
    week. (Check your <span class="docEmphasis">man</span> pages for the correct
    <span class="docEmphasis">find</span> syntax on your system.)</p>
    <pre><span class="docEmphStrong">find / –xdev –mtime –7 –size +200 –print</span>
</pre>
    </td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>3:</b></td>
    <td>
    <p class="docText">Write a script called <span class="docEmphasis">bigfiles</span>
    that will take two arguments: one will be the <span class="docEmphasis">
    mtime</span> and one the <span class="docEmphasis">size</span> value. An
    appropriate error message will be sent to <span class="docEmphasis">stderr</span>
    if the user does not provide two arguments.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>4:</b></td>
    <td>
    <p class="docText">If you have time, write a script called
    <span class="docEmphasis">vib</span> that creates backup files for
    <span class="docEmphasis">vi.</span> The backup files will have the
    extension <span class="docEmphasis">.bak</span> appended to the original
    name.</td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec30">Lab 51: Getting User Input</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Write a script called <span class="docEmphasis">nosy</span>
    that will do the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Ask the user's full name—first, last, and middle name.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Greet the user by his or her first name.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Ask the user's year of birth and calculate his or her
      age (use<span class="docEmphasis">expr</span>).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Ask the user's login name and print his or her user ID
      (<span class="docEmphasis">from /etc/passwd</span>).</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Tell the user his or her home directory.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Show the user the processes he or she is running.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Tell the user the day of the week, and the current time
      in nonmilitary time. The output should resemble</p>
      <p class="docText"><span class="docEmphasis">The day of the week is Tuesday and the current
      time is 04:07:38 PM.</span><br>
&nbsp;</span></li>
    </ol>
    </span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">Create a text file called <span class="docEmphasis">
    datafile</span> (unless this file has already been provided for you). Each
    entry consists of fields separated by colons. The fields are as follows:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">First and last name</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Phone number</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Address</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Birth date</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Salary</span></li>
    </ol>
    </span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>3:</b></td>
    <td>
    <p class="docText">Create a script called <span class="docEmphasis">lookup</span>
    that will do the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Contain a comment section with the scriptname, your
      name, the date, and the reason for writing this script.The reason for
      writing this script is to display the datafile in sorted order.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Sort the <span class="docEmphasis">datafile</span> by
      last names.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Show the user the contents of the
      <span class="docEmphasis">datafile.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Tell the user the number of entries in the file.</span></li>
    </ol>
    </span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>4:</b></td>
    <td>
    <p class="docText">Try the <span class="docEmphasis">–x</span> and
    <span class="docEmphasis">–v</span> options for debugging your script. How
    did you use these commands? How do they differ?</td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec31">Lab 52: Conditional Statements</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Write a script called <span class="docEmphasis">checking</span>
    that will do the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Take a command line argument, a user's login name.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Test to see if a command line argument was provided.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Check to see if the user is in the
      <span class="docEmphasis">/etc/passwd</span> file. If so, will print</p>
      <p class="docText"><br>
      <span class="docEmphasis">Found &lt;user&gt; in the /etc/passwd file.</span><br>
&nbsp;</p>
      <p class="docList">Otherwise, will print</p>
      <p class="docText"><br>
      <span class="docEmphasis">No such user on our system.</span><br>
&nbsp;</span></li>
    </ol>
    </span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">In the <span class="docEmphasis">lookup</span> script,
    ask the user if he or she would like to add an entry to the
    <span class="docEmphasis">datafile.</span> If the answer is
    <span class="docEmphasis">yes</span> or <span class="docEmphasis">y:</span></p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Prompt the user for a new name, phone, address, birth
      date, and salary. Each item will be stored in a separate variable. You
      will provide the colons between the fields and append the information to
      the <span class="docEmphasis">datafile.</span></span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Sort the file by last names. Tell the user you added
      the entry, and show him or her the line preceded by the line number.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec32">Lab 53: Conditionals and File Testing</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Rewrite <span class="docEmphasis">checking.</span> After
    checking whether the named user is in the <span class="docEmphasis">/etc/passwd</span>
    file, the program will check to see if the user is logged on. If so, the
    program will print all the processes that are running; otherwise it will
    tell the user</p>
    <p class="docText">    &nbsp;<span class="docEmphasis">&lt;user&gt; is not logged on.</span><br>
&nbsp;</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">Use the <span class="docEmphasis">let</span> command to
    evaluate a set of grades. The script will ask the user for his or her
    numeric grade on an examination. ( Use <span class="docEmphasis">declare –i</span>
    ). The script will test that the grade is within the allowable range between
    0 and 100. If not, the program will exit. If the grade is within the range,
    the user's letter grade will be displayed, e.g., <span class="docEmphasis">
    You received an A. Excellent!</span> The range is as follows:</p>
    <blockquote>

      <p class="docList">A (90–100) B (80–89) C (70–79) D (60–69) F (Below 60)</p>

    </blockquote>
    </td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>3:</b></td>
    <td>
    <p class="docText">The <span class="docEmphasis">lookup</span> script
    depends on the <span class="docEmphasis">datafile</span> in order to run. In
    the <span class="docEmphasis">lookup</span> script, check to see if the
    <span class="docEmphasis">datafile</span> exists and if it is readable and
    writeable. Add a menu to the <span class="docEmphasis">lookup</span> script
    to resemble the following:</p>
    <p class="docText"><br>
    [1]&nbsp;Add&nbsp;entry.<br>
    [2]&nbsp;Delete&nbsp;entry.<br>
    [3]&nbsp;View&nbsp;entry.<br>
    [4]&nbsp;Exit.<br>
&nbsp;</p>
    <p class="docText">You already have the <span class="docEmphasis">Add entry</span>
    part of the script written. The <span class="docEmphasis">Add entry</span>
    routine should now include code that will check to see if the name is
    already in the <span class="docEmphasis">datafile</span> and if it is, tell
    the user so. If the name is not there, add the new entry.</p>
    <p class="docText">Now write the code for the <span class="docEmphasis">
    Delete entry,</span> <span class="docEmphasis">View entry,</span> and
    <span class="docEmphasis">Exit</span> functions.</p>
    <p class="docText">The <span class="docEmphasis">Delete</span> part of the
    script should first check to see if the entry exists before trying to remove
    it. If it does, notify the user; otherwise, remove the entry and tell the
    user you removed it. On exit, make sure that you use a digit to represent
    the appropriate exit status.</p>
    <p class="docText">How do you check the exit status from the command line?</td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec33">Lab 54: The <span class="docEmphasis">case</span>
Statement</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">The <span class="docEmphasis">ps</span> command is
    different on BSD (Berkeley UNIX) and System 5 (AT&amp;T UNIX). UNIX uses the BSD
    options to <span class="docEmphasis">ps.</span> On System 5, the command to
    list all processes is</p>
    <pre><span class="docEmphasis">ps –ef</span>
</pre>
    <p class="docText">On UNIX, the command is</p>
    <pre><span class="docEmphasis">ps aux</span>
</pre>
    <p class="docText">Write a program called <span class="docEmphasis">systype</span>
    that will check for a number of different system types. The cases to test
    for will be</p>
    <p class="docText"><br>
    AIX<br>
    UNIX<br>
    HP–UX<br>
    SCO<br>
    OSF1<br>
    ULTRIX<br>
    SunOS&nbsp;(Solaris&nbsp;/&nbsp;SunOs)<br>
    OS<br>
&nbsp;</p>
    <p class="docText">Solaris, HP–UX, SCO, and IRIX are AT&amp;T-type systems. The
    rest are BSDish.</p>
    <p class="docText">The version of UNIX you are using will be printed to
    <span class="docEmphasis">stdout.</span> The system name can be found with
    the <span class="docEmphasis">uname –s</span> command or from the
    <span class="docEmphasis">/etc/motd</span> file.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">Write a script called <span class="docEmphasis">timegreet</span>
    that will do the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Provide a comment section at the top of the script,
      with your name, the date, and the purpose of the program.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Convert the following program to use the
      <span class="docEmphasis">case</span> command rather than
      <span class="docEmphasis">if/elif.</span></p>
      <pre>#!/bin/bash
<span class="docEmphasis"># Comment section</span>
you=$LOGNAME
hour=$( date +%H )
echo &quot;The time is: $( date +%T )&quot;
if (( hour &gt; 0 &amp;&amp; hour &lt; 12 ))
then
   echo &quot;Good morning,s $you!&quot;
elif (( hour == 12 ))
then
   echo &quot;Lunch time!&quot;
elif (( hour &gt; 12 &amp;&amp; hour &lt; 16 ))
then
   echo &quot;Good afternoon, $you!&quot;
else
   echo &quot;Good night, $you. Sweet dreams.&quot;
fi
</pre>
      </span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec34">Lab 55: Loops</h4>
<p class="docText">Select one of the following:</p>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Write a program called <span class="docEmphasis">mchecker</span>
    to check for new mail and write a message to the screen if new mail has
    arrived.</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">The program will get the size of the mail spool file
      for the user. (The spool files are found in <span class="docEmphasis">/usr/mail/$LOGNAME</span>
      on AT&amp;T systems and <span class="docEmphasis">/usr/spool/mail/$USER</span>
      on UNIX and UCB systems. Use the <span class="docEmphasis">find</span>
      command if you cannot locate the file.) The script will execute in a
      continuous loop, once every 30 seconds. Each time the loop executes, it
      will compare the size of the mail spool file with its size from the
      previous loop. If the new size is greater than the old size, a message
      will be printed on your screen, saying <span class="docEmphasis">Username,
      You have new mail.</span></span></li>
    </ol>
    </span>
    <p class="docText">The size of a file can be found by looking at the output
    from<span class="docEmphasis">ls –l, wc –c or</span> from the
    <span class="docEmphasis">find</span> command.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">Write a script that will do the following:</p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Provide a comment section at the top of the script,
      with your name, the date, and the purpose of the program.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Use the<span class="docEmphasis">select</span> loop to
      produce a menu of foods.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Produce output to resemble the following:</p>
      <p class="docText"><br>
      1)&nbsp;steak&nbsp;and&nbsp;potatoes<br>
      2)&nbsp;fish&nbsp;and&nbsp;chips<br>
      3)&nbsp;soup&nbsp;and&nbsp;salad<br>
      Please&nbsp;make&nbsp;a&nbsp;selection.&nbsp;1<br>
      <span class="docEmphasis">Stick to your ribs.</span><br>
      Watch&nbsp;your&nbsp;cholesterol.<br>
      Enjoy&nbsp;your&nbsp;meal.<br>
      <br>
      1)&nbsp;steak&nbsp;and&nbsp;potatoes<br>
      2)&nbsp;fish&nbsp;and&nbsp;chips<br>
      3)&nbsp;soup&nbsp;and&nbsp;salad<br>
      Please&nbsp;make&nbsp;a&nbsp;selection.&nbsp;2<br>
      <span class="docEmphasis">British are coming!</span><br>
      Enjoy&nbsp;your&nbsp;meal.<br>
      <br>
      1)&nbsp;steak&nbsp;and&nbsp;potatoes<br>
      2)&nbsp;fish&nbsp;and&nbsp;chips<br>
      3)&nbsp;soup&nbsp;and&nbsp;salad<br>
      Please&nbsp;make&nbsp;a&nbsp;selection.&nbsp;3<br>
      <span class="docEmphasis">Health foods...</span><br>
      Dieting&nbsp;is&nbsp;so&nbsp;boring.<br>
      Enjoy&nbsp;your&nbsp;meal.<br>
&nbsp;</span></li>
    </ol>
    </span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>3:</b></td>
    <td>
    <p class="docText">Write a program called <span class="docEmphasis">dusage</span>
    that will mail a list of users, one at a time, a listing of the number of
    blocks they are currently using. The list of users will be in a file called
    <span class="docEmphasis">potential_hogs.</span> One of the users listed in
    the <span class="docEmphasis">potential_hogs</span> file will be
    <span class="docEmphasis">admin.</span></p>
    <span style="FONT-WEIGHT: bold">
    <ol class="docList" type="a">
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Use file testing to check that
      <span class="docEmphasis">potential_hogs</span> file exists and is
      readable.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">A loop will be used to iterate through the list of
      users. Only those users who are using over 500 blocks will be sent mail.
      The user <span class="docEmphasis">admin</span> will be skipped over
      (i.e., he or she does not get a mail message). The mail message will be
      stored in a <span class="docEmphasis">here</span>
      <span class="docEmphasis">document</span> in your
      <span class="docEmphasis">dusage</span> script.</span></li>
      <li><span style="FONT-WEIGHT: normal">
      <p class="docList">Keep a list of the names of each person who received
      mail. Do this by creating a log file. After everyone on the list has been
      sent mail, print the number of people who received mail and a list of
      their names.</span></li>
    </ol>
    </span></td>
  </tr>
</table>

<h4 class="docSection2Title" id="ch12lev2sec35">Lab 56: Functions</h4>

<table cellSpacing="16" cellpadding="5" border="0">
  <tr vAlign="top">
    <td class="docText" align="right"><b>1:</b></td>
    <td>
    <p class="docText">Rewrite the <span class="docEmphasis">systype</span>
    program as a function that returns the name of the system. Use this function
    to determine what options you will use with the <span class="docEmphasis">ps</span>
    command in the <span class="docEmphasis">checking</span> program.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>2:</b></td>
    <td>
    <p class="docText">The <span class="docEmphasis">ps</span> command to list
    all processes on AT&amp;T UNIX is</p>
    <pre><span class="docEmphasis">ps –ef</span>
</pre>
    </td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>3:</b></td>
    <td>
    <p class="docText">On UNIX/BSD UNIX, the command is</p>
    <pre><span class="docEmphasis">ps –aux  or ps aux</span><span id="ENB12-9"><a class="docLink" href="#EN12-9"><sup>[9]</sup></a></span>
</pre>
    </td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>4:</b></td>
    <td>
    <p class="docText">Write a function called <span class="docEmphasis">cleanup</span>
    that will remove all temporary files and exit the script. If the interrupt
    or hangup signal is sent while the program is running, the
    <span class="docEmphasis">trap</span> command will call the
    <span class="docEmphasis">cleanup</span> function<span class="docEmphasis">.</span></td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>5:</b></td>
    <td>
    <p class="docText">Use a <span class="docEmphasis">here document</span> to
    add a new menu item to the <span class="docEmphasis">lookup</span> script to
    resemble the following:</p>
    <p class="docText"><br>
    [1]&nbsp;Add&nbsp;entry<br>
    [2]&nbsp;Delete&nbsp;entry<br>
    [3]&nbsp;Change&nbsp;entry<br>
    [4]&nbsp;View&nbsp;entry<br>
    [5]&nbsp;Exit<br>
&nbsp;</p>
    <p class="docText">Write a function to handle each of the items in the menu.
    After the user has selected a valid entry, and the function has completed,
    ask if the user would like to see the menu again. If an invalid entry is
    entered, the program should print</p>
    <p class="docText"><br>
    <span class="docEmphasis">Invalid entry, try again.</span><br>
&nbsp;</p>
    <p class="docText">and the menu will be redisplayed.</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>6:</b></td>
    <td>
    <p class="docText">Create a submenu under <span class="docEmphasis">View
    entry</span> in the <span class="docEmphasis">lookup</span> script. The user
    will be asked if he or she would like to view specific information for a
    selected individual:</p>
    <p class="docText"><br>
    a)&nbsp;Phone<br>
    b)&nbsp;Address<br>
    c)&nbsp;Birth&nbsp;date<br>
    d)&nbsp;Salary<br>
&nbsp;</td>
  </tr>
  <tr vAlign="top">
    <td class="docText" align="right"><b>7:</b></td>
    <td>
    <p class="docText">Use the <span class="docEmphasis">trap</span> command in
    a script to perform a cleanup operation if the interrupt signal is sent
    while the program is running.</td>
  </tr>
</table>
<blockquote><p class="docFootnote" id="EN12-1"><a class="docLink" href="#ENB12-1">[1]</a>&nbsp;&nbsp;When <span class="docEmphasis">bash</span> starts interactively, if the
<span class="docEmphasis">–norc</span> or <span class="docEmphasis">– –norc</span>
option is given, the <span class="docEmphasis">BASH_ENV</span> or
<span class="docEmphasis">ENV</span> file will not be read.</p><p class="docFootnote" id="EN12-2"><a class="docLink" href="#ENB12-2">[2]</a>&nbsp;&nbsp;Options
  <span class="docEmphasis">–a,</span> <span class="docEmphasis">–e,</span> and
  <span class="docEmphasis">–p</span> are available only in
  <span class="docEmphasis">bash</span> versions 2.x.</p><p class="docFootnote" id="EN12-3"><a class="docLink" href="#ENB12-3">[3]</a>&nbsp;&nbsp;Remember, without
  arguments, the <span class="docEmphasis">set</span> command displays all the
  variables that have been set for this shell, local and exported. With options,
  the <span class="docEmphasis">set</span> command turns on and off shell
  control options such as <span class="docEmphasis">–x</span> and
  <span class="docEmphasis">–v.</span></p><p class="docFootnote" id="EN12-4"><a class="docLink" href="#ENB12-4">[4]</a>&nbsp;&nbsp;If the
  <span class="docEmphasis">continue</span> command is given a number higher
  than the number of loops, the loop exits.</p><p class="docFootnote" id="EN12-5"><a class="docLink" href="#ENB12-5">[5]</a>&nbsp;&nbsp;<span style="FONT-WEIGHT: bold">
<span style="FONT-WEIGHT: normal">
Only on
    <span class="docEmphasis">bash</span> versions 2.x.</span></span></p><p class="docFootnote" id="EN12-6"><a class="docLink" href="#ENB12-6">[6]</a>&nbsp;&nbsp;&nbsp;Bolsky, Morris I.
  and Korn, David G., <i>The New KornShell Command and Programming Language</i>
  (Englewood Cliffs, NJ: Prentice Hall PTR, 1995), p. 327.</p><p class="docFootnote" id="EN12-7"><a class="docLink" href="#ENB12-7">[7]</a>&nbsp;&nbsp;<span class="docEmphasis">SIGKILL,</span> number 9, often called a &quot;sure
  kill,&quot; is not trapable.</p><p class="docFootnote" id="EN12-8"><a class="docLink" href="#ENB12-8">[8]</a>&nbsp;&nbsp;See the UNIX
  manual pages (Section 3) for the C library function <span class="docEmphasis">
  getopt.</span></p><p class="docFootnote" id="EN12-9"><a class="docLink" href="#ENB12-9">[9]</a>&nbsp;&nbsp;Using the
      leading dash with UNIX will produce a warning. See the man page.</p></blockquote>

<table width="100%" border="1" bgcolor="#EBEBFF"><tr><td width="5%" align="left" valign="middle"><a href="_chapter 11.htm"><img src="Larrow.gif" width="17" height="19" border="0"></a></td><td align="center" valign="middle"><a class="docLink" href="Front matter.htm">CONTENTS</a></td><td width="5%" align="right" valign="middle"><a href="_chapter 13.htm"><img src="Rarrow.gif" width="17" height="19" border="0"></a></td></tr></table></body>

</html>