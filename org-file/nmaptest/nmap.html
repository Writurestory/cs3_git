<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="cn" xml:lang="cn">
<head>
<title>NMAP实验报告</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="NMAP实验报告"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2013-04-24 11:55:36 CST"/>
<meta name="author" content="温俊瑞(20101152025)"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  {margin-left:auto; margin-right:0px;  text-align:right;}
  .left   {margin-left:0px;  margin-right:auto; text-align:left;}
  .center {margin-left:auto; margin-right:auto; text-align:center;}
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top;  }
  th.right  { text-align:center;  }
  th.left   { text-align:center;   }
  th.center { text-align:center; }
  td.right  { text-align:right;  }
  td.left   { text-align:left;   }
  td.center { text-align:center; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  div.inlinetask {
    padding:10px;
    border:2px solid gray;
    margin:10px;
    background: #ffffcc;
  }
  textarea { overflow-x: auto; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style><link rel="stylesheet" href="http://cs2.swfu.edu.cn/org-info-js/stylesheet.css" type="text/css">
<link rel="stylesheet" type="text/css" href="http://cs3.swfc.edu.cn/org-info-js/stylesheet.css" />
<style>code {font-weight:bold;} body {font-size:10pt;}</style>
<script type="text/javascript" src="http://cs3.swfc.edu.cn/org-info-js/org-info.js"></script>
<script type="text/javascript" >
<!--/*--><![CDATA[/*><!--*/
org_html_manager.set("TOC_DEPTH", "3");
org_html_manager.set("LINK_HOME", "");
org_html_manager.set("LINK_UP", "");
org_html_manager.set("LOCAL_TOC", "0");
org_html_manager.set("VIEW_BUTTONS", "0");
org_html_manager.set("MOUSE_HINT", "underline");
org_html_manager.set("FIXED_TOC", "0");
org_html_manager.set("TOC", "0");
org_html_manager.set("VIEW", "content");
org_html_manager.setup();  // activate after the parameters are set
/*]]>*///-->
</script>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>

</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">NMAP实验报告</h1>

<p>实验环境
</p><ul>
<li>Ubuntu
</li>
</ul>



<div id="table-of-contents">
<h2>目录</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Simple Example</a></li>
<li><a href="#sec-2">2 Scanning more than one machine</a></li>
<li><a href="#sec-3">3 Scanning specific ports:</a></li>
<li><a href="#sec-4">4 Various Scanning options:</a>
<ul>
<li><a href="#sec-4-1">4.1 -sS: SYN scanning (this is the default option)</a></li>
<li><a href="#sec-4-2">4.2 -sT: TCP connect scanning</a></li>
<li><a href="#sec-4-3">4.3 -sF, -sX, -sN: FIN scan, Xmas tree scan, NULL scan.</a></li>
<li><a href="#sec-4-4">4.4 -sU: UDP scan.</a></li>
<li><a href="#sec-4-5">4.5 -sO: Protocol scan</a></li>
<li><a href="#sec-4-6">4.6 -sR: RPC scan.</a></li>
<li><a href="#sec-4-7">4.7 -sV: Version scan</a></li>
<li><a href="#sec-4-8">4.8 -sA: ACK scan</a></li>
<li><a href="#sec-4-9">4.9 -sI: Idle scan</a></li>
<li><a href="#sec-4-10">4.10 -sP: Ping scan</a></li>
<li><a href="#sec-4-11">4.11 -sW: Window scan</a></li>
<li><a href="#sec-4-12">4.12 -sL: List scan</a></li>
</ul>
</li>
<li><a href="#sec-5">5 O/S fingerprinting and version detection</a>
<ul>
<li><a href="#sec-5-1">5.1 -O: Operating system fingerprinting</a></li>
<li><a href="#sec-5-2">5.2 -sV: Version detection</a></li>
<li><a href="#sec-5-3">5.3 -A: Additional, Advanced, Aggressive option</a></li>
</ul>
</li>
<li><a href="#sec-6">6 Typical scenario</a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Simple Example</h2>
<div class="outline-text-2" id="text-1">

<ol>
<li>let's begin
<pre class="example">
nmap 202.203.132.244
</pre>

<p>     <img src="test1.jpg"  alt="test1.jpg" />
</p></li>
<li>no reverse NDS lookup
<pre class="example">
nmap -n 202.203.132.244
</pre>

<p>     <img src="test2.jpg"  alt="test2.jpg" />
</p></li>
<li>verbose:
<pre class="example">
nmap -n -v 202.203.132.244
</pre>

</li>
<li>even more:
<pre class="example">
nmap -n -vv 202.203.132.244
</pre>

</li>
</ol>


</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Scanning more than one machine</h2>
<div class="outline-text-2" id="text-2">




<pre class="example">nmap -n -vv 202.203.132.242,244
nmap -n -vv 202.203.132.241-244
nmap -n -vv 202.203.132.241-242,244
nmap -n -vv 202.203.132.*
nmap -n -vv 202.203.132.192-255
nmap -n -vv 202.203.132.192/26
</pre>



<pre class="example">nmap -vv -n 192.168.0-2.*
nmap -vv -n 192.168.0,1,2.0-255
</pre>


</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Scanning specific ports:</h2>
<div class="outline-text-2" id="text-3">




<pre class="example">nmap -vv -n -p 80 202.203.132.244
nmap -vv -n -p 21,23,25,80-120 202.203.132.244
nmap -vv -n -p 21,23,25,80-120 202.203.132.241-244
</pre>



</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Various Scanning options:</h2>
<div class="outline-text-2" id="text-4">


<p>  
  There are many scanning options available with Nmap. All have their advantages and disadvantages. You should use them according to your requirements.
</p>
<p>
  Contents:
</p>
</div>

<div id="outline-container-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> -sS: SYN scanning (this is the default option)</h3>
<div class="outline-text-3" id="text-4-1">

<pre class="example">
nmap -vv -n -sS 202.203.132.244
</pre>

<p>   TCP SYN scan gather information about open ports without completing the TCP handshake process. When an open port is identified, the TCP handshake is reset before it can be completed. This technique is often referred to as “half open” scanning.
</p>
<p>
   It's the default scanning technique if you are “root”. It's the most common scan to use because it works on all networks, across all operating systems.
</p>
<dl>
<dt>ADV</dt><dd>
</dd>
</dl>

<p>   The TCP SYN scan never actually creates a TCP session so isn't logged by the destination host's applications. And hence it's a quiet scan.
</p><dl>
<dt>DISADV</dt><dd>
</dd>
</dl>

<p>   You need privileged access to the system.
</p></div>

</div>

<div id="outline-container-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> -sT: TCP connect scanning</h3>
<div class="outline-text-3" id="text-4-2">

<pre class="example">
nmap -vv -n -sT 202.203.132.244
</pre>

<p>   It performs the 3-way handshake.
</p>
<dl>
<dt>ADV</dt><dd>
</dd>
</dl>

<p>   You don't need to have privileged access.
</p><dl>
<dt>DISADV</dt><dd>
</dd>
</dl>

<p>   Since it completes a TCP connection so apparent when application connection logs are examined.
   I would suggest you to never ever use this scan.
</p></div>

</div>

<div id="outline-container-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> -sF, -sX, -sN: FIN scan, Xmas tree scan, NULL scan.</h3>
<div class="outline-text-3" id="text-4-3">




<pre class="example">nmap –vv –n –sF 218.194.106.91
nmap –vv –n –sX 192.168.0.1
nmap –vv –n –sN 192.168.0.1
</pre>


<p>   
   These are called “stealth” scans. They send a single frame to a TCP port without any TCP handshaking or additional packet transfers. They are more “stealth” than SYN scan and must be used if the remote machine is not a Windows-based machine. I’ll tell you why.
</p>
<p>
   These scans operate by manipulating the bits of the TCP header. Nmap creates TCP headers that combine bit options that should never occur in the real world. These purposely mangled TCP header packets are thrown at a remote device, and nmap watches for the responses.
</p>
<p>
   Window-based systems will reply with a RST frame for all queries, regardless of the status of the specific port that was queried.
</p>
<dl>
<dt>ADV</dt><dd>
</dd>
</dl>

<p>   Since no TCP sessions are established, they are quiet stealthy.
</p><dl>
<dt>DISADV</dt><dd>
</dd>
</dl>

<p>   Can't be used against windows-based machine.
</p>
</div>

</div>

<div id="outline-container-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> -sU: UDP scan.</h3>
<div class="outline-text-3" id="text-4-4">

<pre class="example">
nmap -vv -n -sU 202.203.132.244
</pre>

<p>   The only scan in the arsenal of Nmap to identify UDP ports.
</p></div>

</div>

<div id="outline-container-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> -sO: Protocol scan</h3>
<div class="outline-text-3" id="text-4-5">

<pre class="example">
nmap -vv -n -sO 202.203.132.244
</pre>

<p>   Sometimes it has to be checked that what protocols the remote machine is running. It locates uncommon IP protocols that may be in use on the remote system. Hence it helps determining the type of remote device, i.e. is that router or printer or workstation etc.
</p>
<dl>
<dt>DISADV</dt><dd>
</dd>
</dl>

<p>   This scan will appear on any network monitoring application that identifies the IP protocol types in use.
</p></div>

</div>

<div id="outline-container-4-6" class="outline-3">
<h3 id="sec-4-6"><span class="section-number-3">4.6</span> -sR: RPC scan.</h3>
<div class="outline-text-3" id="text-4-6">

<pre class="example">
nmap -vv -sR 202.203.132.244
</pre>

<p>   It's used to locate and identify RPC applications. It runs automatically during a version scan (-sV, explained later)
</p>
<dl>
<dt>DISADV</dt><dd>
</dd>
</dl>

<p>   RPC scan opens application sessions and hence it will be logged.c
</p></div>

</div>

<div id="outline-container-4-7" class="outline-3">
<h3 id="sec-4-7"><span class="section-number-3">4.7</span> -sV: Version scan</h3>
<div class="outline-text-3" id="text-4-7">

<pre class="example">
nmap –vv –sV 202.203.132.244
</pre>

<p>   The scans which we have seen by now give you the status of the port and the service running on them. For exploiting the service you need the exact version number of the service. Version scan gives you this.
</p>
<dl>
<dt>DISADV</dt><dd>
</dd>
</dl>

<p>   It opens sessions with the remote applications, which will often display in an application's log file.
</p></div>

</div>

<div id="outline-container-4-8" class="outline-3">
<h3 id="sec-4-8"><span class="section-number-3">4.8</span> -sA: ACK scan</h3>
<div class="outline-text-3" id="text-4-8">

<pre class="example">
nmap –vv –sA 218.194.106.91
</pre>

<p>   It's quite useful when there is some packet filtering device or firewall. It never locates an open port. It does the job of identifying ports that are filtered through a firewall. It doesn't open any application sessions and hence the conversation between nmap and the remote device is relatively simple.
</p>
<dl>
<dt>DISADV</dt><dd>
</dd>
</dl>

<p>   It can only tell whether port is filtered or unfiltered. But can never definitively identify an open port.
</p></div>

</div>

<div id="outline-container-4-9" class="outline-3">
<h3 id="sec-4-9"><span class="section-number-3">4.9</span> -sI: Idle scan</h3>
<div class="outline-text-3" id="text-4-9">

<pre class="example">
nmap -vv -sI 202.203.132.244
</pre>

<p>   It's the stealthy most scan you can have. Tough to launch because you need a zombie for it. It would not be justice with this great scan to be described in just few lines. I would recommend you to read it in detail.
</p>
<dl>
<dt>ADV</dt><dd>
</dd>
</dl>

<p>   You will never be caught.
</p><dl>
<dt>DISADV</dt><dd>
</dd>
</dl>

<p>   Tough to launch as it's not easy to find some zombie machine.
</p></div>

</div>

<div id="outline-container-4-10" class="outline-3">
<h3 id="sec-4-10"><span class="section-number-3">4.10</span> -sP: Ping scan</h3>
<div class="outline-text-3" id="text-4-10">

<p>   You must have heard of Ping sweep. It's Nmap's ping sweep.
</p>
<p>
   To check whether this machine is up or not, do
</p><pre class="example">
nmap –vv –sP 192.168.0.10
</pre>

<p>   To check the whole subnet (254) machines and will tell you which are up
</p><pre class="example">
nmap –vv –sP 192.168.0.*
</pre>

<dl>
<dt>DISADV</dt><dd>
</dd>
</dl>

<p>   Ping scan will not interoperate with any other type of scan.
</p></div>

</div>

<div id="outline-container-4-11" class="outline-3">
<h3 id="sec-4-11"><span class="section-number-3">4.11</span> -sW: Window scan</h3>
<div class="outline-text-3" id="text-4-11">

<p>   Forget it. As the number of operating systems vulnerable to its methodology is dwindling as operating systems are upgraded and patched.
</p></div>

</div>

<div id="outline-container-4-12" class="outline-3">
<h3 id="sec-4-12"><span class="section-number-3">4.12</span> -sL: List scan</h3>
<div class="outline-text-3" id="text-4-12">

<p>   Would like to say only one line about it that you must use it if a separate application provides nmap with a list of IP addresses. Rest read yourself.
</p>

</div>
</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> O/S fingerprinting and version detection</h2>
<div class="outline-text-2" id="text-5">

<p>  Ok, now you can use various scanning techniques to look for open/closed or filtered/unfiltered TCP as well as UDP ports. Don't you want to know the remote operating system running?
</p>
<dl>
<dt>Contents:</dt><dd>
</dd>
</dl>



</div>

<div id="outline-container-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> -O: Operating system fingerprinting</h3>
<div class="outline-text-3" id="text-5-1">

<pre class="example">
nmap -vv -O 202.203.132.241,244
</pre>

<p>   It will tell you or at least tries its best to tell you the remote operating system along with the version it's using. It at least need one open and one close TCP port. In case it doesn't, it won't be able to give the accurate result. In that case you should use some third party tool.
</p>
<dl>
<dt>DISADV</dt><dd>
</dd>
</dl>

<p>   A trained eye will quickly identify that someone is watching the network.
</p></div>

</div>

<div id="outline-container-5-2" class="outline-3">
<h3 id="sec-5-2"><span class="section-number-3">5.2</span> -sV: Version detection</h3>
<div class="outline-text-3" id="text-5-2">

<pre class="example">
nmap -vv -sV 202.203.132.244
</pre>

<p>   As has been explained it will help you know the version of the service running on the remote machine.
</p></div>

</div>

<div id="outline-container-5-3" class="outline-3">
<h3 id="sec-5-3"><span class="section-number-3">5.3</span> -A: Additional, Advanced, Aggressive option</h3>
<div class="outline-text-3" id="text-5-3">

<p>   Its comprises of both the operating system fingerprinting process (-O) and the version
   scanning process (-sV). i.e following two are same:
</p>


<pre class="example">nmap -vv -sV -O 202.203.132.244
nmap -vv -A 202.203.132.244
</pre>


</div>
</div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> Typical scenario</h2>
<div class="outline-text-2" id="text-6">

<ol>
<li>First, we’ll sweep the network with a simple Ping scan to determine which hosts are
     online.
<pre class="example">
nmap -sP 202.203.132.192/26
</pre>

<p>     Tell me how many hosts are up?
</p></li>
<li>Now we’re going to take a look at 202.203.132.240-242,244. These IPs belong to School
     of CIS. We’ll scan 202.203.132.240-242,244 using a SYN scan [-sS] and -A to enable OS
     fingerprinting and version detection.
<pre class="example">
nmap -sS -A -n -vv 202.203.132.240-242,244
</pre>

<p>     Tell me what OS they are running? What services are they running?
</p></li>
</ol>

</div>
</div>
</div>

<div id="postamble">
<p class="author">Author: 温俊瑞(20101152025) (<a href="mailto:mclyte.rabbit@gmail.com">mclyte.rabbit@gmail.com</a>)</p>
<p class="date">Date: 2013-04-24 11:55:36 CST</p>

</div>
</body>
</html>
